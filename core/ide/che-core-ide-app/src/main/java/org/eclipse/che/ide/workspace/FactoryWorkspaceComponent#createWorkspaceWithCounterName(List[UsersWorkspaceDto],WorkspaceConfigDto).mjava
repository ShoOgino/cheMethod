    /**
     * Create workspace with counter in name and add factoryId attribute
     * if workspace with specified name already exist.
     */
    private Promise<UsersWorkspaceDto> createWorkspaceWithCounterName(final List<UsersWorkspaceDto> workspaces,
                                                                      final WorkspaceConfigDto workspaceConfigDto) {
        workspaceConfigDto.getAttributes().put(FACTORY_ID_ATTRIBUTE, factory.getId());
        final Set<String> workspacesNames = new HashSet<>();
        final String wsName = workspaceConfigDto.getName();
        for (UsersWorkspaceDto workspace : workspaces) {
            workspacesNames.add(workspace.getConfig().getName());
        }
        if (!workspacesNames.contains(wsName)) {
            return workspaceServiceClient.create(workspaceConfigDto, null);
        }
        String genName = wsName;
        int counter = 1;
        while (workspacesNames.contains(genName)) {
            genName = wsName + '-' + counter++;
        }
        workspaceConfigDto.withName(genName);
        workspaceConfigDto.getAttributes().put(FACTORY_ID_ATTRIBUTE, factory.getId());
        return workspaceServiceClient.create(workspaceConfigDto, null);
    }

