    @Inject
    public WsConnectionListener(EventBus eventBus,
                                final MessageBusProvider messageBusProvider,
                                ConnectionClosedInformer connectionClosedInformer) {
        this.eventBus = eventBus;
        this.connectionClosedInformer = connectionClosedInformer;

        eventBus.addHandler(StartWorkspaceEvent.TYPE, new StartWorkspaceHandler() {
            @Override
            public void onWorkspaceStarted(UsersWorkspaceDto workspace) {
                messageBus = messageBusProvider.getMessageBus();

                messageBus.addOnCloseHandler(WsConnectionListener.this);
            }
        });
    }

