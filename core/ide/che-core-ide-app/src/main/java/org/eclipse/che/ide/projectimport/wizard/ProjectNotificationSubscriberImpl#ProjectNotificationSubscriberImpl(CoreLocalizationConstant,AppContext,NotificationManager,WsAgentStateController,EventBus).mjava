    @Inject
    public ProjectNotificationSubscriberImpl(CoreLocalizationConstant locale,
                                             AppContext appContext,
                                             NotificationManager notificationManager,
                                             final WsAgentStateController wsAgentStateController,
                                             EventBus eventBus) {
        this.locale = locale;
        this.notificationManager = notificationManager;
        this.wsAgentStateController = wsAgentStateController;
        this.workspaceId = appContext.getWorkspace().getId();


        this.logErrorHandler = new Operation<PromiseError>() {
            @Override
            public void apply(PromiseError error) throws OperationException {
                Log.error(ProjectNotificationSubscriberImpl.class, error);
            }
        };

        eventBus.addHandler(WsAgentStateEvent.TYPE, new WsAgentStateHandler() {
            @Override
            public void onWsAgentStarted(final WsAgentStateEvent event) {
                messageBusPromise = wsAgentStateController.getMessageBus();
            }

            @Override
            public void onWsAgentStopped(WsAgentStateEvent event) {

            }
        });
    }

