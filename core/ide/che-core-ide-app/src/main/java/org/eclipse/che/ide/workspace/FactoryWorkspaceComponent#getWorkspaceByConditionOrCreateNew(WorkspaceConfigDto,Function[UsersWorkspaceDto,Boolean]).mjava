    /**
     * Gets the workspace by condition which is determined by given {@link Function}
     * if workspace found by condition then it will be returned in other way new workspace will be returned.
     */
    private Promise<UsersWorkspaceDto> getWorkspaceByConditionOrCreateNew(final WorkspaceConfigDto workspaceConfigDto,
                                                                          final Function<UsersWorkspaceDto, Boolean> condition) {
        return workspaceServiceClient.getWorkspaces(0, 0)
                                     .thenPromise(new Function<List<UsersWorkspaceDto>, Promise<UsersWorkspaceDto>>() {
                                         @Override
                                         public Promise<UsersWorkspaceDto> apply(List<UsersWorkspaceDto> workspaces)
                                                 throws FunctionException {
                                             for (UsersWorkspaceDto existsWs : workspaces) {
                                                 if (condition.apply(existsWs)) {
                                                     return Promises.resolve(existsWs);
                                                 }
                                             }
                                             return createWorkspaceWithCounterName(workspaces, workspaceConfigDto);
                                         }
                                     });
    }

