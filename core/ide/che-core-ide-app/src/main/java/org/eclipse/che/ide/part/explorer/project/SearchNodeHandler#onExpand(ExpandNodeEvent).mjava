    @Override
    public void onExpand(ExpandNodeEvent event) {
        if (!isInSearchMode()) {
            return;
        }

        List<Node> children = tree.getNodeStorage().getChildren(event.getNode());

        for (Node child : children) {
            if (!(child instanceof HasStorablePath)) {
                continue;
            }

            String childPath = ((HasStorablePath)child).getStorablePath();
            if (path.getStorablePath().equals(childPath)) {
                callback.onSuccess(child);
                inSearchMode = false;
                return;
            } else if (path.getStorablePath().startsWith(childPath + (child.isLeaf() ? "" : "/"))) {
                tree.setExpanded(child, true);
                return;
            }
        }

        //node wasn't found, try to make request to load the same children, may be there is a new nodes on server were created
        tree.getNodeLoader().loadChildren(event.getNode());
    }

