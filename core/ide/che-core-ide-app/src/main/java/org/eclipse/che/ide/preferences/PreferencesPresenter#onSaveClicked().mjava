    @Override
    public void onSaveClicked() {
        try {
            for (PreferencePagePresenter preference : preferences) {
                if (preference.isDirty()) {
                    preference.storeChanges();
                }
            }

            preferencesManager.flushPreferences(new AsyncCallback<Map<String, String>>() {
                @Override
                public void onSuccess(Map<String, String> result) {
                    view.enableSaveButton(false);
                }

                @Override
                public void onFailure(Throwable error) {
                    dialogFactory.createMessageDialog("", "Unable to save preferences", null).show();
                }
            });
        } catch (Throwable error) {
            dialogFactory.createMessageDialog("", "Unable to save preferences", null).show();
        }
    }

