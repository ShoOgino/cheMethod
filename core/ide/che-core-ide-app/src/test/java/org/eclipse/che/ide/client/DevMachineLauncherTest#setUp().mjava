    @Before
    public void setUp() {
        Map<String, ServerDto> servers = Collections.singletonMap(Constants.WS_AGENT_PORT, serverDto);

        when(machineDescriptor.getConfig()).thenReturn(machineConfigDescriptor);
        when(machineDescriptor.getId()).thenReturn(DEV_MACHINE_ID);
        when(machineDescriptor.getRuntime()).thenReturn(runtimeInfoDto);
        when(runtimeInfoDto.getServers()).thenReturn(servers);
        when(serverDto.getUrl()).thenReturn(WS_AGENT_URL);

        when(appContext.getWorkspace()).thenReturn(usersWorkspaceDto);
        when(machineServiceClient.getMachines(anyString())).thenReturn(machinesPromise);
        when(machinesPromise.then(Matchers.<Operation<List<MachineDto>>>anyObject())).thenReturn(machinesPromise);
        when(machineConfigDescriptor.isDev()).thenReturn(true);
        when(usersWorkspaceDto.getId()).thenReturn(TEXT);

        devMachineLauncher = new DevMachineLauncher("/pathToWsAgent", appContext, machineManager, machineServiceClient);
    }

