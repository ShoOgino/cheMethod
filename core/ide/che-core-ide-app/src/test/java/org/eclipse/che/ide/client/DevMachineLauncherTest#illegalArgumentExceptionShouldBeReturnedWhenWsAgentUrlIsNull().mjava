    @Test(expected = IllegalArgumentException.class)
    public void illegalArgumentExceptionShouldBeReturnedWhenWsAgentUrlIsNull() throws OperationException {
        when(serverDto.getUrl()).thenReturn(null);
        when(machineDescriptor.getStatus()).thenReturn(MachineStatus.RUNNING);

        devMachineLauncher.startDevMachine(startedCallback);

        verify(machineServiceClient).getMachines(anyString());
        verify(machinesPromise).then(machinesCaptor.capture());

        machinesCaptor.getValue().apply(Collections.singletonList(machineDescriptor));
    }

