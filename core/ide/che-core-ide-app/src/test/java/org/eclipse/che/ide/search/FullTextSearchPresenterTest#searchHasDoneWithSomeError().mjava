    @Test
    public void searchHasDoneWithSomeError() throws Exception {
        ServiceError serviceError = Mockito.mock(ServiceError.class);
        when(promiseError.getMessage()).thenReturn(SEARCHED_TEXT);
        when(dtoFactory.createDtoFromJson(SEARCHED_TEXT, ServiceError.class)).thenReturn(serviceError);
        when(serviceError.getMessage()).thenReturn(SEARCHED_TEXT);

        fullTextSearchPresenter.search(SEARCHED_TEXT);

        verify(view, times(2)).getPathToSearch();
        verify(view, times(2)).getFileMask();

        verify(promise).catchError(operationErrorCapture.capture());
        operationErrorCapture.getValue().apply(promiseError);

        verify(view).showErrorMessage(SEARCHED_TEXT);
    }

