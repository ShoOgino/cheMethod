    @Test
    public void confirmCallbackShouldBeVerified() {
        when(settingsPresenter1.isDirty()).thenReturn(true);

        presenter.onCloseClicked();

        verify(dialogFactory).createConfirmDialog(eq(""), anyString(), confirmCallbackCaptor.capture(), cancelCallbackCaptor.capture());
        confirmCallbackCaptor.getValue().accepted();

        verify(settingsPresenter1, times(2)).isDirty();
        verify(settingsPresenter2, times(2)).isDirty();

        verify(settingsPresenter1).storeChanges();
        verify(settingsPresenter2, never()).storeChanges();

        verify(view).close();
    }

