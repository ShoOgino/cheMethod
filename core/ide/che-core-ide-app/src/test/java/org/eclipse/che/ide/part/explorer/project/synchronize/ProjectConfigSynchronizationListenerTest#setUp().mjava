    @Before
    public void setUp() {
        when(appContext.getWorkspaceId()).thenReturn(WORKSPACE_ID);
        when(event.getNode()).thenReturn(projectNode);
        when(projectNode.getProjectConfig()).thenReturn(projectConfig);

        when(dialogFactory.createConfirmDialog(anyString(),
                                               anyString(),
                                               anyString(),
                                               anyString(),
                                               Matchers.<ConfirmCallback>anyObject(),
                                               Matchers.<CancelCallback>anyObject())).thenReturn(confirmDialog);
        when(dialogFactory.createConfirmDialog(anyString(),
                                               eq(changeLocationWidget),
                                               Matchers.<ConfirmCallback>anyObject(),
                                               Matchers.<CancelCallback>anyObject())).thenReturn(confirmDialog);

        problems = new ArrayList<>();
        when(projectConfig.getProblems()).thenReturn(problems);
        when(projectConfig.getName()).thenReturn(PROJECT_NAME);
        when(projectConfig.getSource()).thenReturn(sourceStorage);

        listener = new ProjectConfigSynchronizationListener(projectImporter,
                                                            eventBus,
                                                            dialogFactory,
                                                            locale,
                                                            projectService,
                                                            appContext,
                                                            notificationManager,
                                                            changeLocationWidget,
                                                            factory);
    }

