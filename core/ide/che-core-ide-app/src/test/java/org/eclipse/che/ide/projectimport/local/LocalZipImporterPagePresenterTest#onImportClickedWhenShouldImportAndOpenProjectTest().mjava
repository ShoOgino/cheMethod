    @Test
    public void onImportClickedWhenShouldImportAndOpenProjectTest() {
        when(view.getProjectName()).thenReturn(PROJECT_NAME);
        MessageDialog dialog = mock(MessageDialog.class);
        when(dialogFactory.createMessageDialog(anyString(), anyString(), any(ConfirmCallback.class))).thenReturn(dialog);

        presenter.onImportClicked();

        verify(vfsServiceClient).getItemByPath(anyString(), eq(PROJECT_NAME), callbackCaptorForItem.capture());
        AsyncRequestCallback<Item> itemCallback = callbackCaptorForItem.getValue();
        GwtReflectionUtils.callOnFailure(itemCallback, mock(Throwable.class));

        verify(dialogFactory, never()).createMessageDialog(anyString(), anyString(), any(ConfirmCallback.class));
        verify(dialog, never()).show();
        verify(projectNotificationSubscriber).subscribe(eq(PROJECT_NAME));
        verify(view).setEncoding(eq(FormPanel.ENCODING_MULTIPART));
        verify(view).setAction(anyString());
        verify(view).submit();
        verify(view).setLoaderVisibility(eq(true));
        verify(view).setInputsEnableState(eq(false));
    }

