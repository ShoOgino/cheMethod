    @Test
    public void cancelCallbackShouldBeVerified() {
        when(settingsPresenter1.isDirty()).thenReturn(true);

        presenter.onCloseClicked();

        verify(dialogFactory).createConfirmDialog(eq(""), anyString(), confirmCallbackCaptor.capture(), cancelCallbackCaptor.capture());
        cancelCallbackCaptor.getValue().cancelled();

        verify(settingsPresenter1, times(2)).isDirty();
        verify(settingsPresenter2, times(2)).isDirty();

        verify(settingsPresenter1).revertChanges();
        verify(settingsPresenter2, never()).revertChanges();

        verify(view).close();
    }

