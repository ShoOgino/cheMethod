    @Before
    public void setUp() {
        when(fileTypeRegistry.getFileTypeByFile(file)).thenReturn(fileType);
        when(fileTypeRegistry.getFileTypeByFile(newFileNode)).thenReturn(fileType);
        when(fileTypeRegistry.getFileTypeByFile(fileNode2)).thenReturn(fileType);
        when(editorRegistry.getEditor(fileType)).thenReturn(editorProvider);
        when(editorProvider.getEditor()).thenReturn(editor);
        when(file.getPath()).thenReturn(TEXT);
        when(newFileNode.getPath()).thenReturn(TEXT + 1);

        when(editor.getEditorInput()).thenReturn(editorInput);

        editorAgent = new EditorAgentImpl(eventBus,
                                          fileTypeRegistry,
                                          editorRegistry,
                                          workspace,
                                          notificationManager,
                                          coreLocalizationConstant,
                                          nodeManager,
                                          projectServiceClient,
                                          appContext,
                                          dtoUnmarshallerFactory);
    }

