    public final void addAction(Action action, Constraints constraint, ActionManager actionManager) {
        if (action == this) {
            throw new IllegalArgumentException("Cannot add a group to itself");
        }
        // Check that action isn't already registered
        if (!(action instanceof Separator)) {
            for (Action actionInList : actionList) {
                if (action.equals(actionInList)) {
                    throw new IllegalArgumentException("cannot add an action twice: " + action);
                }
            }
        }
        actionList.add(action);
        constraintsList.add(constraint);

        needSorting = true;
    }

