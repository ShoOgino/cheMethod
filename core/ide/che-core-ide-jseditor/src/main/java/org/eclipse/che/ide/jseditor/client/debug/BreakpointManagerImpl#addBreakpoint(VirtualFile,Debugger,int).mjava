    /**
     * Adds breakpoint to the list and JVM.
     */
    private void addBreakpoint(final VirtualFile activeFile,
                               final Debugger debugger,
                               final int lineNumber) {
        debugger.addBreakpoint(activeFile, lineNumber, new AsyncCallback<Breakpoint>() {
            @Override
            public void onSuccess(final Breakpoint result) {
                Breakpoint activeBreakpoint = new Breakpoint(result.getType(),
                                                             result.getLineNumber(),
                                                             result.getPath(),
                                                             result.getFile(),
                                                             true);
                doAddBreakpoint(activeFile, activeBreakpoint);
            }

            @Override
            public void onFailure(final Throwable exception) {
                Breakpoint inactiveBreakpoint = new Breakpoint(Breakpoint.Type.BREAKPOINT,
                                                               lineNumber,
                                                               activeFile.getPath(),
                                                               activeFile,
                                                               false);
                doAddBreakpoint(activeFile, inactiveBreakpoint);
            }
        });
    }

