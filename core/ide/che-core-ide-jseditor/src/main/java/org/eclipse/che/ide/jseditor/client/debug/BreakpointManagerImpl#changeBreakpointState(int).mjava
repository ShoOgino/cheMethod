    /**
     * {@inheritDoc}
     */
    @Override
    public void changeBreakpointState(final int lineNumber) {
        final Debugger debugger = debuggerManager.getDebugger();
        if (debugger == null) {
            return;
        }

        EditorPartPresenter editor = editorAgent.getActiveEditor();
        if (editor == null) {
            return;
        }

        final VirtualFile activeFile = editor.getEditorInput().getFile();

        List<Breakpoint> breakpointsForPath = this.breakpoints.get(activeFile.getPath());
        if (breakpointsForPath != null) {
            for (final Breakpoint breakpoint : breakpointsForPath) {
                if (breakpoint.getLineNumber() == lineNumber) {
                    // breakpoint already exists at given line
                    deleteBreakpoint(activeFile, debugger, breakpoint);
                    return;
                }
            }
        }

        if (isCodeExecutable(activeFile, lineNumber)) {
            addBreakpoint(activeFile, debugger, lineNumber);
        }
    }

