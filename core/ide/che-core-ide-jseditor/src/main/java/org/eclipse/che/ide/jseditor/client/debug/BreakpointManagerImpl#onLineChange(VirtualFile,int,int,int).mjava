    /**
     * {@inheritDoc}
     */
    @Override
    public void onLineChange(final VirtualFile file, final int firstLine, final int linesAdded, final int linesRemoved) {
        final List<Breakpoint> fileBreakpoints = breakpoints.get(file.getPath());

        final int delta = linesAdded - linesRemoved;

        if (fileBreakpoints != null) {
            LOG.fine("Change in file with breakpoints " + file.getPath());

            final List<Breakpoint> toRemove = new ArrayList<>();
            final List<Breakpoint> toAdd = new ArrayList<>();

            for (final Breakpoint breakpoint : fileBreakpoints) {
                final int lineNumber = breakpoint.getLineNumber();
                if (lineNumber < firstLine) {
                    // we're before any change
                    continue;
                }

                toRemove.add(breakpoint);
                toAdd.add(new Breakpoint(breakpoint.getType(),
                                         breakpoint.getLineNumber() + delta,
                                         breakpoint.getPath(),
                                         breakpoint.getFile(),
                                         breakpoint.getMessage(),
                                         breakpoint.isActive()));
            }

            Debugger debugger = debuggerManager.getDebugger();
            if (debugger != null) {
                for (final Breakpoint breakpoint : toRemove) {
                    deleteBreakpoint(file, debugger, breakpoint);
                }
                for (final Breakpoint breakpoint : toAdd) {
                    if (isCodeExecutable(file, breakpoint.getLineNumber())) {
                        addBreakpoint(file, debugger, breakpoint.getLineNumber());
                    }
                }
            }
        }
    }

