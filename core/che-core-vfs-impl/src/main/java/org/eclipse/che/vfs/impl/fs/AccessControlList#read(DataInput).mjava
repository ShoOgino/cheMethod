    static AccessControlList read(DataInput input) throws IOException {
        int recordsNum = input.readInt();
        HashMap<Principal, Set<String>> permissionsMap = new HashMap<>(recordsNum);
        int readRecords = 0;
        while (readRecords < recordsNum) {
            String principalName = input.readUTF();
            String principalType = input.readUTF();
            int permissionsNum = input.readInt();
            if (permissionsNum > 0) {
                Set<String> permissions = new HashSet<>(4);
                int readPermissions = 0;
                while (readPermissions < permissionsNum) {
                    permissions.add(input.readUTF());
                    ++readPermissions;
                }
                final Principal principal = DtoFactory.getInstance().createDto(Principal.class)
                                                      .withName(principalName)
                                                      .withType(Principal.Type.valueOf(principalType));
                permissionsMap.put(principal, permissions);
            }
            ++readRecords;
        }
        return new AccessControlList(permissionsMap);
    }

