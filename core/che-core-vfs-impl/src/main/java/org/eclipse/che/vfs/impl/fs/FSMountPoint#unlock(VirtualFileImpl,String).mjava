    void unlock(VirtualFileImpl virtualFile, String lockToken) throws ForbiddenException, ConflictException, ServerException {
        if (lockToken == null) {
            throw new ForbiddenException("Null lock token. ");
        }
        if (!virtualFile.isFile()) {
            // Locks available for files only.
            throw new ConflictException(String.format("Item '%s' is not locked. ", virtualFile.getPath()));
        }
        final FileLock fileLock = checkIsLockValidAndGet(virtualFile);
        if (NO_LOCK == fileLock) {
            throw new ConflictException(String.format("File '%s' is not locked. ", virtualFile.getPath()));
        }
        doUnlock(virtualFile, fileLock, lockToken);
    }

