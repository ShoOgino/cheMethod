    @Test(dataProvider = "GitConnectionFactory", dataProviderClass = org.eclipse.che.git.impl.GitConnectionFactoryProvider.class)
    public void testDiffRawWithCommits(GitConnectionFactory connectionFactory) throws GitException, IOException {
        //given
        GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);
        makeCommitInMaster(connection);

        connection.add(newDto(AddRequest.class).withFilepattern(Arrays.asList("aaa")));
        connection.rm(newDto(RmRequest.class).withItems(Arrays.asList("README.txt")));
        connection.commit(newDto(CommitRequest.class).withMessage("testDiffNameStatusWithCommits"));

        //when
        DiffRequest request = newDto(DiffRequest.class)
                .withFileFilter(null)
                .withType(DiffType.RAW)
                .withNoRenames(false)
                .withRenameLimit(0)
                .withCommitA("HEAD^1")
                .withCommitB("HEAD");
        DiffPage diffPage = connection.diff(request);

        //then
        diffPage.writeTo(System.out);
    }

