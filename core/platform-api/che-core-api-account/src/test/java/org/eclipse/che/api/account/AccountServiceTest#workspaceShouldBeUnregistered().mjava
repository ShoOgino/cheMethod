    @Test
    public void workspaceShouldBeUnregistered() throws Exception {
        UsersWorkspaceImpl workspace = mock(UsersWorkspaceImpl.class);
        Account account = new Account("account123");
        account.setWorkspaces(new ArrayList<>(singletonList(workspace)));
        when(workspace.getId()).thenReturn("workspace123");
        when(workspaceManager.getWorkspace(any())).thenReturn(workspace);
        when(accountDao.getById(account.getId())).thenReturn(account);

        ContainerResponse response = makeRequest(DELETE, SERVICE_PATH + '/' + account.getId() + '/' + workspace.getId(), null, null);

        assertEquals(response.getStatus(), 200);
        AccountDescriptor descriptor = (AccountDescriptor)response.getEntity();
        assertTrue(descriptor.getWorkspaces().isEmpty());
        verify(accountDao).update(account);
    }

