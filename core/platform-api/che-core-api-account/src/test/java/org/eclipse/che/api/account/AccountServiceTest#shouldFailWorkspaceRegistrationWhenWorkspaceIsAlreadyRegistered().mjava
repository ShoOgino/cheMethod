    @Test
    public void shouldFailWorkspaceRegistrationWhenWorkspaceIsAlreadyRegistered() throws Exception {
        UsersWorkspaceImpl workspace = mock(UsersWorkspaceImpl.class);
        Account account = new Account("account123");
        when(workspace.getId()).thenReturn("workspace123");
        when(workspaceManager.getWorkspace(any())).thenReturn(workspace);
        when(accountDao.getById(account.getId())).thenReturn(account);
        when(accountDao.isWorkspaceRegistered(workspace.getId())).thenReturn(true);

        ContainerResponse response = makeRequest(POST, SERVICE_PATH + '/' + account.getId() + '/' + workspace.getId(), null, null);

        assertEquals(response.getEntity().toString(), "Workspace 'workspace123' already registered in another account");
    }

