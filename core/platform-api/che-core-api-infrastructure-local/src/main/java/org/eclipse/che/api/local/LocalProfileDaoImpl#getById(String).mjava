    @Override
    public Profile getById(String id) throws NotFoundException {
        lock.readLock().lock();
        try {
            final Profile profile = profiles.get(id);
            if (profile == null) {
                throw new NotFoundException(String.format("Profile not found %s", id));
            }
            return new Profile().withId(profile.getId()).withUserId(profile.getUserId())
                                .withAttributes(new LinkedHashMap<>(profile.getAttributes()));
        } finally {
            lock.readLock().unlock();
        }
    }

