    @Override
    public void update(User user) throws NotFoundException {
        lock.writeLock().lock();
        try {
            User myUser = null;
            for (int i = 0, size = users.size(); i < size && myUser == null; i++) {
                if (users.get(i).getId().equals(user.getId())) {
                    myUser = users.get(i);
                }
            }
            if (myUser == null) {
                throw new NotFoundException(String.format("User not found %s", user.getId()));
            }
            myUser.getAliases().clear();
            myUser.getAliases().addAll(user.getAliases());
            myUser.setEmail(user.getEmail());
            myUser.setPassword(user.getPassword());
        } finally {
            lock.writeLock().unlock();
        }
    }

