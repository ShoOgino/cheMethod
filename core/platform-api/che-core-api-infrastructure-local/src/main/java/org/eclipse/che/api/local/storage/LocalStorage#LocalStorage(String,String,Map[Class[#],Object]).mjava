    public LocalStorage(String rootDirPath, String fileName, Map<Class<?>, Object> typeAdapters) throws IOException {
        File rootDir = new File(rootDirPath);
        if (!rootDir.exists() && !rootDir.mkdirs()) {
            throw new IOException("Impossible to create root folder for local storage");
        }
        storedFile = new File(rootDir, fileName);
        GsonBuilder builder = new GsonBuilder();
        for (Map.Entry<Class<?>, Object> adapter : typeAdapters.entrySet()) {
            builder.registerTypeAdapter(adapter.getKey(), adapter.getValue());
        }
        gson = builder.setPrettyPrinting().create();
    }

