    /**
     * Get all active machines
     *
     * @throws MachineException
     *         if any error occurs
     */
    public synchronized List<MachineImpl> getMachines() throws MachineException {
        final List<MachineImpl> list = new ArrayList<>(machines.size() + instances.size());
        list.addAll(machines.values());
        list.addAll(instances.values().stream().map(this::toMachine).collect(Collectors.toList()));
        return Collections.unmodifiableList(list);
    }

