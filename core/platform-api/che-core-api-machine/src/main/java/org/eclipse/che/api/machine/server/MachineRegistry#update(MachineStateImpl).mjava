    public synchronized void update(MachineStateImpl state) throws ConflictException, MachineException {
        if (!states.containsKey(state.getId())) {
            throw new ConflictException("Machine state " + state.getId() + " not found");
        } else {
            states.put(state.getId(), state);
        }
    }

