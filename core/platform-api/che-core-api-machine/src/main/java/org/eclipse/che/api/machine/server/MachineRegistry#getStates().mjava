    /**
     * Get all active machines
     */
    public synchronized List<MachineStateImpl> getStates() throws MachineException {
        final List<MachineStateImpl> list = new ArrayList<>(states.size() + instances.size());
        list.addAll(states.values());
        for (Instance instance : instances.values()) {
            list.add(getState(instance));
        }
        return list;
    }

