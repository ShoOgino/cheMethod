    @GET
    @Path("/{machineId}/state")
    @Produces(MediaType.APPLICATION_JSON)
    @RolesAllowed("user")
    @ApiOperation(value = "Get machine state by ID")
    @ApiResponses({@ApiResponse(code = 200, message = "The response contains requested machine state entity"),
                   @ApiResponse(code = 404, message = "Machine with specified id does not exist"),
                   @ApiResponse(code = 500, message = "Internal server error occurred")})
    public MachineStateDto getMachineStateById(@ApiParam(value = "Machine ID")
                                               @PathParam("machineId")
                                               String machineId)
            throws ServerException,
                   ForbiddenException,
                   NotFoundException {

        final MachineStateImpl machineState = machineManager.getMachineState(machineId);

        checkCurrentUserPermissions(machineState);

        return injectLinks(DtoConverter.asDto(machineState));
    }

