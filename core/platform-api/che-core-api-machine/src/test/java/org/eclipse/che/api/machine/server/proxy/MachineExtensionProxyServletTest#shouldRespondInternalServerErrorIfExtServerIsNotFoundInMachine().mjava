    @Test
    public void shouldRespondInternalServerErrorIfExtServerIsNotFoundInMachine() throws Exception {
        when(machineRuntimeInfo.getServers()).thenReturn(Collections.emptyMap());

        MockHttpServletRequest mockRequest =
                new MockHttpServletRequest(DEFAULT_URL,
                                           new ByteArrayInputStream(new byte[0]),
                                           0,
                                           "GET",
                                           defaultHeaders);

        MockHttpServletResponse mockResponse = new MockHttpServletResponse();

        proxyServlet.service(mockRequest, mockResponse);

        assertEquals(mockResponse.getStatus(), SC_BAD_GATEWAY);
        // TODO look like bug in everrest test library, if {@code HttpServletResponse#sendError(int code, String message)}
        // is used no response message in output stream can be found
//        assertEquals(mockResponse.getOutputContent(), "Request can't be forwarded to machine. No extension server found in machine");
    }

