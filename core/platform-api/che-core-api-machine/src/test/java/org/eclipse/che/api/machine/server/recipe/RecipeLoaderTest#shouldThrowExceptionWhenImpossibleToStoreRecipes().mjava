    @Test(expectedExceptions = ServerException.class, expectedExceptionsMessageRegExp = "Failed to store recipe.*")
    public void shouldThrowExceptionWhenImpossibleToStoreRecipes() throws Exception {
        URL url = Thread.currentThread().getContextClassLoader().getResource("recipes.json");
        if (url != null) {
            recipeLoader = new RecipeLoader(Collections.singleton(url.getPath()), recipeDao);
        }
        doThrow(NotFoundException.class).when(recipeDao).update(any());
        doThrow(ConflictException.class).when(recipeDao).create(any());

        recipeLoader.start();
    }

