    @Test(expectedExceptions = BadRequestException.class, expectedExceptionsMessageRegExp = "Invalid machine name @name!")
    public void shouldThrowExceptionOnMachineCreationIfMachineNameIsInvalid() throws Exception {
        doReturn(new RecipeImpl().withScript("script").withType("Dockerfile"))
                .when(manager).getRecipeByLocation(any(MachineConfig.class));

        MachineConfig machineConfig = new MachineConfigImpl(false,
                                                            "@name!",
                                                            "machineType",
                                                            new MachineSourceImpl("Recipe", "location"),
                                                            new LimitsImpl(1024),
                                                            Arrays.asList(new ServerConfImpl("ref1", "8080", "https"),
                                                                          new ServerConfImpl("ref2", "9090/udp", "someprotocol")),
                                                            Collections.singletonMap("key1", "value1"));
        String workspaceId = "wsId";
        String environmentName = "env1";

        manager.createMachineSync(machineConfig, workspaceId, environmentName);
    }

