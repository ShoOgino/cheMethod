    /**
     * Ensures that the given user is the same author than the one that has created the factory
     *
     * @param factory
     *         the factory to check
     * @param userId
     *         the user id to check
     * @return true if this is matching, else false
     */
    protected boolean validateAuthor(Factory factory, String userId) throws ServerException {
        // Checks if there is an author from the factory (It may be missing for some old factories)
        Author author = factory.getCreator();
        if (author == null || author.getUserId() == null) {
            throw new ServerException(format("Invalid factory without author stored. Please contact the support about the factory ID '%s'",
                                             factory.getId()));
        }

        // Gets the userId of the factory
        String factoryUserId = factory.getCreator().getUserId();

        // return true if it's the same user
        return factoryUserId.equals(userId);
    }

