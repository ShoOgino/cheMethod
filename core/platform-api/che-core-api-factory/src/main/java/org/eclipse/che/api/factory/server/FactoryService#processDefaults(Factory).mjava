    /**
     * Adds to the factory information about creator and time of creation
     */
    private void processDefaults(Factory factory) {
        final User currentUser = EnvironmentContext.getCurrent().getUser();
        final Author creator = factory.getCreator();
        if (creator == null) {
            factory.setCreator(newDto(Author.class).withUserId(currentUser.getId())
                                                   .withCreated(System.currentTimeMillis()));
            return;
        }
        if (isNullOrEmpty(creator.getUserId())) {
            creator.setUserId(currentUser.getId());
        }
        if (creator.getCreated() == null) {
            creator.setCreated(System.currentTimeMillis());
        }
    }

