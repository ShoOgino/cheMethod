    /**
     * Checks that the user can remove an existing factory
     */
    @Test
    public void shouldBeAbleToRemoveAFactory() throws Exception {
        // given
        Factory factory = prepareFactoryWithGivenStorage("git", "http://github.com/codenvy/platform-api.git");
        when(factoryStore.getFactory(CORRECT_FACTORY_ID)).thenReturn(factory);

        // when, then
        Response response = given().auth()
                                   .basic(JettyHttpServer.ADMIN_USER_NAME, JettyHttpServer.ADMIN_USER_PASSWORD)
                                   .param("id", CORRECT_FACTORY_ID)
                                   .when()
                                   .delete("/private" + SERVICE_PATH + "/" + CORRECT_FACTORY_ID);

        assertEquals(response.getStatusCode(), 204);

        // check there was a call on the remove operation with expected ID
        verify(factoryStore).removeFactory(CORRECT_FACTORY_ID);
    }

