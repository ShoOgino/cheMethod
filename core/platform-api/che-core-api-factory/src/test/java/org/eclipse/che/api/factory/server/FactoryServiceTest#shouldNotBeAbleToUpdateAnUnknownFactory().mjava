    /**
     * Checks that the user can not update an unknown existing factory
     */
    @Test
    public void shouldNotBeAbleToUpdateAnUnknownFactory() throws Exception {
        // given
        Factory factory = prepareFactoryWithGivenStorage("git", "http://github.com/codenvy/platform-api.git");
        doThrow(new NotFoundException(format("Factory with id %s is not found.", ILLEGAL_FACTORY_ID))).when(factoryStore)
                                                                                                      .getFactory(anyString());

        // when, then
        Response response = given().auth().basic(JettyHttpServer.ADMIN_USER_NAME, JettyHttpServer.ADMIN_USER_PASSWORD)
                                   .contentType(MediaType.APPLICATION_JSON)
                                   .body(JsonHelper.toJson(factory))
                                   .when()
                                   .put("/private" + SERVICE_PATH + "/" + ILLEGAL_FACTORY_ID);

        assertEquals(response.getStatusCode(), 404);
        assertEquals(dto.createDtoFromJson(response.getBody().asString(), ServiceError.class).getMessage(),
                     format("Factory with id %s is not found.", ILLEGAL_FACTORY_ID));
    }

