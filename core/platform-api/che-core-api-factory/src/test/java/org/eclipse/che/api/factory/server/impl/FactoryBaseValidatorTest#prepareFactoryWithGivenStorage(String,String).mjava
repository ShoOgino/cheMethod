    private Factory prepareFactoryWithGivenStorage(String type, String location) {
        return factory.withWorkspace(newDto(WorkspaceConfigDto.class)
                                             .withProjects(Collections.singletonList(newDto(ProjectConfigDto.class)
                                                                                             .withSource(newDto(SourceStorageDto.class)
                                                                                                                 .withType(type)
                                                                                                                 .withLocation(
                                                                                                                         location)))));
    }

