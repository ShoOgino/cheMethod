    /**
     * Checks that the user can not remove an unknown factory
     */
    @Test
    public void shouldNotBeAbleToRemoveNotExistingFactory() throws Exception {
        doThrow(new NotFoundException("Not found")).when(factoryStore).removeFactory(anyString());

        // when, then
        Response response = given().auth()
                                   .basic(JettyHttpServer.ADMIN_USER_NAME, JettyHttpServer.ADMIN_USER_PASSWORD)
                                   .param("id", ILLEGAL_FACTORY_ID)
                                   .when()
                                   .delete("/private" + SERVICE_PATH + "/" + ILLEGAL_FACTORY_ID);

        assertEquals(response.getStatusCode(), 404);
    }

