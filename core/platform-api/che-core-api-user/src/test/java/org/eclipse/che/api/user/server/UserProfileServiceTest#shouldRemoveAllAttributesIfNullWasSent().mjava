    @Test
    public void shouldRemoveAllAttributesIfNullWasSent() throws Exception {
        final Map<String, String> attributes = new HashMap<>(8);
        attributes.put("test", "test");
        attributes.put("test1", "test");
        attributes.put("test2", "test");
        final Profile profile = new Profile().withId(testUser.getId()).withAttributes(attributes);
        when(profileDao.getById(profile.getId())).thenReturn(profile);

        final ContainerResponse response = makeRequest(HttpMethod.DELETE, SERVICE_PATH + "/attributes", null);

        assertEquals(response.getStatus(), NO_CONTENT.getStatusCode());
        verify(profileDao, times(1)).update(profile);
        assertTrue(attributes.isEmpty());
    }

