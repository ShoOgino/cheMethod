    @Test
    public void shouldBeAbleToCreateNewUser() throws Exception {
        final String userEmail = "test@email.com";
        final String token = "test_token";
        when(tokenValidator.validateToken(token)).thenReturn(userEmail);

        final ContainerResponse response = makeRequest(HttpMethod.POST, SERVICE_PATH + "/create?token=" + token, null);

        assertEquals(response.getStatus(), CREATED.getStatusCode());
        final UserDescriptor user = (UserDescriptor)response.getEntity();
        assertEquals(user.getEmail(), userEmail);
        assertEquals(user.getPassword(), "<none>");
        verify(userDao).create(any(User.class));
        verify(profileDao).create(any(Profile.class));
    }

