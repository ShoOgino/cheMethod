    private User fromEntity(NewUser newUser) throws ForbiddenException {
        if (newUser == null) {
            throw new ForbiddenException("New user required");
        }
        if (isNullOrEmpty(newUser.getName())) {
            throw new ForbiddenException("User name required");
        }
        final User user = new User().withName(newUser.getName());
        if (newUser.getPassword() != null) {
            checkPassword(newUser.getPassword());
            user.setPassword(newUser.getPassword());
        }
        return user;
    }

