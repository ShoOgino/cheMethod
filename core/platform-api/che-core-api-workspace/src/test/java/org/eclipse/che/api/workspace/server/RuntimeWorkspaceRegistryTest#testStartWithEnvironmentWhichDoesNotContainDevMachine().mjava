    @Test(expectedExceptions = BadRequestException.class,
          expectedExceptionsMessageRegExp = "Couldn't start workspace '.*' from environment '.*', environment doesn't contain dev-machine")
    public void testStartWithEnvironmentWhichDoesNotContainDevMachine() throws Exception {
        final UsersWorkspaceImpl workspaceMock = workspaceMock();
        EnvironmentImpl environment = new EnvironmentImpl(workspaceMock.getConfig().getDefaultEnv(),
                                                          new RecipeImpl().withType("docker"), null);
        environment.setMachineConfigs(emptyList());
        when(workspaceMock.getConfig().getEnvironments()).thenReturn(singletonList(environment));

        registry.start(workspaceMock, workspaceMock.getConfig().getDefaultEnv());
    }

