    @Test
    public void stackIconShouldBeDeletedIfUserHasPermissions() throws ServerException, NotFoundException {
        when(checker.hasAccess(foreignStack, USER_ID, "write")).thenReturn(true);
        when(stackDao.getById(foreignStack.getId())).thenReturn(foreignStack);
        Response response = given().auth()
                                   .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                   .when()
                                   .delete(SECURE_PATH + "/stack/" + foreignStack.getId() + "/icon");
        assertEquals(response.getStatusCode(), 204);
        verify(stackDao).getById(foreignStack.getId());
        verify(stackDao).update(foreignStack);
    }

