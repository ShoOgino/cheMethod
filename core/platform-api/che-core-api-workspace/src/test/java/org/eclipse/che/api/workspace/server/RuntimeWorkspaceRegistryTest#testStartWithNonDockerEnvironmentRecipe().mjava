    @Test(expectedExceptions = BadRequestException.class,
          expectedExceptionsMessageRegExp = "Couldn't start workspace '.*' from environment '.*', " +
                                            "environment recipe has unsupported type 'non-docker'")
    public void testStartWithNonDockerEnvironmentRecipe() throws Exception {
        final UsersWorkspaceImpl workspaceMock = workspaceMock();
        EnvironmentStateImpl state = new EnvironmentStateImpl(workspaceMock.getDefaultEnv(), new RecipeImpl().withType("non-docker"), null);
        when(workspaceMock.getEnvironments()).thenReturn(singletonList(state));
        registry.start(workspaceMock, workspaceMock.getDefaultEnv());
    }

