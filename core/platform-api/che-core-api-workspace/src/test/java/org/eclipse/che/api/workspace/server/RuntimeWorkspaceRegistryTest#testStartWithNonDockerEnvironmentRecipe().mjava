    @Test(expectedExceptions = BadRequestException.class,
          expectedExceptionsMessageRegExp = "Couldn't start workspace '.*' from environment '.*', " +
                                            "environment recipe has unsupported type 'non-docker'")
    public void testStartWithNonDockerEnvironmentRecipe() throws Exception {
        final UsersWorkspaceImpl workspaceMock = workspaceMock();
        EnvironmentImpl environment = new EnvironmentImpl(workspaceMock.getConfig().getDefaultEnv(),
                                                          new RecipeImpl().withType("non-docker"),
                                                          null);
        when(workspaceMock.getConfig().getEnvironments()).thenReturn(singletonList(environment));

        registry.start(workspaceMock, workspaceMock.getConfig().getDefaultEnv());
    }

