    @Test(expectedExceptions = BadRequestException.class,
          expectedExceptionsMessageRegExp = "Environment should contain exactly 1 dev machine, but '.*' contains '0'")
    public void shouldFailValidationIfNoDevMachineFound() throws Exception {
        final WorkspaceConfigDto config = createConfig();
        config.getEnvironments()
              .get(0)
              .getMachineConfigs()
              .stream()
              .filter(MachineConfigDto::isDev)
              .forEach(machine -> machine.withDev(false));


        wsValidator.validate(config);
    }

