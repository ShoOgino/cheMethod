    @Test
    public void shouldBeAbleToStartTemporaryWorkspace() throws Exception {
        final WorkspaceConfigDto config = createConfig();
        final UsersWorkspace workspace = workspaceManager.createWorkspace(config, "user123", "account");
        when(registry.start(workspaceCaptor.capture(), anyString(), anyBoolean())).thenReturn(createRuntime(workspace));

        final RuntimeWorkspaceImpl runtime = workspaceManager.startTemporaryWorkspace(config, "account");

        final UsersWorkspaceImpl captured = workspaceCaptor.getValue();
        assertTrue(captured.isTemporary());
        assertNotNull(captured.getConfig()
                              .getEnvironments()
                              .get(0)
                              .getMachineConfigs()
                              .get(0));
        verify(workspaceHooks).beforeCreate(captured, "account");
        verify(workspaceHooks).afterCreate(runtime, "account");
    }

