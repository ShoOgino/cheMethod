    private static UsersWorkspaceImpl workspaceMock() {
        // prepare default environment
        final EnvironmentStateImpl envState = mock(EnvironmentStateImpl.class, RETURNS_MOCKS);

        final Recipe recipe = mock(Recipe.class);
        when(recipe.getType()).thenReturn("docker");
        when(envState.getRecipe()).thenReturn(recipe);

        final MachineStateImpl cfg = mock(MachineStateImpl.class);
        when(cfg.isDev()).thenReturn(true);

        final MachineStateImpl cf2 = mock(MachineStateImpl.class);
        when(envState.getMachineConfigs()).thenReturn((asList(cfg, cf2)));

        // prepare workspace
        final RuntimeWorkspaceImpl workspace = mock(RuntimeWorkspaceImpl.class, RETURNS_MOCKS);
        when(workspace.getEnvironments()).thenReturn(Collections.singletonList(envState));
        when(workspace.getDevMachine()).thenReturn(mock(MachineImpl.class, RETURNS_MOCKS));
        when(workspace.getId()).thenReturn(WORKSPACE_ID);

        return workspace;
    }

