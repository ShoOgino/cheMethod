    /**
     * Checks that workspace configuration is valid.
     *
     * <ul>Validation rules:
     * <li>Workspace name must not be null & must match {@link #WS_NAME} pattern</li>
     * <li>Workspace attributes keys must not start with 'codenvy' keyword and must not be empty</li>
     * <li>Workspace default environment name must not be empty or null</li>
     * <li>Workspace environment must contain default environment </li>
     * <li>Environment name must not be null</li>
     * <li>Each environment must contain at least 1 machine(which is dev), also it must contain exactly one dev machine</li>
     * <li>Each machine must contain its name and source</li>
     * <li>Each command name and command line must not be null</li>
     * </ul>
     */
    @Override
    public void validate(WorkspaceConfig config) throws BadRequestException {
        // configuration object itself
        requiredNotNull(config.getName(), "Workspace name required");
        if (!WS_NAME.matcher(config.getName()).matches()) {
            throw new BadRequestException("Incorrect workspace name, it must be between 3 and 20 characters and may contain digits, " +
                                          "latin letters, underscores, dots, dashes and should start and end only with digits, " +
                                          "latin letters or underscores");
        }

        //attributes
        for (String attributeName : config.getAttributes().keySet()) {
            //attribute name should not be empty and should not start with codenvy
            if (attributeName.trim().isEmpty() || attributeName.toLowerCase().startsWith("codenvy")) {
                throw new BadRequestException(format("Attribute name '%s' is not valid", attributeName));
            }
        }

        //environments
        requiredNotNull(config.getDefaultEnv(), "Workspace default environment name required");
        if (!config.getEnvironments().stream().anyMatch(env -> env.getName().equals(config.getDefaultEnv()))) {
            throw new BadRequestException("Workspace default environment configuration required");
        }
        for (Environment environment : config.getEnvironments()) {
            final String envName = environment.getName();
            requiredNotNull(envName, "Environment name should not be null");

            //machine configs
            if (environment.getMachineConfigs().isEmpty()) {
                throw new BadRequestException("Environment '" + envName + "' should contain at least 1 machine");
            }
            final long devCount = environment.getMachineConfigs()
                                             .stream()
                                             .filter(MachineConfig::isDev)
                                             .count();
            if (devCount != 1) {
                throw new BadRequestException(format("Environment should contain exactly 1 dev machine, but '%s' contains '%d'",
                                                     envName,
                                                     devCount));
            }
            for (MachineConfig machineCfg : environment.getMachineConfigs()) {
                if (isNullOrEmpty(machineCfg.getName())) {
                    throw new BadRequestException("Environment " + envName + " contains machine without of name");
                }
                requiredNotNull(machineCfg.getSource(), "Environment " + envName + " contains machine without of source");
                //TODO require type?
            }
        }

        //commands
        for (Command command : config.getCommands()) {
            requiredNotNull(command.getName(), "Workspace " + config.getName() + " contains command without of name");
            requiredNotNull(command.getCommandLine(), format("Command line required for command '%s' in workspace '%s'",
                                                             command.getName(),
                                                             config.getName()));
        }

        //projects
        //TODO
    }

