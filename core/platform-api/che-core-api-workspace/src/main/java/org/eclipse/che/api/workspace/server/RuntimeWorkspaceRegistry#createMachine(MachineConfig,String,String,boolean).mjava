    /**
     * Creates or recovers machine based on machine config.
     */
    private MachineImpl createMachine(MachineConfig machine,
                                      String workspaceId,
                                      String envName,
                                      boolean recover) throws MachineException,
                                                              BadRequestException,
                                                              SnapshotException,
                                                              NotFoundException,
                                                              ConflictException {
        if (recover) {
            return machineManager.recoverMachine(machine, workspaceId, envName);
        } else {
            return machineManager.createMachineSync(machine, workspaceId, envName);
        }
    }

