    private Map<String, List<String>> getRuntimeAttributes(ProjectTypeDef projectType,
                                                           ProjectConfig projectConfig,
                                                           FolderEntry projectFolder) throws ProjectTypeConstraintException,
                                                                                             ValueStorageException {
        Map<String, List<String>> runtimeAttributes = new HashMap<>();

        for (Attribute attribute : projectType.getAttributes()) {
            if (attribute.isVariable()) {
                Variable variable = (Variable)attribute;
                ValueProviderFactory factory = variable.getValueProviderFactory();

                List<String> value;
                if (factory != null) {
                    value = factory.newInstance(projectFolder).getValues(variable.getName());

                    if (value == null) {
                        throw new ProjectTypeConstraintException("Value Provider must not produce NULL value of variable " +
                                                                 variable.getId());
                    }
                } else {
                    value = projectConfig.getAttributes().get(attribute.getName());
                }

                if ((value == null || value.isEmpty()) && variable.isRequired()) {
                    throw new ProjectTypeConstraintException("No Value for provider defined for required variable " + variable.getId());
                } else {
                    runtimeAttributes.put(variable.getName(), value);
                }
            }
        }

        return runtimeAttributes;
    }

