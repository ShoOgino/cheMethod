    /**
     * Gets content of file as array of bytes.
     *
     * @return content of file as stream
     * @throws IOException
     *         if an i/o error occurs
     * @throws ServerException
     *         if other error occurs
     */
    public byte[] contentAsBytes() throws IOException, ServerException {
        final ContentStream contentStream = getContentStream();
        final int contentLength = (int)contentStream.getLength();
        if (contentLength == 0) {
            return new byte[0];
        }
        try (InputStream stream = contentStream.getStream()) {
            if (contentLength < 0) {
                return ByteStreams.toByteArray(stream);
            }
            final byte[] b = new byte[contentLength];
            ByteStreams.readFully(stream, b);
            return b;
        }
    }

