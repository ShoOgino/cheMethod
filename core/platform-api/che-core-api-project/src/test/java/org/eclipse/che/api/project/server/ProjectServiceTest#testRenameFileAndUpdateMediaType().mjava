    @Test
    public void testRenameFileAndUpdateMediaType() throws Exception {
        Project myProject = pm.getProject(workspace, "my_project");
        myProject.getBaseFolder().createFile("test.txt", "hello".getBytes());
        ContainerResponse response = launcher.service(POST,
                                                      String.format(
                                                              "http://localhost:8080/api/project/%s/rename/my_project/test.txt?name=_test.txt&mediaType=text/plain",
                                                              workspace),
                                                      "http://localhost:8080/api", null, null, null);
        assertEquals(response.getStatus(), 201, "Error: " + response.getEntity());
        assertEquals(response.getHttpHeaders().getFirst("Location"),
                     URI.create(String.format("http://localhost:8080/api/project/%s/file/my_project/_test.txt", workspace)));
        FileEntry renamed = (FileEntry)myProject.getBaseFolder().getChild("_test.txt");
        assertNotNull(renamed);
        assertEquals(renamed.getMediaType(), TEXT_PLAIN);
        Assert.assertNull(myProject.getBaseFolder().getChild("test.txt"));
    }

