    @Test
    public void testUpdateProjectVisibilityToPublic() throws Exception {
        Project myProject = pm.getProject(workspace, "my_project");
        myProject.setVisibility("private");
        ContainerResponse response = launcher.service(POST,
                                                      String.format(
                                                              "http://localhost:8080/api/project/%s/switch_visibility/my_project?visibility=public",
                                                              workspace),
                                                      "http://localhost:8080/api", null, null, null);
        assertEquals(response.getStatus(), 204, "Error: " + response.getEntity());
        // List of permissions should be cleared. After that project inherits permissions from parent folder (typically root folder)
        Map<Principal, Set<String>> permissions = myProject.getBaseFolder().getVirtualFile().getPermissions();
        assertEquals(permissions.size(), 0);

        response = launcher.service(GET,
                                    String.format("http://localhost:8080/api/project/%s/my_project", workspace),
                                    "http://localhost:8080/api", null, null, null);
        assertEquals(response.getStatus(), 200, "Error: " + response.getEntity());
    }

