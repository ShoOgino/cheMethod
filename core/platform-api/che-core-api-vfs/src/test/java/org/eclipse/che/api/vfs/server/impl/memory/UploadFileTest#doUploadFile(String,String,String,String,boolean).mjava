    private ContainerResponse doUploadFile(String fileName, String fileContent, String formMediaType, String formFileName,
                                           boolean formOverwrite) throws Exception {
        String path = SERVICE_URI + "uploadfile/" + uploadTestFolderId; //

        Map<String, List<String>> headers = new HashMap<>();
        List<String> contentType = new ArrayList<>();
        contentType.add("multipart/form-data; boundary=abcdef");
        headers.put(HttpHeaders.CONTENT_TYPE, contentType);

        String uploadBodyPattern = "--abcdef\r\n"
                                   + "Content-Disposition: form-data; name=\"file\"; filename=\"%1$s\"\r\n\r\n"
                                   + "%2$s\r\n--abcdef\r\nContent-Disposition: form-data; name=\"mimeType\"\r\n\r\n%3$s"
                                   + "\r\n--abcdef\r\nContent-Disposition: form-data; name=\"name\"\r\n\r\n%4$s\r\n"
                                   + "--abcdef\r\nContent-Disposition: form-data; name=\"overwrite\"\r\n\r\n%5$b\r\n--abcdef--\r\n";
        byte[] formData =
                String.format(uploadBodyPattern, fileName, fileContent, formMediaType, formFileName,
                              formOverwrite).getBytes();
        EnvironmentContext env = new EnvironmentContext();
        env.put(HttpServletRequest.class, new MockHttpServletRequest("", new ByteArrayInputStream(formData),
                                                                     formData.length, HttpMethod.POST, headers));

        return launcher.service(HttpMethod.POST, path, BASE_URI, headers, formData, env);
    }

