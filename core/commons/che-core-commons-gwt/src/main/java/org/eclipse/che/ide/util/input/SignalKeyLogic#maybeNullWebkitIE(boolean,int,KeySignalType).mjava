    /**
     * Common logic between Webkit and IE for deciding whether we want the keydown
     * or the keypress
     */
    private static boolean maybeNullWebkitIE(boolean ret, int typeInt, KeySignalType type) {
        // Use keydown as the signal for everything except input.
        // This is because the mutation always happens after the keypress for
        // input (this is especially important for chrome,
        // which interleaves deferred commands between keydown and keypress).
        //
        // For everything else, keypress is redundant with keydown, and also, the resulting default
        // dom mutation (if any) often happens after the keydown but before the keypress in webkit.
        // Also, if the 'Command' key is held for chrome/safari etc, we want to get the keydown
        // event, NOT the keypress event, for everything because of things like ctrl+c etc.
        // where sometimes it'll happen just after the keydown, or sometimes we just won't
        // get a keypress at all
        if (typeInt == (type == KeySignalType.INPUT ? Event.ONKEYDOWN : Event.ONKEYPRESS)) {
            return false;
        }

        return ret;
    }

