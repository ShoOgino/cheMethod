    /**
     * Is response successful?
     *
     * @param response
     *         {@link Message}
     * @return <code>true</code> if response is successful and <code>false</code> if response is not successful
     */
    protected final boolean isSuccessful(Message response) {
        if (successCodes == null) {
            successCodes = DEFAULT_SUCCESS_CODES;
        }

        List<Pair> headers = response.getHeaders().toList();
        if (headers != null) {
            for (Pair header : headers) {
                if (HTTPHeader.JAXRS_BODY_PROVIDED.equals(header.getName()) && "Authentication-required".equals(header.getValue())) {
                    return false;
                }
            }
        }

        for (int code : successCodes)
            if (response.getResponseCode() == code)
                return true;

        return false;
    }

