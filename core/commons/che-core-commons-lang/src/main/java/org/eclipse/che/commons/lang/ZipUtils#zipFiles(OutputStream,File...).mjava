  /**
   * Create an output ZIP stream and add each file to that stream. Directory files are added
   * recursively. The contents of the zip are written to the given stream.
   *
   * @param output The stream to write the zip contents to.
   * @param files The files to add to the zip stream.
   * @throws IOException
   */
  public static void zipFiles(OutputStream output, File... files) throws IOException {
    try (ZipOutputStream zipOut = new ZipOutputStream(output)) {
      for (File f : files) {
        if (f.isDirectory()) {
          addDirectoryEntry(zipOut, f.getName());
          final String parentPath = f.getParentFile().getAbsolutePath();
          addDirectoryRecursively(zipOut, parentPath, f, IoUtil.ANY_FILTER);
        } else if (f.isFile()) {
          addFileEntry(zipOut, f.getName(), f);
        }
      }
    }
  }

