    public void initialize(String wsUrl) {
        this.wsUrl = wsUrl;
        this.countRetry = 50;
        this.state = WsAgentState.STOPPED;

        initialLoadingInfo.setOperationStatus(WS_AGENT_BOOTING.getValue(), IN_PROGRESS);
        connect();

        messageBus = messageBusProvider.createMachineMessageBus(wsUrl);
        messageBus.addOnOpenHandler(new ConnectionOpenedHandler() {
            @Override
            public void onOpen() {
                messageBus.removeOnOpenHandler(this);
            }
        });
    }

