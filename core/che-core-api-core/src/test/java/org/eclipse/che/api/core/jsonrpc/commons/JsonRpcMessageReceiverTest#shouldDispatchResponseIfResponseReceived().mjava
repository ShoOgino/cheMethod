    @Test
    public void shouldDispatchResponseIfResponseReceived() throws Exception {
        when(jsonRpcQualifier.isJsonRpcResponse(MESSAGE)).thenReturn(true);
        when(jsonRpcQualifier.isJsonRpcRequest(MESSAGE)).thenReturn(false);
        when(jsonRpcUnmarshaller.unmarshalArray(any())).thenReturn(singletonList(MESSAGE));

        jsonRpcMessageReceiver.receive(ENDPOINT_ID, MESSAGE);

        verify(responseDispatcher).dispatch(eq(ENDPOINT_ID), any(JsonRpcResponse.class));
    }

