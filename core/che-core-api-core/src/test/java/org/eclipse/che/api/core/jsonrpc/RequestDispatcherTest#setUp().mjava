    @BeforeMethod
    public void setUp() throws Exception {
        when(request.hasId()).thenReturn(true);
        when(request.getId()).thenReturn(REQUEST_ID);
        when(request.getMethod()).thenReturn(METHOD_NAME);
        when(request.getParams()).thenReturn(params);

        when(requestHandler.handle(ENDPOINT_ID, params)).thenReturn(result);

        when(jsonRpcFactory.createResponse(REQUEST_ID, result, null)).thenReturn(response);

        when(response.toString()).thenReturn(STRINGIFIED_RESPONSE);

        when(requestHandlerRegistry.getRequestHandler("method")).thenReturn(requestHandler);
        when(requestHandlerRegistry.getNotificationHandler("method")).thenReturn(notificationHandler);
    }

