    @Test
    public void shouldRunMatchingReceiver() {
        when(requestRegistry.extractFor(eq(0))).thenReturn(METHOD_NAME);

        dispatcher.dispatch(getMessage(0), ENDPOINT_ID);

        ArgumentCaptor<JsonRpcResponse> responseCaptor = ArgumentCaptor.forClass(JsonRpcResponse.class);

        verify(receiver).receive(responseCaptor.capture(), eq(ENDPOINT_ID));

        final JsonRpcResponse response = responseCaptor.getValue();

        assertEquals(response.getResult(), RESULT);
        assertEquals(response.getId(), REQUEST_ID);
    }

