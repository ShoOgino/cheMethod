    @Test
    public void shouldAddMessageToPendingIfSessionIsNotOpenedAndEndpointIsSet() throws IOException {
        when(session.isOpen()).thenReturn(false);

        transmitter.transmit(PROTOCOL, MESSAGE, ENDPOINT_ID);

        verify(session, never()).getBasicRemote();
        verify(remote, never()).sendText(transmission.toString());
        verify(reSender).add(eq(ENDPOINT_ID), any(WebSocketTransmission.class));
    }

