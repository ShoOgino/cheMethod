    @Override
    public void onMessage(String data) {
      try {
        final RestOutputMessage message =
            messageConverter.fromString(data, RestOutputMessage.class);
        if (message != null && message.getHeaders() != null) {
          for (org.everrest.websockets.message.Pair header : message.getHeaders()) {
            if ("x-everrest-websocket-channel".equals(header.getName())) {
              final String channel = header.getValue();
              if (channel != null && channels.contains(channel)) {
                final Object event = Messages.restoreEventFromBroadcastMessage(message);
                if (event != null) {
                  eventService.publish(event);
                }
              }
            }
          }
        }
      } catch (Exception e) {
        LOG.error(e.getMessage(), e);
      }
    }

