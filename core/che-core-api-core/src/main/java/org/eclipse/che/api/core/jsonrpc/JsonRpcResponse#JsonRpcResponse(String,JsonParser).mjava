    @AssistedInject
    public JsonRpcResponse(@Assisted("message") String message, JsonParser jsonParser) {
        checkNotNull(message, "Message must not be null");
        checkArgument(!message.isEmpty(), "Message must not be empty");

        JsonObject response = jsonParser.parse(message).getAsJsonObject();

        this.id = response.has("id")
                  ? response.get("id").getAsString()
                  : null;

        this.result = response.has("result")
                      ? new JsonRpcResult(response.get("result").toString(), jsonParser)
                      : null;

        this.error = response.has("error")
                     ? new JsonRpcError(response.get("error").toString(), jsonParser)
                     : null;
    }

