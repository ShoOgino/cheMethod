    /**
     * Returns subject or {@link Subject#ANONYMOUS} in case when subject is null.
     */
    public Subject getSubject() {
        return subject == null ? Subject.ANONYMOUS : subject;
    }

