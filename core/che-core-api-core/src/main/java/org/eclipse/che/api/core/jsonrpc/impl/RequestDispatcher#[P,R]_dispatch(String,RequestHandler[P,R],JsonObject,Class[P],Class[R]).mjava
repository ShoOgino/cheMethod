    private <P, R> JsonObject dispatch(String endpointId,
                                       RequestHandler<P, R> handler,
                                       JsonObject params,
                                       Class<P> paramClass,
                                       Class<R> resultClass) {
        final P param = DtoFactory.getInstance().createDtoFromJson(params.toString(), paramClass);
        final R result = handler.handleRequest(endpointId, param);
        final String resultString = DtoFactory.getInstance().toJson(result);
        return new JsonParser().parse(resultString).getAsJsonObject();
    }

