    @Override
    public void writeLine(String line) throws IOException {
        final ChannelBroadcastMessage bm = new ChannelBroadcastMessage();
        bm.setChannel(channel);
        bm.setBody(JsonUtils.getJsonString(line));
        try {
            WSConnectionContext.sendMessage(bm);
        } catch (Exception e) {
            LOG.error("A problem occurred while sending websocket message", e);
        }
    }

