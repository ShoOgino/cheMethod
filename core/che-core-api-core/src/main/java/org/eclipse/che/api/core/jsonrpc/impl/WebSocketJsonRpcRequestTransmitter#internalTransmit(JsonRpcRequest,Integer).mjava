    private void internalTransmit(JsonRpcRequest request, Integer endpointId) {
        final Integer id = request.getId();
        final String method = request.getMethod();

        if (id != null) {
            registry.add(id, method);
        }

        LOG.debug("Transmitting a request\n {}", request);

        if (endpointId == null) {
            transmitter.transmit("request", request.toString());
        } else {
            transmitter.transmit("request", request.toString(), endpointId);
        }
    }

