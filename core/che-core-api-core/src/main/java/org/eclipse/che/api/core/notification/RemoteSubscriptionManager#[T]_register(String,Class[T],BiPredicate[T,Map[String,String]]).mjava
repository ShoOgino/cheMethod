  public <T> void register(
      String method, Class<T> eventType, BiPredicate<T, Map<String, String>> biPredicate) {
    eventService.subscribe(
        event ->
            subscriptionContexts
                .getOrDefault(method, new HashSet<>())
                .stream()
                .filter(context -> biPredicate.test(event, context.scope))
                .forEach(context -> transmit(context.endpointId, method, event)),
        eventType);
  }

