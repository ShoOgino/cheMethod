  @Inject
  public WSocketEventBusClient(
      EventService eventService,
      @Nullable @Named("notification.client.event_subscriptions")
          Pair<String, String>[] eventSubscriptions,
      @Nullable ClientEventPropagationPolicy policy) {
    this.eventService = eventService;
    this.eventSubscriptions = eventSubscriptions;
    this.policy = policy;

    messageConverter = new JsonMessageConverter();
    connections = new ConcurrentHashMap<>();
    start = new AtomicBoolean(false);
  }

