    /** @see GitCommand#execute() */
    @Override
    public String execute() throws GitException {
        reset();
        commandLine.add("diff");
        if (!(type == null || type.equals(DiffRequest.DiffType.RAW.toString()))) {
            commandLine.add(type);
        }
        if (noRenames) {
            commandLine.add("--no-renames");
        }
        if (renamesCount > 0) {
            commandLine.add("--find-renames=" + renamesCount);
        }
        if (cached) {
            commandLine.add("--cached");
        }
        if (commitA != null) {
            commandLine.add(commitA);
        }
        if (commitB != null) {
            commandLine.add(commitB);
        }
        if (filesFilter != null) {
            commandLine.add(filesFilter);
        }
        start();
        if (type == null || type.equals("--raw")) {
            return getText() + "\n";
        }
        return getText();
    }

