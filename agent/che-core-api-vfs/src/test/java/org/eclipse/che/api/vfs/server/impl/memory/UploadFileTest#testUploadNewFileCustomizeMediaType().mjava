    public void testUploadNewFileCustomizeMediaType() throws Exception {
        // Passed by browser.
        String fileName = "testUploadNewFileCustomizeMediaType";
        // File content.
        String fileContent = "test upload file with custom media type";
        // Name of file passed in HTML form. If present it should be used instead of original file name.
        String formFileName = fileName + ".txt";
        // Media type of file passed in HTML form. If present it should be used instead of original file media type.
        String formMediaType = MediaType.TEXT_PLAIN;
        ContainerResponse response =
                doUploadFile(fileName, fileContent, formMediaType, formFileName, false);
        assertEquals(200, response.getStatus());
        String expectedPath = uploadTestFolderPath + '/' + formFileName;
        VirtualFile file = mountPoint.getVirtualFile(expectedPath);
        assertNotNull("File was not created in expected location. ", file);
        checkFileContext(fileContent, MediaType.TEXT_PLAIN, file);
    }

