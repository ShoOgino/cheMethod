    public List<Property> getProperties(PropertyFilter filter) {
        checkExist();
        final List<Property> result = new ArrayList<>();
        for (Map.Entry<String, List<String>> e : properties.entrySet()) {
            final String name = e.getKey();
            if (filter.accept(name)) {
                final List<String> value = e.getValue();
                final Property property = DtoFactory.getInstance().createDto(Property.class).withName(name);
                if (value != null) {
                    property.setValue(new ArrayList<>(value));
                }
                result.add(property);
            }
        }
        return result;
    }

