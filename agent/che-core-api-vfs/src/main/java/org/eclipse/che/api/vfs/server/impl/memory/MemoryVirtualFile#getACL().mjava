    @Override
    public List<AccessControlEntry> getACL() {
        checkExist();
        final Map<Principal, Set<String>> permissions = getPermissions();
        final List<AccessControlEntry> acl = new ArrayList<>(permissions.size());
        for (Map.Entry<Principal, Set<String>> e : permissions.entrySet()) {
            final Set<String> basicPermissions = e.getValue();
            final Principal principal = e.getKey();
            final List<String> plainPermissions = new ArrayList<>(basicPermissions);
            // principal is already copied in method getPermissions
            acl.add(DtoFactory.getInstance().createDto(AccessControlEntry.class)
                              .withPrincipal(principal).withPermissions(plainPermissions));
        }
        return acl;
    }

