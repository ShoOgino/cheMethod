    public static ItemReference toItemReference(FileEntry file, UriBuilder uriBuilder) throws ServerException {
        return newDto(ItemReference.class).withName(file.getName())
                                          .withPath(file.getPath())
                                          .withType("file")
                                          .withMediaType(file.getMediaType())
                                          .withAttributes(file.getAttributes())
                                          .withCreated(file.getCreated())
                                          .withModified(file.getModified())
                                          .withContentLength(file.getVirtualFile().getLength())
                                          .withLinks(generateFileLinks(file, uriBuilder));
    }

