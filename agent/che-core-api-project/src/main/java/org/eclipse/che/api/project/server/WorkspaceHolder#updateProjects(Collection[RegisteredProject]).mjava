    /**
     * updates projects on ws master side
     *
     * @param projects
     * @throws ServerException
     */
    public void updateProjects(Collection<RegisteredProject> projects) throws ServerException {
        List<RegisteredProject> persistedProjects = projects.stream()
                                                            .filter(project -> !project.isDetected())
                                                            .collect(Collectors.toList());

        workspace.setProjects(persistedProjects);

        final String href = UriBuilder.fromUri(apiEndpoint)
                                      .path(WorkspaceService.class).path(WorkspaceService.class, "update")
                                      .build(workspace.getId()).toString();
        final Link link = newDto(Link.class).withMethod("PUT").withHref(href);

        try {
            httpJsonRequestFactory.fromLink(link)
                                  .setBody(DtoConverter.asDto(workspace.getConfig()))
                                  .request();
        } catch (IOException | ApiException e) {
            throw new ServerException(e.getMessage());
        }

        // sync local projects
        projects.stream()
                .filter(project -> !project.isSynced())
                .forEach(RegisteredProject::setSync);
    }

