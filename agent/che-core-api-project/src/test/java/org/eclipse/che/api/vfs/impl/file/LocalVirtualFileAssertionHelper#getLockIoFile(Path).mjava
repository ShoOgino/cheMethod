    private File getLockIoFile(Path virtualFilePath) {
        Path lockFilePath;
        if (virtualFilePath.isRoot()) {
            lockFilePath = virtualFilePath.newPath(".vfs", "locks", virtualFilePath.getName() + "_lock");
        } else {
            lockFilePath = virtualFilePath.getParent().newPath(".vfs", "locks", virtualFilePath.getName() + "_lock");
        }
        return new File(testDirectory, toIoPath(lockFilePath));
    }

