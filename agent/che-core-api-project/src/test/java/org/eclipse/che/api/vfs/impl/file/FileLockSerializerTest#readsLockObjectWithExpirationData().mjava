    @Test
    public void readsLockObjectWithExpirationData() throws Exception {
        String token = Long.toString(System.currentTimeMillis());
        long expired = System.currentTimeMillis() + 10000;

        DataInput data = mock(DataInput.class);
        when(data.readUTF()).thenReturn(token);
        when(data.readLong()).thenReturn(expired);

        FileLock lock = lockSerializer.read(data);
        assertEquals(new FileLock(token, expired), lock);
    }

