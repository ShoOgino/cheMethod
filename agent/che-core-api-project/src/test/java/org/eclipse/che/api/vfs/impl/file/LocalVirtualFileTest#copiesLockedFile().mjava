    @Test
    public void copiesLockedFile() throws Exception {
        VirtualFile root = getRoot();
        VirtualFile file = root.createFile(generateFileName(), DEFAULT_CONTENT);
        file.lock(0);
        VirtualFile targetFolder = root.createFolder(generateFolderName());

        VirtualFile copy = file.copyTo(targetFolder);

        assertFalse(copy.isLocked());
        assertionHelper.assertThatIoFilesHaveSameContent(file.getPath(), copy.getPath());
        assertionHelper.assertThatLockIoFileDoesNotExist(copy.getPath());
    }

