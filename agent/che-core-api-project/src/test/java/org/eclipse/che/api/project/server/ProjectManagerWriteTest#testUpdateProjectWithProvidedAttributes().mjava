    @Test
    public void testUpdateProjectWithProvidedAttributes() throws Exception {

        Map<String, List<String>> attributes = new HashMap<>();
        attributes.put("pt2-var2", new AttributeValue("test").getList());

        ProjectConfig pc = new NewProjectConfig("/testUpdateProject", "pt2", null, "name", "descr", attributes, null);
        RegisteredProject p = pm.createProject(pc, null);

        // SPECS:
        // If project type is updated with one required provided attributes
        // those attributes should be provided before update

        pc = new NewProjectConfig("/testUpdateProject", "pt3", null, "updatedName", "descr", attributes, null);

        try {
            pm.updateProject(pc);
            fail("ProjectTypeConstraintException: Value for required attribute is not initialized pt3:pt2-provided1 ");
        } catch (ProjectTypeConstraintException e) {
        }


        p.getBaseFolder().createFolder("file1");
        p = pm.updateProject(pc);
        assertEquals(new AttributeValue("pt2-provided1"), p.getAttributeEntries().get("pt2-provided1"));


    }

