    @Test
    public void getsContentAsStream() throws Exception {
        VirtualFile root = getRoot();
        VirtualFile file = root.createFile(generateFileName(), DEFAULT_CONTENT);

        byte[] bytes;
        try (InputStream content = file.getContent()) {
            bytes = ByteStreams.toByteArray(content);
        }

        assertionHelper.assertThatIoFileHasContent(file.getPath(), DEFAULT_CONTENT_BYTES);
        assertEquals(DEFAULT_CONTENT, new String(bytes));
    }

