    @Test
    public void testProjectTypeDefinition() throws Exception {
        ProjectTypeRegistry registry = injector.getInstance(ProjectTypeRegistry.class);

        ProjectTypeDef type = registry.getProjectType("my");

        assertNotNull(type);
        assertEquals(1, type.getParents().size());
        assertEquals(BaseProjectType.ID, type.getParents().get(0));
        assertNotNull(((Variable)type.getAttribute("var")).getValueProviderFactory());
        Assert.assertNull(type.getAttribute("var").getValue());
        assertEquals(3, type.getAttributes().size());
        assertNotNull(type.getAttribute("const"));
        assertEquals(new AttributeValue("const_value"), type.getAttribute("const").getValue());
        assertEquals(new AttributeValue("value"), type.getAttribute("var1").getValue());
        Assert.assertTrue(type.getAttribute("var1").isRequired());
        Assert.assertTrue(type.getAttribute("var1").isVariable());
        Assert.assertFalse(type.getAttribute("const").isVariable());
    }

