    @Test
    public void deletesLockedFileWithLockToken() throws Exception {
        VirtualFile folder = getRoot().createFolder(generateFolderName());
        VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);
        file.setProperty("property1", "value1");
        Path filePath = file.getPath();
        String lockToken = file.lock(0);

        file.delete(lockToken);

        assertNull(getRoot().getChild(filePath));
    }

