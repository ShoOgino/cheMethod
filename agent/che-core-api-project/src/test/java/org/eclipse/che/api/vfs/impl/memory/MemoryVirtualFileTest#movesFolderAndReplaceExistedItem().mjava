    @Test
    public void movesFolderAndReplaceExistedItem() throws Exception {
        VirtualFile folder = getRoot().createFolder(generateFolderName());
        VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);
        String fileName = file.getName();
        Path folderPath = folder.getPath();
        VirtualFile targetFolder = getRoot().createFolder(generateFolderName());
        targetFolder.createFolder(folder.getName());

        VirtualFile movedFolder = folder.moveTo(targetFolder, null, true, null);
        assertNotNull(getRoot().getChild(movedFolder.getPath()));

        VirtualFile movedFile = movedFolder.getChild(Path.of(file.getName()));
        assertEquals(DEFAULT_CONTENT, movedFile.getContentAsString());

        assertNull(getRoot().getChild(folderPath.newPath(fileName)));
        assertNull(getRoot().getChild(folderPath));
    }

