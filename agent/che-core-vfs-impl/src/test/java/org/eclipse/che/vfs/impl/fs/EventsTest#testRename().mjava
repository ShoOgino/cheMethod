    public void testRename() throws Exception {
        String requestPath = SERVICE_URI + "rename/" + fileId + '?' + "newname=" + "_FILE_NEW_NAME_";
        ContainerResponse response = launcher.service(HttpMethod.POST, requestPath, BASE_URI, null, null, null);

        assertEquals("Error: " + response.getEntity(), 200, response.getStatus());

        String expectedPath = testRootPath + '/' + "_FILE_NEW_NAME_";
        assertTrue(exists(expectedPath));
        assertFalse(exists(filePath));
        assertEquals(1, events.size());
        VirtualFileEvent event = events.get(0);
        assertEquals(VirtualFileEvent.ChangeType.RENAMED, event.getType());
        assertFalse(event.isFolder());
        assertEquals(expectedPath, event.getPath());
        assertEquals(filePath, ((RenameEvent)event).getOldPath());
    }

