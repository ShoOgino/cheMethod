    private ContainerResponse doUploadFile(String parentId,
                                           String fileName,
                                           String fileContent,
                                           String formMediaType,
                                           String formFileName,
                                           boolean formOverwrite) throws Exception {
        String requestPath = SERVICE_URI + "uploadfile/" + parentId;
        Map<String, List<String>> headers = new HashMap<>(1);
        headers.put(HttpHeaders.CONTENT_TYPE, Arrays.asList("multipart/form-data; boundary=abcdef"));
        byte[] formData = String.format(uploadBodyPattern,
                                        fileName, fileContent, formMediaType, formFileName, formOverwrite)
                                .getBytes();
        EnvironmentContext env = new EnvironmentContext();
        env.put(HttpServletRequest.class, new MockHttpServletRequest("", new ByteArrayInputStream(formData),
                                                                     formData.length, HttpMethod.POST, headers));
        ByteArrayContainerResponseWriter writer = new ByteArrayContainerResponseWriter();
        ContainerResponse response = launcher.service(HttpMethod.POST, requestPath, BASE_URI, headers, formData, writer, env);
        if (writer.getBody() != null) {
            log.info(new String(writer.getBody()));
        }
        return response;
    }

