    public void testUploadNewFileCustomizeMediaType() throws Exception {
        final String fileName = "testUploadNewFileCustomizeMediaType";
        final String fileContent = "test upload file with custom media type";
        final String formFileName = fileName + ".txt";
        final String formMediaType = MediaType.TEXT_PLAIN; // should be used instead of fileMediaType
        ContainerResponse response =
                doUploadFile(folderId, fileName, fileContent, formMediaType, formFileName, false);
        assertEquals("Error: " + response.getEntity(), 200, response.getStatus());
        assertTrue(((String)response.getEntity()).isEmpty()); // empty if successful
        String expectedPath = folderPath + '/' + formFileName;
        assertTrue("File was not created in expected location. ", exists(expectedPath));
        assertEquals(fileContent, new String(readFile(expectedPath)));
    }

