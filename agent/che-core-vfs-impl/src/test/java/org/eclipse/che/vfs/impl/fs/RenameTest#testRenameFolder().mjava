    public void testRenameFolder() throws Exception {
        List<String> before = flattenDirectory(folderPath);

        final String newName = "_FOLDER_NEW_NAME_";
        String path = SERVICE_URI + "rename/" + folderId + '?' + "newname=" + newName;
        ContainerResponse response = launcher.service(HttpMethod.POST, path, BASE_URI, null, null, null);
        assertEquals("Error: " + response.getEntity(), 200, response.getStatus());

        assertFalse("Folder must be removed. ", exists(folderPath));
        String expectedPath = testRootPath + '/' + newName;
        assertTrue("Not found new folder in expected location. ", exists(expectedPath));

        List<String> after = flattenDirectory(expectedPath);
        // Be sure there are no missed files.
        before.removeAll(after);
        assertTrue(String.format("Missed items: %s", before), before.isEmpty());

        validateProperties(expectedPath, properties, true);
    }

