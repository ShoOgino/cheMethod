    public void testRenameFileLocked() throws Exception {
        final String newName = "_FILE_NEW_NAME_";
        final String newMediaType = "text/*;charset=ISO-8859-1";
        String requestPath = SERVICE_URI + "rename/" + lockedFileId +
                             '?' + "newname=" + newName + '&' + "mediaType=" + newMediaType + '&' + "lockToken=" + lockToken;
        ContainerResponse response = launcher.service(HttpMethod.POST, requestPath, BASE_URI, null, null, null);
        assertEquals("Error: " + response.getEntity(), 200, response.getStatus());
        String expectedPath = testRootPath + '/' + newName;
        assertFalse("File must be removed. ", exists(lockedFilePath));
        assertTrue("Not found new file in expected location. ", exists(expectedPath));
        assertTrue(Arrays.equals(DEFAULT_CONTENT_BYTES, readFile(expectedPath)));

        Map<String, String[]> expectedProperties = new HashMap<>(1);
        expectedProperties.put("vfs:mimeType", new String[]{newMediaType});
        validateProperties(expectedPath, expectedProperties);
    }

