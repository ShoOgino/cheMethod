    String pathToId(Path path) {
        try {
            return Base64.encodeBase64URLSafeString((workspaceId + ':' + (path.isRoot() ? "root" : path.toString())).getBytes("UTF-8"));
        } catch (UnsupportedEncodingException e) {
            // Should never happen.
            throw new IllegalStateException(e.getMessage(), e);
        }
    }

