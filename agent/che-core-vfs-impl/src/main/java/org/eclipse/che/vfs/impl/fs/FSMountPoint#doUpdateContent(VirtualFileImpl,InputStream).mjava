    private void doUpdateContent(VirtualFileImpl virtualFile, InputStream content) throws ServerException {
        final PathLockFactory.PathLock lock = pathLockFactory.getLock(virtualFile.getVirtualFilePath(), true).acquire(LOCK_FILE_TIMEOUT);
        try {
            _doUpdateContent(virtualFile, content);
        } finally {
            lock.release();
        }
    }

