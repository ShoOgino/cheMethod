    @Override
    public Searcher getSearcher(final MountPoint mountPoint, boolean create) throws ServerException {
        final java.io.File vfsIoRoot = ((VirtualFileImpl)mountPoint.getRoot()).getIoFile();
        CleanableSearcher searcher = instances.get(vfsIoRoot);
        if (searcher == null && create) {
            final java.io.File myIndexDir;
            final CleanableSearcher newSearcher;
            try {
                Files.createDirectories(indexRootDir.toPath());
                myIndexDir = Files.createTempDirectory(indexRootDir.toPath(), null).toFile();
                final VirtualFileFilter filter;
                if (!filters.isEmpty()) {
                    final VirtualFileFilter[] myFilters = new VirtualFileFilter[filters.size() + 1];
                    final Iterator<VirtualFileFilter> iterator = filters.iterator();
                    for (int i = 1; i < myFilters.length; i++) {
                        myFilters[i] = iterator.next();
                    }
                    myFilters[0] = new MediaTypeFilter();
                    filter = VirtualFileFilters.createAndFilter(myFilters);
                } else {
                    filter = new MediaTypeFilter();
                }
                newSearcher = new CleanableSearcher(this, myIndexDir, filter);
            } catch (IOException e) {
                throw new ServerException("Unable create searcher. " + e.getMessage(), e);
            }
            searcher = instances.putIfAbsent(vfsIoRoot, newSearcher);
            if (searcher == null) {
                searcher = newSearcher;
                searcher.init(mountPoint);
            } else {
                // not need this directory
                myIndexDir.delete();
            }
        }
        return searcher;
    }

