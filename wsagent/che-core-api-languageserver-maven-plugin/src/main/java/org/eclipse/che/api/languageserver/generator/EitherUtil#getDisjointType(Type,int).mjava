    private static Type getDisjointType(Type type, int index) {
        if (type instanceof ParameterizedType) {
            final ParameterizedType parameterizedType = (ParameterizedType)type;
            return parameterizedType.getActualTypeArguments()[index];
        }
        if (type instanceof Class) {
            final Class<?> cls = (Class<?>)type;
            return cls.getTypeParameters()[index];
        }
        return null;
    }

