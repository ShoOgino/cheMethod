    private void addProblem(String testKey, Throwable throwable, boolean isError) {
        StringWriter sw = new StringWriter();
        TestingOutput.LineType lineType = isError ? TestingOutput.LineType.ERROR
            : TestingOutput.LineType.FAILURE;
        try (PrintWriter w = new PrintWriter(sw)) {
            throwable.printStackTrace(w);
        }
        writeLine("  [" + lineType.name() + "]", lineType);
        for (String line : sw.getBuffer().toString().split("\\n")) {
            if (line.contains(stackTraceRoot)) {
                break;
            }
            writeLine("    " + line, TestingOutput.LineType.DETAIL);
        }
    }

