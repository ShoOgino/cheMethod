    public void flush() {
        for (Map.Entry<ProcessOutputType, StringBuilder> entry : buffers.entrySet()) {
            StringBuilder buffer = entry.getValue();
            if (buffer.length() > 0) {
                consumer.consume(buffer.toString(), entry.getKey());
                buffer.setLength(0);
            }
        }
    }

