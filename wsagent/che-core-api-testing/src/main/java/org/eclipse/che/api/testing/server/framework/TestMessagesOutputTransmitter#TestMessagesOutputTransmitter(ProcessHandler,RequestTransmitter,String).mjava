    public TestMessagesOutputTransmitter(ProcessHandler processHandler, RequestTransmitter requestTransmitter, String endpoint) {
        this.processHandler = processHandler;
        this.requestTransmitter = requestTransmitter;
        this.endpoint = endpoint;

        lineSplitter = new LineSplitter(this::processLine);

        processHandler.addProcessListener(new ProcessListener() {
            @Override
            public void onStart(ProcessEvent event) {
                processStartTesting();
            }

            @Override
            public void onText(ProcessEvent event, ProcessOutputType outputType) {
                process(event.getText(), outputType);
            }

            @Override
            public void onProcessTerminated(ProcessEvent event) {
                processTestingStopped();
            }

            @Override
            public void onProcessWillTerminate(ProcessEvent event) {
                //ignore
            }
        });

        processHandler.startNotify();
    }

