  private static ServerTestingMessage internalParse(String text) {

    try {
      JsonParser parser = new JsonParser();
      JsonObject jsonObject = parser.parse(text).getAsJsonObject();

      String name = jsonObject.getAsJsonPrimitive(NAME).getAsString();
      Map<String, String> attributes = new HashMap<>();
      if (jsonObject.has(ATTRIBUTES)) {
        Set<Map.Entry<String, JsonElement>> entries =
            jsonObject.getAsJsonObject(ATTRIBUTES).entrySet();
        for (Map.Entry<String, JsonElement> entry : entries) {
          attributes.put(entry.getKey(), unescape(entry.getValue().getAsString()));
        }
      }

      return new ServerTestingMessage(name, attributes);
    } catch (Throwable t) {
      throw new RuntimeException(t);
    }
  }

