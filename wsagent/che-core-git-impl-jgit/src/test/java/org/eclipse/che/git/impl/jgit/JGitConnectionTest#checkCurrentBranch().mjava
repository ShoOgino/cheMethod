    /**
     * Check branch using current repository reference is returned
     *
     * @throws Exception
     *         if it fails
     */
    @Test
    public void checkCurrentBranch() throws Exception {
        String branchTest = "helloWorld";
        Ref ref = mock(Ref.class);
        when(repository.exactRef(Constants.HEAD)).thenReturn(ref);
        when(ref.getLeaf()).thenReturn(ref);
        when(ref.getName()).thenReturn(branchTest);
        String branchName = jGitConnection.getCurrentBranch();

        assertEquals(branchName, branchTest);
    }

