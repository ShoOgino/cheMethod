  /** To add deleted files in index it is required to perform git rm on them */
  private void addDeletedFilesToIndex(List<String> filePatterns) throws GitAPIException {
    Set<String> deletedFiles = getGit().status().call().getMissing();
    if (!deletedFiles.isEmpty()) {
      RmCommand rmCommand = getGit().rm();
      if (filePatterns.contains(".")) {
        deletedFiles.forEach(rmCommand::addFilepattern);
      } else {
        filePatterns.forEach(
            filePattern ->
                deletedFiles
                    .stream()
                    .filter(deletedFile -> deletedFile.startsWith(filePattern))
                    .forEach(rmCommand::addFilepattern));
      }
      rmCommand.call();
    }
  }

