  @Override
  public Status status(List<String> filter) throws GitException {
    if (!RepositoryCache.FileKey.isGitRepository(getRepository().getDirectory(), FS.DETECTED)) {
      throw new GitException("Not a git repository");
    }
    String branchName = getCurrentBranch();
    StatusCommand statusCommand = getGit().status();
    if (filter != null) {
      filter.forEach(statusCommand::addPath);
    }
    return new JGitStatusImpl(branchName, statusCommand);
  }

