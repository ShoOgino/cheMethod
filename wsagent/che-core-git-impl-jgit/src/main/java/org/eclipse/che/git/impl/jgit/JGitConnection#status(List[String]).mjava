  @Override
  public Status status(List<String> filter) throws GitException {
    if (!isInsideWorkTree()) {
      throw new GitInvalidRepositoryException(NOT_A_GIT_REPOSITORY_ERROR);
    }
    // Status can be not actual, if commit is in progress.
    if (COMMITTING_REPOSITORIES.contains(getRepository().getDirectory().getPath())) {
      throw new GitCommitInProgressException(COMMIT_IN_PROGRESS_ERROR);
    }
    String branchName = getCurrentBranch();
    StatusCommand statusCommand = getGit().status();
    if (filter != null) {
      filter.forEach(statusCommand::addPath);
    }
    return new JGitStatusImpl(branchName, statusCommand);
  }

