  @Override
  public RevertResult revert(String commit) throws GitException {
    String newHead = null;
    RevertCommand revertCommand = getGit().revert();
    try {
      revertCommand.include(this.repository.resolve(commit));
      RevCommit revCommit = revertCommand.call();
      // JGit sets commit author of revert commit from OS preferences.
      // Do amend commit to reset commit author.
      if (revCommit != null && revCommit.getFullMessage() != null) {
        newHead = commit(create(revCommit.getFullMessage()).withAmend(true)).getId();
      }
    } catch (IOException | GitAPIException exception) {
      throw new GitException(exception.getMessage(), exception);
    }
    return newDto(RevertResult.class)
        .withRevertedCommits(getRevertedCommits(revertCommand))
        .withConflicts(getRevertConflicts(revertCommand))
        .withNewHead(newHead);
  }

