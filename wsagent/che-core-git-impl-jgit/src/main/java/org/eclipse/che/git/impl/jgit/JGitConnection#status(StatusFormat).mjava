  @Override
  public Status status(StatusFormat format) throws GitException {
    if (!RepositoryCache.FileKey.isGitRepository(getRepository().getDirectory(), FS.DETECTED)) {
      throw new GitException("Not a git repository");
    }
    String branchName = getCurrentBranch();
    return new JGitStatusImpl(branchName, getGit().status(), format);
  }

