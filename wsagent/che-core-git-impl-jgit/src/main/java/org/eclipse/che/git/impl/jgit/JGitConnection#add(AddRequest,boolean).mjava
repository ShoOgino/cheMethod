    /*
     * Perform the "add" according to the add request. isUpdate is always used
     * as the value for the "update" parameter instead of the value in the
     * AddRequest.
     */
    private void add(AddRequest request, boolean isUpdate) throws GitException {
        AddCommand addCommand = getGit().add().setUpdate(isUpdate);

        List<String> filePatterns = request.getFilepattern();
        if (filePatterns.isEmpty()) {
            filePatterns = AddRequest.DEFAULT_PATTERN;
        }
        filePatterns.forEach(addCommand::addFilepattern);

        try {
            addCommand.call();
        } catch (GitAPIException exception) {
            throw new GitException(exception.getMessage(), exception);
        }
    }

