    @Test
    public void testSetPreferences(ITestContext ctx) throws Exception {
        final RemotePreferenceDao remoteDao = new RemotePreferenceDao(getUrl(ctx), new DefaultHttpJsonRequestFactory());
        final Map<String, String> prefs = Collections.singletonMap("pref1", "value1");

        remoteDao.setPreferences(TEST_SUBJECT.getUserId(), prefs);

        verify(preferenceManager).save(TEST_SUBJECT.getUserId(), prefs);
    }

