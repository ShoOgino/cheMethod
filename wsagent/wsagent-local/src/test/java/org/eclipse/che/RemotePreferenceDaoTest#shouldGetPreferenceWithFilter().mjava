    @Test
    public void shouldGetPreferenceWithFilter() throws Exception {
        final Map<String, String> prefs = singletonMap("name", "value");
        when(response.asProperties()).thenReturn(prefs);

        final Map<String, String> result = preferenceDao.getPreferences(TEST_SUBJECT.getUserId(), "filter");

        assertEquals(result, prefs);
    }

