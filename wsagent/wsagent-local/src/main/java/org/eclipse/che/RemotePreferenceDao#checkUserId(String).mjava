    /**
     * Checks that {@code userId} is equal to current user id.
     */
    private void checkUserId(String userId) throws ServerException {
        if (!EnvironmentContext.getCurrent().getUser().getId().equals(userId)) {
            throw new ServerException("This method is not allowed for user '" + userId + "'");
        }
    }

