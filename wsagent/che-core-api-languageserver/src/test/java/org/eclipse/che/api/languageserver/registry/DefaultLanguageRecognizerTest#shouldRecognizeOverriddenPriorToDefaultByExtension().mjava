  @Test
  public void shouldRecognizeOverriddenPriorToDefaultByExtension() throws Exception {
    LanguageDescription notExpected = new LanguageDescription();
    notExpected.setFileExtensions(singletonList("java"));
    notExpected.setLanguageId("expectedId");
    when(defaultLanguages.getAll()).thenReturn(Collections.singleton(notExpected));

    LanguageDescription expected = new LanguageDescription();
    expected.setFileExtensions(singletonList("java"));
    expected.setLanguageId("notExpectedId");
    languages.add(expected);

    LanguageDescription language = recognizer.recognizeByPath("/project/Main.java");

    assertEquals(language, expected);
    assertNotEquals(language, notExpected);
  }

