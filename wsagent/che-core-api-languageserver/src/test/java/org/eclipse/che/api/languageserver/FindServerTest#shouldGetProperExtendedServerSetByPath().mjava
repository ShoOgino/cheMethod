  @Test
  public void shouldGetProperExtendedServerSetByPath() {
    when(findId.byPath(WS_PATH)).thenReturn(ImmutableSet.of(ID_1));

    registryContainer.serverCapabilitiesRegistry.add(ID_1, serverCapabilities);
    registryContainer.languageServerRegistry.add(ID_1, languageServer);

    when(languageServer.getTextDocumentService()).thenReturn(textDocumentService);
    when(languageServer.getWorkspaceService()).thenReturn(workspaceService);

    Set<ExtendedLanguageServer> extendedLanguageServers = findServer.byPath(WS_PATH);

    assertEquals(1, extendedLanguageServers.size());
    ExtendedLanguageServer extendedLanguageServer = extendedLanguageServers.iterator().next();

    assertEquals(extendedLanguageServer.getCapabilities(), serverCapabilities);
    assertEquals(extendedLanguageServer.getId(), ID_1);
    assertEquals(extendedLanguageServer.getWorkspaceService(), workspaceService);
    assertEquals(extendedLanguageServer.getTextDocumentService(), textDocumentService);
  }

