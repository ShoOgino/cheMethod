    @Test
    public void testRegisterFileWatcher() throws Exception {
        ArgumentCaptor<ServerInitializerObserver> argumentCaptor = ArgumentCaptor.forClass(ServerInitializerObserver.class);
        watcher = new LanguageServerFileWatcher(watcherManager, initializer);
        verify(initializer).addObserver(argumentCaptor.capture());
        ServerInitializerObserver value = argumentCaptor.getValue();

        LanguageServerDescription description =
                new LanguageServerDescription("foo", Collections.singletonList("bar"), Collections.emptyList(),
                                              Collections.singletonList("glob:*.foo"));
        when(launcher.getDescription()).thenReturn(description);
        value.onServerInitialized(launcher, server, null, null);

        ArgumentCaptor<PathMatcher> pathMatcherCaptor = ArgumentCaptor.forClass(PathMatcher.class);
        verify(watcherManager).registerByMatcher(pathMatcherCaptor.capture(), any(), any(), any());
        assertTrue(pathMatcherCaptor.getValue().matches(new File("bar.foo").toPath()));
    }

