    @Test
    public void initializerShouldNotifyObservers() throws Exception {
        when(languageDescription.getLanguageId()).thenReturn("languageId");
        when(server.initialize(any(InitializeParams.class))).thenReturn(completableFuture);

        when(launcher.launch(anyString(), any())).thenReturn(server);
        when(launcher.getDescription()).thenReturn(serverDescription);
        when(serverDescription.getId()).thenReturn("launcherId");
        doNothing().when(initializer).registerCallbacks(any(), any());

        initializer.addObserver(observer);
        Pair<LanguageServer, InitializeResult> initResult = initializer.initialize(launcher, null, "/path").get();

        assertEquals(server, initResult.first);
        verify(observer, timeout(2000)).onServerInitialized(eq(launcher), eq(server), any(ServerCapabilities.class), eq("/path"));
    }

