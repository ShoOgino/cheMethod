    @Test
    public void testListConversion() {
        ExtendedCompletionList ecl = new ExtendedCompletionList();
        ecl.setInComplete(true);
        List<ExtendedCompletionItem> items = new ArrayList<>();
        ExtendedCompletionItem item = new ExtendedCompletionItemDto();
        item.setTextEdit(new TextEdit(new Range(new Position(1, 2), new Position(3, 4)), "changed text"));

        // cannot unmarshal object type stuff from json. So need to set json
        // element for equality test to work.
        item.setData(new ParameterInformationDto(new ParameterInformation("the label", "the doc")).toJsonElement());
        items.add(item);
        ecl.setItems(items);

        ExtendedCompletionListDto originalDto = new ExtendedCompletionListDto(ecl);
        Assert.assertTrue(reflectionEquals(originalDto, ecl));
        String jsonString = originalDto.toJson();
        ExtendedCompletionListDto convertedDto = ExtendedCompletionListDto.fromJson(jsonString);
        Assert.assertTrue(reflectionEquals(originalDto, convertedDto));
    }

