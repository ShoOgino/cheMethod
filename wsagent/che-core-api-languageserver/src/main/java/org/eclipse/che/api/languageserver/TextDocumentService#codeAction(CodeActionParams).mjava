  private List<CommandDto> codeAction(CodeActionParams params) {
    TextDocumentIdentifier textDocument = params.getTextDocument();
    String wsPath = textDocument.getUri();
    String uri = prefixURI(wsPath);
    textDocument.setUri(uri);
    List<CommandDto> result = new ArrayList<>();
    Set<ExtendedLanguageServer> servers = findServer.byPath(wsPath);
    LSOperation<ExtendedLanguageServer, List<Either<Command, CodeAction>>> op =
        new LSOperation<ExtendedLanguageServer, List<Either<Command, CodeAction>>>() {

          @Override
          public boolean canDo(ExtendedLanguageServer server) {
            return truish(server.getCapabilities().getCodeActionProvider());
          }

          @Override
          public CompletableFuture<List<Either<Command, CodeAction>>> start(
              ExtendedLanguageServer element) {
            return element.getTextDocumentService().codeAction(params);
          }

          @Override
          public boolean handleResult(
              ExtendedLanguageServer element, List<Either<Command, CodeAction>> res) {
            for (Either<Command, CodeAction> cmd : res) {
              if (cmd.isLeft()) {
                result.add(new CommandDto(cmd.getLeft()));
              } else {
                // see https://github.com/eclipse/che/issues/11140
                LOG.warn("Ignoring code action: {}", cmd.getRight());
              }
            }
            return false;
          }
        };
    OperationUtil.doInParallel(servers, op, 10000);
    return result;
  }

