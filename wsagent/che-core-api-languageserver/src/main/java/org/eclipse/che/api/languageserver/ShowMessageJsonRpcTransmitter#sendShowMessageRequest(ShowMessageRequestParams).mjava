  public CompletableFuture<MessageActionItem> sendShowMessageRequest(
      ShowMessageRequestParams requestParams) {
    CompletableFuture<MessageActionItem> result = new CompletableFuture<>();
    if (showMessageRequestEndpointIds.isEmpty()) {
      result.complete(null);
    }
    for (String endpointId : endpointIds) {
      requestTransmitter
          .newRequest()
          .endpointId(endpointId)
          .methodName("window/showMessageRequest")
          .paramsAsDto(requestParams)
          .sendAndReceiveResultAsDto(MessageActionItem.class)
          .onSuccess(
              actionItem -> {
                if (!result.isDone()) {
                  result.complete(actionItem);
                }
              })
          .onFailure(
              jsonRpcError ->
                  result.completeExceptionally(new Exception(jsonRpcError.getMessage())));
    }

    return result;
  }

