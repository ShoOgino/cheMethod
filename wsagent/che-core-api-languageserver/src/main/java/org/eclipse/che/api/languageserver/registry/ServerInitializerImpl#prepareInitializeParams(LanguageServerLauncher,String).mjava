  private InitializeParams prepareInitializeParams(
      LanguageServerLauncher launcher, String projectPath) {
    InitializeParams initializeParams = new InitializeParams();

    if (launcher.isLocal()) {
      initializeParams.setProcessId(PROCESS_ID);
    } else {
      initializeParams.setProcessId(null);
    }

    initializeParams.setRootPath(LanguageServiceUtils.removeUriScheme(projectPath));
    initializeParams.setRootUri(projectPath);

    if (CLIENT_CAPABILITIES == null) {
      CLIENT_CAPABILITIES = new ClientCapabilities();
      WorkspaceClientCapabilities workspace = new WorkspaceClientCapabilities();
      workspace.setApplyEdit(false); // Change when support added
      workspace.setDidChangeConfiguration(new DidChangeConfigurationCapabilities());
      workspace.setDidChangeWatchedFiles(new DidChangeWatchedFilesCapabilities());
      workspace.setExecuteCommand(new ExecuteCommandCapabilities());
      workspace.setSymbol(new SymbolCapabilities());
      workspace.setWorkspaceEdit(new WorkspaceEditCapabilities());
      CLIENT_CAPABILITIES.setWorkspace(workspace);

      TextDocumentClientCapabilities textDocument = new TextDocumentClientCapabilities();
      textDocument.setCodeAction(new CodeActionCapabilities(false));
      textDocument.setCodeLens(new CodeLensCapabilities(false));
      textDocument.setCompletion(new CompletionCapabilities(new CompletionItemCapabilities(false)));
      textDocument.setDefinition(new DefinitionCapabilities(false));
      textDocument.setDocumentHighlight(new DocumentHighlightCapabilities(false));
      textDocument.setDocumentLink(new DocumentLinkCapabilities(false));
      textDocument.setDocumentSymbol(new DocumentSymbolCapabilities(false));
      textDocument.setFormatting(new FormattingCapabilities(false));
      textDocument.setHover(new HoverCapabilities(false));
      textDocument.setOnTypeFormatting(new OnTypeFormattingCapabilities(false));
      textDocument.setRangeFormatting(new RangeFormattingCapabilities(false));
      textDocument.setReferences(new ReferencesCapabilities(false));
      textDocument.setRename(new RenameCapabilities(false));
      textDocument.setSignatureHelp(new SignatureHelpCapabilities(false));
      textDocument.setSynchronization(new SynchronizationCapabilities(true, false, true));
      CLIENT_CAPABILITIES.setTextDocument(textDocument);
    }
    initializeParams.setCapabilities(CLIENT_CAPABILITIES);
    return initializeParams;
  }

