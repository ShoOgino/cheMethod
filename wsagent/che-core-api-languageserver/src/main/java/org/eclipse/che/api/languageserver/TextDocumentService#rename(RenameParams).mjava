  private RenameResultDto rename(RenameParams renameParams) {
    String wsPath = renameParams.getTextDocument().getUri();

    Map<String, ExtendedWorkspaceEdit> edits = new ConcurrentHashMap<>();
    Set<ExtendedLanguageServer> servers = findServer.byPath(wsPath);
    LSOperation<ExtendedLanguageServer, WorkspaceEdit> op =
        new LSOperation<ExtendedLanguageServer, WorkspaceEdit>() {
          @Override
          public boolean canDo(ExtendedLanguageServer server) {
            return isImplemented(server.getCapabilities().getRenameProvider());
          }

          @Override
          public CompletableFuture<WorkspaceEdit> start(ExtendedLanguageServer element) {
            RenameParams clonedRenameParams = lsParamsCloner.clone(renameParams);
            URI uri = languageServerPathTransformer.toFsURI(element.getId(), wsPath);
            clonedRenameParams.getTextDocument().setUri(uri.toString());

            return element.getTextDocumentService().rename(clonedRenameParams);
          }

          @Override
          public boolean handleResult(ExtendedLanguageServer element, WorkspaceEdit result) {

            addRenameResult(edits, element.getId(), result);
            return true;
          }
        };
    OperationUtil.doInParallel(servers, op, TimeUnit.SECONDS.toMillis(30));
    return new RenameResultDto(new RenameResult(edits));
  }

