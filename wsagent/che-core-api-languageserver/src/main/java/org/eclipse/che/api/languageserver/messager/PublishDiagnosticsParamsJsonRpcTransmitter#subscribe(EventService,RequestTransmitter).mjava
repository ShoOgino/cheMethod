  @Inject
  private void subscribe(EventService eventService, RequestTransmitter requestTransmitter) {
    eventService.subscribe(
        event -> {
          PublishDiagnosticsParams params = event.getParams();
          if (params.getUri() != null) {
            params.setUri(params.getUri().substring(16));
          }
          endpointIds.forEach(
              endpointId ->
                  requestTransmitter
                      .newRequest()
                      .endpointId(endpointId)
                      .methodName("textDocument/publishDiagnostics")
                      .paramsAsDto(new ExtendedPublishDiagnosticsParamsDto(event))
                      .sendAndSkipResult());
        },
        ExtendedPublishDiagnosticsParams.class);
  }

