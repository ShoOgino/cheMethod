  private VirtualFile mockFile(String path, byte[] content) throws Exception {
    VirtualFile file = mock(VirtualFile.class);
    when(file.isFile()).thenReturn(true);
    when(file.getPath()).thenReturn(Path.of(path));
    when(file.toString()).thenReturn(path);
    when(file.getContent()).thenReturn(new ByteArrayInputStream(content));
    accept(file);
    return file;
  }

