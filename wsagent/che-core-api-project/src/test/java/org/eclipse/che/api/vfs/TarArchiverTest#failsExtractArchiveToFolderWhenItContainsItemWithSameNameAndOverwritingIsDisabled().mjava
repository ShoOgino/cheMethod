  @Test
  public void failsExtractArchiveToFolderWhenItContainsItemWithSameNameAndOverwritingIsDisabled()
      throws Exception {
    byte[] archive = createTestTarArchive();
    VirtualFile folder = vfsRoot.createFolder("folder");
    VirtualFile arc = folder.createFolder("arc");
    VirtualFile lockedFile = arc.createFolder("a").createFile("_a.txt", "xxx");

    try {
      new TarArchiver(folder).extract(new ByteArrayInputStream(archive), false, 0);
      thrown.expect(ConflictException.class);
    } catch (ConflictException expected) {
      assertEquals("xxx", lockedFile.getContentAsString());
    }
  }

