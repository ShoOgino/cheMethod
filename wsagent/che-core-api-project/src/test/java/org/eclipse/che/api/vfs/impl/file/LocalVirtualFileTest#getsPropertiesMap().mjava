  @Test
  public void getsPropertiesMap() throws Exception {
    VirtualFile root = getRoot();
    VirtualFile file = root.createFile(generateFileName(), "");
    Map<String, String> properties = ImmutableMap.of("property1", "value1", "property2", "value2");
    file.updateProperties(properties);
    assertionHelper.assertThatMetadataIoFileHasContent(
        file.getPath(), serializeVirtualFileMetadata(properties));
    assertEquals(properties, file.getProperties());
  }

