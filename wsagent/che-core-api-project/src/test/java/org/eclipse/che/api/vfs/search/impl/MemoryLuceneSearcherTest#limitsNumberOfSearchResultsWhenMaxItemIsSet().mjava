  @Test
  public void limitsNumberOfSearchResultsWhenMaxItemIsSet() throws Exception {
    VirtualFileSystem virtualFileSystem = virtualFileSystem();
    for (int i = 0; i < 100; i++) {
      virtualFileSystem
          .getRoot()
          .createFile(String.format("file%02d", i), TEST_CONTENT[i % TEST_CONTENT.length]);
    }
    searcher.init(virtualFileSystem);

    SearchResult result = searcher.search(new QueryExpression().setText("mission").setMaxItems(5));

    assertEquals(25, result.getTotalHits());
    assertEquals(5, result.getFilePaths().size());
  }

