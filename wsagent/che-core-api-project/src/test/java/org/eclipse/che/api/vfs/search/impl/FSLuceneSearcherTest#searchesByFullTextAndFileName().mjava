  @Test
  public void searchesByFullTextAndFileName() throws Exception {
    VirtualFileSystem virtualFileSystem = virtualFileSystem();
    VirtualFile folder = virtualFileSystem.getRoot().createFolder("folder");
    folder.createFile("xxx.txt", TEST_CONTENT[2]);
    folder.createFile("zzz.txt", TEST_CONTENT[2]);
    searcher.init(virtualFileSystem);

    SearchResult result =
        searcher.search(
            new QueryExpression().setText("*be*").setName("xxx.txt").setIncludePositions(true));
    List<String> paths = result.getFilePaths();
    assertEquals(newArrayList("/folder/xxx.txt"), paths);
    assertEquals(result.getResults().get(0).getData().size(), 4);
  }

