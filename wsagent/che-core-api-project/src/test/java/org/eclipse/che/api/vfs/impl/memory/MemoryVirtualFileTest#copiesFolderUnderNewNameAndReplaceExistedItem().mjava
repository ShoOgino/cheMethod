    @Test
    public void copiesFolderUnderNewNameAndReplaceExistedItem() throws Exception {
        VirtualFile folder = getRoot().createFolder(generateFolderName());
        VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);

        VirtualFile targetFolder = getRoot().createFolder(generateFolderName());
        targetFolder.createFolder("new_name");

        VirtualFile copiedFolder = folder.copyTo(targetFolder, "new_name", true);
        assertNotNull(getRoot().getChild(copiedFolder.getPath()));

        VirtualFile copiedFile = copiedFolder.getChild(Path.of(file.getName()));
        assertEquals(file.getContentAsString(), copiedFile.getContentAsString());
    }

