  @Test
  public void shouldThrowConflictExceptionAtCreatingBatchProjectsWhenProjectWithPathAlreadyExist()
      throws Exception {
    final String path = "/somePath";
    final NewProjectConfig config =
        createProjectConfigObject("project", path, BaseProjectType.ID, null);

    final List<NewProjectConfig> configs = new ArrayList<>(1);
    configs.add(config);

    pm.createBatchProjects(configs, false, new ProjectOutputLineConsumerFactory("ws", 300));
    checkProjectExist(path);
    assertEquals(1, projectRegistry.getProjects().size());

    try {
      pm.createBatchProjects(configs, false, new ProjectOutputLineConsumerFactory("ws", 300));
      fail(
          "ConflictException should be thrown : Project config with the same path is already exists");
    } catch (ConflictException e) {
      assertEquals(1, projectRegistry.getProjects().size());
    }
  }

