  @Test
  public void shouldRunFileUpdateConsumer() throws Exception {
    fileUpdateConsumers.add(fileUpdateConsumerMock);

    File file = rootFolder.newFile(TEST_FILE_NAME);
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    write(file, TEST_FILE_CONTENT);
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    verify(fileUpdateConsumerMock).accept(file.toPath());
  }

