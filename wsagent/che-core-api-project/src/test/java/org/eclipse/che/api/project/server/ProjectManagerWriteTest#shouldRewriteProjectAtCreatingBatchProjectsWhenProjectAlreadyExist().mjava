    @Test
    public void shouldRewriteProjectAtCreatingBatchProjectsWhenProjectAlreadyExist() throws Exception {
        final String projectPath = "/testProject";
        final String importType1 = "importType1";
        final String importType2 = "importType2";

        final String [] paths1 = {"folder1/", "folder1/file1.txt"};
        final List<String> children1 = new ArrayList<>(Arrays.asList(paths1));
        registerImporter(importType1, prepareZipArchiveBasedOn(children1));

        final String [] paths2 = {"folder2/", "folder2/file2.txt"};
        final List<String> children2 = new ArrayList<>(Arrays.asList(paths2));
        registerImporter(importType2, prepareZipArchiveBasedOn(children2));

        final SourceStorageDto source1 = DtoFactory.newDto(SourceStorageDto.class).withLocation("someLocation").withType(importType1);
        final NewProjectConfigDto config1 = createProjectConfigObject("testProject1", projectPath, "blank", source1);

        final SourceStorageDto source2 = DtoFactory.newDto(SourceStorageDto.class).withLocation("someLocation").withType(importType2);
        final NewProjectConfigDto config2 = createProjectConfigObject("testProject2", projectPath, "blank", source2);

        final List<NewProjectConfig> configs = new ArrayList<>(1);
        configs.add(config1);

        pm.createBatchProjects(configs, false);

        final FolderEntry projectFolder1 = projectRegistry.getProject(projectPath).getBaseFolder();
        checkProjectExist(projectPath);
        checkChildrenFor(projectFolder1, children1);
        assertEquals(1, projectRegistry.getProjects().size());

        configs.clear();
        configs.add(config2);
        pm.createBatchProjects(configs, true);

        final FolderEntry projectFolder2 = projectRegistry.getProject(projectPath).getBaseFolder();
        checkProjectExist(projectPath);
        checkChildrenFor(projectFolder2, children2);
        assertEquals(1, projectRegistry.getProjects().size());
        assertNull(projectFolder2.getChild("folder1/"));
        assertNull(projectFolder2.getChild("folder1/file1.txt"));
    }

