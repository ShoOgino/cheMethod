  @Test
  public void resetsSearcherInProviderAfterClosingSearcher() throws Exception {
    VirtualFileSystem virtualFileSystem = mockVirtualFileSystem();
    Searcher searcher = memoryLuceneSearcherProvider.getSearcher(virtualFileSystem, true);
    assertNotNull(searcher);
    searcher.close();
    assertNull(memoryLuceneSearcherProvider.getSearcher(virtualFileSystem, false));
  }

