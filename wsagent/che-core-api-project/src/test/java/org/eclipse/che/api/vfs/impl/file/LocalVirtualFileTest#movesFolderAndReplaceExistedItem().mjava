  @Test
  public void movesFolderAndReplaceExistedItem() throws Exception {
    VirtualFile folder = getRoot().createFolder(generateFolderName());
    VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);
    Path folderPath = folder.getPath();
    VirtualFile targetFolder = getRoot().createFolder(generateFolderName());
    targetFolder.createFolder(folder.getName());

    VirtualFile movedFolder = folder.moveTo(targetFolder, null, true, null);

    VirtualFile movedFile = movedFolder.getChild(Path.of(file.getName()));

    assertionHelper.assertThatIoFileExists(movedFolder.getPath());
    assertionHelper.assertThatIoFileHasContent(movedFile.getPath(), DEFAULT_CONTENT_BYTES);
    assertionHelper.assertThatIoFileDoesNotExist(folderPath);
  }

