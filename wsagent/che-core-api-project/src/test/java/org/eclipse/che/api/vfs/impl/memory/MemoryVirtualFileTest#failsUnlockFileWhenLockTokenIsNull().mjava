  @Test
  public void failsUnlockFileWhenLockTokenIsNull() throws Exception {
    VirtualFile root = getRoot();
    VirtualFile file = root.createFile(generateFileName(), DEFAULT_CONTENT);
    file.lock(0);
    try {
      file.unlock(null);
      thrown.expect(ForbiddenException.class);
    } catch (ForbiddenException e) {
      assertTrue(file.isLocked());
    }
  }

