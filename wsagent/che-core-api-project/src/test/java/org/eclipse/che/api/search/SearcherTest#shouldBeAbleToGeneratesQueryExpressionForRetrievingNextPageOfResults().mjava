  @Test
  public void shouldBeAbleToGeneratesQueryExpressionForRetrievingNextPageOfResults()
      throws InvalidQueryException, QueryExecutionException, IOException {
    // given
    for (int i = 0; i < 125; i++) {
      contentBuilder.createFile(
          String.format("file%02d", i), TEST_CONTENT[i % TEST_CONTENT.length]);
    }
    searcher.add(contentBuilder.getCurrentFolder());

    SearchResult result =
        searcher.search(new QueryExpression().setText("spaceflight").setMaxItems(7));

    assertEquals(result.getTotalHits(), 25);

    Optional<QueryExpression> optionalNextPageQueryExpression = result.getNextPageQueryExpression();
    assertTrue(optionalNextPageQueryExpression.isPresent());
    QueryExpression nextPageQueryExpression = optionalNextPageQueryExpression.get();
    assertEquals("spaceflight", nextPageQueryExpression.getText());
    assertEquals(7, nextPageQueryExpression.getSkipCount());
    assertEquals(7, nextPageQueryExpression.getMaxItems());
  }

