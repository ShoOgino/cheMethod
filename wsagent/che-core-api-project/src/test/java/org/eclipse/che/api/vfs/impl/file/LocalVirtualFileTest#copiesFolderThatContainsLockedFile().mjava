    @Test
    public void copiesFolderThatContainsLockedFile() throws Exception {
        VirtualFile folder = getRoot().createFolder(generateFolderName());
        VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);
        file.lock(0);

        VirtualFile targetFolder = getRoot().createFolder(generateFolderName());

        VirtualFile copiedFolder = folder.copyTo(targetFolder);

        VirtualFile copiedFile = copiedFolder.getChild(Path.of(file.getName()));
        assertionHelper.assertThatIoFileExists(copiedFolder.getPath());
        assertionHelper.assertThatIoFilesHaveSameContent(file.getPath(), copiedFile.getPath());
        assertionHelper.assertThatLockIoFileDoesNotExist(copiedFile.getPath());
    }

