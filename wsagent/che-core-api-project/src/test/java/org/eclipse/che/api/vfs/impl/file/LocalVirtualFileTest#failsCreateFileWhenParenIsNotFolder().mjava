  @Test
  public void failsCreateFileWhenParenIsNotFolder() throws Exception {
    VirtualFile parent = getRoot().createFile("parent", "");

    try {
      parent.createFile("file", DEFAULT_CONTENT);
      thrown.expect(ForbiddenException.class);
    } catch (ForbiddenException expected) {
      assertionHelper.assertThatIoFileDoesNotExist(parent.getPath().newPath("file"));
    }
  }

