  @Test
  public void testCreateProjectWithInvalidAttribute() throws Exception {
    // SPECS:
    // Project will be created with problem code = 13(Value for required attribute is not initialized)
    // when required attribute is not initialized
    final String path = "/testCreateProjectInvalidAttributes";
    final String projectType = "pt2";
    final NewProjectConfig config =
        new NewProjectConfigImpl(path, projectType, null, "name", "descr", null, null, null);

    pm.createProject(config, null);

    RegisteredProject project = projectRegistry.getProject(path);
    assertNotNull(project);
    assertNotNull(pm.getProjectsRoot().getChild(path));
    assertEquals(projectType, project.getType());

    List<ProjectProblem> problems = project.getProblems();
    assertNotNull(problems);
    assertFalse(problems.isEmpty());
    assertEquals(1, problems.size());
    assertEquals(13, problems.get(0).getCode());
  }

