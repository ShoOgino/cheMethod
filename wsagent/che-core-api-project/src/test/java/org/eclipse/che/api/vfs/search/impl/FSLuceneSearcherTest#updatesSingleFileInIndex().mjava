  @Test
  public void updatesSingleFileInIndex() throws Exception {
    VirtualFileSystem virtualFileSystem = virtualFileSystem();
    VirtualFile file =
        virtualFileSystem.getRoot().createFolder("aaa").createFile("aaa.txt", TEST_CONTENT[2]);
    searcher.init(virtualFileSystem);

    List<String> paths = searcher.search(new QueryExpression().setText("should")).getFilePaths();
    assertTrue(paths.isEmpty());

    file.updateContent(TEST_CONTENT[1]);
    searcher.update(file);

    paths = searcher.search(new QueryExpression().setText("should")).getFilePaths();

    assertEquals(newArrayList(file.getPath().toString()), paths);
  }

