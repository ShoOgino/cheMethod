  @Test
  public void setsProperty() throws Exception {
    VirtualFile root = getRoot();
    VirtualFile file = root.createFile(generateFileName(), "");

    file.setProperty("property1", "value1");

    Map<String, String> expected = ImmutableMap.of("property1", "value1");
    assertionHelper.assertThatMetadataIoFileHasContent(
        file.getPath(), serializeVirtualFileMetadata(expected));
    assertEquals(expected, file.getProperties());
  }

