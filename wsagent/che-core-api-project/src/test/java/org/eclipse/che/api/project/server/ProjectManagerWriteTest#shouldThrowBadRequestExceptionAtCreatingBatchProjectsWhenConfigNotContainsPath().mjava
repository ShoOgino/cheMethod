  @Test
  public void shouldThrowBadRequestExceptionAtCreatingBatchProjectsWhenConfigNotContainsPath()
      throws Exception { //Path is mandatory field for NewProjectConfig
    final SourceStorageDto source =
        DtoFactory.newDto(SourceStorageDto.class)
            .withLocation("someLocation")
            .withType("importType");
    final NewProjectConfig config =
        createProjectConfigObject("project", null, BaseProjectType.ID, source);

    final List<NewProjectConfig> configs = new ArrayList<>(1);
    configs.add(config);

    try {
      pm.createBatchProjects(configs, false, new ProjectOutputLineConsumerFactory("ws", 300));
      fail("BadRequestException should be thrown : path field is mandatory");
    } catch (BadRequestException e) {
      assertEquals(0, projectRegistry.getProjects().size());
    }
  }

