  private Map<String, String> readArchiveEntries(InputStream archive) throws Exception {
    Map<String, String> entries = newHashMap();
    try (ZipInputStream zip = new ZipInputStream(archive)) {
      ZipEntry zipEntry;
      while ((zipEntry = zip.getNextEntry()) != null) {
        String name = zipEntry.getName();
        String content =
            zipEntry.isDirectory() ? "<none>" : new String(ByteStreams.toByteArray(zip));
        zip.closeEntry();
        entries.put(name, content);
      }
    }
    return entries;
  }

