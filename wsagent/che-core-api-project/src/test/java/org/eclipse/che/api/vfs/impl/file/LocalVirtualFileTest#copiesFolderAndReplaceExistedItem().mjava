  @Test
  public void copiesFolderAndReplaceExistedItem() throws Exception {
    VirtualFile folder = getRoot().createFolder(generateFolderName());
    VirtualFile file = folder.createFile(generateFileName(), DEFAULT_CONTENT);

    VirtualFile targetFolder = getRoot().createFolder(generateFolderName());
    targetFolder.createFolder(folder.getName());

    VirtualFile copiedFolder = folder.copyTo(targetFolder, null, true);

    VirtualFile copiedFile = copiedFolder.getChild(Path.of(file.getName()));
    assertionHelper.assertThatIoFileExists(copiedFolder.getPath());
    assertionHelper.assertThatIoFilesHaveSameContent(file.getPath(), copiedFile.getPath());
  }

