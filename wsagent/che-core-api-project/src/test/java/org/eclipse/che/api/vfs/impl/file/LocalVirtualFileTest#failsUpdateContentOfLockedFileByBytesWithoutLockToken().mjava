    @Test
    public void failsUpdateContentOfLockedFileByBytesWithoutLockToken() throws Exception {
        VirtualFile root = getRoot();
        VirtualFile file = root.createFile(generateFileName(), DEFAULT_CONTENT);
        file.lock(0);

        try {
            file.updateContent("updated content".getBytes());
            thrown.expect(ForbiddenException.class);
        } catch (ForbiddenException expected) {
            assertionHelper.assertThatIoFileHasContent(file.getPath(), DEFAULT_CONTENT_BYTES);
        }
    }

