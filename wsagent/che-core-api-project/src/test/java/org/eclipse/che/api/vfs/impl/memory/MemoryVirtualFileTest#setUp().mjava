    @Before
    public void setUp() throws Exception {
        archiverFactory = mock(ArchiverFactory.class);
        SearcherProvider searcherProvider = mock(SearcherProvider.class);
        fileSystem = new MemoryVirtualFileSystem(archiverFactory, searcherProvider);
        searcher = mock(Searcher.class);
        when(searcherProvider.getSearcher(eq(fileSystem), eq(true))).thenReturn(searcher);
        when(searcherProvider.getSearcher(eq(fileSystem))).thenReturn(searcher);
    }

