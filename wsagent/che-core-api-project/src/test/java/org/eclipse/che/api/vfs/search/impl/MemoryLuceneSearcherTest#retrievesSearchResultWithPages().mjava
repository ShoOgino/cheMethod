  @Test
  public void retrievesSearchResultWithPages() throws Exception {
    VirtualFileSystem virtualFileSystem = virtualFileSystem();
    for (int i = 0; i < 100; i++) {
      virtualFileSystem
          .getRoot()
          .createFile(String.format("file%02d", i), TEST_CONTENT[i % TEST_CONTENT.length]);
    }
    searcher.init(virtualFileSystem);

    SearchResult firstPage =
        searcher.search(new QueryExpression().setText("spaceflight").setMaxItems(8));
    assertEquals(8, firstPage.getFilePaths().size());

    QueryExpression nextPageQueryExpression = firstPage.getNextPageQueryExpression().get();
    nextPageQueryExpression.setMaxItems(100);

    SearchResult lastPage = searcher.search(nextPageQueryExpression);
    assertEquals(17, lastPage.getFilePaths().size());

    assertTrue(Collections.disjoint(firstPage.getFilePaths(), lastPage.getFilePaths()));
  }

