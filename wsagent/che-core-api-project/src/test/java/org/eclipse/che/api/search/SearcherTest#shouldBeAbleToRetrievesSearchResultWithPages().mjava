  @Test
  public void shouldBeAbleToRetrievesSearchResultWithPages()
      throws InvalidQueryException, QueryExecutionException, IOException {
    for (int i = 0; i < 125; i++) {
      contentBuilder.createFile(
          String.format("file%02d", i), TEST_CONTENT[i % TEST_CONTENT.length]);
    }
    searcher.add(contentBuilder.getCurrentFolder());

    SearchResult firstPage =
        searcher.search(new QueryExpression().setText("spaceflight").setMaxItems(8));
    assertEquals(firstPage.getFilePaths().size(), 8);

    QueryExpression nextPageQueryExpression = firstPage.getNextPageQueryExpression().get();
    nextPageQueryExpression.setMaxItems(100);

    SearchResult lastPage = searcher.search(nextPageQueryExpression);
    assertEquals(lastPage.getFilePaths().size(), 17);

    assertTrue(Collections.disjoint(firstPage.getFilePaths(), lastPage.getFilePaths()));
  }

