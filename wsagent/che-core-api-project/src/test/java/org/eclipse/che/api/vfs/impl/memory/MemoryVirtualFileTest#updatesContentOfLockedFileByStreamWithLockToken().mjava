  @Test
  public void updatesContentOfLockedFileByStreamWithLockToken() throws Exception {
    VirtualFile root = getRoot();
    VirtualFile file = root.createFile(generateFileName(), DEFAULT_CONTENT);
    String lockToken = file.lock(0);

    file.updateContent(new ByteArrayInputStream("updated content".getBytes()), lockToken);

    assertEquals("updated content", file.getContentAsString());
  }

