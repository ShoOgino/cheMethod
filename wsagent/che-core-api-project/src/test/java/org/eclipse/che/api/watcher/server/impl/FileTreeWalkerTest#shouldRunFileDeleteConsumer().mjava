  @Test
  public void shouldRunFileDeleteConsumer() throws Exception {
    fileDeleteConsumers.add(fileDeleteConsumerMock);
    fileTreeWalker.initialize();

    File file = rootFolder.newFile(TEST_FILE_NAME);
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    file.delete();
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    verify(fileDeleteConsumerMock).accept(file.toPath());
  }

