    @Test
    public void lockExpiredAfterTimeout() throws Exception {
        VirtualFile file = getRoot().createFile(generateFileName(), DEFAULT_CONTENT);
        file.lock(500);
        assertTrue(file.isLocked());
        Thread.sleep(1000);
        assertFalse(file.isLocked());
    }

