    @Test
    public void shouldRunDirectoryUpdateConsumer() throws Exception {
        directoryUpdateConsumers.add(directoryUpdateConsumerMock);

        File file = rootFolder.newFolder(TEST_FOLDER_NAME);
        sleep(FS_LATENCY_DELAY);
        fileTreeWalker.walk();

        createTempFile(TEST_FILE_NAME, "", file);
        sleep(FS_LATENCY_DELAY);
        fileTreeWalker.walk();

        verify(directoryUpdateConsumerMock).accept(file.toPath());
    }

