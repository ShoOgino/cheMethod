  @Test
  public void extractsArchiveToFolder() throws Exception {
    byte[] archive = createTestTarArchive();
    VirtualFile folder = vfsRoot.createFolder("folder");
    new TarArchiver(folder).extract(new ByteArrayInputStream(archive), false, 0);

    Map<String, String> entries =
        getFileTreeAsList(folder)
            .stream()
            .collect(toMap(f -> getTarEntryName(folder, f), this::readContentUnchecked));

    assertEquals(readArchiveEntries(new ByteArrayInputStream(archive)), entries);
  }

