  @Test
  public void testCreateProject() throws Exception {
    Path path = Path.of("test");
    VirtualFileSystemProvider virtualFileSystemProvider = mock(VirtualFileSystemProvider.class);
    VirtualFileSystem virtualFileSystem = mock(VirtualFileSystem.class);

    VirtualFile base = mock(VirtualFile.class);
    when(base.isRoot()).thenReturn(false);

    VirtualFile root = mock(VirtualFile.class);
    when(root.isRoot()).thenReturn(true);
    when(root.createFolder(anyString())).thenReturn(base);
    when(virtualFileSystem.getRoot()).thenReturn(root);

    when(virtualFileSystemProvider.getVirtualFileSystem()).thenReturn(virtualFileSystem);
    when(virtualFileSystem.getRoot()).thenReturn(root);

    CreateBaseProjectTypeHandler createBaseProjectTypeHandler =
        new CreateBaseProjectTypeHandler(virtualFileSystemProvider);
    createBaseProjectTypeHandler.onCreateProject(path, null, null);
    verify(root).createFolder("test");
  }

