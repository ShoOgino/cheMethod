  @Test
  public void shouldRunDirectoryDeleteConsumer() throws Exception {
    directoryDeleteConsumers.add(directoryDeleteConsumerMock);

    File file = rootFolder.newFolder(TEST_FOLDER_NAME);
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    file.delete();
    sleep(FS_LATENCY_DELAY);
    fileTreeWalker.walk();

    verify(directoryDeleteConsumerMock).accept(file.toPath());
  }

