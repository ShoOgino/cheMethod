    @Test
    public void findsLockedFiles() throws Exception {
        VirtualFile lockedFileAA = mockLockFile("/a/locked-file");
        VirtualFile fileAB = mockFile("/a/file");
        VirtualFile fileBA = mockFile("/a/b/file");
        VirtualFile lockedFileBB = mockLockFile("/a/b/locked-file");
        VirtualFile folderB = mockFolder("/a/b", fileBA, lockedFileBB);
        VirtualFile folderA = mockFolder("/a", folderB, fileAB, lockedFileAA);

        Set<VirtualFile> lockedFiles = newHashSet(new LockedFileFinder(folderA).findLockedFiles());
        assertEquals(newHashSet(lockedFileAA, lockedFileBB), lockedFiles );
    }

