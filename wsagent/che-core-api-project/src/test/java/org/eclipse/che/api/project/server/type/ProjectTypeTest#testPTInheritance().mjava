    @Test
    public void testPTInheritance() throws Exception {
        Set<ProjectTypeDef> pts = new HashSet<>();
        final ProjectTypeDef parent = new ProjectTypeDef("parent", "parent", true, false) {
            {
                addConstantDefinition("parent_const", "Constant", "const_value");
            }

        };
        final ProjectTypeDef child = new ProjectTypeDef("child", "child", true, false) {
            {
                addParent("parent");
                addConstantDefinition("child_const", "Constant", "const_value");
            }
        };

        pts.add(child);
        pts.add(parent);

        ProjectTypeRegistry reg = new ProjectTypeRegistry(pts);
        assertEquals(3, reg.getProjectTypes().size());
        assertEquals(1, child.getParents().size());
        assertEquals(2, child.getAncestors().size());
        assertEquals(2 + reg.getProjectType(BaseProjectType.ID).getAttributes().size(),
                     reg.getProjectType("child").getAttributes().size());
        assertEquals(1 + reg.getProjectType(BaseProjectType.ID).getAttributes().size(),
                     reg.getProjectType("parent").getAttributes().size());
        Assert.assertTrue(reg.getProjectType("child").isTypeOf("parent"));
    }

