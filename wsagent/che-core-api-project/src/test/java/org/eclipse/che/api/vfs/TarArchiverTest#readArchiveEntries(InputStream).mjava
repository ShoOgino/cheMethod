  private Map<String, String> readArchiveEntries(InputStream archive) throws Exception {
    Map<String, String> entries = newHashMap();
    try (TarArchiveInputStream tarIn = new TarArchiveInputStream(archive)) {
      TarArchiveEntry tarArchiveEntry;
      while ((tarArchiveEntry = tarIn.getNextTarEntry()) != null) {
        String name = tarArchiveEntry.getName();
        String content =
            tarArchiveEntry.isDirectory() ? "<none>" : new String(ByteStreams.toByteArray(tarIn));
        entries.put(name, content);
      }
    }
    return entries;
  }

