  @Override
  public RegisteredProject create(ProjectConfig projectConfig, Map<String, String> options)
      throws ConflictException, ForbiddenException, ServerException, NotFoundException,
          BadRequestException {
    String wsPath = projectConfig.getPath();
    if (wsPath == null) {
      throw new BadRequestException("Path is not defined.");
    }

    String parentWsPath = parentOf(wsPath);
    if (!fsManager.existsAsDir(parentWsPath)) {
      throw new NotFoundException("Parent does not exist: " + parentWsPath);
    }

    String type = projectConfig.getType();
    if (type == null) {
      throw new ConflictException("Project type is not defined: " + wsPath);
    }

    if (projectConfigRegistry.get(wsPath).isPresent()) {
      throw new ConflictException("Project config already exists for: " + wsPath);
    }

    return synchronizingProjectManager.create(projectConfig, options);
  }

