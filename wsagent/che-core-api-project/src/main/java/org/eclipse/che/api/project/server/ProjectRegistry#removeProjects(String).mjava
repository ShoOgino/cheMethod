    /**
     * Removes all projects on and under the incoming path.
     *
     * @param path
     *         from where to remove
     * @throws ServerException
     */
    void removeProjects(String path) throws ServerException {
        List<RegisteredProject> removed = new ArrayList<>();
        Optional.ofNullable(projects.remove(path)).ifPresent(removed::add);
        getProjects(path).forEach(p -> Optional.ofNullable(projects.remove(p))
                                               .ifPresent(removed::add));

        removed.forEach(registeredProject -> eventService.publish(new ProjectDeletedEvent(registeredProject.getPath())));
        workspaceHolder.removeProjects(removed);
    }

