  private void walkTreeAndFireCreatedEvents(Path root) throws IOException {
    Files.walkFileTree(
        root,
        new SimpleFileVisitor<Path>() {
          @Override
          public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs)
              throws IOException {
            if (!dir.equals(root)) {
              fireWatchEvent(CREATED, dir, true);
            }
            return CONTINUE;
          }

          @Override
          public FileVisitResult visitFile(Path file, BasicFileAttributes attrs)
              throws IOException {
            fireWatchEvent(CREATED, file, false);
            return CONTINUE;
          }
        });
  }

