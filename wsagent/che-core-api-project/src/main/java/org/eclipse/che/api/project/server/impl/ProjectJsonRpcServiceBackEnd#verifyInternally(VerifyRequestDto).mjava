  private VerifyResponseDto verifyInternally(VerifyRequestDto request)
      throws ServerException, ConflictException, ForbiddenException, BadRequestException,
          NotFoundException {
    String wsPath = request.getWsPath();
    String type = request.getType();

    ProjectTypeResolution resolution = projectManager.verify(wsPath, type);

    Map<String, List<String>> attributes =
        resolution
            .getProvidedAttributes()
            .entrySet()
            .stream()
            .collect(toMap(Entry::getKey, it -> it.getValue().getList()));

    SourceEstimation sourceEstimation =
        newDto(SourceEstimation.class)
            .withType(type)
            .withMatched(resolution.matched())
            .withResolution(resolution.getResolution())
            .withAttributes(attributes);

    VerifyResponseDto response = newDto(VerifyResponseDto.class);
    response.setSourceEstimation(sourceEstimation);

    return response;
  }

