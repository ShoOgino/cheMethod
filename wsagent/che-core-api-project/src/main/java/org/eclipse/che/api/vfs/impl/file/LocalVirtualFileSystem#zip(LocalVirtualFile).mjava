    InputStream zip(LocalVirtualFile folder) throws ForbiddenException, ServerException {
        if(archiverFactory == null)
            throw new ServerException("VFS: Could not create zip archiver. Archiver Factory is not properly configured (is null)");

        if (folder.isFolder()) {
            return compress(archiverFactory.createArchiver(folder, "zip"));
        } else {
            throw new ForbiddenException(String.format("Unable export to zip. Item '%s' is not a folder", folder.getPath()));
        }
    }

