  private void doUnlock(LocalVirtualFile virtualFile) throws ForbiddenException, ServerException {
    try {
      final File fileLockIoFile = getFileLockIoFile(virtualFile.getPath());
      if (!fileLockIoFile.delete()) {
        if (fileLockIoFile.exists()) {
          throw new IOException(String.format("Unable delete lock file %s", fileLockIoFile));
        }
      }
      lockTokensCache.put(virtualFile.getPath(), NO_LOCK);
    } catch (IOException e) {
      String errorMessage = String.format("Unable unlock file '%s'", virtualFile.getPath());
      LOG.error(errorMessage + "\n" + e.getMessage(), e);
      throw new ServerException(errorMessage);
    }
  }

