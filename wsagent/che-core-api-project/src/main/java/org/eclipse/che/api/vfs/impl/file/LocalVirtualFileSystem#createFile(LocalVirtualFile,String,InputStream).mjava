  LocalVirtualFile createFile(LocalVirtualFile parent, String name, InputStream content)
      throws ForbiddenException, ConflictException, ServerException {
    checkName(name);

    if (Path.of(name).length() > 1) {
      throw new ServerException(String.format("Invalid name '%s'", name));
    }

    if (parent.isFolder()) {
      final Path newPath = parent.getPath().newPath(name);
      final File newIoFile = new File(ioRoot, toIoPath(newPath));

      try {
        if (!newIoFile.createNewFile()) {
          throw new ConflictException(String.format("Item '%s' already exists", newPath));
        }
      } catch (IOException e) {
        String errorMessage = String.format("Unable create new file '%s'", newPath);
        LOG.error(errorMessage + "\n" + e.getMessage(), e);
        throw new ServerException(errorMessage);
      }

      final LocalVirtualFile newVirtualFile = new LocalVirtualFile(newIoFile, newPath, this);

      if (content != null) {
        doUpdateContent(newVirtualFile, content);
      }

      addInSearcher(newVirtualFile);

      return newVirtualFile;
    } else {
      throw new ForbiddenException(
          "Unable create new file. Item specified as parent is not a folder");
    }
  }

