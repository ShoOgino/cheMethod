    @PreDestroy
    void stop() {
        running.compareAndSet(true, false);

        try {
            LOG.debug("Cancelling watch keys");
            keys.keySet().forEach(WatchKey::cancel);
            LOG.debug("Closing java watch service");
            service.close();
        } catch (IOException e) {
            LOG.error("Closing of java watch service failed: ", e.getMessage());
        }

        try {
            LOG.debug("Executor task shutdown started");
            executor.shutdown();
            executor.awaitTermination(5, SECONDS);
        } catch (InterruptedException e) {
            currentThread().interrupt();
            LOG.debug("Executor task is interrupted");
        } finally {
            if (!executor.isTerminated()) {
                LOG.debug("Executor task is not shutdown yet");
            }
            executor.shutdownNow();
            LOG.debug("Executor tasks have been shutdown");

        }
    }

