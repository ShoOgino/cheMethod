  /**
   * Find related VCS provider and set VCS status of {@link ItemReference} file to it's attributes
   * if VCS provider is present.
   *
   * @param itemReference file to update
   */
  ItemReference injectVcsStatus(ItemReference itemReference)
      throws ServerException, NotFoundException {
    Optional<VcsStatusProvider> optional = getVcsStatusProvider(itemReference.getProject());
    if (optional.isPresent()) {
      Map<String, String> attributes = new HashMap<>(itemReference.getAttributes());
      attributes.put("vcs.status", optional.get().getStatus(itemReference.getPath()).toString());
      itemReference.setAttributes(attributes);
    }
    return itemReference;
  }

