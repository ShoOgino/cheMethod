  @Inject
  public ProjectManager(
      VirtualFileSystemProvider vfsProvider,
      ProjectTypeRegistry projectTypeRegistry,
      WorkspaceSyncCommunication workspaceSyncCommunication,
      ProjectRegistry projectRegistry,
      ProjectHandlerRegistry handlers,
      ProjectImporterRegistry importers,
      FileWatcherNotificationHandler fileWatcherNotificationHandler,
      WorkspaceProjectsSyncer workspaceProjectsHolder,
      FileWatcherManager fileWatcherManager)
      throws ServerException {
    this.vfs = vfsProvider.getVirtualFileSystem();
    this.projectTypeRegistry = projectTypeRegistry;
    this.workspaceSyncCommunication = workspaceSyncCommunication;
    this.projectRegistry = projectRegistry;
    this.handlers = handlers;
    this.importers = importers;
    this.fileWatchNotifier = fileWatcherNotificationHandler;
    this.workspaceProjectsHolder = workspaceProjectsHolder;
    this.fileWatcherManager = fileWatcherManager;

    executor =
        Executors.newFixedThreadPool(
            1 + Runtime.getRuntime().availableProcessors(),
            new ThreadFactoryBuilder()
                .setNameFormat("ProjectService-IndexingThread-")
                .setUncaughtExceptionHandler(LoggingUncaughtExceptionHandler.getInstance())
                .setDaemon(true)
                .build());
  }

