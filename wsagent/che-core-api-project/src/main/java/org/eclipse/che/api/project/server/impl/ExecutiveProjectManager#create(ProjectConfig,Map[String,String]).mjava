  @Override
  public RegisteredProject create(ProjectConfig projectConfig, Map<String, String> options)
      throws ConflictException, ForbiddenException, ServerException, NotFoundException,
          BadRequestException {
    String wsPath = projectConfig.getPath();
    String type = projectConfig.getType();
    Optional<CreateProjectHandler> cphOptional = projectHandlerRegistry.getCreateHandler(type);

    if (cphOptional.isPresent()) {
      CreateProjectHandler generator = cphOptional.get();
      Map<String, AttributeValue> valueMap = new HashMap<>();
      Map<String, List<String>> attributes = projectConfig.getAttributes();
      if (attributes != null) {
        for (Map.Entry<String, List<String>> entry : attributes.entrySet()) {
          valueMap.put(entry.getKey(), new AttributeValue(entry.getValue()));
        }
      }

      generator.onCreateProject(wsPath, valueMap, options == null ? new HashMap<>() : options);
    } else {
      fsManager.createDir(wsPath);
    }

    RegisteredProject project = projectConfigRegistry.put(projectConfig, true, false);
    fireInitHandlers(project);

    return project;
  }

