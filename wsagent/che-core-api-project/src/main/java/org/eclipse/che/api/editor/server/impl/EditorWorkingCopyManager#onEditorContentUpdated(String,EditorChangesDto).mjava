  void onEditorContentUpdated(String endpointId, EditorChangesDto changes) {
    String filePath = changes.getFileLocation();
    String projectPath = changes.getProjectPath();

    try {
      if (filePath.isEmpty() || projectPath.isEmpty()) {
        throw new NotFoundException("Paths for file and project should be defined");
      }

      EditorWorkingCopy workingCopy = workingCopiesStorage.get(filePath);
      if (workingCopy == null) {
        workingCopy = createWorkingCopy(filePath);
      }

      workingCopy.applyChanges(changes);
      eventService.publish(new EditorWorkingCopyUpdatedEvent(endpointId, changes));

    } catch (IOException | ForbiddenException | ConflictException | ServerException e) {
      String errorMessage = "Can not handle editor changes: " + e.getLocalizedMessage();

      LOG.error(errorMessage);

      transmitError(500, errorMessage, endpointId);
    } catch (NotFoundException e) {
      String errorMessage = "Can not handle editor changes: " + e.getLocalizedMessage();

      LOG.error(errorMessage);

      transmitError(400, errorMessage, endpointId);
    }
  }

