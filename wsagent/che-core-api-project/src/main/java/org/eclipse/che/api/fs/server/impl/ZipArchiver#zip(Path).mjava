  InputStream zip(Path fsPath) throws ServerException {
    try {
      File inFile = fsPath.toFile();
      File outFile = createTempFile(fsPath.getFileName().toString(), ".zip").toFile();

      try (FileOutputStream fos = new FileOutputStream(outFile);
          ZipOutputStream zos = new ZipOutputStream(fos)) {
        zip(fsPath, inFile, zos);
      }

      return newInputStream(outFile.toPath());
    } catch (IOException e) {
      throw new ServerException("Failed to zip item: " + fsPath, e);
    }
  }

