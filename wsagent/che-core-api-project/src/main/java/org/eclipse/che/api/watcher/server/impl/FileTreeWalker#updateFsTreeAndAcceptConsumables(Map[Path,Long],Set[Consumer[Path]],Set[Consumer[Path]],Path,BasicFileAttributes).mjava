  private void updateFsTreeAndAcceptConsumables(
      Map<Path, Long> items,
      Set<Consumer<Path>> updateConsumer,
      Set<Consumer<Path>> createConsumer,
      Path path,
      BasicFileAttributes attrs) {
    Long lastModifiedActual = attrs.lastModifiedTime().toMillis();

    if (items.containsKey(path)) {
      Long lastModifiedStored = items.get(path);
      if (!lastModifiedActual.equals(lastModifiedStored)) {
        updateConsumer.forEach(it -> it.accept(path));
        items.put(path, lastModifiedActual);
      }
    } else {
      createConsumer.forEach(it -> it.accept(path));
      items.put(path, lastModifiedActual);
    }
  }

