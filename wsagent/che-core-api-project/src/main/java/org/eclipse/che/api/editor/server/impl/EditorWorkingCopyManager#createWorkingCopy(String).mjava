  private EditorWorkingCopy createWorkingCopy(String filePath)
      throws NotFoundException, ServerException, ConflictException, ForbiddenException,
          IOException {

    InputStream fileContentAsStream = fsManager.read(filePath);
    byte[] fileContentAsBytes = IOUtils.toByteArray(fileContentAsStream);

    String projectPath =
        projectManager
            .getClosest(filePath)
            .orElseThrow(() -> new NotFoundException("Project is not found for file: " + filePath))
            .getPath();

    String workingCopyPath = toWorkingCopyPath(filePath);

    EditorWorkingCopy workingCopy =
        new EditorWorkingCopy(workingCopyPath, projectPath, fileContentAsBytes);
    workingCopiesStorage.put(filePath, workingCopy);

    return workingCopy;
  }

