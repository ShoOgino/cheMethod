  private Consumer<String> getModifyConsumer(String endpointId, String path) {
    return it -> {
      String newHash = hashFile(path);
      String oldHash = hashRegistry.getOrDefault(path + endpointId, null);

      if (Objects.equals(newHash, oldHash)) {
        return;
      }

      hashRegistry.put(path + endpointId, newHash);

      FileStateUpdateDto params =
          newDto(FileStateUpdateDto.class).withPath(path).withType(MODIFIED).withHashCode(newHash);
      transmitter
          .newRequest()
          .endpointId(endpointId)
          .methodName(OUTGOING_METHOD)
          .paramsAsDto(params)
          .sendAndSkipResult();
    };
  }

