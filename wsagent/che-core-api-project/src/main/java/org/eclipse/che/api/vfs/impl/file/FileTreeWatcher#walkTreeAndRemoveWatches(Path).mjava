  private void walkTreeAndRemoveWatches(Path root) throws IOException {
    Files.walkFileTree(
        root,
        new SimpleFileVisitor<Path>() {
          @Override
          public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs)
              throws IOException {
            cancelDirectoryWatcher(dir);
            return CONTINUE;
          }
        });
  }

