  void copyWithParents(Path srcFsPath, Path dstFsPath) throws ServerException {
    try {
      Files.createDirectories(dstFsPath.getParent());

      if (Files.isDirectory(srcFsPath)) {
        FileUtils.copyDirectory(srcFsPath.toFile(), dstFsPath.toFile());
      } else {
        FileUtils.copyFile(srcFsPath.toFile(), dstFsPath.toFile());
      }
    } catch (IOException e) {
      throw new ServerException("Failed to copy item " + srcFsPath + " to " + dstFsPath, e);
    }
  }

