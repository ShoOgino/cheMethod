  @Override
  public void synchronize() throws ServerException {

    List<ProjectConfigDto> remote = workspaceDto().getConfig().getProjects();

    // check on removed
    List<ProjectConfig> removed = new ArrayList<>();
    for (ProjectConfig r : remote) {
      if (!projectConfigRegistry.get(r.getPath()).isPresent()) {
        removed.add(r);
      }
    }

    for (ProjectConfig r : removed) {
      remove(r);
    }

    // update or add
    for (RegisteredProject project : projectConfigRegistry.getAll()) {

      if (!project.isSynced() && !project.isDetected()) {

        final ProjectConfig config =
            new NewProjectConfigImpl(
                project.getPath(),
                project.getType(),
                project.getMixins(),
                project.getName(),
                project.getDescription(),
                project.getPersistableAttributes(),
                null,
                project.getSource());

        boolean found = false;
        for (ProjectConfig r : remote) {
          if (r.getPath().equals(project.getPath())) {
            update(config);
            found = true;
          }
        }

        if (!found) {
          add(config);
        }

        project.setSynced(true);
      }
    }

    workspaceSyncCommunication.synchronizeWorkspace();
  }

