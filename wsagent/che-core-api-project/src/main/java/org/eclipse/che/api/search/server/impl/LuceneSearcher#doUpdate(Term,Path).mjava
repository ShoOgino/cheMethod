  private void doUpdate(Term deleteTerm, Path fsPath) throws ServerException {
    String wsPath = pathTransformer.transform(fsPath);
    try (Reader fContentReader = isNotExcluded(fsPath) ? newBufferedReader(fsPath) : null) {
      luceneIndexWriter.updateDocument(deleteTerm, createDocument(wsPath, fContentReader));
    } catch (OutOfMemoryError oome) {
      doTerminate();
      throw oome;
    } catch (IOException e) {
      throw new ServerException(e.getMessage(), e);
    }
  }

