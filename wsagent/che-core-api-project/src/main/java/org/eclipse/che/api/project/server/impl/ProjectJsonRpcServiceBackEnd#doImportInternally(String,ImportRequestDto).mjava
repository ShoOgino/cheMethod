  private ImportResponseDto doImportInternally(String endpointId, ImportRequestDto request)
      throws ServerException, ConflictException, ForbiddenException, NotFoundException,
          UnauthorizedException {
    String wsPath = request.getWsPath();
    SourceStorageDto sourceStorage = request.getSourceStorage();

    RegisteredProject registeredProject =
        projectManager.doImport(wsPath, sourceStorage, false, getImportConsumer(endpointId));
    eventService.publish(new ProjectCreatedEvent(wsPath));
    ProjectConfigDto projectConfigDto = asDto(registeredProject);
    ImportResponseDto response = newDto(ImportResponseDto.class);
    response.setConfig(projectConfigDto);

    return response;
  }

