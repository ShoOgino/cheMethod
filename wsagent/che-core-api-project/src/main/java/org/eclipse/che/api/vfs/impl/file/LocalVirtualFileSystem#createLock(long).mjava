    private FileLock createLock(long timeout) {
        final long expired = timeout > 0 ? (System.currentTimeMillis() + timeout) : Long.MAX_VALUE;
        return new FileLock(generateLockToken(), expired);
    }

