  /** Update project specified by workspace path with new configuration */
  public ProjectConfigDto updateProject(String wsPath, ProjectConfigDto projectConfigDto)
      throws NotFoundException, ConflictException, ForbiddenException, ServerException, IOException,
          BadRequestException {
    if (wsPath != null) {
      wsPath = absolutize(wsPath);
      projectConfigDto.setPath(wsPath);
    }

    RegisteredProject previous = projectManager.getOrNull(wsPath);

    RegisteredProject updated = projectManager.update(projectConfigDto);
    if (previous == null) { // if project config set firstly we will fire event project created
      eventService.publish(new ProjectCreatedEvent(updated.getPath()));
    } else {
      eventService.publish(new ProjectUpdatedEvent(wsPath, previous));
    }

    return asDto(updated);
  }

