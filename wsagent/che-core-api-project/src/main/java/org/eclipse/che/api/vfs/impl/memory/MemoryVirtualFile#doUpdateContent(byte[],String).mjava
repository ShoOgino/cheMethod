    private void doUpdateContent(byte[] content, String lockToken) throws ForbiddenException, ServerException {
        checkExistence();

        if (isFile()) {
            if (fileIsLockedAndLockTokenIsInvalid(lockToken)) {
                throw new ForbiddenException(
                        String.format("We were unable to update the content of file '%s'. The file is locked", getPath()));
            }

            this.content = Arrays.copyOf(content, content.length);
            lastModificationDate = System.currentTimeMillis();

            updateInSearcher();
        } else {
            throw new ForbiddenException(String.format("We were unable to update the content. Item '%s' is not a file", getPath()));
        }
    }

