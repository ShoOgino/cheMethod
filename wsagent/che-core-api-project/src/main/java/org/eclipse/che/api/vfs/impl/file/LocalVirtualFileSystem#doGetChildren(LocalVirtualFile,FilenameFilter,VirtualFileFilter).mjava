    private List<VirtualFile> doGetChildren(LocalVirtualFile parent, FilenameFilter ioFileFilter, VirtualFileFilter vfsFilter)
            throws ServerException {
        if (ioFileFilter == null) {
            ioFileFilter = IoUtil.ANY_FILTER;
        }

        final String[] names = parent.toIoFile().list(ioFileFilter);
        if (names == null) {
            throw new ServerException(String.format("Unable get children of '%s'", parent.getPath()));
        }

        if (vfsFilter == null) {
            vfsFilter = VirtualFileFilter.ACCEPT_ALL;
        }

        final List<VirtualFile> children = newArrayListWithCapacity(names.length);
        for (String name : names) {
            final Path childPath = parent.getPath().newPath(name);
            final LocalVirtualFile child = new LocalVirtualFile(new File(ioRoot, toIoPath(childPath)), childPath, this);
            if (vfsFilter.accept(child)) {
                children.add(child);
            }
        }

        return children;
    }

