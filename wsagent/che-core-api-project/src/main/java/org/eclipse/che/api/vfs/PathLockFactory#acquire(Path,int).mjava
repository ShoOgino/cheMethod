  private synchronized void acquire(Path path, int permits) {
    while (!tryAcquire(path, permits)) {
      try {
        wait();
      } catch (InterruptedException e) {
        notifyAll();
        throw new RuntimeException(e);
      }
    }
  }

