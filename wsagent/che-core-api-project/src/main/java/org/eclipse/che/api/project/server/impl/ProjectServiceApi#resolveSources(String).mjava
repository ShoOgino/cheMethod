  public List<SourceEstimation> resolveSources(String wsPath)
      throws NotFoundException, ForbiddenException, ServerException, ConflictException {
    wsPath = absolutize(wsPath);

    return projectManager
        .recognize(wsPath)
        .stream()
        .filter(ProjectTypeResolution::matched)
        .map(
            resolution -> {
              Map<String, List<String>> attributes =
                  resolution
                      .getProvidedAttributes()
                      .entrySet()
                      .stream()
                      .collect(toMap(Entry::getKey, it -> it.getValue().getList()));

              return newDto(SourceEstimation.class)
                  .withType(resolution.getType())
                  .withMatched(resolution.matched())
                  .withAttributes(attributes);
            })
        .collect(toList());
  }

