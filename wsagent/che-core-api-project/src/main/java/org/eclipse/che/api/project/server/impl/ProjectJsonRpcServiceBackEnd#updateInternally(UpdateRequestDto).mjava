  private UpdateResponseDto updateInternally(UpdateRequestDto request)
      throws ServerException, ConflictException, ForbiddenException, BadRequestException,
          NotFoundException {
    ProjectConfigDto config = request.getConfig();
    RegisteredProject previous = projectManager.getOrNull(request.getWsPath());

    RegisteredProject registeredProject = projectManager.update(config);
    ProjectConfigDto projectConfigDto = asDto(registeredProject);
    UpdateResponseDto response = newDto(UpdateResponseDto.class);
    response.setConfig(projectConfigDto);
    if (previous == null) { // if project config set firstly we will fire event project created
      eventService.publish(new ProjectCreatedEvent(request.getWsPath()));
    } else {
      eventService.publish(new ProjectUpdatedEvent(request.getWsPath(), previous));
    }

    return response;
  }

