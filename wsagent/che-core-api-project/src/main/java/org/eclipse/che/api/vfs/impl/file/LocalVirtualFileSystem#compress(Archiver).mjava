  private InputStream compress(Archiver archiver) throws ForbiddenException, ServerException {
    File archive = null;
    try {
      archive = File.createTempFile("export", ".arc");
      try (FileOutputStream fileOut = new FileOutputStream(archive)) {
        archiver.compress(fileOut, dotGitFilter());
      }
      return new DeleteOnCloseFileInputStream(archive);
    } catch (IOException e) {
      if (archive != null) {
        FileCleaner.addFile(archive);
      }
      throw new ServerException(e.getMessage(), e);
    }
  }

