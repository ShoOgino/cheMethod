    private void resetAndRemove(WatchKey watchKey, Path dir) {
        if (!watchKey.reset()) {
            if (dir != null) {
                registrations.remove(dir);
            }
            keys.remove(watchKey);
        }
    }

