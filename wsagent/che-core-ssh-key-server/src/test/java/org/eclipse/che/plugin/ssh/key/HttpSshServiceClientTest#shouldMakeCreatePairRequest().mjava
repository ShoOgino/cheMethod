  @Test
  public void shouldMakeCreatePairRequest() throws Exception {
    //given
    SshPairDto sshPairDto = mock(SshPairDto.class);

    //when
    client.createPair(sshPairDto);

    //then
    String url =
        fromUri(SSH_SERVICE_URL)
            .path(SshService.class.getMethod("createPair", SshPairDto.class))
            .build()
            .toString();
    verify(requestFactory).fromUrl(eq(url));
    verify(jsonRequest).usePostMethod();
    verify(jsonRequest).setBody(eq(sshPairDto));
    verify(jsonRequest).request();
    verify(jsonResponse).asDto(eq(SshPairDto.class));
  }

