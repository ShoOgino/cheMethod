  @Test(
    dataProvider = "GitConnectionFactory",
    dataProviderClass = org.eclipse.che.git.impl.GitConnectionFactoryProvider.class
  )
  public void testSimpleFileCheckout(GitConnectionFactory connectionFactory)
      throws GitException, IOException {
    //given
    GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);
    addFile(connection, "README.txt", org.eclipse.che.git.impl.GitTestUtil.CONTENT);
    connection.add(AddParams.create(singletonList("README.txt")));
    connection.commit(CommitParams.create("Initial addd"));

    //when
    //modify a file
    String MODIFIED_CONTENT = "README modified content";
    addFile(connection, "README.txt", MODIFIED_CONTENT);

    //then
    assertTrue(new File(repository, "README.txt").exists());
    assertEquals(
        MODIFIED_CONTENT,
        Files.toString(new File(connection.getWorkingDir(), "README.txt"), Charsets.UTF_8));

    //when
    connection.checkout(CheckoutParams.create(null).withFiles(singletonList("README.txt")));

    //then
    assertTrue(new File(repository, "README.txt").exists());
    assertEquals(
        org.eclipse.che.git.impl.GitTestUtil.CONTENT,
        Files.toString(new File(connection.getWorkingDir(), "README.txt"), Charsets.UTF_8));
  }

