    @Test(dataProvider = "GitConnectionFactory", dataProviderClass = GitConnectionFactoryProvider.class)
    public void shouldReturnTrueInsideWorkingTree(GitConnectionFactory connectionFactory)
        throws ServerException, IOException, UnauthorizedException, URISyntaxException {
        // given
        GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);
        Path internalDir = connection.getWorkingDir().toPath().resolve("new_directory");

        // add new dir into working tree
        addFile(connection.getWorkingDir().toPath().resolve("new_directory"), "a", "content of a");
        connection.add(newDto(AddRequest.class).withFilepattern(Arrays.asList(".")));
        connection.commit(newDto(CommitRequest.class).withMessage("test"));

        // when
        GitConnection internalDirConnection = connectionFactory.getConnection(internalDir.toFile());
        boolean isInsideWorkingTree = internalDirConnection.isInsideWorkTree();

        // then
        assertTrue(isInsideWorkingTree);
    }

