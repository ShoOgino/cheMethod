  @Test(
      dataProvider = "GitConnectionFactory",
      dataProviderClass = org.eclipse.che.git.impl.GitConnectionFactoryProvider.class)
  public void shouldReturnCurrentBranch(GitConnectionFactory connectionFactory) throws Exception {
    // given
    GitConnection connection = connectToGitRepositoryWithContent(connectionFactory, repository);
    final String branchName = "newBranch";
    connection.branchCreate(branchName, null);
    connection.checkout(CheckoutParams.create(branchName));

    // when
    final Status status = connection.status(emptyList());

    // then
    assertEquals(status.getRefName(), branchName);
  }

