  @BeforeMethod
  public void setup() throws Exception {
    when(projectManager.getClosest(anyString())).thenReturn(Optional.of(registeredProject));
    when(registeredProject.getPath()).thenReturn("/project");
    Path path = mock(Path.class);
    when(path.toString()).thenReturn("/fsPath/project");
    when(pathTransformer.transform("/project")).thenReturn(path);
    when(gitConnectionFactory.getConnection("/fsPath/project")).thenReturn(gitConnection);
    when(gitConnection.status(singletonList(NORMALIZED_PATH))).thenReturn(statusDto);
  }

