  @Test(
    dataProvider = "GitConnectionFactory",
    dataProviderClass = org.eclipse.che.git.impl.GitConnectionFactoryProvider.class
  )
  public void testSimpleCommit(GitConnectionFactory connectionFactory)
      throws GitException, IOException {
    // given
    GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);
    // add new File
    addFile(connection, "DONTREADME", "secret");
    // add changes
    connection.add(AddParams.create(AddRequest.DEFAULT_PATTERN));

    // when
    CommitParams commitParams =
        CommitParams.create("Commit message").withAmend(false).withAll(false);
    Revision revision = connection.commit(commitParams);

    // then
    assertEquals(revision.getMessage(), commitParams.getMessage());
  }

