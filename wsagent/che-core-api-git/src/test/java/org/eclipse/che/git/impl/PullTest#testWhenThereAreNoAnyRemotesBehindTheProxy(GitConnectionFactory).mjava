  @Test(
    dataProvider = "GitConnectionFactory",
    dataProviderClass = GitConnectionFactoryProvider.class,
    expectedExceptions = GitException.class,
    expectedExceptionsMessageRegExp =
        "No remote repository specified.  "
            + "Please, specify either a URL or a remote name from "
            + "which new revisions should be fetched in request."
  )
  public void testWhenThereAreNoAnyRemotesBehindTheProxy(GitConnectionFactory connectionFactory)
      throws Exception {
    //given
    System.setProperty("http.proxyUser", "user1");
    System.setProperty("http.proxyPassword", "paswd1");
    System.setProperty("https.proxyUser", "user2");
    System.setProperty("https.proxyPassword", "paswd2");

    GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);

    //when
    connection.pull(PullParams.create(null));
  }

