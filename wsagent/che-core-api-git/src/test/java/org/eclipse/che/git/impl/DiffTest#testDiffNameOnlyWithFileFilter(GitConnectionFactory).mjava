  @Test(
      dataProvider = "GitConnectionFactory",
      dataProviderClass = org.eclipse.che.git.impl.GitConnectionFactoryProvider.class)
  public void testDiffNameOnlyWithFileFilter(GitConnectionFactory connectionFactory)
      throws GitException, IOException {
    // given
    GitConnection connection = connectToInitializedGitRepository(connectionFactory, repository);
    makeCommitInMaster(connection);

    // when
    List<String> diff =
        readDiff(
            DiffParams.create()
                .withFileFilter(singletonList("aaa"))
                .withType(DiffType.NAME_ONLY)
                .withNoRenames(false)
                .withRenameLimit(0),
            connection);

    // then
    assertEquals(diff.size(), 1);
    assertTrue(diff.contains("aaa"));
  }

