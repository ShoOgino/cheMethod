  @DELETE
  @Path("repository")
  public void deleteRepository(@Context UriInfo uriInfo) throws ApiException {
    RegisteredProject project =
        projectManager
            .get(projectPath)
            .orElseThrow(() -> new NotFoundException("Can't find project"));

    String dotGitWsPath = resolve(absolutize(projectPath), ".git");
    fsManager.delete(dotGitWsPath);

    projectManager.removeType(projectPath, GitProjectType.TYPE_ID);
    eventService.publish(
        newDto(GitRepositoryDeletedEvent.class).withProjectName(project.getName()));
  }

