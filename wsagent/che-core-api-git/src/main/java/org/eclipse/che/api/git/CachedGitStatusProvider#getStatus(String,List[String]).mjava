  @Override
  public Map<String, VcsStatus> getStatus(String wsPath, List<String> paths)
      throws ServerException {
    Map<String, VcsStatus> result = new HashMap<>();
    try {
      ProjectConfig project =
          projectManager
              .getClosest(absolutize(wsPath))
              .orElseThrow(() -> new NotFoundException("Can't find project"));

      Status status =
          getStatus(
              project.getName(), pathTransformer.transform(project.getPath()).toString(), paths);

      paths.forEach(
          path -> {
            String itemWsPath = resolve(project.getPath(), path);
            if (status.getUntracked().contains(path)) {
              result.put(itemWsPath, UNTRACKED);
            } else if (status.getAdded().contains(path)) {
              result.put(itemWsPath, ADDED);
            } else if (status.getModified().contains(path) || status.getChanged().contains(path)) {
              result.put(itemWsPath, MODIFIED);
            } else {
              result.put(itemWsPath, NOT_MODIFIED);
            }
          });

    } catch (NotFoundException e) {
      throw new ServerException(e.getMessage());
    }
    return result;
  }

