  /**
   * Returns simple name of the given branch. E.g.: for a branch with name
   * "refs/remotes/origin/master" returns "master". Returns full name of the given branch if there's
   * no correspondent remote branch.
   */
  private String getRemoteBranchNameWithoutRefs(GitConnection git, Branch branch)
      throws GitException {
    String branchName = branch.getName().replaceFirst("refs/remotes/", "");
    List<Remote> remotes = git.remoteList(null, false);
    for (Remote remote : remotes) {
      if (branchName.startsWith(remote.getName())) {
        return branchName.replaceFirst(remote.getName() + "/", "");
      }
    }
    return branchName;
  }

