  private void writeCodenvyExcludesToFile(Path path) throws IOException {
    List<String> toAdd = new ArrayList<>(GITIGNORE_PATTERNS);

    if (Files.exists(path)) {
      List<String> existingRules = Files.readAllLines(path, Charset.forName("UTF-8"));

      // add only new rules to the existing .gitignore file
      for (String rule : existingRules) {
        toAdd.remove(rule.trim());
      }
    }

    if (!toAdd.isEmpty()) {
      toAdd.add(0, '\n' + CODENVY_COMMENT);
      Files.write(
          path,
          toAdd,
          Charset.forName("UTF-8"),
          StandardOpenOption.CREATE,
          StandardOpenOption.APPEND);
    }
  }

