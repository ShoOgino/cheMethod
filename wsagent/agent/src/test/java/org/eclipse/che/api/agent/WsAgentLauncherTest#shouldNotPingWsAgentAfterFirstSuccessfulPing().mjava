  @Test
  public void shouldNotPingWsAgentAfterFirstSuccessfulPing() throws Exception {
    Mockito.when(wsAgentHealthChecker.check(any(Machine.class)))
        .thenThrow(new ServerException(""))
        .thenReturn(pingResponse);

    wsAgentLauncher.launch(machine, agent);

    Mockito.verify(wsAgentHealthChecker, Mockito.times(2)).check(any(Machine.class));
    Mockito.verify(pingResponse).getCode();
  }

