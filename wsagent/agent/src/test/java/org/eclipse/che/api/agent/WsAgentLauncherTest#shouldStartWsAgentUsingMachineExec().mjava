    @Test
    public void shouldStartWsAgentUsingMachineExec() throws Exception {
        wsAgentLauncher.launch(machine, agent);

        Mockito.verify(machineProcessManager).exec(Matchers.eq(WORKSPACE_ID),
                                                   Matchers.eq(MACHINE_ID),
                                                   Matchers.eq(new CommandImpl("org.eclipse.che.ws-agent",
                                                                               "script\n" +
                                                                               WsAgentLauncher.DEFAULT_WS_AGENT_RUN_COMMAND,
                                                                               WS_AGENT_PROCESS_NAME)),
                                                   Matchers.eq(WsAgentLauncher.getWsAgentProcessOutputChannel(WORKSPACE_ID)));

    }

