  @Test
  public void testOnGenerateClickedWhenUserCancelGenerateKey() {
    when(dialogFactory.createInputDialog(
            nullable(String.class),
            nullable(String.class),
            nullable(InputCallback.class),
            nullable(CancelCallback.class)))
        .thenReturn(inputDialog);

    presenter.onGenerateClicked();

    verify(dialogFactory)
        .createInputDialog(
            nullable(String.class),
            nullable(String.class),
            org.mockito.ArgumentMatchers.<InputCallback>any(),
            cancelCallbackCaptor.capture());
    CancelCallback cancelCallback = cancelCallbackCaptor.getValue();
    cancelCallback.cancelled();

    verify(service, never())
        .generatePair(
            org.mockito.ArgumentMatchers.eq(SshKeyManagerPresenter.VCS_SSH_SERVICE),
            eq(GITHUB_HOST));
  }

