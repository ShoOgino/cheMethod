  @Test
  public void shouldSaveState() throws Exception {
    when(fsManager.existsAsFile(anyString())).thenReturn(true);

    appStateManager.saveState(USER_ID, APP_STATE);

    verify(fsManager, never()).createFile(anyString(), anyBoolean(), anyBoolean());
    verify(fsManager).update(anyString(), eq(APP_STATE));
  }

