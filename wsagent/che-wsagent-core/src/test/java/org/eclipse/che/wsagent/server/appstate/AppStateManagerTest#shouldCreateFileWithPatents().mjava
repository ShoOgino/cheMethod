  @Test
  public void shouldCreateFileWithPatents() throws Exception {
    when(fsManager.existsAsFile(anyString())).thenReturn(false);

    appStateManager.saveState(USER_ID, APP_STATE);

    verify(fsManager, never()).update(anyString(), eq(APP_STATE));
    verify(fsManager).createFile(anyString(), eq(APP_STATE), eq(false), eq(true));
  }

