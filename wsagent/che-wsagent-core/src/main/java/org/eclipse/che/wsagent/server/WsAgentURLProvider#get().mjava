    @Override
    public String get() {
        if (isNullOrEmpty(cachedAgentUrl)) {
            try {
                LOG.warn("requesting:" + workspaceApiEndpoint + wsId);
                final WorkspaceDto workspace = requestFactory.fromUrl(workspaceApiEndpoint + wsId)
                                                             .useGetMethod()
                                                             .request()
                                                             .asDto(WorkspaceDto.class);
                if (workspace.getRuntime() != null) {
                    final Collection<ServerDto> servers = workspace.getRuntime()
                                                                   .getDevMachine()
                                                                   .getRuntime()
                                                                   .getServers()
                                                                   .values();
                    for (ServerDto server : servers) {
                        if (WSAGENT_REFERENCE.equals(server.getRef())) {
                            cachedAgentUrl = server.getUrl();
                            return cachedAgentUrl;
                        }
                    }
                }
            } catch (ApiException | IOException ex) {
                LOG.warn(ex.getLocalizedMessage());
                throw new RuntimeException("Failed to configure wsagent endpoint");
            }
        }
        return cachedAgentUrl;
    }

