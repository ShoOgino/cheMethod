  @BeforeMethod
  public void setUp() throws Exception {
    registry =
        new AgentRegistryImpl(
            new HashSet<Agent>() {
              {
                add(
                    DtoFactory.newDto(AgentDto.class)
                        .withId("id1")
                        .withVersion("v1")
                        .withName("id1:v1"));
                add(
                    DtoFactory.newDto(AgentDto.class)
                        .withId("id1")
                        .withVersion("v2")
                        .withName("id1:v2"));
                add(DtoFactory.newDto(AgentDto.class).withId("id2").withName("id2:latest"));
                add(
                    DtoFactory.newDto(AgentDto.class)
                        .withId("id3")
                        .withVersion("v1")
                        .withName("id3:v1"));
                add(DtoFactory.newDto(AgentDto.class).withId("id3").withName("id3:latest"));
              }
            });
  }

