    @Test(expectedExceptions = ServerException.class, expectedExceptionsMessageRegExp = "An error on agent start")
    public void shouldLogAgentStartLogsIfMachineExceptionOccurs() throws Exception {
        // given
        doThrow(new MachineException("An error on agent start"))
                .when(launcher).start(any(Instance.class), any(Agent.class), any(LineConsumer.class));

        // when
        launcher.launch(machine, agent);

        // then
        verify(launcher).logAsErrorAgentStartLogs(anyString(), anyString());
    }

