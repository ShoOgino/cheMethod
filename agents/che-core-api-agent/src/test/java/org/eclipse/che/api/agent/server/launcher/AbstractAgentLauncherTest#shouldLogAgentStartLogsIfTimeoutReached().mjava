    @Test(expectedExceptions = AgentStartException.class, expectedExceptionsMessageRegExp = "Fail launching agent .*\\. Workspace ID:.*")
    public void shouldLogAgentStartLogsIfTimeoutReached() throws Exception {
        // given
        launcher = spy(new TestAgentLauncher(-1, 100, agentChecker));
        when(agentChecker.isLaunched(any(Agent.class),
                                     any(InstanceProcess.class),
                                     any(Instance.class))).thenReturn(false);

        doReturn(process).when(launcher).start(any(Instance.class), any(Agent.class), any(LineConsumer.class));

        // when
        launcher.launch(machine, agent);

        // then
        verify(launcher).logAsErrorAgentStartLogs(anyString(), anyString());
    }

