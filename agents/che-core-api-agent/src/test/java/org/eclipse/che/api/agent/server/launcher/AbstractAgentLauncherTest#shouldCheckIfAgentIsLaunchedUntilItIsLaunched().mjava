    @Test
    public void shouldCheckIfAgentIsLaunchedUntilItIsLaunched() throws Exception {
        // given
        when(agentChecker.isLaunched(any(Agent.class),
                                     any(InstanceProcess.class),
                                     any(Instance.class))).thenReturn(false)
                                                          .thenReturn(false)
                                                          .thenReturn(false)
                                                          .thenReturn(false)
                                                          .thenReturn(true);

        // when
        launcher.launch(machine, agent);

        // then
        verify(agentChecker, times(5)).isLaunched(any(Agent.class),
                                                  any(InstanceProcess.class),
                                                  any(Instance.class));
    }

