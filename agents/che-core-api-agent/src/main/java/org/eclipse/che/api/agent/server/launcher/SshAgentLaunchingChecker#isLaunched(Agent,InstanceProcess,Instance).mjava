    @Override
    public boolean isLaunched(Agent agent, InstanceProcess process, Instance machine) throws MachineException {
        Server server = machine.getRuntime().getServers().get(SSH_PORT);
        if (server != null) {
            try {
                String[] sshServerHostAndPort = server.getProperties().getInternalAddress().split(":");
                try (Socket socket = new Socket(sshServerHostAndPort[0], Integer.parseInt(sshServerHostAndPort[1]));
                     BufferedOutputStream sshRequest = new BufferedOutputStream(socket.getOutputStream());
                     BufferedInputStream sshResponse = new BufferedInputStream(socket.getInputStream())) {

                    sshRequest.write(SSH_GLOBAL_REQUEST_BYTES);
                    sshRequest.flush();
                    // Actual response is not needed, just make sure that ssh server give a response.
                    if (sshResponse.read() != -1) {
                        return true;
                    }
                }
            } catch (Exception ignored) {
            }
        }
        return false;
    }

