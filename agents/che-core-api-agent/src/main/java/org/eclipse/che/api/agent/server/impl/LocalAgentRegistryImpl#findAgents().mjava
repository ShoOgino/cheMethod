    protected void findAgents() throws IOException {
        File context = new File(LocalAgentRegistryImpl.class.getProtectionDomain().getCodeSource().getLocation().getPath());

        if (isZipFile(context)) {
            try (ZipFile zip = new ZipFile(context)) {
                ZipUtils.getResources(zip, AGENTS, createAgentsConsumer);
            }
        } else {
            Files.walk(context.toPath())
                 .filter(path -> AGENTS.matcher(path.toString()).matches())
                 .forEach(path -> {
                     try (InputStream in = Files.newInputStream(path)) {
                         createAgentsConsumer.accept(in);
                     } catch (IOException ignored) {
                         // ignore
                     }
                 });
        }
    }

