  @Test(
      expectedExceptions = DevfileFormatException.class,
      expectedExceptionsMessageRegExp =
          "Devfile cannot contain kubernetes/openshift and dockerimage tool at the same time")
  public void shouldThrowExceptionIfDevfileContainOpenShiftAndDockerimageTool() throws Exception {
    Devfile broken = copyOf(initialDevfile);
    broken.getCommands().clear();
    broken.getTools().clear();
    broken.getTools().add(new Tool().withName("openshift").withType(OPENSHIFT_TOOL_TYPE));
    broken.getTools().add(new Tool().withName("dockerimage").withType(DOCKERIMAGE_TOOL_TYPE));

    // when
    integrityValidator.validateDevfile(broken);
  }

