  @Test
  public void shouldGenerateDefaultPluginNameIfIdIsNotUnique() {
    // given
    defaultEditorProvisioner =
        new DefaultEditorProvisioner(DEFAULT_EDITOR_REF, new String[] {"my-plugin:v2.0"});
    DevfileImpl devfile = new DevfileImpl();
    ComponentImpl myPlugin =
        new ComponentImpl(PLUGIN_COMPONENT_TYPE, "my-plugin", "my-custom-plugin:v0.0.3");
    devfile.getComponents().add(myPlugin);

    // when
    defaultEditorProvisioner.apply(devfile);

    // then
    List<ComponentImpl> components = devfile.getComponents();
    assertEquals(components.size(), 3);
    assertTrue(
        components.contains(
            new ComponentImpl(EDITOR_COMPONENT_TYPE, DEFAULT_EDITOR_ID, DEFAULT_EDITOR_REF)));
    assertTrue(components.contains(myPlugin));
    ComponentImpl defaultPlugin = findByRef(components, "my-plugin:v2.0");
    assertNotNull(defaultPlugin);
    assertNotEquals("my-plugin", defaultPlugin.getName());
    assertTrue(defaultPlugin.getName().startsWith("my-plugin"));
  }

