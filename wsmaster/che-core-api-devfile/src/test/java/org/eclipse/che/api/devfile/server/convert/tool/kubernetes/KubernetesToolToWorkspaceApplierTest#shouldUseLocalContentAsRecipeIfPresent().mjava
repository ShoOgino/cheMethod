  @Test
  public void shouldUseLocalContentAsRecipeIfPresent() throws Exception {
    String yamlRecipeContent = getResource("petclinic.yaml");
    doReturn(toK8SList(yamlRecipeContent).getItems()).when(k8sRecipeParser).parse(anyString());
    Tool tool =
        new Tool()
            .withType(KUBERNETES_TOOL_TYPE)
            .withLocal(LOCAL_FILENAME)
            .withLocalContent(yamlRecipeContent)
            .withName(TOOL_NAME)
            .withSelector(new HashMap<>());

    applier.apply(workspaceConfig, tool, new FetchNotSupportedProvider());

    verify(k8sEnvProvisioner)
        .provision(
            workspaceConfig,
            KubernetesEnvironment.TYPE,
            toK8SList(yamlRecipeContent).getItems(),
            emptyMap());
  }

