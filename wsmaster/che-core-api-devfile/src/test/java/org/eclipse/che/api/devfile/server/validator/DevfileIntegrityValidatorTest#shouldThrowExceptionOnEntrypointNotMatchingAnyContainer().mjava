  @Test(expectedExceptions = DevfileFormatException.class)
  public void shouldThrowExceptionOnEntrypointNotMatchingAnyContainer() throws Exception {
    // given
    when(kubernetesRecipeParser.parse(any(String.class)))
        .thenReturn(
            Collections.singletonList(
                new PodBuilder()
                    .withNewSpec()
                    .addNewContainer()
                    .withName("container")
                    .endContainer()
                    .endSpec()
                    .build()));

    Devfile devfile = copyOf(initialDevfile);
    devfile.getComponents().get(0).setReferenceContent("content");
    devfile
        .getComponents()
        .get(0)
        .setEntrypoints(
            Collections.singletonList(new Entrypoint().withContainerName("not that container")));

    // when
    integrityValidator.validateContentReferences(devfile, __ -> "");

    // then exception is thrown
  }

