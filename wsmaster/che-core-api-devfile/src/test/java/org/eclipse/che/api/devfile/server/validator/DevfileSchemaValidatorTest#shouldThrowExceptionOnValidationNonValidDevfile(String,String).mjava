  @Test(dataProvider = "invalidDevfiles")
  public void shouldThrowExceptionOnValidationNonValidDevfile(
      String resourceFilePath, String expectedMessageRegexp) throws Exception {
    try {
      schemaValidator.validateBySchema(getResource(resourceFilePath));
    } catch (DevfileFormatException e) {
      if (!Pattern.matches(expectedMessageRegexp, e.getMessage())) {
        // we don't need assertion here,
        // but we use that to show the difference to simplify tests fixes
        assertEquals(
            e.getMessage(),
            expectedMessageRegexp,
            "DevfileFormatException thrown with message that doesn't match expected pattern:");
      }
      return;
    }
    fail("DevfileFormatException expected to be thrown but is was not");
  }

