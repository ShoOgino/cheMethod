  @Test
  public void shouldSetDockerimageToolForCommandsWhichAreNotConfiguredToBeRunInPlugins()
      throws Exception {
    // given
    WorkspaceConfigImpl workspaceConfig = new WorkspaceConfigImpl();
    workspaceConfig.setName("ws123");
    EnvironmentImpl environment = new EnvironmentImpl();
    environment.setRecipe(new RecipeImpl("dockerimage", null, null, null));
    workspaceConfig.getEnvironments().put("env1", environment);

    workspaceConfig.getCommands().add(new CommandImpl("cmd1", "echo Hello", "custom"));

    Tool dockerimageTool = new Tool().withName("dockerimageTool");
    when(dockerimageToolApplier.from(any(), any())).thenReturn(dockerimageTool);

    // when
    Devfile devfile = devfileConverter.workspaceToDevFile(workspaceConfig);

    // then
    assertEquals(devfile.getCommands().size(), 1);
    Command command = devfile.getCommands().get(0);
    assertEquals(command.getActions().size(), 1);
    assertEquals(command.getActions().get(0).getTool(), "dockerimageTool");
  }

