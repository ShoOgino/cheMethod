  @Test(
      expectedExceptions = WorkspaceExportException.class,
      expectedExceptionsMessageRegExp =
          "Workspace .* cannot be converted to devfile since it contains environments which have no equivalent in devfile model")
  public void shouldThrowExceptionWhenWorkspaceHasEnvironments() throws Exception {
    String jsonContent =
        Files.readFile(getClass().getClassLoader().getResourceAsStream("workspace_config.json"));
    WorkspaceConfigImpl workspaceConfig =
        JsonHelper.fromJson(jsonContent, WorkspaceConfigImpl.class, null);
    workspaceConfig.getEnvironments().put("env1", new EnvironmentImpl());

    devfileConverter.workspaceToDevFile(workspaceConfig);
  }

