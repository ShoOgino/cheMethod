  @Test
  public void shouldCreateToolFromDockerimageEnvironmentWithMachineConfigurationWithProjectVolume()
      throws Exception {
    // given
    EnvironmentImpl dockerEnv = new EnvironmentImpl();
    dockerEnv.setRecipe(new RecipeImpl("dockerimage", null, "eclipse/ubuntu_jdk8:latest", null));
    Map<String, VolumeImpl> volumes =
        ImmutableMap.of(PROJECTS_VOLUME_NAME, new VolumeImpl().withPath("/projects"));
    dockerEnv
        .getMachines()
        .put(
            "myMachine",
            new MachineConfigImpl(emptyList(), emptyMap(), emptyMap(), emptyMap(), volumes));

    // when
    Tool dockerTool = applier.from("dockerEnv", dockerEnv);

    // then
    assertTrue(dockerTool.getVolumes().isEmpty());
    assertTrue(dockerTool.getMountSources());
  }

