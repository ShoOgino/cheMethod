  @Test(
      expectedExceptions = WorkspaceExportException.class,
      expectedExceptionsMessageRegExp =
          "Workspace with multiple `dockerimage` environments can not be converted to devfile")
  public void shouldThrowExceptionIfWorkspaceHasMultipleEnvironmentsWithKubernetesOpenShiftRecipes()
      throws Exception {
    // given
    WorkspaceConfigImpl workspaceConfig = new WorkspaceConfigImpl();
    EnvironmentImpl dockerimageEnv1 = new EnvironmentImpl();
    dockerimageEnv1.setRecipe(new RecipeImpl(DockerImageEnvironment.TYPE, null, null, null));
    workspaceConfig.getEnvironments().put("dockerimage1", dockerimageEnv1);

    EnvironmentImpl dockerimageEnv2 = new EnvironmentImpl();
    dockerimageEnv2.setRecipe(new RecipeImpl(DockerImageEnvironment.TYPE, null, null, null));
    workspaceConfig.getEnvironments().put("dockerimage2", dockerimageEnv2);

    // when
    dockerimageComponentProvisioner.provision(new Devfile(), workspaceConfig);
  }

