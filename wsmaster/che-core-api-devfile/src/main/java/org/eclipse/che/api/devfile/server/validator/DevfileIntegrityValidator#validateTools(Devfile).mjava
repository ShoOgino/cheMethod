  private Set<String> validateTools(Devfile devfile) throws DevfileFormatException {
    Set<String> existingNames = new HashSet<>();
    Tool editorTool = null;
    Tool recipeTool = null;
    for (Tool tool : devfile.getTools()) {
      if (!existingNames.add(tool.getName())) {
        throw new DevfileFormatException(format("Duplicate tool name found:'%s'", tool.getName()));
      }
      switch (tool.getType()) {
        case EDITOR_TOOL_TYPE:
          if (editorTool != null) {
            throw new DevfileFormatException(
                format(
                    "Multiple editor tools found: '%s', '%s'",
                    editorTool.getName(), tool.getName()));
          }
          checkFieldNotSet(tool, "local", tool.getLocal());
          checkFieldNotSet(tool, "selector", tool.getSelector());
          editorTool = tool;
          break;
        case PLUGIN_TOOL_TYPE:
          checkFieldNotSet(tool, "local", tool.getLocal());
          checkFieldNotSet(tool, "selector", tool.getSelector());
          break;
        case KUBERNETES_TOOL_TYPE:
        case OPENSHIFT_TOOL_TYPE:
          if (recipeTool != null) {
            throw new DevfileFormatException(
                format(
                    "Multiple non plugin or editor type tools found: '%s', '%s'",
                    recipeTool.getName(), tool.getName()));
          }
          checkFieldNotSet(tool, "id", tool.getId());
          recipeTool = tool;
          break;
        default:
          throw new DevfileFormatException(
              format("Unsupported tool '%s' type provided:'%s'", tool.getName(), tool.getType()));
      }
    }
    return existingNames;
  }

