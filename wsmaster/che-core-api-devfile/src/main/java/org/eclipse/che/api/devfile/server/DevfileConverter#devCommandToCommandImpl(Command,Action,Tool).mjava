  private CommandImpl devCommandToCommandImpl(
      Command devCommand, Action commandAction, Tool toolOfCommand) {
    CommandImpl command = new CommandImpl();
    command.setName(devCommand.getName());
    command.setType(commandAction.getType());
    command.setCommandLine(commandAction.getCommand());

    if (commandAction.getWorkdir() != null) {
      command.getAttributes().put(WORKING_DIRECTORY_ATTRIBUTE, commandAction.getWorkdir());
    }

    if (PLUGIN_TOOL_TYPE.equals(toolOfCommand.getType())
        || EDITOR_TOOL_TYPE.equals(toolOfCommand.getType())) {
      command.getAttributes().put(PLUGIN_ATTRIBUTE, toolOfCommand.getId());
    }

    if (devCommand.getAttributes() != null) {
      command.getAttributes().putAll(devCommand.getAttributes());
    }

    return command;
  }

