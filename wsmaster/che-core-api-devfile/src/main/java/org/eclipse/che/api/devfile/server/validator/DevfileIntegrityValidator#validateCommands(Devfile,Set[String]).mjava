  private void validateCommands(Devfile devfile, Set<String> toolNames)
      throws DevfileFormatException {
    Set<String> existingNames = new HashSet<>();
    for (Command command : devfile.getCommands()) {
      if (!existingNames.add(command.getName())) {
        throw new DevfileFormatException(
            format("Duplicate command name found:'%s'", command.getName()));
      }
      Set<String> nonExistingToolActions =
          command
              .getActions()
              .stream()
              .map(Action::getTool)
              .filter(t -> !toolNames.contains(t))
              .collect(toSet());
      if (!nonExistingToolActions.isEmpty()) {
        throw new DevfileFormatException(
            format(
                "Found actions which refer to non-existing tools in command '%s':'%s'",
                command.getName(), String.join(",", nonExistingToolActions)));
      }
    }
  }

