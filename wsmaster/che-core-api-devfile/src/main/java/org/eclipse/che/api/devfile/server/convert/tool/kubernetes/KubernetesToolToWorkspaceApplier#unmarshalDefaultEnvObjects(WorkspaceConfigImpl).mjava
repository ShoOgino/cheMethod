  private List<HasMetadata> unmarshalDefaultEnvObjects(WorkspaceConfigImpl workspaceConfig)
      throws DevfileException {
    String defaultEnvName = workspaceConfig.getDefaultEnv();
    if (defaultEnvName == null) {
      return new ArrayList<>();
    }
    EnvironmentImpl defaultEnv = workspaceConfig.getEnvironments().get(defaultEnvName);
    if (defaultEnv == null) {
      return new ArrayList<>();
    }
    RecipeImpl envRecipe = defaultEnv.getRecipe();
    if (!OpenShiftEnvironment.TYPE.equals(envRecipe.getType())
        && !KubernetesEnvironment.TYPE.equals(envRecipe.getType())) {
      throw new DevfileException(
          format(
              "Kubernetes tool can only be applied to a workspace with either kubernetes or "
                  + "openshift recipe type but workspace has a recipe of type '%s'",
              envRecipe.getType()));
    }

    return unmarshal(envRecipe.getContent());
  }

