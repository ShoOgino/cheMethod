    /**
     * Gets userId by machine token
     *
     * @return user identifier
     * @throws NotFoundException
     *         when no token exists for given user and workspace
     */
    public String getUserId(String token) throws NotFoundException {
        lock.readLock().lock();
        try {
            for (Table.Cell<String, String, String> tokenCell : tokens.cellSet()) {
                if (tokenCell.getValue().equals(token)) {
                    return tokenCell.getColumnKey();
                }
            }
            throw new NotFoundException("User not found for token " + token);
        } finally {
            lock.readLock().unlock();
        }
    }

