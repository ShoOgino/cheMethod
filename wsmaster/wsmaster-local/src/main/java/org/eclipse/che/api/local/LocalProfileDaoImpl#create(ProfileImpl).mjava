    @Override
    public synchronized void create(ProfileImpl profile) throws ConflictException {
        requireNonNull(profile, "Required non-null profile");
        if (profiles.containsKey(profile.getUserId())) {
            throw new ConflictException(format("Profile for user '%s' already exists", profile.getUserId()));
        }
        profiles.put(profile.getUserId(), new ProfileImpl(profile));
    }

