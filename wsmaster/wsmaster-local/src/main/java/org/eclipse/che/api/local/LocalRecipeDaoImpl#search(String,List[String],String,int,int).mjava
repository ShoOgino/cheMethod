    @Override
    public List<RecipeImpl> search(String user, List<String> tags, String type, int skipCount, int maxItems) throws ServerException {
        lock.readLock().lock();
        try {
            Stream<RecipeImpl> recipesStream = recipes.values()
                                                      .stream()
                                                      .filter(recipe -> (tags == null || recipe.getTags().containsAll(tags))
                                                                        && (type == null || type.equals(recipe.getType())))
                                                      .skip(skipCount);
            if (maxItems != 0) {
                recipesStream = recipesStream.limit(maxItems);
            }
            return recipesStream.collect(Collectors.toList());
        } finally {
            lock.readLock().unlock();
        }
    }

