    @Override
    public List<StackImpl> searchStacks(String user, @Nullable List<String> tags, int skipCount, int maxItems) {
        lock.readLock().lock();
        try {
            Stream<StackImpl> stacksStream = stacks.values()
                                                   .stream()
                                                   .skip(skipCount)
                                                   .filter(decoratedStack -> tags == null ||
                                                                             decoratedStack.getTags().containsAll(tags));
            if (maxItems != 0) {
                stacksStream = stacksStream.limit(maxItems);
            }

            return stacksStream.map(StackImpl::new)
                               .collect(toList());
        } finally {
            lock.readLock().unlock();
        }
    }

