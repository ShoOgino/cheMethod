    @Override
    public synchronized WorkspaceImpl create(WorkspaceImpl workspace) throws ConflictException, ServerException {
        if (workspaces.containsKey(workspace.getId())) {
            throw new ConflictException("Workspace with id " + workspace.getId() + " already exists");
        }
        if (find(workspace.getConfig().getName(), workspace.getNamespace()).isPresent()) {
            throw new ConflictException(format("Workspace with name %s and owner %s already exists",
                                               workspace.getConfig().getName(),
                                               workspace.getNamespace()));
        }
        workspace.setRuntime(null);
        workspace.setStatus(WorkspaceStatus.STOPPED);
        workspaces.put(workspace.getId(), new WorkspaceImpl(workspace));
        return workspace;
    }

