    @Override
    public synchronized WorkspaceImpl update(WorkspaceImpl workspace) throws NotFoundException,
                                                                             ConflictException,
                                                                             ServerException {
        requireNonNull(workspace, "Required non-null workspace");
        if (!workspaces.containsKey(workspace.getId())) {
            throw new NotFoundException("Workspace with id " + workspace.getId() + " was not found");
        }
        if (find(workspace.getName(), workspace.getNamespace()).isPresent()) {
            throw new ConflictException(format("Workspace with name %s and owner %s already exists",
                                               workspace.getConfig().getName(),
                                               workspace.getNamespace()));
        }
        workspace.setStatus(null);
        workspace.setRuntime(null);
        workspaces.put(workspace.getId(), new WorkspaceImpl(workspace, workspace.getAccount()));
        return workspace;
    }

