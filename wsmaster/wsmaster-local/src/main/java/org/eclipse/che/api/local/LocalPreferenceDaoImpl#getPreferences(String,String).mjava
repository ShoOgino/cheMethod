    @Override
    public synchronized Map<String, String> getPreferences(String userId, String filter) throws ServerException {
        requireNonNull(userId);
        requireNonNull(filter);
        return filter(getPreferences(userId), filter);
    }

