    @Override
    public synchronized void update(UserImpl update) throws NotFoundException, ConflictException {
        requireNonNull(update);
        final UserImpl user = users.get(update.getId());
        if (user == null) {
            throw new NotFoundException(format("User with id '%s' doesn't exist", update.getId()));
        }
        checkConflicts(update, "update");
        users.put(update.getId(), new UserImpl(update));
    }

