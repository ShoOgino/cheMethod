    @Override
    public void update(Profile profile) throws NotFoundException {
        lock.writeLock().lock();
        try {
            final Profile myProfile = profiles.get(profile.getId());
            if (myProfile == null) {
                throw new NotFoundException(String.format("Profile not found %s", profile.getId()));
            }
            myProfile.getAttributes().clear();
            myProfile.getAttributes().putAll(profile.getAttributes());
        } finally {
            lock.writeLock().unlock();
        }
    }

