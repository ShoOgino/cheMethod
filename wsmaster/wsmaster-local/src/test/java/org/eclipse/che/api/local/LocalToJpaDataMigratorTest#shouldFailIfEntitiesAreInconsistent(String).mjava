    @Test(expectedExceptions = Exception.class, dataProvider = "failFilenames")
    public void shouldFailIfEntitiesAreInconsistent(String filename) throws Exception {
        Files.delete(workingDir.resolve(filename));
        migrator.performMigration(workingDir.toString(),
                                  userDao,
                                  profileDao,
                                  preferenceDao,
                                  sshDao,
                                  workspaceDao,
                                  snapshotDao,
                                  recipeDao,
                                  stackDao,
                                  stackJsonAdapter,
                                  workspaceCfgJsonAdapter);
    }

