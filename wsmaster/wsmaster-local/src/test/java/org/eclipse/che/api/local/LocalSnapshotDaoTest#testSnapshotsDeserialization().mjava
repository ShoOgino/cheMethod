    @Test
    public void testSnapshotsDeserialization() throws Exception {
        final SnapshotImpl snapshot = createSnapshot();
        write(snapshotsPath, GSON.toJson(singletonMap(snapshot.getId(), snapshot)).getBytes());

        snapshotDao.loadSnapshots();

        final SnapshotImpl result = snapshotDao.getSnapshot(snapshot.getId());
        assertEquals(result, snapshot);
    }

