    @DataProvider(name = "failOnMigrateAttempts")
    public Object[][] failOnMigrateAttempts() {
        return new TestAction[][] {
                {() -> doThrow(new ServerException("fail")).when(userDao).create(any())},
                {() -> doThrow(new ServerException("fail")).when(profileDao).create(any())},
                {() -> doThrow(new ServerException("fail")).when(preferenceDao).setPreferences(anyString(), any())},
                {() -> doThrow(new ServerException("fail")).when(sshDao).create(any())},
                {() -> doThrow(new ServerException("fail")).when(workspaceDao).create(any())},
                {() -> doThrow(new ServerException("fail")).when(snapshotDao).saveSnapshot(any())},
                {() -> doThrow(new ServerException("fail")).when(recipeDao).create(any())},
                {() -> doThrow(new ServerException("fail")).when(stackDao).create(any())}
        };
    }

