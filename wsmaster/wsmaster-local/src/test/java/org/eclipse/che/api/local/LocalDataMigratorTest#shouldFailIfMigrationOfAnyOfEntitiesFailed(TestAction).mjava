    @Test(expectedExceptions = Exception.class, dataProvider = "failOnMigrateAttempts")
    public void shouldFailIfMigrationOfAnyOfEntitiesFailed(TestAction failOnMigrate) throws Exception {
        failOnMigrate.perform();

        dataMigrator.performMigration(baseDir.toString(),
                                      userDao,
                                      profileDao,
                                      preferenceDao,
                                      sshDao,
                                      workspaceDao,
                                      snapshotDao,
                                      recipeDao,
                                      stackDao,
                                      stackJsonAdapter,
                                      workspaceCfgJsonAdapter);
    }

