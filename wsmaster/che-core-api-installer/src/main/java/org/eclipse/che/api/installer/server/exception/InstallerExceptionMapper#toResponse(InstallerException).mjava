    @Override
    public Response toResponse(InstallerException exception) {
        ServiceError serviceError = DtoFactory.newDto(ServiceError.class).withMessage(exception.getMessage());
        String errorAsJson = DtoFactory.getInstance().toJson(serviceError);

        if (exception instanceof InstallerNotFoundException) {
            return Response.status(Response.Status.NOT_FOUND)
                           .entity(errorAsJson)
                           .type(MediaType.APPLICATION_JSON)
                           .build();

        } else if (exception instanceof InstallerAlreadyExistsException) {
            return Response.status(Response.Status.CONFLICT)
                           .entity(errorAsJson)
                           .type(MediaType.APPLICATION_JSON)
                           .build();

        } else if (exception instanceof IllegalInstallerKeyException) {
            return Response.status(Response.Status.BAD_REQUEST)
                           .entity(errorAsJson)
                           .type(MediaType.APPLICATION_JSON)
                           .build();

        } else {
            return Response.serverError()
                           .entity(errorAsJson)
                           .type(MediaType.APPLICATION_JSON)
                           .build();
        }
    }

