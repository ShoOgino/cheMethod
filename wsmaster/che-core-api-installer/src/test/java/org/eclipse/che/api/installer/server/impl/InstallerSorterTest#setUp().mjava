    @BeforeMethod
    public void setUp() throws Exception {
        when(installerRegistry.getInstaller(eq(InstallerKeyImpl.parse("fqn1")))).thenReturn(installer1);
        when(installerRegistry.getInstaller(eq(InstallerKeyImpl.parse("fqn2")))).thenReturn(installer2);
        when(installerRegistry.getInstaller(eq(InstallerKeyImpl.parse("fqn3")))).thenReturn(installer3);
        when(installerRegistry.getInstaller(eq(InstallerKeyImpl.parse("fqn4")))).thenThrow(new InstallerNotFoundException("Installer not found"));

        when(installer1.getDependencies()).thenReturn(singletonList("fqn3"));
        when(installer1.getId()).thenReturn("fqn1");

        when(installer2.getDependencies()).thenReturn(singletonList("fqn3"));
        when(installer2.getId()).thenReturn("fqn2");

        when(installer3.getId()).thenReturn("fqn3");
    }

