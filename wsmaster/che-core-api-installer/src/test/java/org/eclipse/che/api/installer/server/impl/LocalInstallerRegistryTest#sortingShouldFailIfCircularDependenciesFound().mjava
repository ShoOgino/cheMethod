    @Test(expectedExceptions = InstallerException.class,
          expectedExceptionsMessageRegExp = "Installers circular dependency found between 'installer1:v1'" +
                                            " and 'installer3:latest'")
    public void sortingShouldFailIfCircularDependenciesFound() throws Exception {
        when(installer1v1.getDependencies()).thenReturn(singletonList("installer2:latest"));
        when(installer2latest.getDependencies()).thenReturn(singletonList("installer3:latest"));
        when(installer3latest.getDependencies()).thenReturn(singletonList("installer1:v1"));

        registry.getOrderedInstallers(asList("installer1:v1", "installer2", "installer3:latest"));
    }

