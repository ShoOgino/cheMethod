    @Test
    public void shouldReturnOrderedInstallers() throws Exception {
        InstallerImpl installer1 = TestInstallerFactory.createInstaller("id_1", "version_1");
        InstallerImpl installer2 = TestInstallerFactory.createInstaller("id_2", "version_2");

        installer.setDependencies(Collections.emptyList());
        installer1.setDependencies(Collections.singletonList("id_0:version_0"));
        installer2.setDependencies(Collections.singletonList("id_1:version_1"));

        registry.update(installer);
        registry.add(installer1);
        registry.add(installer2);

        List<Installer> orderedInstallers = registry.getOrderedInstallers(ImmutableList.of("id_2:version_2"));

        assertEquals(orderedInstallers.size(), 3);
        assertInstaller(orderedInstallers.get(0), installer);
        assertInstaller(orderedInstallers.get(1), installer1);
        assertInstaller(orderedInstallers.get(2), installer2);
    }

