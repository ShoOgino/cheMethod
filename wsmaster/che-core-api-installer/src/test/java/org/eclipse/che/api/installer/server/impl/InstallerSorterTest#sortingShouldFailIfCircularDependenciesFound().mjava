    @Test(expectedExceptions = InstallerException.class, expectedExceptionsMessageRegExp = ".*fqn1.*fqn2.*")
    public void sortingShouldFailIfCircularDependenciesFound() throws Exception {
        when(installer1.getDependencies()).thenReturn(singletonList("fqn2"));
        when(installer2.getDependencies()).thenReturn(singletonList("fqn1"));

        installerSorter.sort(Arrays.asList("fqn1", "fqn2"));
    }

