    private static SystemEventDto asDto(SystemEvent event) {
        switch (event.getType()) {
            case STATUS_CHANGED:
                SystemStatusChangedEvent statusChanged = (SystemStatusChangedEvent)event;
                return DtoFactory.newDto(SystemStatusChangedEventDto.class)
                                 .withStatus(statusChanged.getStatus())
                                 .withPrevStatus(statusChanged.getPrevStatus())
                                 .withType(statusChanged.getType());
            default:
                throw new IllegalArgumentException("Can't convert event of type '" + event.getType() + "' to DTO");
        }
    }

