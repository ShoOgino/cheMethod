    /**
     * Creates new user.
     *
     * @param user
     *         POJO representation of user entity
     * @throws ConflictException
     *         when given user cannot be created
     * @throws ServerException
     *         when any other error occurs
     */
    public void create(User user, boolean isTemporary) throws ConflictException, ServerException {
        if (reservedNames.contains(user.getName().toLowerCase())) {
            throw new ConflictException(String.format("Username \"%s\" is reserved", user.getName()));
        }
        user.withId(generate("user", ID_LENGTH))
            .withPassword(firstNonNull(user.getPassword(), generate("", PASSWORD_LENGTH)));
        userDao.create(user);

        profileDao.create(new Profile(user.getId()));

        final Map<String, String> preferences = new HashMap<>(4);
        preferences.put("temporary", Boolean.toString(isTemporary));
        preferences.put("codenvy:created", Long.toString(System.currentTimeMillis()));
        try {
            preferenceDao.setPreferences(user.getId(), preferences);
        } catch (NotFoundException e) {
            LOG.warn(format("Cannot set creation time preferences for user %s.", user.getId()), e);
        }
    }

