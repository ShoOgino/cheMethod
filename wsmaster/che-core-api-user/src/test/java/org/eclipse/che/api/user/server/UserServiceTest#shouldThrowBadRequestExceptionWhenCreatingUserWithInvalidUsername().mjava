    @Test
    public void shouldThrowBadRequestExceptionWhenCreatingUserWithInvalidUsername() throws Exception {
        final UserDescriptor newUser = DtoFactory.getInstance()
                                                 .createDto(UserDescriptor.class)
                                                 .withName("test-123@gmail.com")
                                                 .withPassword("password");
        when(securityContext.isUserInRole("system/admin")).thenReturn(true);

        final ContainerResponse response = makeRequest(HttpMethod.POST, SERVICE_PATH + "/create", newUser);

        assertEquals(response.getStatus(), BAD_REQUEST.getStatusCode());
        verify(userManager, never()).create(any(User.class), anyBoolean());
    }

