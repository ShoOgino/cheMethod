    @Test
    public void shouldFireUserRemovedEventOnRemoveExistedUser() throws Exception {
        final UserImpl user = users[0];
        final UserRemovedEvent[] firedEvent = {null};
        EventSubscriber<UserRemovedEvent> userRemovedSubscriber = event -> firedEvent[0] = event;
        eventService.subscribe(userRemovedSubscriber, UserRemovedEvent.class);

        userDao.remove(user.getId());

        assertNotNull(firedEvent[0]);
        assertEquals(firedEvent[0].getUserId(), user.getId());
        eventService.unsubscribe(userRemovedSubscriber, UserRemovedEvent.class);
    }

