    @Test
    public void testLinksForUser() {
        final Profile profile = new Profile().withId(testUser.getId());
        when(securityContext.isUserInRole("user")).thenReturn(true);

        final Set<String> expectedRels = new HashSet<>(asList(LINK_REL_GET_CURRENT_USER_PROFILE,
                                                              LINK_REL_UPDATE_CURRENT_USER_PROFILE,
                                                              LINK_REL_GET_USER_PROFILE_BY_ID,
                                                              LINK_REL_UPDATE_PREFERENCES));

        assertEquals(asRels(service.toDescriptor(profile, securityContext).getLinks()), expectedRels);
    }

