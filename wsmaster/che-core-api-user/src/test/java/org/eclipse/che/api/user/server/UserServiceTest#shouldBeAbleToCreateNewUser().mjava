    @Test
    public void shouldBeAbleToCreateNewUser() throws Exception {
        final User userByToken = new User().withEmail("test@email.com").withName("test");
        final String userEmail = "test@email.com";
        final String userName = "test";
        final String token = "test_token";
        when(tokenValidator.validateToken(token)).thenReturn(userByToken);

        final ContainerResponse response = makeRequest(HttpMethod.POST, SERVICE_PATH + "/create?token=" + token, null);

        assertEquals(response.getStatus(), CREATED.getStatusCode());
        final UserDescriptor user = (UserDescriptor)response.getEntity();
        assertEquals(user.getEmail(), userEmail);
        assertEquals(user.getName(), userName);
        assertEquals(user.getPassword(), "<none>");
        verify(userManager).create(any(User.class), eq(false));

    }

