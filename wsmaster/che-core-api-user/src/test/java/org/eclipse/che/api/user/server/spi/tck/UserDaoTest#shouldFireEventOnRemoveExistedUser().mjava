    @Test
    public void shouldFireEventOnRemoveExistedUser() throws Exception {
        final UserImpl user = users[0];
        final String[] firedUserId = {null};
        EventSubscriber eventSubscriber =
                (EventSubscriber<PostUserRemovedEvent>)event -> firedUserId[0] = event.getUserId();

        eventService.subscribe(eventSubscriber, PostUserRemovedEvent.class);
        userDao.remove(user.getId());
        Assert.assertEquals(firedUserId[0], user.getId());
        eventService.unsubscribe(eventSubscriber, PostUserRemovedEvent.class);
    }

