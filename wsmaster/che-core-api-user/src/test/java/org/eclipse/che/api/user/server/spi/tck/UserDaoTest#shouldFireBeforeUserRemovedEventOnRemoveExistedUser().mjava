    @Test
    public void shouldFireBeforeUserRemovedEventOnRemoveExistedUser() throws Exception {
        final UserImpl user = users[0];
        final BeforeUserRemovedEvent[] firedEvent = {null};
        EventSubscriber<BeforeUserRemovedEvent> beforeUserRemovedSubscriber = event -> firedEvent[0] = event;
        eventService.subscribe(beforeUserRemovedSubscriber, BeforeUserRemovedEvent.class);

        userDao.remove(user.getId());

        assertNotNull(firedEvent[0]);
        assertEquals(firedEvent[0].getUser().getId(), user.getId());
        eventService.unsubscribe(beforeUserRemovedSubscriber, BeforeUserRemovedEvent.class);
    }

