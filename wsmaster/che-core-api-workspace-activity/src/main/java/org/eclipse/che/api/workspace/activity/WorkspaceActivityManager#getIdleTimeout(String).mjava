  private long getIdleTimeout(String wsId) throws NotFoundException, ServerException {
    WorkspaceImpl workspace = workspaceManager.getWorkspace(wsId);
    Account account = accountManager.getByName(workspace.getNamespace());
    List<? extends Resource> availableResources =
        resourceManager.getAvailableResources(account.getId());
    Optional<? extends Resource> timeoutOpt =
        availableResources
            .stream()
            .filter(resource -> TimeoutResourceType.ID.equals(resource.getType()))
            .findAny();

    if (timeoutOpt.isPresent()) {
      return timeoutOpt.get().getAmount() * 60 * 1000;
    } else {
      return defaultTimeout;
    }
  }

