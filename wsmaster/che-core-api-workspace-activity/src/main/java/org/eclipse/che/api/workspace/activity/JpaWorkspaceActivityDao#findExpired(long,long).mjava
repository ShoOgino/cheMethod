  @Override
  @Transactional(rollbackOn = ServerException.class)
  public List<String> findExpired(long timestamp, long runTimeout) throws ServerException {
    try {
      return managerProvider
          .get()
          .createNamedQuery("WorkspaceActivity.getExpired", WorkspaceActivity.class)
          .setParameter("expiration", timestamp)
          .setParameter("runTimeout", runTimeout)
          .getResultList()
          .stream()
          .map(WorkspaceActivity::getWorkspaceId)
          .collect(Collectors.toList());
    } catch (RuntimeException x) {
      throw new ServerException(x.getLocalizedMessage(), x);
    }
  }

