    @Test
    public void startsTemporaryWorkspace() throws Exception {
        final WorkspaceConfigImpl workspaceConfig = createConfig();
        final WorkspaceImpl workspace = createAndMockWorkspace(workspaceConfig, NAMESPACE_1);
        mockRuntime(workspace, STARTING);
        mockAnyWorkspaceStart();
        when(workspaceDao.get(workspace.getId())).thenReturn(workspace);

        workspaceManager.startWorkspace(workspaceConfig, workspace.getNamespace(), true, emptyMap());

        verify(runtimes).startAsync(workspaceCaptor.capture(), eq(workspace.getConfig().getDefaultEnv()), any());
        assertTrue(workspaceCaptor.getValue().isTemporary());
    }

