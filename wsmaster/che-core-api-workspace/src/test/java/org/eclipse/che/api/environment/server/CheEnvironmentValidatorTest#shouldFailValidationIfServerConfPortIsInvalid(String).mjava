  @Test(
    expectedExceptions = IllegalArgumentException.class,
    expectedExceptionsMessageRegExp = "Machine .* contains server conf with invalid port .*",
    dataProvider = "invalidPortProvider"
  )
  public void shouldFailValidationIfServerConfPortIsInvalid(String invalidPort) throws Exception {
    MachineConfigDto config = createMachineConfig();
    config.getServers().add(newDto(ServerConfDto.class).withPort(invalidPort));

    environmentValidator.validateMachine(config);
  }

