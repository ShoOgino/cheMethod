    @Test
    public void shouldStartWsAgentUsingMachineExec() throws Exception {
        wsAgentLauncher.launch(machine, agent);

        verify(machineProcessManager).exec(eq(WORKSPACE_ID),
                                           eq(MACHINE_ID),
                                           eq(new CommandImpl("org.eclipse.che.ws-agent",
                                                              "script\n" + WsAgentLauncherImpl.DEFAULT_WS_AGENT_RUN_COMMAND,
                                                              WS_AGENT_PROCESS_NAME)),
                                           eq(WsAgentLauncherImpl.getWsAgentProcessOutputChannel(WORKSPACE_ID)));

    }

