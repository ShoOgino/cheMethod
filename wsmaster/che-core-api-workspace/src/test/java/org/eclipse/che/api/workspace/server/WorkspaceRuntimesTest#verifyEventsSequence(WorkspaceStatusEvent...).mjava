    private void verifyEventsSequence(WorkspaceStatusEvent... expected) {
        Iterator<WorkspaceStatusEvent> it = captureEvents().iterator();
        for (WorkspaceStatusEvent expEvent : expected) {
            if (!it.hasNext()) {
                fail(format("It is expected to receive the status changed event '%s' -> '%s' " +
                            "but there are no more events published",
                            expEvent.getPrevStatus(),
                            expEvent.getStatus()));
            }
            WorkspaceStatusEvent cur = it.next();
            if (cur.getPrevStatus() != expEvent.getPrevStatus() || cur.getStatus() != expEvent.getStatus()) {
                fail(format("Expected to receive status change '%s' -> '%s', while received '%s' -> '%s'",
                            expEvent.getPrevStatus(),
                            expEvent.getStatus(),
                            cur.getPrevStatus(),
                            cur.getStatus()));
            }
            assertEquals(cur, expEvent);
        }
        if (it.hasNext()) {
            WorkspaceStatusEvent next = it.next();
            fail(format("No more events expected, but received '%s' -> '%s'",
                        next.getPrevStatus(),
                        next.getStatus()));
        }
    }

