  @Test
  public void shouldReturnsStackByTagList() throws ServerException {
    StackImpl stack2 = new StackImpl(stackImpl);
    stack2.setTags(singletonList("Subversion"));
    when(stackDao.searchStacks(anyString(), eq(singletonList("Subversion")), anyInt(), anyInt()))
        .thenReturn(singletonList(stack2));

    Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/stack?tags=Subversion");

    assertEquals(response.getStatusCode(), 200);
    verify(stackDao).searchStacks(anyString(), eq(singletonList("Subversion")), anyInt(), anyInt());

    List<StackDto> result = unwrapListDto(response, StackDto.class);
    assertEquals(result.size(), 1);
    assertEquals(result.get(0).getName(), stack2.getName());
  }

