  @Test
  public void shouldNotProvisionWorkspacesWithoutInstallers() throws Exception {
    // given

    // none of the machines has installers. Therefore we should see no legacy env var provisioning
    when(machineConfig1.getInstallers()).thenReturn(emptyList());

    LegacyEnvVarEnvironmentProvisioner provisioner =
        new LegacyEnvVarEnvironmentProvisioner(ImmutableSet.of(provider1, provider2));

    // when
    provisioner.provision(RUNTIME_IDENTITY, internalEnvironment);

    // then
    verify(provider1, never()).get(eq(RUNTIME_IDENTITY));
    verify(provider2, never()).get(eq(RUNTIME_IDENTITY));
  }

