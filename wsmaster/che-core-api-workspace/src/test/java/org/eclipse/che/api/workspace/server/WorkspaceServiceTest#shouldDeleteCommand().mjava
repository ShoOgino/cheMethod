    @Test
    public void shouldDeleteCommand() throws Exception {
        final WorkspaceImpl workspace = createWorkspace(createConfigDto());
        when(wsManager.getWorkspace(workspace.getId())).thenReturn(workspace);
        final int commandsSizeBefore = workspace.getConfig().getCommands().size();
        final CommandImpl firstCommand = workspace.getConfig().getCommands().iterator().next();

        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .when()
                                         .delete(SECURE_PATH + "/workspace/" + workspace.getId()
                                                 + "/command/" + firstCommand.getName());

        assertEquals(response.getStatusCode(), 204);
        assertEquals(workspace.getConfig().getCommands().size(), commandsSizeBefore - 1);
        verify(wsManager).updateWorkspace(any(), any());
    }

