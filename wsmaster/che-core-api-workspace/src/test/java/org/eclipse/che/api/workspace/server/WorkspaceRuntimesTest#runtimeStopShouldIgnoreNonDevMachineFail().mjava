    @Test
    public void runtimeStopShouldIgnoreNonDevMachineFail() throws Exception {
        final WorkspaceImpl workspace = createWorkspace();

        doAnswer(invocation -> {
            if (!runtimes.get(workspace.getId())
                         .getRuntime()
                         .getDevMachine()
                         .getId()
                         .equals(invocation.getArguments()[0])) {
                throw new MachineException("Destroy failed");
            }
            return null;
        }).when(machineManagerMock).destroy(any(), anyBoolean());

        runtimes.start(workspace, workspace.getConfig().getDefaultEnv());
        runtimes.stop(workspace.getId());

        assertFalse(runtimes.hasRuntime(workspace.getId()));
        verify(machineManagerMock, times(2)).destroy(anyString(), anyBoolean());
    }

