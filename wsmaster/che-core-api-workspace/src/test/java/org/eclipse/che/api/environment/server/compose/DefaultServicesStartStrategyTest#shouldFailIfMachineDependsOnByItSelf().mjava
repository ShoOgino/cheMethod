  @Test(
    expectedExceptions = IllegalArgumentException.class,
    expectedExceptionsMessageRegExp = "A machine can not depend on itself: .*"
  )
  public void shouldFailIfMachineDependsOnByItSelf() {
    // given
    CheServicesEnvironmentImpl composeEnvironment = new CheServicesEnvironmentImpl();
    composeEnvironment
        .getServices()
        .put("first", new CheServiceImpl().withDependsOn(singletonList("first")));

    // when
    strategy.order(composeEnvironment);
  }

