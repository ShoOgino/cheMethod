    @BeforeMethod
    public void setUp() throws Exception {
        when(workspace.getId()).thenReturn("my-workspace");
        when(workspace.getNamespace()).thenReturn("my-namespace");
        when(workspace.getConfig()).thenReturn(mock(WorkspaceConfig.class));
        when(workspace.getConfig().getName()).thenReturn("my-name");

        when(runtimeCtx.getOutputChannel()).thenReturn(URI.create("ws://localhost/output/websocket"));
        when(runtimes.getRuntimeContext(workspace.getId())).thenReturn(Optional.of(runtimeCtx));

        linksGenerator = new WorkspaceLinksGenerator(runtimes, "http://localhost/api", "ws://localhost");

        expectedStoppedLinks = new HashMap<>();
        expectedStoppedLinks.put(LINK_REL_SELF,    "http://localhost/api/workspace/my-workspace");
        expectedStoppedLinks.put(LINK_REL_IDE_URL, "http://localhost/my-namespace/my-name");

        expectedRunningLinks = new HashMap<>(expectedStoppedLinks);
        expectedRunningLinks.put(LINK_REL_ENVIRONMENT_STATUS_CHANNEL, "ws://localhost/wsmaster/websocket");
        expectedRunningLinks.put(LINK_REL_ENVIRONMENT_OUTPUT_CHANNEL, "ws://localhost/output/websocket");
    }

