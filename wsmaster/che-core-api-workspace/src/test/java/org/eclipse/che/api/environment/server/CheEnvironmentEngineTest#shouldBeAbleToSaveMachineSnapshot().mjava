    @Test
    public void shouldBeAbleToSaveMachineSnapshot() throws Exception {
        // given
        List<Instance> instances = startEnv();
        Instance instance = instances.get(0);
        doReturn(new MachineSourceImpl("someType").setContent("some content")).when(instance).saveToSnapshot();

        // when
        engine.saveSnapshot(instance.getWorkspaceId(), instance.getId());

        // then
        verify(instance).saveToSnapshot();
    }

