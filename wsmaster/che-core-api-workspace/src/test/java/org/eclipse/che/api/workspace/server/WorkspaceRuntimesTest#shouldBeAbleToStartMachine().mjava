  @Test
  public void shouldBeAbleToStartMachine() throws Exception {
    // when
    setRuntime("workspace", WorkspaceStatus.RUNNING, "env-name");
    MachineConfig config = newMachine("workspace", "env-name", "new", false).getConfig();
    Instance instance = mock(Instance.class);
    when(envEngine.startMachine(anyString(), any(MachineConfig.class), any())).thenReturn(instance);
    when(instance.getConfig()).thenReturn(config);

    // when
    Instance actual = runtimes.startMachine("workspace", config);

    // then
    assertEquals(actual, instance);
    verify(envEngine).startMachine(eq("workspace"), eq(config), any());
  }

