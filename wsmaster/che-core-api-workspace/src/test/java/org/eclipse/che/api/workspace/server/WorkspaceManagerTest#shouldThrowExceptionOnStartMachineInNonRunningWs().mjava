    @Test(expectedExceptions = ConflictException.class, expectedExceptionsMessageRegExp = "Workspace .* is not running, new machine can't be started")
    public void shouldThrowExceptionOnStartMachineInNonRunningWs() throws Exception {
        // given
        String testWsId = "testWsId";
        WorkspaceImpl workspaceMock = mock(WorkspaceImpl.class);
        doReturn(workspaceMock).when(workspaceManager).getWorkspace(testWsId);
        when(workspaceMock.getStatus()).thenReturn(STARTING);
        MachineConfigImpl machineConfig = createMachine(testWsId, "env1", false).getConfig();

        // when
        workspaceManager.startMachine(machineConfig, testWsId);
    }

