    private WorkspaceImpl createAndMockWorkspace(WorkspaceConfig cfg, String namespace) throws NotFoundException, ServerException {
        WorkspaceImpl workspace = WorkspaceImpl.builder()
                                               .generateId()
                                               .setConfig(cfg)
                                               .setAccount(new AccountImpl("id", namespace, "type"))
                                               .setStatus(WorkspaceStatus.STOPPED)
                                               .build();
        when(workspaceDao.get(workspace.getId())).thenReturn(workspace);
        when(workspaceDao.get(workspace.getConfig().getName(), workspace.getNamespace())).thenReturn(workspace);
        when(workspaceDao.get(workspace.getConfig().getName(), NAMESPACE)).thenReturn(workspace);
        when(workspaceDao.getByNamespace(workspace.getNamespace())).thenReturn(singletonList(workspace));
        when(workspaceDao.getByNamespace(NAMESPACE)).thenReturn(singletonList(workspace));
        return workspace;
    }

