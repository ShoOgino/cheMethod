  private WorkspaceImpl createAndMockWorkspace(WorkspaceConfig cfg, String namespace)
      throws Exception {
    WorkspaceImpl workspace =
        WorkspaceImpl.builder()
            .generateId()
            .setConfig(cfg)
            .setAccount(new AccountImpl("id", namespace, "type"))
            .setStatus(STOPPED)
            .build();
    when(workspaceDao.get(workspace.getId())).thenReturn(workspace);
    when(workspaceDao.get(workspace.getConfig().getName(), workspace.getNamespace()))
        .thenReturn(workspace);
    when(workspaceDao.get(workspace.getConfig().getName(), NAMESPACE_1)).thenReturn(workspace);
    when(workspaceDao.getByNamespace(workspace.getNamespace()))
        .thenReturn(singletonList(workspace));
    when(workspaceDao.getByNamespace(NAMESPACE_1)).thenReturn(singletonList(workspace));
    when(workspaceDao.getWorkspaces(USER_ID)).thenReturn(singletonList(workspace));
    return workspace;
  }

