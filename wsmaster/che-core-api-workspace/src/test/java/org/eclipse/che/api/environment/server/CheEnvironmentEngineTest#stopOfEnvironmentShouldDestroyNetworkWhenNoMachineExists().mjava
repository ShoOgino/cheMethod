    @Test
    public void stopOfEnvironmentShouldDestroyNetworkWhenNoMachineExists() throws Exception {
        // given
        List<Instance> instances = startEnv();
        String workspaceId = instances.get(0).getWorkspaceId();
        for (Instance instance : instances) {
            engine.removeMachineFromEnvironment(instance.getWorkspaceId(), instance.getId());
        }

        // when
        engine.stop(workspaceId);

        // then
        for (Instance instance : instances) {
            verify(instance, never()).destroy();
        }
        verify(machineProvider).destroyNetwork(anyString());
    }

