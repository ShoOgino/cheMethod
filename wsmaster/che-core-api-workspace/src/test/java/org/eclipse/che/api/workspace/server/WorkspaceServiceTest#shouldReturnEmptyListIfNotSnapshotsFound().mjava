  @Test
  public void shouldReturnEmptyListIfNotSnapshotsFound() throws Exception {
    // given
    String workspaceId = "testWsId1";

    when(wsManager.getSnapshot(workspaceId)).thenReturn(Collections.emptyList());

    // when
    final Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/workspace/" + workspaceId + "/snapshot");

    // then
    assertEquals(response.getStatusCode(), 200);
    List<SnapshotDto> snapshotDtos = unwrapDtoList(response, SnapshotDto.class);
    assertTrue(snapshotDtos.isEmpty());
    verify(wsManager).getSnapshot(workspaceId);
  }

