    private static Map splitOnPairsAsMap(Object[] args) {
        HashMap<Object, Object> result = new HashMap<>(args.length);

        for (int i = 0; i < args.length; i += 2) {
            Object key = args[i];
            if (result.containsKey(key)) {
                throw new IllegalStateException("Map already contains key " + key);
            }
            result.put(key, args[i + 1]);
        }

        return result;
    }

