    @Test(expectedExceptions = ConflictException.class,
          expectedExceptionsMessageRegExp = "Environment of workspace '.*' is not running")
    public void shouldNotSaveMachineIfEnvironmentIsNotRunning() throws Exception {
        // when
        runtimes.saveMachine("namespace", "workspaceId", "machineId");

        // then
        verify(environmentEngine, never()).saveSnapshot(anyString(), anyString(), anyString());
    }

