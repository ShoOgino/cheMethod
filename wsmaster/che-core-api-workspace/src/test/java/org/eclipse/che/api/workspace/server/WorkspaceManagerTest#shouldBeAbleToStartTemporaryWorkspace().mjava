    @Test
    public void shouldBeAbleToStartTemporaryWorkspace() throws Exception {
        final WorkspaceConfigImpl config = createConfig();
        when(runtimes.start(any(), anyString(), anyBoolean())).thenReturn(mock(RuntimeDescriptor.class));
        when(runtimes.get(any())).thenThrow(new NotFoundException(""));

        final WorkspaceImpl runtime = workspaceManager.startWorkspace(createConfig(), NAMESPACE, true);

        verify(runtimes, timeout(2000)).start(workspaceCaptor.capture(), anyString(), anyBoolean());
        final WorkspaceImpl captured = workspaceCaptor.getValue();
        assertTrue(captured.isTemporary());
        verify(workspaceManager).performAsyncStart(captured, captured.getConfig().getDefaultEnv(), false);
    }

