    @Test
    public void runtimeShouldBeInStoppingStatusIfWorkspacesDevMachineIsNotStopped() throws Exception {
        final WorkspaceImpl workspace = createWorkspace();

        doAnswer(invocation -> {
            assertEquals(runtimes.get(workspace.getId()).getRuntimeStatus(), STOPPING);
            return null;
        }).when(machineManagerMock).destroy(any(), anyBoolean());

        runtimes.start(workspace, workspace.getConfig().getDefaultEnv());
        runtimes.stop(workspace.getId());
    }

