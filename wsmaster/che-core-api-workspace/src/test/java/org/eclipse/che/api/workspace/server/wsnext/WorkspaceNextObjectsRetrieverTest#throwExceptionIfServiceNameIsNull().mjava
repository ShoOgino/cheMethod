  @Test(
    expectedExceptions = InfrastructureException.class,
    expectedExceptionsMessageRegExp = "Service '.*/.*' configuration is invalid. Name is missing."
  )
  public void throwExceptionIfServiceNameIsNull() throws Exception {
    CheFeature cheFeature = testFeature();
    CheService service = testService();
    service.getMetadata().setName(null);
    doReturn(cheFeature).when(retriever).getBody(any(URI.class), eq(CheFeature.class));
    doReturn(service).when(retriever).getBody(any(URI.class), eq(CheService.class));

    retriever.get(SINGLE_FEATURE_ATTRIBUTES);
  }

