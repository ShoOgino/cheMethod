  private static CheServiceImpl createCheService(
      String suffix,
      long memLimitBytes,
      List<String> links,
      List<String> dependsOn,
      List<String> volumesFrom) {
    CheServiceImpl service = new CheServiceImpl();
    service.setMemLimit(memLimitBytes);
    service.setImage("image_repo/image" + suffix);
    service.setEnvironment(new HashMap<>(singletonMap("env" + suffix, "val" + suffix)));
    service.setCommand(new ArrayList<>(asList("this", "is", "command" + suffix)));
    service.setContainerName("containerName" + suffix);
    service.setEntrypoint(new ArrayList<>(asList("this", "is", "entrypoint" + suffix)));
    service.setExpose(new ArrayList<>(asList("8080", "9090/tcp", "7070/udp")));
    service.setLabels(new HashMap<>(singletonMap("label" + suffix, "value" + suffix)));
    if (links != null) {
      service.setLinks(new ArrayList<>(links));
    }
    if (dependsOn != null) {
      service.setDependsOn(new ArrayList<>(dependsOn));
    }
    if (volumesFrom != null) {
      service.setVolumesFrom(new ArrayList<>(volumesFrom));
    }
    //        service.setPorts(new ArrayList<>(singletonList("8080:8080"))); Forbidden
    //        service.setVolumes(new ArrayList<>(singletonList("volume"))); Forbidden

    return service;
  }

