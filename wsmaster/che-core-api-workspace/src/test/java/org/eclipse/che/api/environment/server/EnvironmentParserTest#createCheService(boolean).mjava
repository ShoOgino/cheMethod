    private static CheServiceImpl createCheService(boolean isImageBased) {
        return new CheServiceImpl()
                .withBuild(isImageBased ? null : new CheServiceBuildContextImpl("some url", "some path", null))
                .withCommand(asList("some", "command"))
                .withContainerName("con name")
                .withDependsOn(asList("depends1", "depends2"))
                .withEntrypoint(asList("some", "entrypoint"))
                .withEnvironment(singletonMap("envKey", "envValue"))
                .withExpose(asList("8080/udp", "9090/tcp"))
                .withImage(isImageBased ? DEFAULT_DOCKER_IMAGE : null)
                .withLabels(singletonMap("labelKey", "labelValue"))
                .withLinks(asList("link1", "link2"))
                .withMemLimit(123456L)
                .withNetworks(asList("net1", "net2"))
                .withPorts(asList("port1", "port2"))
                .withVolumes(asList("volume1", "volume2"))
                .withVolumesFrom(asList("volumeFrom1", "volumeFrom2"));
    }

