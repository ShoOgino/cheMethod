    @Test
    public void shouldStartWsAgentUsingMachineExec() throws Exception {
        wsAgentLauncher.startWsAgent(machine);

        verify(machineProcessManager).exec(eq(WORKSPACE_ID),
                                           eq(MACHINE_ID),
                                           eq(new CommandImpl(WS_AGENT_PROCESS_NAME,
                                                              WS_AGENT_START_CMD_LINE,
                                                              WS_AGENT_PROCESS_NAME)),
                                           eq(WsAgentLauncherImpl.getWsAgentProcessOutputChannel(WORKSPACE_ID)));

    }

