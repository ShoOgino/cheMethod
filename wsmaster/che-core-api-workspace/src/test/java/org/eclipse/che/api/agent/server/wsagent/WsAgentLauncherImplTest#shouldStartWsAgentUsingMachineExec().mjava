    @Test
    public void shouldStartWsAgentUsingMachineExec() throws Exception {
        wsAgentLauncher.startWsAgent(machine);

        verify(machineProcessManager).exec(eq(WORKSPACE_ID),
                                           eq(MACHINE_ID),
                                           eq(new CommandImpl(WsAgentLauncherImpl.WS_AGENT_PROCESS_NAME,
                                                       WS_AGENT_START_CMD_LINE,
                                                       "Arbitrary")),
                                           eq(WsAgentLauncherImpl.getWsAgentProcessOutputChannel(WORKSPACE_ID)));

    }

