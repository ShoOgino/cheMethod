  @Test
  public void shouldBeAbleToGetRecipeScript() throws Exception {
    final OldRecipeImpl recipe =
        new OldRecipeImpl()
            .withCreator("other-user")
            .withId("recipe123")
            .withScript("FROM ubuntu\n");
    when(recipeDao.getById(recipe.getId())).thenReturn(recipe);

    final Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/recipe/" + recipe.getId() + "/script");

    assertEquals(response.getStatusCode(), 200);
    assertEquals(response.getBody().print(), recipe.getScript());
  }

