  private static ChePlugin testPlugin(String pluginName, String pluginVersion) {
    ChePlugin plugin = new ChePlugin();
    CheContainer container = new CheContainer();
    container.setCommands(new ArrayList<>());
    container.setEnv(
        new ArrayList<>(
            ImmutableList.of(
                new EnvVar().name(TEST_PLUGIN_ENV_NAME).value(TEST_PLUGIN_ENV_VALUE))));
    container.setImage(TEST_PLUGIN_IMAGE);
    container.setPorts(
        new ArrayList<>(singletonList(new CheContainerPort().exposedPort(TEST_SERVER_PORT))));
    container.setVolumes(
        new ArrayList<>(
            singletonList(new Volume().name(TEST_VOLUME_NAME).mountPath(TEST_VOLUME_PATH))));
    plugin.setContainers(new ArrayList<>(singletonList(container)));
    plugin.setEndpoints(
        new ArrayList<>(
            singletonList(
                new ChePluginEndpoint()
                    .name(TEST_SERVER_NAME)
                    .targetPort(TEST_SERVER_PORT)
                    .attributes(TEST_SERVER_ATTRIBUTES))));
    plugin.setVersion(pluginVersion);
    plugin.setName(pluginName);
    return plugin;
  }

