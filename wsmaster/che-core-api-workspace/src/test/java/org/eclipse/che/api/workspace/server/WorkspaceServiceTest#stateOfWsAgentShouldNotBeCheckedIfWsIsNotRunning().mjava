  @Test
  public void stateOfWsAgentShouldNotBeCheckedIfWsIsNotRunning() throws Exception {
    final WorkspaceImpl workspace = createWorkspace(createConfigDto());
    workspace.setStatus(STARTING);
    when(wsManager.getWorkspace(workspace.getId())).thenReturn(workspace);

    final Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/workspace/" + workspace.getId() + "/check");

    verify(wsAgentHealthChecker, never()).check(any());
    assertEquals(200, response.getStatusCode());
  }

