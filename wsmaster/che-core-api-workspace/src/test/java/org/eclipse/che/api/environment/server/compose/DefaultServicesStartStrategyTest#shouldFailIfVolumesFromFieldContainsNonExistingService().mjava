    @Test(expectedExceptions = IllegalArgumentException.class,
          expectedExceptionsMessageRegExp = "Dependency 'fifth' in machine 'third' points to unknown machine.")
    public void shouldFailIfVolumesFromFieldContainsNonExistingService() throws Exception {
        // given
        CheServicesEnvironmentImpl composeEnvironment = new CheServicesEnvironmentImpl();
        composeEnvironment.getServices().put("second", new CheServiceImpl());
        composeEnvironment.getServices().put("third", new CheServiceImpl().withVolumesFrom(singletonList("fifth")));
        composeEnvironment.getServices().put("first", new CheServiceImpl());

        // when
        strategy.order(composeEnvironment);
    }

