  @Test
  public void cancelsWorkspaceStartIfEnvironmentStartIsInterrupted() throws Exception {
    WorkspaceImpl workspace = newWorkspace("workspace", "env-name");
    rejectEnvironmentStart(
        workspace,
        "env-name",
        new EnvironmentStartInterruptedException(workspace.getId(), "env-name"));

    CompletableFuture<WorkspaceRuntimeImpl> cmpFuture =
        runtimes.startAsync(workspace, "env-name", false);

    captureAndVerifyRuntimeStateAfterInterruption(workspace, cmpFuture);
  }

