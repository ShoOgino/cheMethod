  @Test(
    expectedExceptions = ConflictException.class,
    expectedExceptionsMessageRegExp =
        "Workspace with id '.*' is not 'RUNNING', it's status is 'SNAPSHOTTING'"
  )
  public void throwsConflictExceptionWhenBeginningSnapshottingForNotRunningWorkspace()
      throws Exception {
    setRuntime("workspace", WorkspaceStatus.RUNNING);

    runtimes.snapshotAsync("workspace");
    runtimes.snapshotAsync("workspace");
  }

