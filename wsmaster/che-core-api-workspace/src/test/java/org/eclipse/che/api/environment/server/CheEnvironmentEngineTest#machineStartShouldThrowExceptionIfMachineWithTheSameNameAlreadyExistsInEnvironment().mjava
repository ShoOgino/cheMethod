  @Test(
    expectedExceptions = ConflictException.class,
    expectedExceptionsMessageRegExp =
        "Machine with name '.*' already exists in environment of workspace '.*'"
  )
  public void machineStartShouldThrowExceptionIfMachineWithTheSameNameAlreadyExistsInEnvironment()
      throws Exception {
    // given
    List<Instance> instances = startEnv();
    Instance instance = instances.get(0);

    MachineConfigImpl config = createConfig(false);
    config.setName(instance.getConfig().getName());

    // when
    engine.startMachine(instance.getWorkspaceId(), config, emptyList());
  }

