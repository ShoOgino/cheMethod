    @Test
    public void shouldBeAbleToUpdateRecipe() throws Exception {
        final OldRecipeImpl recipe = new OldRecipeImpl().withId("id")
                                                        .withCreator(USER_ID)
                                                        .withType("docker")
                                                        .withScript("script1 content")
                                                        .withTags(asList("java"));
        final OldRecipeImpl updatedRecipe = new OldRecipeImpl(recipe).withType("new-type")
                                                                     .withScript("new script content")
                                                                     .withTags(asList("java", "mongodb"));
        when(recipeDao.update(any())).thenReturn(updatedRecipe);

        OldRecipeUpdate update = newDto(OldRecipeUpdate.class).withId(recipe.getId())
                                                              .withType("new-type")
                                                              .withScript("new script content")
                                                              .withTags(asList("java", "mongodb"));

        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .contentType("application/json")
                                         .body(update)
                                         .when()
                                         .put(SECURE_PATH + "/recipe");

        assertEquals(response.getStatusCode(), 200);
        verify(recipeDao).update(any(OldRecipeImpl.class));
    }

