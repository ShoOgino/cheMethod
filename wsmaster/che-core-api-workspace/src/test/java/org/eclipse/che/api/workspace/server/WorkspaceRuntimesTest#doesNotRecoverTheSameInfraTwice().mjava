  @Test
  public void doesNotRecoverTheSameInfraTwice() throws Exception {
    TestInfrastructure infra = spy(new TestInfrastructure("test1", "test2"));

    new WorkspaceRuntimes(
            eventService, emptyMap(), singleton(infra), sharedPool, workspaceDao, dbInitializer)
        .recover();

    verify(infra).getIdentities();
  }

