  @Test
  public void shouldStartWorkspaceFromConfig() throws Exception {
    final WorkspaceImpl workspace = createWorkspace(createConfigDto());
    when(wsManager.startWorkspace(anyObject(), anyString(), anyBoolean(), any()))
        .thenReturn(workspace);
    when(wsManager.getWorkspace(workspace.getId())).thenReturn(workspace);
    final WorkspaceDto workspaceDto = DtoConverter.asDto(workspace);

    final Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .contentType("application/json")
            .body(workspaceDto.getConfig())
            .when()
            .post(SECURE_PATH + "/workspace/runtime" + "?namespace=test" + "&temporary=true");

    assertEquals(response.getStatusCode(), 200);
    verify(wsManager).startWorkspace(any(), eq("test"), eq(true), eq(emptyMap()));
  }

