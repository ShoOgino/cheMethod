    @Test
    public void shouldRemoveTemporaryWorkspaceAfterStop() throws Exception {
        WorkspaceImpl workspace = createAndMockWorkspace();
        workspace.setTemporary(true);
        createAndMockDescriptor(workspace, RUNNING);

        workspaceManager.stopWorkspace(workspace.getId());

        captureAsyncTaskAndExecuteSynchronously();
        verify(workspaceDao).remove(workspace.getId());
    }

