  @Test(
    expectedExceptions = NotFoundException.class,
    expectedExceptionsMessageRegExp =
        "Machine with id '.*' is not found in environment of workspace '.*'"
  )
  public void shouldThrowExceptionOnSaveSnapshotIfMachineIsNotFound() throws Exception {
    // given
    List<Instance> instances = startEnv();
    Instance instance = instances.get(0);

    // when
    engine.saveSnapshot(instance.getWorkspaceId(), "idOfNonExistingMachine");
  }

