    @Test
    public void shouldGetWorkspaces() throws Exception {
        final WorkspaceImpl workspace1 = createWorkspace(createConfigDto());
        final WorkspaceImpl workspace2 = createWorkspace(createConfigDto(), STARTING);
        when(wsManager.getWorkspaces(USER_ID)).thenReturn(asList(workspace1, workspace2));

        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .when()
                                         .get(SECURE_PATH + "/workspace");

        assertEquals(response.getStatusCode(), 200);
        assertEquals(unwrapDtoList(response, WorkspaceDto.class).stream()
                                                                .map(WorkspaceImpl::new)
                                                                .collect(toList()),
                     asList(workspace1, workspace2));
    }

