    @Test
    public void stoppedEventShouldBePublishedAfterDevMachineStopped() throws Exception {
        final WorkspaceImpl workspace = createWorkspace();
        runtimes = spy(new WorkspaceRuntimes(machineManagerMock, eventService));
        doNothing().when(runtimes).publishEvent(any(), any(), any());

        runtimes.start(workspace, workspace.getConfig().getDefaultEnv());
        runtimes.stop(workspace.getId());

        verify(runtimes).publishEvent(EventType.STOPPED, workspace.getId(), null);
    }

