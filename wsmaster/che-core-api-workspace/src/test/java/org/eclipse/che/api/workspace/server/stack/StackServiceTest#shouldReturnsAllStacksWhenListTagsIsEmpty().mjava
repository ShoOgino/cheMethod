  /** Search stack by tags */
  @Test
  public void shouldReturnsAllStacksWhenListTagsIsEmpty() throws ServerException {
    StackImpl stack2 = new StackImpl(stackImpl);
    stack2.setTags(singletonList("subversion"));
    List<StackImpl> stacks = asList(stackImpl, stack2);
    when(stackDao.searchStacks(anyString(), anyList(), anyInt(), anyInt())).thenReturn(stacks);

    Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/stack");

    assertEquals(response.getStatusCode(), 200);
    verify(stackDao).searchStacks(anyString(), anyList(), anyInt(), anyInt());

    List<StackDto> result = unwrapListDto(response, StackDto.class);
    assertEquals(result.size(), 2);
    assertEquals(result.get(0).getName(), stackImpl.getName());
    assertEquals(result.get(1).getName(), stack2.getName());
  }

