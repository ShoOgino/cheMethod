    @Test
    public void shouldOrderServicesWithVolumesFrom() throws Exception {
        // given
        CheServicesEnvironmentImpl composeEnvironment = new CheServicesEnvironmentImpl();
        composeEnvironment.getServices().put("second", new CheServiceImpl().withVolumesFrom(singletonList("first")));
        composeEnvironment.getServices().put("third", new CheServiceImpl().withVolumesFrom(asList("first", "second")));
        composeEnvironment.getServices().put("first", new CheServiceImpl().withVolumesFrom(emptyList()));
        composeEnvironment.getServices().put("forth", new CheServiceImpl().withVolumesFrom(singletonList("third")));
        composeEnvironment.getServices().put("fifth", new CheServiceImpl().withVolumesFrom(asList("forth", "first")));
        List<String> expected = asList("first", "second", "third", "forth", "fifth");

        // when
        List<String> actual = strategy.order(composeEnvironment);

        // then
        assertEquals(actual, expected);
    }

