    private static ComposeEnvironmentImpl toCompose(CheServicesEnvironmentImpl environment) {
        ComposeEnvironmentImpl composeEnvironment = new ComposeEnvironmentImpl();
        Map<String, ComposeServiceImpl> services = environment.getServices()
                                                              .entrySet()
                                                              .stream()
                                                              .collect(toMap(Map.Entry::getKey,
                                                                             entry -> toCompose(entry.getValue())));

        return composeEnvironment.withVersion(environment.getVersion())
                                 .withServices(services);
    }

