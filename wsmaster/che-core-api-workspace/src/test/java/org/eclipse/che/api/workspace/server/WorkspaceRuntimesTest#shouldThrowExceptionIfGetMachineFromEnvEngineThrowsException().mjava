    @Test(expectedExceptions = NotFoundException.class,
          expectedExceptionsMessageRegExp = "test exception")
    public void shouldThrowExceptionIfGetMachineFromEnvEngineThrowsException() throws Exception {
        // given
        Instance expected = newMachine("workspace", "env-name", "existing", false);
        when(envEngine.getMachine("workspace", expected.getId()))
                .thenThrow(new NotFoundException("test exception"));

        // when
        runtimes.getMachine("workspace", expected.getId());

        // then
        verify(envEngine).getMachine("workspace", expected.getId());
    }

