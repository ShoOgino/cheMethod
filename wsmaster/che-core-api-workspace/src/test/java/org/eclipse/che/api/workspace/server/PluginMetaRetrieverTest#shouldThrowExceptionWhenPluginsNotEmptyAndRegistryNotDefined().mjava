  @Test(expectedExceptions = InfrastructureException.class)
  public void shouldThrowExceptionWhenPluginsNotEmptyAndRegistryNotDefined() throws Exception {
    PluginMetaRetriever pluginMetaRetriever = new PluginMetaRetriever(REGISTRY_ATTRIBUTE);
    Map<String, String> attributes =
        ImmutableMap.<String, String>builder()
            .put(Constants.WORKSPACE_TOOLING_PLUGINS_ATTRIBUTE, "plugin1")
            .build();

    pluginMetaRetriever.get(attributes);

    fail(
        "PluginMetaRetriever should throw Exception when attributes includes "
            + "plugins and no registry is defined");
  }

