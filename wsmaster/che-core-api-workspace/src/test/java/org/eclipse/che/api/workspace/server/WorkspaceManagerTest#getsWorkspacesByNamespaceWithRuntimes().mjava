    @Test
    public void getsWorkspacesByNamespaceWithRuntimes() throws Exception {
        // given
        final WorkspaceImpl workspace = createAndMockWorkspace();
        final TestInternalRuntime runtime = mockRuntime(workspace, RUNNING);

        // when
        final List<WorkspaceImpl> result = workspaceManager.getByNamespace(workspace.getNamespace(), true);

        // then
        assertEquals(result.size(), 1);

        final WorkspaceImpl res1 = result.get(0);
        assertEquals(res1.getStatus(), RUNNING, "Workspace status wasn't changed to the runtime instance status");
        assertEquals(res1.getRuntime(), runtime, "Workspace doesn't have expected runtime");
        assertFalse(res1.isTemporary(), "Workspace must be permanent");
    }

