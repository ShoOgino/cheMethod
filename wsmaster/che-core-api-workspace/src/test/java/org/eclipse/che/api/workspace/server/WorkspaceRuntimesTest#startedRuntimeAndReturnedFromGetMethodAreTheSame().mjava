  @Test
  public void startedRuntimeAndReturnedFromGetMethodAreTheSame() throws Exception {
    WorkspaceImpl workspace = newWorkspace("workspace", "env-name");
    allowEnvironmentStart(workspace, "env-name");
    prepareMachines(workspace.getId(), "env-name");

    CompletableFuture<WorkspaceRuntimeImpl> cmpFuture =
        runtimes.startAsync(workspace, "env-name", false);
    captureAsyncTaskAndExecuteSynchronously();

    assertEquals(cmpFuture.get(), runtimes.getRuntime(workspace.getId()));
  }

