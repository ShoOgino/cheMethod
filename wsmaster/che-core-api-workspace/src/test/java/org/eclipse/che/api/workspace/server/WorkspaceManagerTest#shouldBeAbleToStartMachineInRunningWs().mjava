    @Test
    public void shouldBeAbleToStartMachineInRunningWs() throws Exception {
        // given
        String testWsId = "testWsId";
        String testActiveEnv = "testActiveEnv";
        WorkspaceImpl workspaceMock = mock(WorkspaceImpl.class);
        doReturn(workspaceMock).when(workspaceManager).getWorkspace(testWsId);
        WorkspaceRuntimeImpl wsRuntimeMock = mock(WorkspaceRuntimeImpl.class);
        when(workspaceMock.getStatus()).thenReturn(RUNNING);
        when(workspaceMock.getRuntime()).thenReturn(wsRuntimeMock);
        when(wsRuntimeMock.getActiveEnv()).thenReturn(testActiveEnv);
        MachineConfigImpl machineConfig = createMachine(testWsId, testActiveEnv, false).getConfig();

        // when
        workspaceManager.startMachine(machineConfig, testWsId);

        // then
        verify(runtimes, timeout(2000)).startMachine(testWsId, machineConfig);
    }

