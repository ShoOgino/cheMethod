  @Test
  public void shouldThrowNotFoundExceptionWhenIconWasNotFound()
      throws NotFoundException, ServerException {
    StackImpl test = new StackImpl(stackImpl);
    test.setStackIcon(null);
    when(stackDao.getById(test.getId())).thenReturn(test);

    Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/stack/" + stackImpl.getId() + "/icon");

    assertEquals(response.getStatusCode(), 404);
    String expectedErrorMessage = format("Image for stack with id '%s' was not found.", STACK_ID);
    assertEquals(unwrapDto(response, ServiceError.class).getMessage(), expectedErrorMessage);
    verify(stackDao).getById(test.getId());
  }

