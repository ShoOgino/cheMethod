  @Test
  public void changesStatusFromSnapshottingToRunning() throws Exception {
    WorkspaceImpl workspace = newWorkspace("workspace", "env-name");
    setRuntime(workspace.getId(), WorkspaceStatus.RUNNING, "env-name");

    runtimes.snapshotAsync(workspace.getId());

    captureAsyncTaskAndExecuteSynchronously();
    assertEquals(runtimes.getStatus(workspace.getId()), WorkspaceStatus.RUNNING);
  }

