    @Test
    public void changesStatusFromSnapshottingToRunning() throws Exception {
        final WorkspaceImpl workspace = createWorkspace();
        runtimes.start(workspace, workspace.getConfig().getDefaultEnv(), false);

        runtimes.snapshotAsync(workspace.getId());

        captureAsyncTaskAndExecuteSynchronously();
        assertEquals(runtimes.get(workspace.getId()).getRuntimeStatus(), WorkspaceStatus.RUNNING);
    }

