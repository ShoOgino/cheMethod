  @Test(
    expectedExceptions = InfrastructureException.class,
    expectedExceptionsMessageRegExp = "Error occurred on retrieval of feature .*. Error: test error"
  )
  public void throwsExceptionWhenFeatureRetrievalFails() throws Exception {
    doThrow(new IOException("test error"))
        .when(retriever)
        .getBody(any(URI.class), eq(CheFeature.class));

    retriever.get(SINGLE_FEATURE_ATTRIBUTES);
  }

