  @BeforeMethod
  public void setUp() throws Exception {
    compFuture = new CompletableFuture<>();

    when(factory.httpChecker(any(URL.class), any(), anyString(), anyString(), any(Timer.class)))
        .thenReturn(connectionChecker);
    when(connectionChecker.getReportCompFuture()).thenReturn(compFuture);

    checker = new ServersReadinessChecker(runtimeIdentity, MACHINE_NAME, getDefaultServers(), factory);
  }

