    @Test
    public void shouldCloseProcessLoggerIfExecFails() throws Exception {
        //given
        doThrow(Exception.class).when(instanceProcess).start();

        //when
        manager.exec(WORKSPACE_ID, MACHINE_ID, command, "outputChannel");
        waitForExecutorIsCompletedTask();

        //then
        verify(logConsumer).close();
    }

