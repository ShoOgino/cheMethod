    @Test(expectedExceptions = IllegalArgumentException.class,
          expectedExceptionsMessageRegExp = "Value of attribute 'memoryLimitBytes' of machine 'machine1' is illegal")
    public void shouldThrowExceptionInCaseFailedParseMemoryLimit() throws ServerException {
        HashMap<String, MachineConfigImpl> machines = new HashMap<>();
        machines.put("machine1", new MachineConfigImpl(emptyList(),
                                                       emptyMap(),
                                                       singletonMap("memoryLimitBytes", "here should be memory size number")));
        EnvironmentImpl environment = new EnvironmentImpl(new RecipeImpl("compose",
                                                                         "application/x-yaml",
                                                                         "content",
                                                                         null),
                                                          machines);

        CheServicesEnvironmentImpl cheEnv = new CheServicesEnvironmentImpl();
        cheEnv.getServices().put("machine1", new CheServiceImpl());
        when(envParser.parse(environment)).thenReturn(cheEnv);

        // when
        parser.parse(environment);
    }

