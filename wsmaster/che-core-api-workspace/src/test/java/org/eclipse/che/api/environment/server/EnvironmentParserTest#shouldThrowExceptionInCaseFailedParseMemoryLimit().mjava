    @Test(expectedExceptions = IllegalArgumentException.class,
          expectedExceptionsMessageRegExp = "Value of attribute 'memoryLimitBytes' of machine 'machine1' is illegal")
    public void shouldThrowExceptionInCaseFailedParseMemoryLimit() throws ServerException {
        HashMap<String, ExtendedMachineImpl> machines = new HashMap<>();
        machines.put("machine1", new ExtendedMachineImpl(emptyList(),
                                                         emptyMap(),
                                                         singletonMap("memoryLimitBytes", "here should be memory size number")));
        EnvironmentImpl environment = new EnvironmentImpl(new EnvironmentRecipeImpl("compose",
                                                                                    "application/x-yaml",
                                                                                    "content",
                                                                                    null),
                                                          machines);

        CheServicesEnvironmentImpl cheEnv = new CheServicesEnvironmentImpl();
        cheEnv.getServices().put("machine1", new CheServiceImpl());
        when(envParser.parse(environment)).thenReturn(cheEnv);

        // when
        parser.parse(environment);
    }

