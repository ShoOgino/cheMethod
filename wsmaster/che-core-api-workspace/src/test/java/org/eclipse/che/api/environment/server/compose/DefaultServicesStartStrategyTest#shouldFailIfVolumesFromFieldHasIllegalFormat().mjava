  @Test(
    expectedExceptions = IllegalArgumentException.class,
    expectedExceptionsMessageRegExp = "Service volumes_from '.*' is invalid"
  )
  public void shouldFailIfVolumesFromFieldHasIllegalFormat() throws Exception {
    // given
    CheServicesEnvironmentImpl composeEnvironment = new CheServicesEnvironmentImpl();
    composeEnvironment
        .getServices()
        .put(
            "second",
            new CheServiceImpl().withVolumesFrom(singletonList("first:broken:dependency")));
    composeEnvironment.getServices().put("third", new CheServiceImpl());
    composeEnvironment.getServices().put("first", new CheServiceImpl());

    // when
    strategy.order(composeEnvironment);
  }

