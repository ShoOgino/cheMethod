    @Override
    @Transactional
    public List<WorkspaceImpl> getWorkspaces(String userId) throws ServerException {
        try {
            return managerProvider.get()
                                  .createNamedQuery("Workspace.getAll", WorkspaceImpl.class)
                                  .getResultList()
                                  .stream()
                                  .map(WorkspaceImpl::new)
                                  .collect(Collectors.toList());
        } catch (RuntimeException x) {
            throw new ServerException(x.getLocalizedMessage(), x);
        }
    }

