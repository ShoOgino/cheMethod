  /**
   * Injects runtime information such as status and {@link
   * org.eclipse.che.api.core.model.workspace.Runtime} into the workspace object, if the workspace
   * doesn't have runtime sets the status to {@link WorkspaceStatus#STOPPED}.
   *
   * @param workspace the workspace to inject runtime into
   */
  public void injectRuntime(WorkspaceImpl workspace) throws ServerException {
    RuntimeState runtimeState = runtimes.get(workspace.getId());
    if (runtimeState != null) {
      try {
        workspace.setRuntime(asRuntime(runtimeState));
      } catch (InfrastructureException e) {
        throw new ServerException(
            "Error occurred while runtime state inspection. " + e.getMessage());
      }
      workspace.setStatus(runtimeState.status);
    } else {
      workspace.setStatus(STOPPED);
    }
  }

