    /**
     * Returns all machines from environment of specific workspace.
     *
     * @param workspaceId
     *         ID of workspace that owns environment machines
     * @return list of machines
     * @throws EnvironmentNotRunningException
     *         if environment is not running
     */
    public List<Instance> getMachines(String workspaceId) throws EnvironmentNotRunningException {
        EnvironmentHolder environment;
        try (CloseableLock lock = stripedLocks.acquireReadLock(workspaceId)) {
            environment = environments.get(workspaceId);
            if (environment == null) {
                throw new EnvironmentNotRunningException("Environment with ID '" + workspaceId + "' is not found");
            }
            return new ArrayList<>(environment.machines);
        }
    }

