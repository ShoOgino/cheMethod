    private void launchAgents(EnvironmentImpl environment, List<Instance> machines) throws ServerException {
        for (Instance instance : machines) {
            Map<String, ExtendedMachineImpl> envMachines = environment.getMachines();
            if (envMachines != null) {
                ExtendedMachine extendedMachine = envMachines.get(instance.getConfig().getName());
                if (extendedMachine != null) {
                    List<String> agents = extendedMachine.getAgents();
                    launchAgents(instance, agents);
                }
            }
        }
    }

