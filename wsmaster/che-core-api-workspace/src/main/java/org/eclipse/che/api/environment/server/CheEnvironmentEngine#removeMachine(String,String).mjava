    private void removeMachine(String workspaceId,
                               String machineId) {
        try (StripedLocks.WriteLock lock = stripedLocks.acquireWriteLock(workspaceId)) {
            EnvironmentHolder environmentHolder = environments.get(workspaceId);
            if (environmentHolder != null) {
                removeFirstMatching(environmentHolder.machines, m -> m.getId().equals(machineId));
            }
        }
    }

