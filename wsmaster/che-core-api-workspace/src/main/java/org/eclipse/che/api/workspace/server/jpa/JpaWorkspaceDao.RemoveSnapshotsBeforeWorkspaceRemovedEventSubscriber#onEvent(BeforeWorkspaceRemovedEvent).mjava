        @Override
        public void onEvent(BeforeWorkspaceRemovedEvent event) {
            try {
                for (SnapshotImpl snapshot : snapshotDao.findSnapshots(event.getWorkspace().getId())) {
                    snapshotDao.removeSnapshot(snapshot.getId());
                }
            } catch (Exception x) {
                LOG.error(format("Couldn't remove snapshots before workspace '%s' is removed", event.getWorkspace().getId()), x);
            }
        }

