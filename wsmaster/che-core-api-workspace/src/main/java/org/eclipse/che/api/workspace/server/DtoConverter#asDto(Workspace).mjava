  /** Converts {@link Workspace} to {@link WorkspaceDto}. */
  public static WorkspaceDto asDto(Workspace workspace) {
    Subject subject = EnvironmentContext.getCurrent().getSubject();
    WorkspaceDto workspaceDto =
        newDto(WorkspaceDto.class)
            .withId(workspace.getId())
            .withStatus(workspace.getStatus())
            .withNamespace(workspace.getNamespace())
            .withTemporary(workspace.isTemporary())
            .withAttributes(workspace.getAttributes())
            .withConfig(asDto(workspace.getConfig()));

    if (workspace.getRuntime() != null) {
      RuntimeDto runtime = asDto(workspace.getRuntime());
      runtime.setUserToken(subject.getToken());
      workspaceDto.setRuntime(runtime);
    }

    return workspaceDto;
  }

