  /**
   * Fill the provided map with environment variables that are provided by installers.
   *
   * @param env map to fill
   * @param installers installers to retrieve env
   */
  private void fillEnv(Map<String, String> env, List<Installer> installers) {
    for (Installer installer : installers) {
      String envVars = installer.getProperties().get(Installer.ENVIRONMENT_PROPERTY);
      if (isNullOrEmpty(envVars)) {
        return;
      }

      for (String envVar : envVars.split(",")) {
        String[] items = envVar.split("=");
        if (items.length != 2) {
          LOG.warn(format("Illegal environment variable '%s' format", envVar));
          continue;
        }
        String name = items[0];
        String value = items[1];

        env.put(name, value);
      }
    }
  }

