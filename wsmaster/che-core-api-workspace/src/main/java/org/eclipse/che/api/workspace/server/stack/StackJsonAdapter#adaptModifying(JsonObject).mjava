  public void adaptModifying(JsonObject stack) {
    // inject a new source into workspace configuration dev machine's source
    // and adapt an old workspace configuration to a new one
    final JsonElement wsConfEl = stack.get("workspaceConfig");
    if (wsConfEl != null && wsConfEl.isJsonObject()) {
      final JsonObject wsConfig = wsConfEl.getAsJsonObject();
      final JsonObject defaultEnv = findDefaultEnv(wsConfig);
      if (defaultEnv != null) {
        final JsonObject devMachine = findDevMachine(defaultEnv);
        if (devMachine != null) {
          // consider stack source as the source of the dev-machine
          if (stack.has("source") && stack.get("source").isJsonObject()) {
            devMachine.add("source", asWorkspaceConfigSource(stack.getAsJsonObject("source")));
          }
        }

        // convert workspace config
        workspaceConfigAdapter.adaptModifying(wsConfig);
      }
    }
  }

