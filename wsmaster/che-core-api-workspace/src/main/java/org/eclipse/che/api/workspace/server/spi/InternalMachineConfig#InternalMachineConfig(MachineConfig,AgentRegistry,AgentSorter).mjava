    public InternalMachineConfig(MachineConfig originalConfig,
                                 AgentRegistry agentRegistry,
                                 AgentSorter agentSorter) throws InfrastructureException {
        this.agentSorter = agentSorter;
        this.agentRegistry = agentRegistry;
        this.agents = new ArrayList<>();
        this.servers = new HashMap<>();
        this.servers.putAll(originalConfig.getServers());
        this.attributes = new HashMap<>(originalConfig.getAttributes());

        initAgents(originalConfig.getAgents());
    }

