    public RuntimeContext(Environment environment,
                          RuntimeIdentity identity,
                          RuntimeInfrastructure infrastructure,
                          AgentSorter agentSorter,
                          AgentRegistry agentRegistry,
                          String statusChannel)
            throws ValidationException, InfrastructureException {
        this.environment = environment;
        this.identity = identity;
        this.infrastructure = infrastructure;
        this.recipe = resolveRecipe(environment.getRecipe());

        Map<String, ? extends MachineConfig> effectiveMachines = environment.getMachines();
        for(Map.Entry<String, ? extends MachineConfig> entry : effectiveMachines.entrySet()) {
            internalMachines.put(entry.getKey(), new InternalMachineConfig(entry.getValue(), agentRegistry, agentSorter));
        }

        URL tmp;
        try {
            tmp = new URL(statusChannel);
        } catch (MalformedURLException e) {
            tmp = null;
            LOG.error("URL building error for RuntimeContext status channel: " + infrastructure.getName() + " : " +  e.getMessage());
        }
        this.statusChannel = tmp;

    }

