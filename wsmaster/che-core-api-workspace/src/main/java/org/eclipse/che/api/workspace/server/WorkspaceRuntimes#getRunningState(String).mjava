    private WorkspaceState getRunningState(String workspaceId) throws NotFoundException, ConflictException {
        final WorkspaceState state = workspaces.get(workspaceId);
        if (state == null) {
            throw new NotFoundException("Workspace with id '" + workspaceId + "' is not running");
        }
        if (state.getStatus() != RUNNING) {
            throw new ConflictException(format("Workspace with id '%s' is not 'RUNNING', it's status is '%s'",
                                               workspaceId,
                                               state.getStatus()));
        }
        return state;
    }

