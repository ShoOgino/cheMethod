  @VisibleForTesting
  void recover() {
    for (RuntimeInfrastructure infra : new HashSet<>(infraByRecipe.values())) {
      try {
        for (RuntimeIdentity identity : infra.getIdentities()) {
          recoverOne(infra, identity);
        }
      } catch (UnsupportedOperationException x) {
        LOG.warn("Not recoverable infrastructure: '{}'", infra.getName());
      } catch (InternalInfrastructureException x) {
        LOG.error(
            format(
                "An error occurred while attempted to recover runtimes using infrastructure '%s'",
                infra.getName()),
            x);
      } catch (ServerException | InfrastructureException x) {
        LOG.error(
            "An error occurred while attempted to recover runtimes using infrastructure '{}'. Reason: '{}'",
            infra.getName(),
            x.getMessage());
      }
    }
  }

