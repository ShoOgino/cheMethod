  @PreDestroy
  private void cleanup() {
    boolean interrupted = false;

    executor.shutdown();

    try {
      if (!executor.awaitTermination(10, TimeUnit.SECONDS)) {
        executor.shutdownNow();
        if (!executor.awaitTermination(10, TimeUnit.SECONDS)) {
          LOG.warn("Unable terminate main pool");
        }
      }
    } catch (InterruptedException e) {
      interrupted = true;
      executor.shutdownNow();
    }

    if (interrupted) {
      Thread.currentThread().interrupt();
    }
  }

