    /**
     * Parses recipe environment into Docker Compose model.
     *
     * @param environment environment to parse
     * @throws IllegalArgumentException
     *         when environment or environment recipe is invalid
     * @throws ServerException
     *         when environment recipe can not be retrieved
     */
    public ComposeEnvironmentImpl parse(Environment environment) throws IllegalArgumentException,
                                                                        ServerException {
        checkNotNull(environment, "Environment should not be null");
        checkNotNull(environment.getRecipe(), "Environment recipe should not be null");
        checkNotNull(environment.getRecipe().getContentType(), "Content type of environment recipe should not be null");
        checkArgument(environment.getRecipe().getContent() != null || environment.getRecipe().getLocation() != null,
                      "Recipe of environment must contain location or content");

        String recipeContent = getContentOfRecipe(environment.getRecipe());
        return parseEnvironmentRecipeContent(recipeContent,
                                             environment.getRecipe().getContentType());
    }

