    protected void launchAgents(Instance instance, List<String> agents) throws ServerException, AgentException {
        for (AgentKey agentKey : agentSorter.sort(agents)) {
            if (!Thread.currentThread().isInterrupted()) {
                LOG.info("Launching '{}' agent at workspace {}", agentKey.getId(), instance.getWorkspaceId());
                Agent agent = agentRegistry.getAgent(agentKey);
                AgentLauncher launcher = launcherFactory.find(agentKey.getId(), instance.getConfig().getType());
                launcher.launch(instance, agent);
            }
        }
    }

