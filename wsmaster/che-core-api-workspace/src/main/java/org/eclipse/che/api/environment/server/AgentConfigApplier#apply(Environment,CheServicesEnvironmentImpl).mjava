    /**
     * Applies docker specific properties to an environment of machines.
     *
     * @param envConfig
     *         environment config with the list of agents that should be injected into machine
     * @param internalEnv
     *         affected environment of machines
     * @throws AgentException
     *         if any error occurs
     */
    public void apply(Environment envConfig,
                      CheServicesEnvironmentImpl internalEnv) throws AgentException {
        for (Map.Entry<String, ? extends ExtendedMachine> machineEntry : envConfig.getMachines()
                                                                                  .entrySet()) {
            String machineName = machineEntry.getKey();
            ExtendedMachine machineConf = machineEntry.getValue();
            CheServiceImpl internalMachine = internalEnv.getServices().get(machineName);

            apply(machineConf, internalMachine);
        }
    }

