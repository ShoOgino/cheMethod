  /**
   * Returns map where key is concatenation of plugin name, version and parameter name separated by
   * slash symbol. < pluginName/pluginVersion/${parameter} > to < parameterValue >
   */
  private Map<String, List<String>> getPluginsParameters(Collection<CheFeature> features) {
    Map<String, List<String>> parameters = new HashMap<>();
    for (CheFeature feature : features) {
      for (ChePluginReference pluginReference : feature.getSpec().getServices()) {
        if (pluginReference.getParameters().isEmpty()) {
          continue;
        }

        String pluginName = pluginReference.getName();
        String pluginVersion = pluginReference.getVersion();

        for (ChePluginParameter chePluginParameter : pluginReference.getParameters()) {
          // add dollar sign and curly brackets because parameter is easier to find with these signs
          // in the map keys
          String parameterKey =
              pluginName + "/" + pluginVersion + "/${" + chePluginParameter.getName() + "}";
          List<String> chePluginParameters =
              parameters.computeIfAbsent(parameterKey, key -> new ArrayList<>());
          chePluginParameters.add(chePluginParameter.getValue());
        }
      }
    }
    return parameters;
  }

