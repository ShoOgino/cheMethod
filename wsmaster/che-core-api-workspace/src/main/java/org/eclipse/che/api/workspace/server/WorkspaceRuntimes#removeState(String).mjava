    /** Removes state from in-memory storage in write lock. */
    private void removeState(String workspaceId) {
        try (@SuppressWarnings("unused") Unlocker u = locks.writeLock(workspaceId)) {
            ensurePreDestroyIsNotExecuted();
            states.remove(workspaceId);
        }
    }

