  InternalMachineConfig(MachineConfig originalConfig, InstallerRegistry installerRegistry)
      throws InfrastructureException {
    this.servers = new HashMap<>();
    if (originalConfig.getServers() != null) {
      this.servers.putAll(originalConfig.getServers());
    }

    this.env = new HashMap<>();
    if (originalConfig.getEnv() != null) {
      this.env.putAll(originalConfig.getEnv());
    }

    this.attributes = new HashMap<>();
    if (originalConfig.getAttributes() != null) {
      this.attributes.putAll(originalConfig.getAttributes());
    }

    this.installers = new ArrayList<>();
    initInstallers(originalConfig.getInstallers(), installerRegistry);
  }

