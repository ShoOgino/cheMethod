    /**
     * Removes all descriptors from the in-memory storage, while
     * {@link MachineManager#cleanup()} is responsible for machines destroying.
     */
    @PreDestroy
    @VisibleForTesting
    void cleanup() {
        isPreDestroyInvoked = true;

        // Acquiring all the locks
        for (int i = 0; i < STRIPED.size(); i++) {
            STRIPED.getAt(i).writeLock().lock();
        }

        // cleaning up
        descriptors.clear();
        startQueues.clear();

        // Releasing all the locks
        for (int i = 0; i < STRIPED.size(); i++) {
            STRIPED.getAt(i).writeLock().unlock();
        }
    }

