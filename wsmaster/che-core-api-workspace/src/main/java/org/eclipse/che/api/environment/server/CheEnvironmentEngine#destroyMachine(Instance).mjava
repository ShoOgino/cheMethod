    private void destroyMachine(Instance machine) throws MachineException {
        eventService.publish(newDto(MachineStatusEvent.class)
                                     .withEventType(MachineStatusEvent.EventType.DESTROYING)
                                     .withDev(machine.getConfig().isDev())
                                     .withMachineName(machine.getConfig().getName())
                                     .withMachineId(machine.getId())
                                     .withWorkspaceId(machine.getWorkspaceId()));

        machine.destroy();

        eventService.publish(newDto(MachineStatusEvent.class)
                                     .withEventType(MachineStatusEvent.EventType.DESTROYED)
                                     .withDev(machine.getConfig().isDev())
                                     .withMachineName(machine.getConfig().getName())
                                     .withMachineId(machine.getId())
                                     .withWorkspaceId(machine.getWorkspaceId()));
    }

