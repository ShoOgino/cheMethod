    public EnvironmentImpl(Recipe recipe,
                           Map<String, ? extends MachineConfig> machines,
                           List<? extends Warning> warnings) {
        if (recipe != null) {
            this.recipe = new RecipeImpl(recipe);
        }
        if (machines != null) {
            this.machines = machines.entrySet()
                                    .stream()
                                    .collect(Collectors.toMap(Map.Entry::getKey,
                                                              entry -> new MachineConfigImpl(entry.getValue())));
        }
        if (warnings != null) {
            this.warnings = warnings.stream().map(WarningImpl::new).collect(Collectors.toList());
        }
    }

