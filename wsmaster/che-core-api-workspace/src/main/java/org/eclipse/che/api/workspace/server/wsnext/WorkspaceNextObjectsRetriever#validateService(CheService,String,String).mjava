  private void validateService(CheService service, String name, String version)
      throws InfrastructureException {
    requireNotNull(
        service.getMetadata(), SERVICE_OBJECT_ERROR, name, version, "Metadata is missing.");
    requireNotNullNorEmpty(
        service.getMetadata().getName(), SERVICE_OBJECT_ERROR, name, version, "Name is missing.");
    requireEqual(
        name,
        service.getMetadata().getName(),
        "Service name in feature and Service objects didn't match. Service object seems broken.");
    requireNotNull(service.getSpec(), SERVICE_OBJECT_ERROR, name, version, "Spec is missing.");
    requireNotNullNorEmpty(
        service.getSpec().getVersion(), SERVICE_OBJECT_ERROR, name, version, "Version is missing.");
    requireEqual(
        version,
        service.getSpec().getVersion(),
        "Service version in feature and Service objects didn't match. Service object seems broken.");
    requireNotNullNorEmpty(
        service.getSpec().getContainers(),
        SERVICE_OBJECT_ERROR,
        name,
        version,
        "Containers are missing.");
    for (Container container : service.getSpec().getContainers()) {
      requireNotNull(container, SERVICE_OBJECT_ERROR, name, version, "A container is missing.");
      requireNotNullNorEmpty(
          container.getImage(), SERVICE_OBJECT_ERROR, name, version, "Container image is missing.");
    }
  }

