    @Override
    public void send(final AsyncRequestCallback<?> callback) {
        requestBuilder.setIncludeCredentials(true);
        tokenPromise.then(new Operation<String>() {
            @Override
            public void apply(String machineToken) throws OperationException {
                MachineAsyncRequest.this.header(AUTHORIZATION, machineToken);
                MachineAsyncRequest.super.send(callback);
            }
        }).catchError(new Operation<PromiseError>() {
            @Override
            public void apply(PromiseError arg) throws OperationException {
                callback.onError(null, arg.getCause());
            }
        });
    }

