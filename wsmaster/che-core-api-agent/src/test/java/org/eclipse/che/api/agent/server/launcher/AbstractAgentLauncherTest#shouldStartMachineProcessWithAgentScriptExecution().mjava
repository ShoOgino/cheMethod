    @Test
    public void shouldStartMachineProcessWithAgentScriptExecution() throws Exception {
        // given
        String agentId = "testAgentId";
        String agentScript = "testAgentScript";
        when(agent.getId()).thenReturn(agentId);
        when(agent.getScript()).thenReturn(agentScript);
        when(launcher.start(any(Instance.class), any(Agent.class))).thenCallRealMethod();

        // when
        launcher.launch(machine, agent);

        // then
        verify(machine).createProcess(eq(new CommandImpl(agentId, agentScript, "agent")), eq(null));
    }

