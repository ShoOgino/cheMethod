    @Test(expectedExceptions = AgentException.class)
    public void sortingShouldFailIfCircularDependenciesFound() throws Exception {
        when(agent1.getDependencies()).thenReturn(singletonList("fqn2"));
        when(agent2.getDependencies()).thenReturn(singletonList("fqn1"));

        agentSorter.sort(Arrays.asList("fqn1", "fqn2"));
    }

