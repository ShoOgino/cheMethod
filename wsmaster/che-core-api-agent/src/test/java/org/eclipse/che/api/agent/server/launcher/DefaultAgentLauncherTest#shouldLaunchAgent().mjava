    @Test
    public void shouldLaunchAgent() throws Exception {
        ArgumentCaptor<Command> commandCaptor = ArgumentCaptor.forClass(Command.class);

        agentLauncher.launch(machine, agent);

        verify(machine).createProcess(commandCaptor.capture(), (String)isNull());

        Command command = commandCaptor.getValue();
        assertEquals(command.getCommandLine(), "script1");

        verify(instanceProcess).start(any());
    }

