    @Override
    public URL getAgentUrl(AgentKey agentKey) throws AgentException {
        String url;
        if (agentKey.getVersion() == null) {
            url = agentLatestVersionUrl.replace(ID, agentKey.getId());
        } else {
            url = agentSpecificVersionUrl.replace(ID, agentKey.getId()).replace(VERSION, agentKey.getVersion());
        }
        try {
            return new URL(url);
        } catch (MalformedURLException e) {
            throw new AgentException("Malformed url " + url, e);
        }
    }

