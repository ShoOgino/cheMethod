    @Override
    public boolean isLaunched(Agent agent, InstanceProcess process, Instance machine) throws MachineException {
        Command command = new CommandImpl(format("Wait for %s, try %d", agent.getName(), ++counter),
                                          format("ps -fC %s 1>/dev/null && echo 0 || echo 1", processNameToWait),
                                          "test");

        try (ListLineConsumer lineConsumer = new ListLineConsumer()) {
            InstanceProcess waitProcess = machine.createProcess(command, null);
            waitProcess.start(lineConsumer);
            return lineConsumer.getText().endsWith("[STDOUT] 0");
        } catch (ConflictException e) {
            throw new MachineException(e.getServiceError());
        }
    }

