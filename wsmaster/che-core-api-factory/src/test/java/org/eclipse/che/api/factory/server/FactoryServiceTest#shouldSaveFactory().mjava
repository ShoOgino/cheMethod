    @Test
    public void shouldSaveFactory() throws Exception {
        final Factory factory = createFactory();
        final FactoryDto factoryDto = asDto(factory, user);
        when(factoryManager.saveFactory(any(FactoryDto.class))).thenReturn(factory);

        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .contentType(ContentType.JSON)
                                         .body(factoryDto)
                                         .expect()
//                                         .statusCode(200)
                                         .post(SERVICE_PATH);
        assertEquals(getFromResponse(response, FactoryDto.class).withLinks(emptyList()), factoryDto);
    }

