  @Test
  public void shouldReturnFactoryByIdentifierWithValidation() throws Exception {
    final Factory factory = createFactory();
    final FactoryDto factoryDto = asDto(factory, user);
    when(factoryManager.getById(FACTORY_ID)).thenReturn(factory);
    doNothing().when(acceptValidator).validateOnAccept(any(FactoryDto.class));

    final Response response =
        given()
            .when()
            .expect()
            .statusCode(200)
            .get(SERVICE_PATH + "/" + FACTORY_ID + "?validate=true");

    assertEquals(getFromResponse(response, FactoryDto.class).withLinks(emptyList()), factoryDto);
  }

