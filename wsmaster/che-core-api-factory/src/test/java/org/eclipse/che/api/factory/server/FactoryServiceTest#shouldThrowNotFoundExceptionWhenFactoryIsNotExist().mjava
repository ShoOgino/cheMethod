  @Test
  public void shouldThrowNotFoundExceptionWhenFactoryIsNotExist() throws Exception {
    final String errMessage = format("Factory with id %s is not found", FACTORY_ID);
    doThrow(new NotFoundException(errMessage)).when(factoryManager).getById(anyString());

    final Response response =
        given().expect().statusCode(404).when().get(SERVICE_PATH + "/" + FACTORY_ID);

    assertEquals(getFromResponse(response, ServiceError.class).getMessage(), errMessage);
  }

