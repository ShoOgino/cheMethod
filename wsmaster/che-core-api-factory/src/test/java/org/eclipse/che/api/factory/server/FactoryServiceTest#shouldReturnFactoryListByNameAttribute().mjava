    @Test
    public void shouldReturnFactoryListByNameAttribute() throws Exception {
        final Factory factory = createFactory();
        when(factoryManager.getByAttribute(1, 0, ImmutableList.of(Pair.of("factory.name", factory.getName()))))
                .thenReturn(ImmutableList.of(factory));

        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .contentType(APPLICATION_JSON)
                                         .when()
                                         .expect()
                                         .statusCode(200)
                                         .get(SERVICE_PATH + "/find?maxItems=1&skipCount=0&factory.name=" + factory.getName());

        final List<FactoryDto> res = unwrapDtoList(response, FactoryDto.class);
        assertEquals(res.size(), 1);
        assertEquals(res.get(0).withLinks(emptyList()), asDto(factory, user));
    }

