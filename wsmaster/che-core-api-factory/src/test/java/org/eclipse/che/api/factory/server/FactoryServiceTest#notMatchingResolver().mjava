    /**
     * Check that if there is no matching resolver, there is error
     */
    @Test
    public void notMatchingResolver() throws Exception {
        Set<FactoryParametersResolver> resolvers = new HashSet<>();
        when(factoryParametersResolvers.stream()).thenReturn(resolvers.stream());

        FactoryParametersResolver dummyResolver = mock(FactoryParametersResolver.class);
        resolvers.add(dummyResolver);
        FactoryParametersResolver fooResolver = mock(FactoryParametersResolver.class);
        resolvers.add(fooResolver);


        // accept resolver
        when(dummyResolver.accept(anyMap())).thenReturn(FALSE);
        when(fooResolver.accept(anyMap())).thenReturn(FALSE);

        // when
        Map<String, String> map = new HashMap<>();
        Response response = given().contentType(ContentType.JSON).when().body(map).post(SERVICE_PATH_RESOLVER);

        // then check we have a not found
        assertEquals(response.getStatusCode(), NOT_FOUND.getStatusCode());

        // check we never call create factories on resolver
        verify(dummyResolver, never()).createFactory(anyMap());
        verify(fooResolver, never()).createFactory(anyMap());
    }

