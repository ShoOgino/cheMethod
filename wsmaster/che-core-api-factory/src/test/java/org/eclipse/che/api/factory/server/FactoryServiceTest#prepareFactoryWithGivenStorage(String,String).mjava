    private Factory prepareFactoryWithGivenStorage(String type, String location) {
        return dto.createDto(Factory.class)
                  .withV("4.0")
                  .withWorkspace(dto.createDto(WorkspaceConfigDto.class)
                                    .withProjects(singletonList(dto.createDto(ProjectConfigDto.class)
                                                                   .withSource(dto.createDto(SourceStorageDto.class)
                                                                                              .withType(type)
                                                                                              .withLocation(location)))));
    }

