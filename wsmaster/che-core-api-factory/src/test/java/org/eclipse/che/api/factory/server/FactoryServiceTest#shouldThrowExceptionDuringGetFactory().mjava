    @Test
    public void shouldThrowExceptionDuringGetFactory() throws Exception {
        // given
        doThrow(UnsupportedEncodingException.class).when(factoryStore).getFactoryImages(anyString(), anyString());

        // when, then
        Response response = given().auth()
                                   .basic(JettyHttpServer.ADMIN_USER_NAME, JettyHttpServer.ADMIN_USER_PASSWORD)
                                   .get("/private" + SERVICE_PATH + "/factoryId");
        assertEquals(response.getStatusCode(), Status.INTERNAL_SERVER_ERROR.getStatusCode());
    }

