    @Test
    public void should() throws Exception {
        // given
        Factory factory = dto.createDto(Factory.class)
                             .withCreator(dto.createDto(Author.class)
                                             .withName(JettyHttpServer.ADMIN_USER_NAME)
                                             .withUserId(userId))
                             .withId(CORRECT_FACTORY_ID);
        factory.setId(CORRECT_FACTORY_ID);

        Factory storedFactory = dto.createDto(Factory.class)
                                   .withId(CORRECT_FACTORY_ID)
                                   .withCreator(dto.createDto(Author.class).withCreated(10L));
        when(factoryStore.getFactory(anyString())).thenReturn(storedFactory);
        doThrow(UnsupportedEncodingException.class).when(factoryStore).getFactoryImages(anyString(), anyString());

        // when, then
        Response response = given().auth()
                                   .basic(JettyHttpServer.ADMIN_USER_NAME, JettyHttpServer.ADMIN_USER_PASSWORD)
                                   .contentType(MediaType.APPLICATION_JSON)
                                   .body(JsonHelper.toJson(factory))
                                   .when()
                                   .put("/private" + SERVICE_PATH + "/" + CORRECT_FACTORY_ID);

        assertEquals(response.getStatusCode(), Status.INTERNAL_SERVER_ERROR.getStatusCode());

    }

