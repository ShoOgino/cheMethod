    @Test
    public void shouldThrowBadRequestExceptionWhenInvalidFactorySectionProvided() throws Exception {
        doThrow(new JsonSyntaxException("Invalid json")).when(factoryBuilderSpy).build(any(InputStream.class));
        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .multiPart("factory", "invalid content", FACTORY_IMAGE_MIME_TYPE)
                                         .expect()
                                         .statusCode(400)
                                         .when()
                                         .post(SERVICE_PATH);

        final ServiceError err = getFromResponse(response, ServiceError.class);
        assertEquals(err.getMessage(), "Invalid JSON value of the field 'factory' provided");
    }

