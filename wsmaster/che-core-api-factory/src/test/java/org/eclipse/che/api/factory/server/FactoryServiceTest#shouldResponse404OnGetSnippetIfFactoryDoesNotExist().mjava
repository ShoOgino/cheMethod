    @Test
    public void shouldResponse404OnGetSnippetIfFactoryDoesNotExist() throws Exception {
        // given
        doThrow(new NotFoundException("Factory URL with id " + FACTORY_ID + " is not found."))
                .when(factoryManager).getFactorySnippet(anyString(), anyString(), any());

        // when, then
        final Response response = given().expect()
                                         .statusCode(404)
                                         .when()
                                         .get(SERVICE_PATH + "/" + FACTORY_ID + "/snippet?type=url");

        assertEquals(getFromResponse(response, ServiceError.class).getMessage(),
                     "Factory URL with id " + FACTORY_ID + " is not found.");
    }

