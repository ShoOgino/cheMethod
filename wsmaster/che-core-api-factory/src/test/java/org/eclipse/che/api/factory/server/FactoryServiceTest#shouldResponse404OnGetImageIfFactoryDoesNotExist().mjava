    @Test
    public void shouldResponse404OnGetImageIfFactoryDoesNotExist() throws Exception {
        // given
        doThrow(new NotFoundException(format("Factory with id %s is not found.", ILLEGAL_FACTORY_ID))).when(factoryStore)
                                                                                                      .getFactoryImages(anyString(),
                                                                                                                        anyString());

        // when, then
        Response response = given().expect()
                                   .statusCode(404)
                                   .when()
                                   .get(SERVICE_PATH + "/" + ILLEGAL_FACTORY_ID + "/image?imgId=ImageId");

        assertEquals(dto.createDtoFromJson(response.getBody().asString(), ServiceError.class).getMessage(),
                     format("Factory with id %s is not found.", ILLEGAL_FACTORY_ID));
    }

