        @Override
        public void onEvent(BeforeUserRemovedEvent event) {
            try {
                final Pair<String, String> factoryCreator = Pair.of("creator.userId", event.getUser().getId());
                for (FactoryImpl factory : factoryDao.getByAttribute(0, 0, singletonList(factoryCreator))) {
                    factoryDao.remove(factory.getId());
                }
            } catch (Exception x) {
                LOG.error(format("Couldn't remove factories before user '%s' removed", event.getUser().getId()), x);
            }
        }

