    /**
     * Injects factory links. If factory is named then accept named link will be injected,
     * if {@code images} is not null and not empty then image links will be injected
     */
    private FactoryDto injectLinks(FactoryDto factory, Set<FactoryImage> images) {
        String username = null;
        if (factory.getCreator() != null && factory.getCreator().getUserId() != null) {
            try {
                username = userManager.getById(factory.getCreator().getUserId()).getName();
            } catch (ApiException ignored) {
                // when impossible to get username then named factory link won't be injected
            }
        }
        return factory.withLinks(images != null && !images.isEmpty()
                                 ? createLinks(factory, images, getServiceContext(), username)
                                 : createLinks(factory, getServiceContext(), username));
    }

