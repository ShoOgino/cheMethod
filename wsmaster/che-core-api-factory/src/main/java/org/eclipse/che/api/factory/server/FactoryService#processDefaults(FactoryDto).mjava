    /**
     * Checks the current user if it is not temporary then
     * adds to the factory creator information and time of creation
     */
    private void processDefaults(FactoryDto factory) throws ForbiddenException {
        try {
            final String userId = EnvironmentContext.getCurrent().getSubject().getUserId();
            final User user = userManager.getById(userId);
            if (user == null || parseBoolean(preferenceManager.find(userId).get("temporary"))) {
                throw new ForbiddenException("Current user is not allowed to use this method.");
            }
            factory.setCreator(DtoFactory.newDto(AuthorDto.class)
                                         .withUserId(userId)
                                         .withName(user.getName())
                                         .withEmail(user.getEmail())
                                         .withCreated(System.currentTimeMillis()));
        } catch (NotFoundException | ServerException ex) {
            throw new ForbiddenException("Current user is not allowed to use this method");
        }
    }

