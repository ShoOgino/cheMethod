    /**
     * Adds to the factory information about creator and time of creation
     */
    private void processDefaults(Factory factory) {
        final Subject currentSubject = EnvironmentContext.getCurrent().getSubject();
        final Author creator = factory.getCreator();
        if (creator == null) {
            factory.setCreator(newDto(Author.class).withUserId(currentSubject.getUserId())
                                                   .withCreated(System.currentTimeMillis()));
            return;
        }
        if (isNullOrEmpty(creator.getUserId())) {
            creator.setUserId(currentSubject.getUserId());
        }
        if (creator.getCreated() == null) {
            creator.setCreated(System.currentTimeMillis());
        }
    }

