    @Test(expectedExceptions = MachineException.class, expectedExceptionsMessageRegExp = "Test exception")
    public void shouldThrowMachineExceptionIfMachineManagerExecInDevMachineThrowsBadRequestException() throws Exception {
        when(machineManager.exec(anyString(), any(Command.class), anyString())).thenThrow(new BadRequestException("Test exception"));

        wsAgentLauncher.startWsAgent(WS_ID);

        verify(machineManager).exec(anyString(), any(Command.class), anyString());
    }

