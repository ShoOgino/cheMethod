    @Test
    public void shouldNotCopyHeadersFromResponseIfTheyAreIgnored() throws Exception {
        Map<String, List<String>> headers = new HashMap<>();
        headers.put("Connection", Collections.singletonList("close"));
        headers.put("Keep-Alive", Collections.singletonList("timeout=600"));
        headers.put("Proxy-Authentication", Collections.singletonList("value"));
        headers.put("Proxy-Authorization", Collections.singletonList("username:password"));
        headers.put("TE", Collections.singletonList("value"));
        headers.put("Trailers", Collections.singletonList("Expires"));
        headers.put("Transfer-Encoding", Collections.singletonList("chunked"));
        headers.put("Upgrade", Collections.singletonList("websocket"));

        when(extensionApiResponse.getHeaders()).thenReturn(headers);

        MockHttpServletRequest mockRequest = new MockHttpServletRequest(DEFAULT_URL,
                                                                        new ByteArrayInputStream(new byte[0]),
                                                                        0,
                                                                        "POST",
                                                                        defaultHeaders);

        MockHttpServletResponse mockResponse = new MockHttpServletResponse();

        proxyServlet.service(mockRequest, mockResponse);

        assertEquals(mockResponse.getStatus(), 200);

        final Map<String, List<String>> actualHeaders = getHeaders(mockResponse);
        actualHeaders.remove("server");
        actualHeaders.remove("date");

        assertTrue(actualHeaders.isEmpty());
    }

