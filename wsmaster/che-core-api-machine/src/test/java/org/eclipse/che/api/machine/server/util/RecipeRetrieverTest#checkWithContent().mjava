  /**
   * Check that when content is set in machine source, recipe is based on this content.
   *
   * @throws MachineException if recipe is not retrieved
   */
  @Test
  public void checkWithContent() throws MachineException {
    String RECIPE = "FROM TOTO";
    when(machineSource.getContent()).thenReturn(RECIPE);
    Recipe recipe = recipeRetriever.getRecipe(machineConfig);
    Assert.assertNotNull(recipe);
    assertEquals(recipe.getType(), RECIPE_TYPE);
    assertEquals(recipe.getScript(), RECIPE);
  }

