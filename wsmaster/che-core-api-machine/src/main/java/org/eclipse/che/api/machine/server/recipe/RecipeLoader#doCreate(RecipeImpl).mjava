  protected void doCreate(RecipeImpl recipe) {
    try {
      try {
        recipeDao.update(recipe);
      } catch (NotFoundException ex) {
        recipeDao.create(recipe);
      }
      permissionsDao.store(new RecipePermissionsImpl("*", recipe.getId(), singletonList("search")));
    } catch (ServerException | ConflictException ex) {
      LOG.error("Failed to store recipe {} cause: {}", recipe.getId(), ex.getLocalizedMessage());
    }
  }

