  public void regenerateAndUploadSshKeyOnGithub(String githubUsername, String githubPassword)
      throws Exception {
    testSshServiceClient.deleteVCSKey(TestGitHubKeyUploader.GITHUB_COM);

    waitMenuInCollapsedDropdown(Preferences.DropDownSshKeysMenu.VCS);
    selectDroppedMenuByName(Preferences.DropDownSshKeysMenu.VCS);

    loader.waitOnClosed();

    String ideWin = seleniumWebDriver.getWindowHandle();

    // regenerate key and upload it on the gitHub
    clickOnGenerateAndUploadToGitHub();

    askDialog.waitFormToOpen();
    askDialog.clickOkBtn();
    askDialog.waitFormToClose();
    seleniumWebDriver.switchToNoneCurrentWindow(ideWin);

    gitHub.waitAuthorizationPageOpened();
    gitHub.typeLogin(githubUsername);
    gitHub.typePass(githubPassword);
    gitHub.clickOnSignInButton();

    loader.waitOnClosed();

    if (seleniumWebDriver.getWindowHandles().size() > 1) {
      loader.waitOnClosed();
      gitHub.waitAuthorizeBtn();
      gitHub.clickOnAuthorizeBtn();
      seleniumWebDriver.switchTo().window(ideWin);
    }

    seleniumWebDriver.switchTo().window(ideWin);
    loader.waitOnClosed();
    waitSshKeyIsPresent("github.com");
    loader.waitOnClosed();
    clickOnCloseBtn();
    waitPreferencesFormIsClosed();
  }

