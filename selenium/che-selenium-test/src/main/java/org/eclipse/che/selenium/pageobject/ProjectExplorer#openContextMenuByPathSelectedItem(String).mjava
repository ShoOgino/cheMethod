  /**
   * Opens context menu on item with specified {@code path} Selecting item and invoking context menu
   * are two separate operations. If some item retakes focus then context menu will be invoked at
   * wrong item. It might happen because project explorer is updated asynchronously and new appeared
   * items retake focus. So, there are several tries to invoke context menu at correct item.
   *
   * @param path item's path in format: "Test/src/pom.xml".
   */
  public void openContextMenuByPathSelectedItem(String path) {
    final String itemXpath = getItemXpathByPath(path);

    for (int i = 1; ; i++) {
      waitAndSelectItem(path);
      waitItemIsSelected(path);
      seleniumWebDriverHelper.waitAndContextClick(By.xpath(itemXpath));
      waitContextMenu();
      try {
        waitItemIsSelected(path, REDRAW_UI_ELEMENTS_TIMEOUT_SEC);
        return;
      } catch (TimeoutException e) {
        seleniumWebDriverHelper.hideContextMenu();
        waitContextMenuPopUpClosed();
        if (i > 1) {
          final String errorMessage =
              format(
                  "Selection of the project tree item which located by \"%s\" has been lost, context menu event can't be performed for this element",
                  getItemXpathByPath(path));
          throw new RuntimeException(errorMessage);
        }
      }
    }
  }

