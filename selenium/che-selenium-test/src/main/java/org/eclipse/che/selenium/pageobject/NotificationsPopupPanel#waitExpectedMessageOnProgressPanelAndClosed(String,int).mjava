  /**
   * wait expected text on progress popup panel and then close it
   *
   * @param message expected text
   * @param timeout timeout defined by user
   */
  public void waitExpectedMessageOnProgressPanelAndClosed(final String message, final int timeout) {
    try {
      new WebDriverWait(seleniumWebDriver, timeout)
          .until(
              (ExpectedCondition<Boolean>)
                  input -> getAllMessagesFromProgressPopupPanel(timeout).contains(message));
    } catch (StaleElementReferenceException ex) {
      LOG.error(ex.getLocalizedMessage(), ex);
      WaitUtils.sleepQuietly(500, TimeUnit.MILLISECONDS);
      new WebDriverWait(seleniumWebDriver, timeout)
          .until(ExpectedConditions.textToBePresentInElement(progressPopupPanel, message));
    }
    waitProgressPopupPanelClose(timeout);
  }

