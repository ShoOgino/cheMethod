  @Test
  public void checkAmendPreviousCommit() {
    String pathToFileItem =
        PROJECT_NAME + "/src/main/java/org/eclipse/qa/examples/AppController.java";

    projectExplorer.quickRevealToItemWithJavaScript(pathToFileItem);
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    projectExplorer.waitItemIsSelected(PROJECT_NAME);
    menu.runCommand(GIT, INITIALIZE_REPOSITORY);
    askDialog.confirmAndWaitClosed();
    git.waitGitStatusBarWithMess(GIT_INITIALIZED_SUCCESS);
    events.clickEventLogBtn();
    events.waitExpectedMessage(GIT_INITIALIZED_SUCCESS);
    loader.waitOnClosed();

    // perform init commit
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, COMMIT);
    git.waitAndRunCommit("init");
    loader.waitOnClosed();

    // edit java file and commit the change
    projectExplorer.openItemByPath(pathToFileItem);
    editor.waitActive();
    editor.setCursorToLine(15);
    editor.typeTextIntoEditor("//" + CHANGE_CONTENT);
    editor.waitTextIntoEditor("//" + CHANGE_CONTENT);
    menu.runCommand(GIT, COMMIT);
    git.waitAndRunCommit(COMMIT_MESSAGE);
    git.waitGitStatusBarWithMess(TestGitConstants.COMMIT_MESSAGE_SUCCESS);

    // need to repeat selection of the project (https://github.com/eclipse/che/issues/10520)
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, STATUS);
    git.waitGitStatusBarWithMess(NOTHING_TO_COMMIT);

    // view git history
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, SHOW_HISTORY);
    loader.waitOnClosed();
    git.waitTextInHistoryForm(COMMIT_MESSAGE);
    git.closeGitHistoryForm();

    // only amend commit message
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, COMMIT);
    git.waitAndRunAmendCommitMessage(AMEND_COMMIT_MESS);
    menu.runCommand(GIT, SHOW_HISTORY);
    git.waitHistoryFormToOpen();
    git.waitCommitInHistoryFormNotPresent(COMMIT_MESSAGE);
    git.waitCommitInHistoryForm(AMEND_COMMIT_MESS);
    git.closeGitHistoryForm();

    // perform amend previous commit
    editor.selectTabByName(JAVA_FILE_TAB_NAME);
    editor.waitActive();
    editor.setCursorToLine(12);
    editor.selectLineAndDelete();
    editor.typeTextIntoEditor("//" + AMEND_CONTENT);
    editor.waitTextIntoEditor("//" + AMEND_CONTENT);
    menu.runCommand(GIT, COMMIT);
    git.waitAndRunAmendPreviousCommit(AMEND_COMMIT);
    git.waitGitStatusBarWithMess(TestGitConstants.COMMIT_MESSAGE_SUCCESS);

    // need to repeat selection of the project (https://github.com/eclipse/che/issues/10520)
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, STATUS);
    git.waitGitStatusBarWithMess(NOTHING_TO_COMMIT);

    // view git history
    projectExplorer.waitAndSelectItem(PROJECT_NAME);
    menu.runCommand(GIT, SHOW_HISTORY);
    loader.waitOnClosed();
    git.waitTextInHistoryForm(AMEND_COMMIT);
    git.waitCommitInHistoryFormNotPresent(AMEND_COMMIT_MESS);
    loader.waitOnClosed();
    git.clickOnHistoryRowIn–°ommitsList(0);
    git.waitContentInHistoryEditor(AMEND_COMMIT);
    git.clickCompareBtnGitHistory();
    loader.waitOnClosed();
    checkChangesIntoCompareForm(AMEND_CONTENT);
  }

