  @Test
  public void shouldWorkAroundAbsentSourcesOfExternalLib() throws IOException {

    // This test fails because jdt.ls does download source for the class being used here. Need to
    // find or construct an artifact that has no source.
    // when
    editor.waitActive();
    loader.waitOnClosed();
    editor.goToCursorPositionVisible(31, 23);
    editor.launchAutocompleteAndWaitContainer();
    editor.selectAutocompleteProposal("info(String msg) : void Logger");

    // then
    assertEquals(editor.getProposalDocumentationHTML(), ".*No documentation found.*");

    // when
    editor.closeAutocomplete();
    editor.typeTextIntoEditor(Keys.F4.toString());
    editor.waitActiveTabFileName(
        "Logger"); // there should be class "Logger" opened in decompiled view with "Download
    // sources" link at the top.
    editor.clickOnDownloadSourcesLink(); // there should be "Download sources" link displayed in at
    // the top of editor. Download they.

    editor.selectTabByName(APP_CLASS_NAME);
    loader.waitOnClosed();
    editor.goToCursorPositionVisible(31, 23);
    editor.launchAutocompleteAndWaitContainer();
    editor.selectAutocompleteProposal("info(String msg) : void");

    // then
    assertEquals(
        editor.getProposalDocumentationHTML(),
        ".*Log a message at the .* level."
            + "<dl><dt>Parameters:</dt>"
            + "<dd><b>msg</b>"
            + "  the message string to be logged</dd></dl>.*");
  }

