  @Test
  public void checkTest4() {
    loader.waitOnClosed();
    projectExplorer.waitItem(PROJECT_NAME + "/src/main/java/test4");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/r");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/Textfile.txt");
    editor.waitTextNotPresentIntoEditor(TEST4_FILE_OUT);
    editor.closeFileByNameWithSaving("Textfile.txt");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/r/p1");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/r/p1/A.java");
    editor.waitTextNotPresentIntoEditor(TEST4_Q_OUT);
    editor.closeFileByNameWithSaving("A");
    projectExplorer.selectItem(PROJECT_NAME + "/src/main/java/test4/r/p1");
    projectExplorer.launchRefactorByKeyboard();
    refactor.waitRenamePackageFormIsOpen();
    loader.waitOnClosed();
    refactor.setAndWaitStateUpdateReferencesCheckbox(true);
    refactor.setAndWaitStateRenameSubpackagesCheckbox(true);
    refactor.setAndWaitStateUpdateNonJavaFilesCheckbox(true);
    refactor.typeAndWaitNewName("te");
    loader.waitOnClosed();
    refactor.sendKeysIntoField("st");
    refactor.sendKeysIntoField("4.q");
    refactor.sendKeysIntoField("");
    refactor.waitTextIntoNewNameField("test4.q");
    loader.waitOnClosed();
    refactor.typeAndWaitFileNamePatterns("*.txt");
    loader.waitOnClosed();
    refactor.clickOkButtonRefactorForm();
    refactor.waitRenamePackageFormIsClosed();
    loader.waitOnClosed();
    projectExplorer.waitItem(PROJECT_NAME + "/src/main/java/test4/r");
    projectExplorer.waitItem(PROJECT_NAME + "/src/main/java/test4/q");
    projectExplorer.selectItem(PROJECT_NAME + "/src/main/java/test4/r");

    // TODO this is temporary solution, because tree is not refresh
    projectExplorer.openContextMenuByPathSelectedItem(PROJECT_NAME + "/src/main/java/test4/r");
    projectExplorer.clickOnItemInContextMenu(TestProjectExplorerContextMenuConstants.REFRESH);

    projectExplorer.waitItemIsDisappeared(PROJECT_NAME + "/src/main/java/test4/r/p1");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/q/A.java");
    loader.waitOnClosed();
    editor.waitTextIntoEditor(TEST4_Q_OUT);
    editor.closeFileByNameWithSaving("A");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src/main/java/test4/Textfile.txt");
    editor.waitTextIntoEditor(TEST4_FILE_OUT);
    editor.closeFileByNameWithSaving("Textfile.txt");
  }

