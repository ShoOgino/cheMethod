  @Test
  public void checkHandlingOfFactoryNames() {
    // create a factory from workspace with a project
    createFactoryFromWorkspaceWithProject(FACTORY_NAME_EXIST);

    openNewFactoryPage();

    // select created workspace from list of workspaces
    createFactoryPage.clickOnWorkspaceFromList(PROJECT_WS_NAME);

    // enter empty factory name
    createFactoryPage.typeFactoryName("");
    createFactoryPage.waitErrorMessageNotVisible();
    assertTrue(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter factory name with a less than 3 symbols
    createFactoryPage.typeFactoryName(generate("", 2));
    createFactoryPage.waitErrorMessage(TOO_SHORT_NAME_MESAAGE);
    assertFalse(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter factory name with exactly 3 symbols
    createFactoryPage.typeFactoryName(MIN_FACTORY_NAME);
    createFactoryPage.waitErrorMessageNotVisible();
    assertTrue(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter factory name with special symbols
    createFactoryPage.typeFactoryName(SPECIAL_SYMBOLS_NAME);
    createFactoryPage.waitErrorMessage(SPECIAL_SYMBOLS_ERROR_MESSAGE);
    assertFalse(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter factory name with more than 20 symbols
    createFactoryPage.typeFactoryName(generate("", 21));
    createFactoryPage.waitErrorMessage(TOO_LONG_NAME_MESSAGE);
    assertFalse(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter factory name with exactly 20 symbols
    createFactoryPage.typeFactoryName(MAX_FACTORY_NAME);
    createFactoryPage.waitErrorMessageNotVisible();
    assertTrue(createFactoryPage.isCreateFactoryButtonEnabled());

    // enter an already existing factory name
    createFactoryPage.typeFactoryName(FACTORY_NAME_EXIST);
    createFactoryPage.waitErrorMessage(EXIST_NAME_ERROR_MESSAGE);

    assertFalse(
        createFactoryPage.isCreateFactoryButtonEnabled(),
        "Known issue https://github.com/eclipse/che/issues/10121");
  }

