  @Test
  public void checkWorkingWithInstallers() {
    workspaceDetails.selectTabInWorkspaceMenu(INSTALLERS);

    // check both versions of the 'Workspace API' installer
    assertTrue(workspaceInstallers.isInstallerStateTurnedOn("Workspace API", "1.0.1"));
    assertFalse(workspaceInstallers.isInstallerStateTurnedOn("Workspace API", "1.0.0"));
    assertTrue(workspaceInstallers.isInstallerStateNotChangeable("Workspace API", "1.0.1"));
    assertTrue(workspaceInstallers.isInstallerStateNotChangeable("Workspace API", "1.0.0"));

    // check all needed installers in dev-machine exist
    workspaceMachines.selectMachine("Workspace Installers", "dev-machine");
    EXPECTED_INSTALLERS.forEach(
        (name, value) -> {
          workspaceInstallers.checkInstallerExists(name);
        });

    // switch all installers and save changes
    EXPECTED_INSTALLERS.forEach(
        (name, value) -> {
          assertEquals(workspaceInstallers.isInstallerStateTurnedOn(name), value);
          workspaceInstallers.switchInstallerState(name);
          WaitUtils.sleepQuietly(1);
        });
    clickOnSaveButton();

    // switch all installers, save changes and check its states are as previous(by default for the
    // Java stack)
    EXPECTED_INSTALLERS.forEach(
        (name, value) -> {
          workspaceInstallers.switchInstallerState(name);
          loader.waitOnClosed();
        });
    clickOnSaveButton();
    EXPECTED_INSTALLERS.forEach(
        (name, value) -> {
          assertEquals(workspaceInstallers.isInstallerStateTurnedOn(name), value);
        });
  }

