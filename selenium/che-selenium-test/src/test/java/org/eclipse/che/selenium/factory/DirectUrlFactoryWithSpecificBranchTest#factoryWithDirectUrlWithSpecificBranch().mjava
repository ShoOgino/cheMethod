  @Test
  public void factoryWithDirectUrlWithSpecificBranch() throws Exception {
    String repositoryName = testAuxiliaryRepo.getName();

    try {
      testFactoryWithSpecificBranch.authenticateAndOpen();
    } catch (NoSuchElementException ex) {
      // remove try-catch block after issue has been resolved
      fail("https://github.com/eclipse/che/issues/8671");
    }

    projectExplorer.waitProjectExplorer();
    notificationsPopupPanel.waitProgressPopupPanelClose();
    events.clickEventLogBtn();

    events.waitExpectedMessage(
        "Project " + repositoryName + " imported", UPDATING_PROJECT_TIMEOUT_SEC);
    events.waitExpectedMessage(
        "Successfully configured and cloned source code of " + repositoryName,
        UPDATING_PROJECT_TIMEOUT_SEC);
    events.waitExpectedMessage(
        String.format(
            "Project: %s | cloned from: %s | remote branch: refs/remotes/origin/%s | local branch: %s",
            repositoryName, repositoryName, SECOND_BRANCH_NAME, SECOND_BRANCH_NAME),
        UPDATING_PROJECT_TIMEOUT_SEC);

    projectExplorer.waitAndSelectItem(repositoryName);
    pullRequestPanel.waitOpenPanel();

    projectExplorer.expandPathInProjectExplorer(repositoryName + "/my-lib");
    projectExplorer.waitItem(repositoryName + "/my-lib/pom.xml");

    String wsId =
        workspaceServiceClient
            .getByName(seleniumWebDriver.getWorkspaceNameFromBrowserUrl(), testUser.getName())
            .getId();

    List<String> visibleItems = projectExplorer.getNamesOfAllOpenItems();
    assertTrue(
        visibleItems.containsAll(
            ImmutableList.of(repositoryName, "my-lib", "my-webapp", "src", "pom.xml")));

    String projectType = testProjectServiceClient.getFirstProject(wsId).getType();
    assertTrue(projectType.equals("blank"));
  }

