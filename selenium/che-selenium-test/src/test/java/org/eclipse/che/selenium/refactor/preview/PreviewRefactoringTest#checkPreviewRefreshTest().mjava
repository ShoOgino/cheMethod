  @Test
  public void checkPreviewRefreshTest() {
    explorer.waitProjectExplorer();
    loader.waitOnClosed();
    explorer.waitItem(PROJECT_NAME);
    loader.waitOnClosed();
    projectExplorer.quickExpandWithJavaScript();
    loader.waitOnClosed();
    explorer.openItemByPath(
        PROJECT_NAME + "/src/main/java/org/eclipse/qa/examples/AppController.java");
    editor.waitActive();
    editor.goToCursorPositionVisible(27, 17);
    editor.launchRefactorForm();
    refactorPanel.waitRenameParametersFormIsOpen();
    refactorPanel.typeAndWaitNewName("a");
    refactorPanel.clickPreviewButtonRefactorForm();
    refactorPanel.clickOnItemByNameAndPosition("AppController.java", 0);
    loader.waitOnClosed();
    refactorPanel.checkTextFromLeftEditor(EXPECTED_TEXT_IN_LEFT_EDITOR);
    refactorPanel.checkTextFromRightEditor(EXPECTED_TEXT_BEFORE_CHANGE);
    Assert.assertEquals(refactorPanel.getQuantityLeasedLineInLeftEditor(), 3);
    Assert.assertEquals(refactorPanel.getQuantityLeasedLineInRightEditor(), 3);
    refactorPanel.clickOnExpandItemByNameAndPosition("AppController", 0);
    refactorPanel.clickOnItemByNameAndPosition("Textual change", 1);
    loader.waitOnClosed();
    refactorPanel.checkTextFromRightEditor(EXPECTED_TEXT_BEFORE_FIRST_SELECT_CHANGE);
    refactorPanel.clickOnItemByNameAndPosition("Textual change", 2);
    loader.waitOnClosed();
    refactorPanel.checkTextFromRightEditor(EXPECTED_TEXT_BEFORE_SECOND_SELECT_CHANGE);
    Assert.assertEquals(refactorPanel.getQuantityLeasedLineInLeftEditor(), 1);
    Assert.assertEquals(refactorPanel.getQuantityLeasedLineInRightEditor(), 1);
  }

