  @Test
  public void workingWithEnvVariables() {
    workspaceDetails.selectTabInWorkspaceMenu(ENV_VARIABLES);

    // create a new variable, save changes and check it exists
    workspaceMachines.selectMachine("Environment variables", "dev-machine");
    workspaceEnvVariables.clickOnAddEnvVariableButton();
    workspaceEnvVariables.checkAddNewEnvVarialbleDialogIsOpen();
    workspaceEnvVariables.addNewEnvironmentVariable("logi", "admin");
    workspaceDetails.clickOnAddButtonInDialogWindow();
    clickOnSaveButton();
    Assert.assertTrue(workspaceEnvVariables.checkEnvVariableExists("logi"));

    // rename the variable, save changes and check it is renamed
    Assert.assertTrue(workspaceEnvVariables.checkValueExists("logi", "admin"));
    workspaceEnvVariables.clickOnEditEnvVariableButton("logi");
    workspaceEnvVariables.enterEnvVariableName("login");
    workspaceDetails.clickOnUpdateButtonInDialogWindow();
    clickOnSaveButton();
    Assert.assertTrue(workspaceEnvVariables.checkValueExists("login", "admin"));

    // delete the variable, save changes and check it is not exists
    workspaceEnvVariables.clickOnEnvVariableCheckbox("login");
    workspaceEnvVariables.clickOnDeleteEnvVariableButton("login");
    workspaceDetails.clickOnDeleteButtonInDialogWindow();
    clickOnSaveButton();
    workspaceEnvVariables.checkValueIsNotExists("login", "admin");

    // delete all variable from db machine, check they don't exist and save changes
    workspaceMachines.selectMachine("Environment variables", "db");
    variables.forEach(
        (name, value) -> {
          workspaceEnvVariables.clickOnDeleteEnvVariableButton(name);
          workspaceDetails.clickOnDeleteButtonInDialogWindow();
          workspaceEnvVariables.checkValueIsNotExists(name, value);
        });

    clickOnSaveButton();

    // restore variables to db machine, check they exist and save changes
    variables.forEach(
        (name, value) -> {
          loader.waitOnClosed();
          workspaceEnvVariables.clickOnAddEnvVariableButton();
          workspaceEnvVariables.checkAddNewEnvVarialbleDialogIsOpen();
          workspaceEnvVariables.addNewEnvironmentVariable(name, value);
          workspaceDetails.clickOnAddButtonInDialogWindow();
          Assert.assertTrue(workspaceEnvVariables.checkEnvVariableExists(name));
          Assert.assertTrue(workspaceEnvVariables.checkValueExists(name, value));
        });
    clickOnSaveButton();
  }

