  @Test
  public void checkCollapseAllBtnProjectTree() throws Exception {
    // Preconditions
    projectExplorer.waitProjectExplorer();
    projectExplorer.waitItem(PROJECT_NAME);
    notificationsPopupPanel.waitProgressPopupPanelClose();
    consoles.closeProcessesArea();

    // Expand the nodes
    projectExplorer.quickExpandWithJavaScript();
    projectExplorer.openItemByVisibleNameInExplorer("AppController.java");
    loader.waitOnClosed();
    editor.waitTabIsPresent("AppController");
    projectExplorer.openItemByVisibleNameInExplorer("AppControlleTest.java");
    loader.waitOnClosed();
    editor.waitTabIsPresent("AppControlleTest");

    // Perform the 'collapse all'
    projectExplorer.collapseProjectTreeByOptionsButton();
    projectExplorer.waitItem(PROJECT_NAME);
    projectExplorer.waitDisappearItemByPath(PROJECT_NAME + "/src");
    projectExplorer.waitDisappearItemByPath(PROJECT_NAME + "/pom.xml");

    // Open the project and check the tree
    projectExplorer.openItemByPath(PROJECT_NAME);
    projectExplorer.waitItem(PROJECT_NAME + "/src");
    projectExplorer.openItemByPath(PROJECT_NAME + "/src");
    projectExplorer.waitItem(PROJECT_NAME + "/src/main");
    projectExplorer.waitItem(PROJECT_NAME + "/src/test");
    projectExplorer.waitDisappearItemByPath(
        PROJECT_NAME + "/src/main/java/org/eclipse/qa/examples/AppController.java");
    projectExplorer.waitDisappearItemByPath(
        PROJECT_NAME + "/src/test/java/org/eclipse/qa/examples/AppControlleTest.java");
    editor.waitTabIsPresent("AppController");
    editor.waitTabIsPresent("AppControlleTest");
  }

