  @Test
  public void pullTest() throws Exception {
    // Reset test repository's HEAD to default commit
    gitHubClientService.hardResetHeadToCommit(
        REPO_NAME, DEFAULT_COMMIT_SSH, gitHubUsername, gitHubPassword);
    projectExplorer.waitProjectExplorer();

    String repoUrl = "git@github.com:" + gitHubUsername + "/gitPullTest.git";
    git.importJavaApp(repoUrl, SECOND_PROJECT_NAME, Wizard.TypeProject.MAVEN);
    git.importJavaApp(repoUrl, FIRST_PROJECT_NAME, Wizard.TypeProject.MAVEN);

    projectExplorer.quickExpandWithJavaScript();

    // Change contents index.jsp
    loader.waitOnClosed();
    projectExplorer.openItemByPath(FIRST_PROJECT_NAME + "/my-webapp/src/main/webapp/index.jsp");
    editor.waitActive();
    editor.typeTextIntoEditor(NEW_CONTENT_JSP);
    editor.waitTextIntoEditor(NEW_CONTENT_JSP);
    editor.waitTabFileWithSavedStatus("index.jsp");
    loader.waitOnClosed();
    editor.closeFileByNameWithSaving("index.jsp");
    editor.waitWhileFileIsClosed("index.jsp");

    // Change contents in java file
    projectExplorer.openItemByPath(
        FIRST_PROJECT_NAME + "/my-webapp/src/main/java/helloworld/GreetingController.java");
    editor.waitActive();
    editor.typeTextIntoEditor(Keys.DOWN.toString());
    editor.typeTextIntoEditor(NEW_CONTENT_JAVA);
    editor.waitTextIntoEditor(NEW_CONTENT_JAVA);
    editor.waitTabFileWithSavedStatus("GreetingController");
    loader.waitOnClosed();
    editor.closeFileByNameWithSaving("GreetingController");
    editor.waitWhileFileIsClosed("GreetingController");

    // Remove web.xml from index
    projectExplorer.selectItem(FIRST_PROJECT_NAME + "/my-webapp/src/main/webapp/WEB-INF/web.xml");
    menu.runCommand(
        TestMenuCommandsConstants.Git.GIT, TestMenuCommandsConstants.Git.REMOVE_FROM_INDEX);
    git.waitRemoveFromIndexFormToOpen();
    git.waitRemoveFromIndexFileName("Remove file web.xml from index?");
    git.confirmRemoveFromIndexForm();
    loader.waitOnClosed();

    // Add all files to index
    projectExplorer.waitItem(
        FIRST_PROJECT_NAME + "/my-webapp/src/main/java/helloworld/GreetingController.java");
    projectExplorer.waitItem(FIRST_PROJECT_NAME + "/my-webapp/src/main/webapp/index.jsp");
    loader.waitOnClosed();
    projectExplorer.selectItem(FIRST_PROJECT_NAME);
    menu.runCommand(TestMenuCommandsConstants.Git.GIT, TestMenuCommandsConstants.Git.ADD_TO_INDEX);
    git.waitGitStatusBarWithMess(TestGitConstants.GIT_ADD_TO_INDEX_SUCCESS);
    events.clickEventLogBtn();
    events.waitExpectedMessage(TestGitConstants.GIT_ADD_TO_INDEX_SUCCESS);

    // Commit and push changes
    menu.runCommand(TestMenuCommandsConstants.Git.GIT, TestMenuCommandsConstants.Git.COMMIT);
    git.waitAndRunCommit(COMMIT_MESSAGE);
    menu.runCommand(
        TestMenuCommandsConstants.Git.GIT,
        TestMenuCommandsConstants.Git.Remotes.REMOTES_TOP,
        TestMenuCommandsConstants.Git.Remotes.PUSH);
    git.waitPushFormToOpen();
    git.clickPush();
    git.waitPushFormToClose();
    consoles.waitProcessInProcessConsoleTree("Git push", LOADER_TIMEOUT_SEC);

    git.waitGitStatusBarWithMess("Successfully pushed");
    git.waitGitStatusBarWithMess("to git@github.com:" + gitHubUsername + "/gitPullTest.git");

    events.clickEventLogBtn();
    events.waitExpectedMessage(PUSH_MSG);
    projectExplorer.openItemByPath(FIRST_PROJECT_NAME);

    // Perform git pull and check the message in the second project
    projectExplorer.selectItem(SECOND_PROJECT_NAME);
    loader.waitOnClosed();
    menu.runCommand(
        TestMenuCommandsConstants.Git.GIT,
        TestMenuCommandsConstants.Git.Remotes.REMOTES_TOP,
        TestMenuCommandsConstants.Git.Remotes.PULL);
    git.waitPullFormToOpen();
    git.clickPull();
    git.waitPullFormToClose();
    loader.waitOnClosed();
    consoles.waitProcessInProcessConsoleTree("Git pull", LOADER_TIMEOUT_SEC);

    git.waitGitStatusBarWithMess("Successfully pulled");
    git.waitGitStatusBarWithMess("from git@github.com:" + gitHubUsername + "/gitPullTest");

    events.clickEventLogBtn();
    events.waitExpectedMessage("Pulled from git@github.com:" + gitHubUsername + "/gitPullTest.git");

    // check changes in the second project
    projectExplorer.openItemByPath(
        SECOND_PROJECT_NAME + "/my-webapp/src/main/java/helloworld/GreetingController.java");
    editor.waitActive();
    editor.waitTextIntoEditor(NEW_CONTENT_JAVA);
    projectExplorer.openItemByPath(SECOND_PROJECT_NAME + "/my-webapp/src/main/webapp/index.jsp");
    editor.waitActive();
    editor.waitTextIntoEditor(NEW_CONTENT_JSP);
    projectExplorer.waitItemIsDisappeared(
        SECOND_PROJECT_NAME + "/my-webapp/src/main/webapp/WEB-INF/web.xml");
  }

