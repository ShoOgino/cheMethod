  @Test
  public void workingWithEnvVariables() {
    workspaceDetails.selectTabInWorkspaceMenu(ENV_VARIABLES);

    // create a new variable, save changes and check it exists
    workspaceMachines.selectMachine("Environment variables", "dev-machine");
    createVariable("logi", "admin");
    clickOnSaveButton();
    assertTrue(workspaceEnvVariables.checkEnvVariableExists("logi"));

    // rename the variable, save changes and check it is renamed
    assertTrue(workspaceEnvVariables.checkValueExists("logi", "admin"));
    workspaceEnvVariables.clickOnEditEnvVariableButton("logi");
    workspaceEnvVariables.enterEnvVariableName("login");
    workspaceDetails.clickOnUpdateButtonInDialogWindow();
    clickOnSaveButton();
    assertTrue(workspaceEnvVariables.checkEnvVariableExists("login"));
    assertTrue(workspaceEnvVariables.checkValueExists("login", "admin"));

    // delete the variable, save changes and check it is not exists
    deleteVariable("login", "admin");
    clickOnSaveButton();
    workspaceEnvVariables.checkValueIsNotExists("login", "admin");

    workspaceMachines.selectMachine("Environment variables", "db");
    // add variables to 'db' machine, check they exist and save changes
    EXPECTED_VARIABLES.forEach(
        (name, value) -> {
          WaitUtils.sleepQuietly(1);
          createVariable(name, value);
          assertTrue(workspaceEnvVariables.checkEnvVariableExists(name));
          assertTrue(workspaceEnvVariables.checkValueExists(name, value));
        });
    clickOnSaveButton();

    // delete all variables from the 'db' machine, check they don't exist and save changes
    EXPECTED_VARIABLES.forEach(
        (name, value) -> {
          deleteVariable(name, value);
        });

    clickOnSaveButton();
  }

