  private void ensureRepositoryCreated(GHRepository repo) throws IOException {
    Throwable lastIOException = null;

    for (int i = 0; i < REPO_CREATION_TIMEOUT_SEC; i++) {
      try {
        gitHub.getRepository(repo.getFullName());
        return;
      } catch (IOException e) {
        lastIOException = e;
        LOG.info("Waiting for {} to be created", repo.getHtmlUrl());
        sleepQuietly(1);  // sleep one second
      }
    }

    throw new IOException(
        format(
            "GitHub repo %s hasn't been created in %s seconds",
            repo.getHtmlUrl(), REPO_CREATION_TIMEOUT_SEC),
        lastIOException);
  }

