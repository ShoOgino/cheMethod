  @Override
  @PreDestroy
  public void delete() {
    List<String> workspaces = new ArrayList<>();
    try {
      workspaces = workspaceServiceClient.getAll();
    } catch (Exception e) {
      LOG.error("Failed to get all workspaces.", e);
    }

    for (String workspace : workspaces) {
      try {
        workspaceServiceClient.delete(workspace, name);
      } catch (Exception e) {
        LOG.error(
            format("User name='%s' failed to remove workspace name='%s'", workspace, name), e);
      }
    }

    try {
      userServiceClient.deleteByEmail(email);
      LOG.info("User name='{}', id='{}' removed", name, id);
    } catch (Exception e) {
      LOG.error(format("Failed to remove user name='%s', id='%s'", email, id), e);
    }
  }

