  @Inject
  public TestWorkspaceProviderImpl(
      @Named("sys.workspace_pool_size") String poolSize,
      @Named("workspace.default_memory_gb") int defaultMemoryGb,
      @Named("sys.threads") int threads,
      Provider<TestUser> defaultUser,
      TestWorkspaceServiceClient testWorkspaceServiceClient,
      TestWorkspaceServiceClientFactory testWorkspaceServiceClientFactory) {
    this.defaultMemoryGb = defaultMemoryGb;
    this.defaultUser = defaultUser;
    this.testWorkspaceServiceClient = testWorkspaceServiceClient;
    this.testWorkspaceServiceClientFactory = testWorkspaceServiceClientFactory;

    if (poolSize.equals(AUTO)) {
      this.poolSize = (threads - 1) / 2 + 1;
    } else {
      this.poolSize = Integer.parseInt(poolSize);
    }

    if (this.poolSize > 0) {
      initializePool();
    }
  }

