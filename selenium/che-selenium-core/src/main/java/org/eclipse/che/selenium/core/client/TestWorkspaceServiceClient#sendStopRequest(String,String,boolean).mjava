  /** Sends stop workspace request. */
  private void sendStopRequest(String workspaceName, String userName, boolean createSnapshot)
      throws Exception {
    if (!exists(workspaceName, userName)) {
      return;
    }

    Workspace workspace = getByName(workspaceName, userName);
    String apiUrl =
        getIdBasedUrl(workspace.getId()) + "/runtime/?create-snapshot=" + valueOf(createSnapshot);

    requestFactory.fromUrl(apiUrl).useDeleteMethod().request();
  }

