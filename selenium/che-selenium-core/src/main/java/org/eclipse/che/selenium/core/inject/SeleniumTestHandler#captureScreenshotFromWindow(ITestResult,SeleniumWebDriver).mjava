  private void captureScreenshotFromWindow(ITestResult result, SeleniumWebDriver webDriver) {
    String testName = result.getTestClass().getName() + "." + result.getMethod().getMethodName();
    String filename = NameGenerator.generate(testName + "_", 8) + ".png";
    try {
      byte[] data = webDriver.getScreenshotAs(OutputType.BYTES);
      Path screenshot = Paths.get(screenshotDir, filename);
      Files.createDirectories(screenshot.getParent());
      Files.copy(new ByteArrayInputStream(data), screenshot);
    } catch (WebDriverException | IOException e) {
      LOG.error(format("Can't capture screenshot for test %s", testName), e);
    }
  }

