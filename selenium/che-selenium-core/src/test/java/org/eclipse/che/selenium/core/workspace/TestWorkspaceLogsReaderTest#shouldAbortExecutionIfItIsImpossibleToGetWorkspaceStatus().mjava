  @Test
  public void shouldAbortExecutionIfItIsImpossibleToGetWorkspaceStatus() throws Exception {
    // given
    doReturn(true).when(testWorkspaceLogsReader).canWorkspaceLogsBeRead();
    doThrow(EXCEPTION_TO_BE_THROWN).when(testWorkspaceServiceClient).getStatus(TEST_WORKSPACE_ID);

    // when
    testWorkspaceLogsReader.read(testWorkspace, PATH_TO_STORE_LOGS);

    // then
    verify(testWorkspaceLogsReader, never()).getLogInfos();
    verify(log)
        .warn(
            "It's impossible to get status of workspace with id='{}'",
            "workspace-id",
            EXCEPTION_TO_BE_THROWN);
  }

