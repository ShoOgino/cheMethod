  public static GdbDebugger newInstance(
      String host, int port, String file, String srcDirectory, DebuggerCallback debuggerCallback)
      throws DebuggerException {
    if (!exists(Paths.get(file))) {
      throw new DebuggerException("Can't start GDB: binary " + file + " not found");
    }

    if (!exists(Paths.get(srcDirectory))) {
      throw new DebuggerException(
          "Can't start GDB: source directory " + srcDirectory + " does not exist");
    }

    for (int i = 0; i < CONNECTION_ATTEMPTS - 1; i++) {
      try {
        return init(host, port, file, srcDirectory, debuggerCallback);
      } catch (DebuggerException e) {
        LOG.error("Connection attempt " + i + ": " + e.getMessage(), e);
      }
    }

    return init(host, port, file, srcDirectory, debuggerCallback);
  }

