    /**
     * Factory.
     */
    public static GdbDebugger newInstance(String host, int port, String file, String srcDirectory) throws GdbDebuggerException {
        Gdb gdb;
        try {
            gdb = Gdb.start();
            gdb.directory(srcDirectory);
            gdb.file(file);
            if (port > 0) {
                gdb.targetRemote(host, port);
            }
        } catch (IOException | GdbParseException | InterruptedException e) {
            throw new GdbDebuggerException("Can't initialize GDB", e);
        }

        GdbVersion gdbVersion = gdb.getGdbVersion();
        long instanceId = counter.incrementAndGet();

        return new GdbDebugger(host,
                               port,
                               gdbVersion.getVersion(),
                               gdbVersion.getName(),
                               String.valueOf(instanceId),
                               file,
                               gdb);
    }

