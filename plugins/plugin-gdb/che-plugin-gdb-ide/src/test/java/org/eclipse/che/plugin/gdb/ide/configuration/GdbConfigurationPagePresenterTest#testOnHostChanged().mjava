  @Test
  public void testOnHostChanged() throws Exception {
    String host = "localhost";
    when(pageView.getHost()).thenReturn(host);

    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);

    pagePresenter.onHostChanged();

    verify(pageView).getHost();
    verify(configuration).setHost(eq(host));
    verify(listener).onDirtyStateChanged();
  }

