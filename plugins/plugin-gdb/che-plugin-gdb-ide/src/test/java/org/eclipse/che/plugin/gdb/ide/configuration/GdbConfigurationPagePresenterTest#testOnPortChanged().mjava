  @Test
  public void testOnPortChanged() throws Exception {
    int port = 8000;
    when(pageView.getPort()).thenReturn(port);

    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);

    pagePresenter.onPortChanged();

    verify(pageView).getPort();
    verify(configuration).setPort(eq(port));
    verify(listener).onDirtyStateChanged();
  }

