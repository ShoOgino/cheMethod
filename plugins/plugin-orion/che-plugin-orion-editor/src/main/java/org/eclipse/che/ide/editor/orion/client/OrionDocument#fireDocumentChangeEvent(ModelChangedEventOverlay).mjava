    private void fireDocumentChangeEvent(final ModelChangedEventOverlay param) {
        int startOffset = param.start();
        int addedCharCount = param.addedCharCount();
        int removedCharCount = param.removedCharCount();
        int length = 0;

        if (addedCharCount != 0) {
            //adding
            length = addedCharCount;
        } else if (removedCharCount != 0) {
            //deleting
            //TODO there may be bug
            length = removedCharCount;
            startOffset = startOffset - length;
        }
        String text = editorOverlay.getModel().getText(startOffset, startOffset + length);

        final DocumentChangeEvent event = new DocumentChangeEvent(this,
                                                                  startOffset,
                                                                  length,
                                                                  text,
                                                                  removedCharCount);//TODO: need check removedCharCount add it for fix
        // according to https://github.com/codenvy/che-core/pull/122
        getDocEventBus().fireEvent(event);
    }

