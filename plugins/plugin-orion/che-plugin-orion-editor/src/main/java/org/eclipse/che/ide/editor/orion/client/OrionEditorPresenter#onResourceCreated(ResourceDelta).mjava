    private void onResourceCreated(ResourceDelta delta) {
        if ((delta.getFlags() & (MOVED_FROM | MOVED_TO)) == 0) {
            return;
        }

        //file moved directly
        if (delta.getFromPath().equals(document.getFile().getLocation())) {
            final Resource resource = delta.getResource();
            final Path movedFrom = delta.getFromPath();

            if (document.getFile().getLocation().equals(movedFrom)) {
                deletedFilesController.add(movedFrom.toString());
                document.setFile((File)resource);
                input.setFile((File)resource);
            }

            updateContent();
        } else if (delta.getFromPath().isPrefixOf(document.getFile().getLocation())) { //directory where file moved
            final Path relPath = document.getFile().getLocation().removeFirstSegments(delta.getFromPath().segmentCount());
            final Path newPath = delta.getToPath().append(relPath);

            appContext.getWorkspaceRoot().getFile(newPath).then(new Operation<Optional<File>>() {
                @Override
                public void apply(Optional<File> file) throws OperationException {
                    if (file.isPresent()) {
                        final Path location = document.getFile().getLocation();
                        deletedFilesController.add(location.toString());
                        generalEventBus.fireEvent(newFileTrackingStartEvent(file.get().getLocation().toString()));

                        document.setFile(file.get());
                        input.setFile(file.get());
                        updateTabReference(file.get(), location);

                        updateContent();
                    }
                }
            });
        }

    }

