    private void selectKeyMode(Keymap keymap) {
        resetKeyModes();
        Keymap usedKeymap = keymap;
        if (usedKeymap == null) {
            usedKeymap = KeyMode.DEFAULT;
        }
        if (KeyMode.DEFAULT.equals(usedKeymap)) {
            // nothing to do
        } else if (EMACS.equals(usedKeymap)) {
            this.editorOverlay.getTextView().addKeyMode(keyModeInstances.getInstance(EMACS));
        } else if (VI.equals(usedKeymap)) {
            this.editorOverlay.getTextView().addKeyMode(keyModeInstances.getInstance(VI));
        } else {
            usedKeymap = KeyMode.DEFAULT;
            Log.error(OrionEditorWidget.class, "Unknown keymap type: " + keymap + " - changing to default one.");
        }
        this.keymap = usedKeymap;
    }

