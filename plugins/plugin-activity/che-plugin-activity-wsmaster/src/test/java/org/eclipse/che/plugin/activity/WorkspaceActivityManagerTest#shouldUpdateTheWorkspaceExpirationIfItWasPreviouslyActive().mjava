  @Test
  public void shouldUpdateTheWorkspaceExpirationIfItWasPreviouslyActive() throws Exception {
    final String wsId = "testWsId";
    final long activityTime = 1000L;
    final long newActivityTime = 2000L;
    final Map<String, Long> activeWorkspaces = getActiveWorkspaces(activityManager);
    boolean wsAlreadyAdded = activeWorkspaces.containsKey(wsId);
    activityManager.update(wsId, activityTime);

    activityManager.update(wsId, newActivityTime);
    final long workspaceStopTime = activeWorkspaces.get(wsId);

    assertFalse(wsAlreadyAdded);
    assertFalse(activeWorkspaces.isEmpty());
    assertEquals(newActivityTime + EXPIRE_PERIOD_MS, workspaceStopTime);
  }

