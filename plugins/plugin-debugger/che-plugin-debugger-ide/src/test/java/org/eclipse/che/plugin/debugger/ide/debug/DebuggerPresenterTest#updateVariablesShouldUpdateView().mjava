  @Test
  public void updateVariablesShouldUpdateView() throws Exception {
    doReturn(promiseStackFrame).when(debugger).getStackFrameDump(THREAD_ID, FRAME_INDEX);
    doReturn(promiseStackFrame).when(promiseStackFrame).then((Operation<StackFrameDump>) any());

    presenter.updateVariables(THREAD_ID, FRAME_INDEX);

    verify(promiseStackFrame).then(operationStackFrameCaptor.capture());
    operationStackFrameCaptor.getValue().apply(stackFrame);
    verify(view).setVariables(stackFrame.getVariables());
  }

