  @Test
  public void shouldClearPanelOnWorkspaceStopped() throws Exception {
    Promise promise = mock(Promise.class);
    when(promise.then(any(Operation.class))).thenReturn(promise);
    when(debugger.evaluate(anyString(), anyLong(), anyInt())).thenReturn(promise);
    WatchExpression watchExpression = mock(WatchExpression.class);
    when(watchExpression.getExpression()).thenReturn("expresion");

    presenter.onAddExpressionBtnClicked(watchExpression);
    presenter.onWorkspaceStopped(mock(WorkspaceStoppedEvent.class));

    verify(view).setVMName(eq(""));
    verify(view).setExecutionPoint(eq(null));
    verify(view).setThreadDump(eq(emptyList()), eq(-1L));
    verify(view).setFrames(eq(emptyList()));
    verify(view).removeAllVariables();
    verify(watchExpression).setResult(eq(""));
    verify(view).updateExpression(eq(watchExpression));
  }

