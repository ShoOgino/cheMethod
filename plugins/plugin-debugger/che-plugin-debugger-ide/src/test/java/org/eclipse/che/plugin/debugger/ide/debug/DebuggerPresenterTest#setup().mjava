  @Before
  public void setup() {
    when(debuggerManager.getActiveDebugger()).thenReturn(debugger);
    doReturn(true).when(debugger).isSuspended();

    presenter =
        spy(
            new DebuggerPresenter(
                view,
                constant,
                breakpointManager,
                notificationManager,
                debuggerResources,
                debuggerToolbar,
                debuggerManager,
                workspaceAgent,
                debuggerResourceHandlerFactory,
                breakpointContextMenuFactory));

    Mockito.reset(view);
    when(view.getSelectedThreadId()).thenReturn(THREAD_ID);
    when(view.getSelectedFrameIndex()).thenReturn(FRAME_INDEX);
  }

