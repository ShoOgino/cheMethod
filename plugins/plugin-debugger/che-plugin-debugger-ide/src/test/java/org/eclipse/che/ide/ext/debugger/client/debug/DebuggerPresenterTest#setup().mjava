    @Before
    public void setup() {
        doReturn(debugger).when(debuggerManager).getActiveDebugger();
        doReturn(ERROR_MESSAGE).when(promiseError).getMessage();

        presenter = spy(new DebuggerPresenter(view, constant, breakpointManager, notificationManager, debuggerResources, debuggerToolbar,
                                              dtoFactory, debuggerManager, workspaceAgent));
        doNothing().when(presenter).showDebuggerPanel();

        presenter.onSelectedVariableElement(selectedVariable);

        FileType fileType = mock(FileType.class);
        doReturn("java").when(fileType).getExtension();
        doReturn(fileType).when(fileTypeRegistry).getFileTypeByFile(eq(file));
    }

