  @Test
  public void testGetStackFrameDump() throws Exception {
    Promise<StackFrameDumpDto> promiseStackFrameDump = mock(Promise.class);
    StackFrameDumpDto mockStackFrameDumpDto = mock(StackFrameDumpDto.class);
    final String json = "json";
    doReturn(json).when(dtoFactory).toJson(mockStackFrameDumpDto);

    doReturn(promiseStackFrameDump)
        .when(service)
        .getStackFrameDump(SESSION_ID, THREAD_ID, FRAME_INDEX);
    doReturn(promiseStackFrameDump)
        .when(promiseStackFrameDump)
        .then((Function<StackFrameDumpDto, Object>) any());
    doReturn(promiseStackFrameDump)
        .when(promiseStackFrameDump)
        .catchError((Operation<PromiseError>) any());

    Promise<? extends StackFrameDump> result = debugger.getStackFrameDump(THREAD_ID, FRAME_INDEX);
    assertEquals(promiseStackFrameDump, result);
  }

