  @Test
  public void testGetStackFrameDump() throws Exception {
    Promise<StackFrameDumpDto> promiseStackFrameDump = mock(Promise.class);
    StackFrameDumpDto mockStackFrameDumpDto = mock(StackFrameDumpDto.class);
    final String json = "json";
    doReturn(json).when(dtoFactory).toJson(mockStackFrameDumpDto);

    doReturn(promiseStackFrameDump).when(service).getStackFrameDump(SESSION_ID);
    doReturn(promiseStackFrameDump)
        .when(promiseStackFrameDump)
        .then((Function<StackFrameDumpDto, Object>) any());
    doReturn(promiseStackFrameDump)
        .when(promiseStackFrameDump)
        .catchError((Operation<PromiseError>) any());

    Promise<StackFrameDump> result = debugger.dumpStackFrame();
    assertEquals(promiseStackFrameDump, result);
  }

