  @Test
  public void testEvaluateExpressionRequestIsSuccessful() throws Exception {
    when(debugger.evaluate(anyString(), eq(THREAD_ID), eq(FRAME_INDEX))).thenReturn(promise);
    when(view.getExpression()).thenReturn(EXPRESSION);
    when(promise.then(any(Operation.class))).thenReturn(promise);

    when(debuggerManager.getActiveDebugger()).thenReturn(debugger);

    presenter.showDialog();
    presenter.onEvaluateClicked();

    verify(view, atLeastOnce()).setEnableEvaluateButton(eq(DISABLE_BUTTON));
    verify(debugger).evaluate(EXPRESSION, THREAD_ID, FRAME_INDEX);
  }

