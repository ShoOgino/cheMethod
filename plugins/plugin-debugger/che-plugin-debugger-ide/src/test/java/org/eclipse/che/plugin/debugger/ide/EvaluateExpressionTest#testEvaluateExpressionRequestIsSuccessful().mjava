  @Test
  public void testEvaluateExpressionRequestIsSuccessful() throws Exception {
    when(debugger.evaluate(anyString())).thenReturn(promise);
    when(view.getExpression()).thenReturn(EXPRESSION);
    when(promise.then(any(Operation.class))).thenReturn(promise);

    when(debuggerManager.getActiveDebugger()).thenReturn(debugger);

    presenter.showDialog();
    presenter.onEvaluateClicked();

    verify(view, atLeastOnce()).setEnableEvaluateButton(eq(DISABLE_BUTTON));
    verify(debugger).evaluate(eq(EXPRESSION));
  }

