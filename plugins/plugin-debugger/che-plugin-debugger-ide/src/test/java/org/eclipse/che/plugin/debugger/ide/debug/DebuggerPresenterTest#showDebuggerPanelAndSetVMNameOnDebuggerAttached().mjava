  @Test
  public void showDebuggerPanelAndSetVMNameOnDebuggerAttached() throws Exception {
    DebuggerDescriptor debuggerDescriptor = mock(DebuggerDescriptor.class);
    when(debuggerDescriptor.getAddress()).thenReturn("address");
    when(debuggerDescriptor.getInfo()).thenReturn("info");
    doReturn(promiseVoid).when(promiseVoid).then((Operation<Void>) any());
    doNothing().when(presenter).showDebuggerPanel();
    when(notificationManager.notify(
            nullable(String.class),
            nullable(StatusNotification.Status.class),
            nullable(StatusNotification.DisplayMode.class)))
        .thenReturn(mock(StatusNotification.class));

    presenter.onDebuggerAttached(debuggerDescriptor, promiseVoid);

    verify(promiseVoid).then(operationVoidCaptor.capture());
    operationVoidCaptor.getValue().apply(null);
    verify(presenter).showDebuggerPanel();
    verify(view).setVMName("info");
  }

