  @Override
  public void onSelectedFrame(int frameIndex) {
    long threadId = view.getSelectedThreadId();
    refreshVariables(threadId, frameIndex);
    refreshWatchExpressions(threadId, frameIndex);

    ThreadState threadState = threadDump.get(threadId);
    if (threadState != null) {
      List<? extends StackFrameDump> frames = threadState.getFrames();
      if (frames.size() > frameIndex) {
        open(frames.get(frameIndex).getLocation());
      }
    }
  }

