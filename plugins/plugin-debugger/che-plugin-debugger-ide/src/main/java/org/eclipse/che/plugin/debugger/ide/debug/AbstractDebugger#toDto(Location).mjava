  protected LocationDto toDto(Location location) {
    MethodDto methodDto = dtoFactory.createDto(MethodDto.class);
    Method method = location.getMethod();
    if (method != null) {
      List<VariableDto> arguments =
          method.getArguments().stream().map(this::toDto).collect(Collectors.toList());
      methodDto.setArguments(arguments);
      methodDto.setName(method.getName());
    }
    return dtoFactory
        .createDto(LocationDto.class)
        .withTarget(location.getTarget())
        .withLineNumber(location.getLineNumber())
        .withExternalResource(location.isExternalResource())
        .withExternalResourceId(location.getExternalResourceId())
        .withResourceProjectPath(location.getResourceProjectPath())
        .withMethod(methodDto)
        .withThreadId(location.getThreadId());
  }

