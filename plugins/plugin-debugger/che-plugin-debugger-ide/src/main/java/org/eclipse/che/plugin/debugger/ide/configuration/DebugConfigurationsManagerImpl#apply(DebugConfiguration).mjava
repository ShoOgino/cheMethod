    @Override
    public void apply(final DebugConfiguration debugConfiguration) {
        if (debugConfiguration == null) {
            return;
        }

        if (debuggerManager.getActiveDebugger() != null) {
            dialogFactory.createMessageDialog(localizationConstants.connectToRemote(),
                                              localizationConstants.debuggerAlreadyConnected(),
                                              null).show();
            return;
        }

        final Debugger debugger = debuggerManager.getDebugger(debugConfiguration.getType().getId());
        if (debugger != null) {
            debuggerManager.setActiveDebugger(debugger);

            currentProjectPathMacro.expand().then(new Operation<String>() {
                @Override
                public void apply(String arg) throws OperationException {
                    Map<String, String> connectionProperties = prepareConnectionProperties(debugConfiguration, arg);

                    debugger.connect(connectionProperties).catchError(new Operation<PromiseError>() {
                        @Override
                        public void apply(PromiseError arg) throws OperationException {
                            debuggerManager.setActiveDebugger(null);
                        }
                    });
                }
            });
        }
    }

