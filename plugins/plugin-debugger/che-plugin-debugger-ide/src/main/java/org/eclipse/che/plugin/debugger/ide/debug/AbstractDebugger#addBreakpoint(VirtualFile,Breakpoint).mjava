  @Override
  public void addBreakpoint(final VirtualFile file, final Breakpoint breakpoint) {
    if (isConnected()) {
      Location location = breakpoint.getLocation();

      LocationDto locationDto = dtoFactory.createDto(LocationDto.class);
      locationDto.setLineNumber(location.getLineNumber());
      locationDto.setTarget(location.getTarget());
      locationDto.setResourceProjectPath(location.getResourceProjectPath());

      BreakpointDto breakpointDto =
          dtoFactory.createDto(BreakpointDto.class).withLocation(locationDto).withEnabled(true);

      Promise<Void> promise = service.addBreakpoint(debugSessionDto.getId(), breakpointDto);
      promise
          .then(
              it -> {
                for (DebuggerObserver observer : observers) {
                  observer.onBreakpointAdded(breakpoint);
                }
              })
          .catchError(
              error -> {
                Log.error(AbstractDebugger.class, error.getMessage());
              });
    }
  }

