  private void createNewConfiguration(
      final DebugConfigurationType type,
      final String customName,
      final Map<String, String> attributes) {
    if (!isViewModified()) {
      reset();
      createConfiguration(type, customName, attributes);
      return;
    }

    final ConfirmCallback saveCallback =
        new ConfirmCallback() {
          @Override
          public void accepted() {
            updateConfiguration(editedConfiguration);

            reset();
            createConfiguration(type, customName, attributes);
          }
        };

    final ConfirmCallback discardCallback =
        new ConfirmCallback() {
          @Override
          public void accepted() {
            fetchConfigurations();
            reset();
            createConfiguration(type, customName, attributes);
          }
        };

    final ChoiceDialog dialog =
        dialogFactory.createChoiceDialog(
            locale.editConfigurationsSaveChangesTitle(),
            locale.editConfigurationsSaveChangesConfirmation(editedConfiguration.getName()),
            coreLocale.save(),
            locale.editConfigurationsSaveChangesDiscard(),
            saveCallback,
            discardCallback);
    dialog.show();
  }

