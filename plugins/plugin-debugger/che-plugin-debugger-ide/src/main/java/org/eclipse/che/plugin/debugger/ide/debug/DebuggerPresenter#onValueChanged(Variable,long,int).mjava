  @Override
  public void onValueChanged(Variable variable, long threadId, int frameIndex) {
    if (view.getSelectedThreadId() == threadId && view.getSelectedFrameIndex() == frameIndex) {
      Debugger debugger = debuggerManager.getActiveDebugger();
      if (debugger != null && debugger.isSuspended()) {
        Promise<? extends SimpleValue> promise = debugger.getValue(variable, threadId, frameIndex);
        promise
            .then(
                value -> {
                  MutableVariable updatedVariable =
                      variable instanceof MutableVariable
                          ? ((MutableVariable) variable)
                          : new MutableVariableImpl(variable);
                  updatedVariable.setValue(value);
                  view.updateVariable(updatedVariable);
                })
            .catchError(
                error -> {
                  Log.error(DebuggerPresenter.class, error.getCause());
                });
      }
    }
  }

