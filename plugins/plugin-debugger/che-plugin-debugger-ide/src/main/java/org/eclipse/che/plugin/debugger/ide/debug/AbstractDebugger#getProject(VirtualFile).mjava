  @Nullable
  private Project getProject(VirtualFile virtualFile) {
    if (virtualFile instanceof Resource) {
      Optional<Project> projectOptional = ((Resource) virtualFile).getRelatedProject();
      if (projectOptional.isPresent()) {
        return projectOptional.get();
      }
    }
    return null;
  }

