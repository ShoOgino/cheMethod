  /**
   * Test: local docker strategy should use passed parameter internalHost when
   * containerInfo.getIpAddress() is null.
   *
   * @throws Exception
   */
  @Test
  public void localDockerStrategyShouldUseProvidedInternalHostWhenContainerInfoUnavailable()
      throws Exception {
    // given
    strategy = new LocalDockerServerEvaluationStrategy(CHE_DOCKER_IP, null);
    when(networkSettings.getIpAddress()).thenReturn("");

    final Map<String, ServerImpl> expectedServers =
        getExpectedServers(CONTAINERINFO_GATEWAY, DEFAULT_HOSTNAME, false);

    // when
    final Map<String, ServerImpl> servers =
        strategy.getServers(containerInfo, DEFAULT_HOSTNAME, serverConfs);

    // then
    assertEquals(servers, expectedServers);
  }

