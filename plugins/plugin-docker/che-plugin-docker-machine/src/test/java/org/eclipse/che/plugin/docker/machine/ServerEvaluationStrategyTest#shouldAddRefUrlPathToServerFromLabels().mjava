    @Test
    public void shouldAddRefUrlPathToServerFromLabels() throws Exception {
        // given
        Map<String, List<PortBinding>> ports = prepareStrategyAndContainerInfoMocks();
        Map<String, String> labels = new HashMap<>();
        when(containerConfig.getLabels()).thenReturn(labels);
        ports.put("8080/tcp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS)
                                                                         .withHostPort("32100")));
        ports.put("9090/udp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS)
                                                                         .withHostPort("32101")));
        labels.put(String.format(SERVER_CONF_LABEL_REF_KEY, "8080/tcp"), "myserv1");
        labels.put(String.format(SERVER_CONF_LABEL_PROTOCOL_KEY, "8080/tcp"), "http");
        labels.put(String.format(SERVER_CONF_LABEL_PATH_KEY, "8080/tcp"), "/some/path");

        labels.put(String.format(SERVER_CONF_LABEL_PROTOCOL_KEY, "9090/udp"), "dhcp");
        labels.put(String.format(SERVER_CONF_LABEL_PATH_KEY, "9090/udp"), "some/path");

        final HashMap<String, ServerImpl> expectedServers = new HashMap<>();
        expectedServers.put("8080/tcp", new ServerImpl("myserv1",
                                                       "http",
                                                       DEFAULT_HOSTNAME + ":32100",
                                                       "http://" + DEFAULT_HOSTNAME + ":32100/some/path",
                                                       new ServerPropertiesImpl("/some/path",
                                                                                DEFAULT_HOSTNAME + ":32100",
                                                                                "http://" + DEFAULT_HOSTNAME +
                                                                                ":32100/some/path")));
        expectedServers.put("9090/udp", new ServerImpl("Server-9090-udp",
                                                       "dhcp",
                                                       DEFAULT_HOSTNAME + ":32101",
                                                       "dhcp://" + DEFAULT_HOSTNAME + ":32101/some/path",
                                                       new ServerPropertiesImpl("some/path",
                                                                                DEFAULT_HOSTNAME + ":32101",
                                                                                "dhcp://" + DEFAULT_HOSTNAME +
                                                                                ":32101/some/path")));

        // when
        final Map<String, ServerImpl> servers = strategy.getServers(containerInfo, DEFAULT_HOSTNAME, serverConfs);

        // then
        assertEquals(servers, expectedServers);
    }

