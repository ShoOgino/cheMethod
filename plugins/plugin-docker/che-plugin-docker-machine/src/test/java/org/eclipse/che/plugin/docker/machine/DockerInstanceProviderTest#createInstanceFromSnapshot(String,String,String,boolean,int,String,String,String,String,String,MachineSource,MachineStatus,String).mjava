    private void createInstanceFromSnapshot(String repo,
                                            String tag,
                                            String registry,
                                            boolean isDev,
                                            int memorySizeInMB,
                                            String machineId,
                                            String userId,
                                            String workspaceId,
                                            String displayName,
                                            String machineType,
                                            MachineSource machineSource,
                                            MachineStatus machineStatus,
                                            String envName)
            throws NotFoundException, MachineException {

        dockerInstanceProvider.createInstance(new DockerInstanceKey(repo, tag, "imageId", registry),
                                              new MachineImpl(new MachineConfigImpl(isDev,
                                                                                    displayName,
                                                                                    machineType,
                                                                                    machineSource,
                                                                                    new LimitsImpl(memorySizeInMB)),
                                                              machineId,
                                                              workspaceId,
                                                              envName,
                                                              userId,
                                                              machineStatus,
                                                              null),
                                              LineConsumer.DEV_NULL);
    }

