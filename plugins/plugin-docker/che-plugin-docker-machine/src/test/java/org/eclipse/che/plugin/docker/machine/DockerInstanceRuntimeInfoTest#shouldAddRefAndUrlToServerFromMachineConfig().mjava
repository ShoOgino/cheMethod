    @Test
    public void shouldAddRefAndUrlToServerFromMachineConfig() throws Exception {
        // given
        Map<String, List<PortBinding>> ports = new HashMap<>();
        when(networkSettings.getPorts()).thenReturn(ports);
        List<ServerConfImpl> serversConfigs = new ArrayList<>();
        doReturn(serversConfigs).when(machineConfig).getServers();
        ports.put("8080/tcp", Collections.singletonList(new PortBinding().withHostIp(DEFAULT_ADDRESS)
                                                                         .withHostPort("32100")));
        ports.put("100100/udp", Collections.singletonList(new PortBinding().withHostIp(DEFAULT_ADDRESS)
                                                                           .withHostPort("32101")));
        ports.put("8080/udp", Collections.singletonList(new PortBinding().withHostIp(DEFAULT_ADDRESS)
                                                                         .withHostPort("32102")));
        ports.put("8000/tcp", Collections.singletonList(new PortBinding().withHostIp(DEFAULT_ADDRESS)
                                                                         .withHostPort("32103")));
        serversConfigs.add(new ServerConfImpl("myserv1", "8080/tcp", "http"));
        serversConfigs.add(new ServerConfImpl("myserv1-tftp", "8080/udp", "tftp"));
        serversConfigs.add(new ServerConfImpl("myserv2", "100100/udp", "dhcp"));
        serversConfigs.add(new ServerConfImpl(null, "8000/tcp", "tcp"));
        runtimeInfo = new DockerInstanceRuntimeInfo(containerInfo,
                                                    CONTAINER_HOST,
                                                    machineConfig,
                                                    Collections.emptySet(),
                                                    Collections.emptySet());

        // when
        final Map<String, ServerImpl> servers = runtimeInfo.getServers();

        // then
        assertEquals(servers.get("8080/tcp"), new ServerImpl("myserv1",
                                                             CONTAINER_HOST + ":32100",
                                                             "http://" + CONTAINER_HOST + ":32100"));
        assertEquals(servers.get("100100/udp"), new ServerImpl("myserv2",
                                                               CONTAINER_HOST + ":32101",
                                                               "dhcp://" + CONTAINER_HOST + ":32101"));
        assertEquals(servers.get("8080/udp"), new ServerImpl("myserv1-tftp",
                                                             CONTAINER_HOST + ":32102",
                                                             "tftp://" + CONTAINER_HOST + ":32102"));
        assertEquals(servers.get("8000/tcp"), new ServerImpl("Server-8000-tcp",
                                                             CONTAINER_HOST + ":32103",
                                                             "tcp://" + CONTAINER_HOST + ":32103"));
    }

