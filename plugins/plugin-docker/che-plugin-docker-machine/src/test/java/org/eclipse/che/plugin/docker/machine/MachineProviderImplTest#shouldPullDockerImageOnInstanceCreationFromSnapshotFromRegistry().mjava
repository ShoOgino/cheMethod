  @Test
  public void shouldPullDockerImageOnInstanceCreationFromSnapshotFromRegistry() throws Exception {
    String repo = MACHINE_SNAPSHOT_PREFIX + "repo";
    String tag = "latest";
    String registry = "localhost:1234";

    createInstanceFromSnapshot(repo, tag, registry);

    PullParams pullParams = PullParams.create(repo).withRegistry(registry).withTag(tag);

    verify(dockerConnector).pull(eq(pullParams), any(ProgressMonitor.class));
  }

