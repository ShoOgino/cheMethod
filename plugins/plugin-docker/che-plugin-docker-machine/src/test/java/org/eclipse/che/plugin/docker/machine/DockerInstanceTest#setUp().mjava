  @BeforeMethod
  public void setUp() throws IOException, MachineException {
    when(dockerConnectorProviderMock.get()).thenReturn(dockerConnectorMock);
    dockerInstance = getDockerInstance();
    when(dockerConnectorMock.createExec(any(CreateExecParams.class))).thenReturn(execMock);
    when(execMock.getId()).thenReturn(EXEC_ID);
    doAnswer(
            invoke -> {
              @SuppressWarnings("unchecked")
              MessageProcessor<LogMessage> msgProc =
                  (MessageProcessor<LogMessage>) invoke.getArguments()[1];
              msgProc.process(logMessageMock);
              return msgProc;
            })
        .when(dockerConnectorMock)
        .startExec(any(StartExecParams.class), any());
  }

