  /**
   * Test: local docker strategy should use containerInfo for externalHost if property is null
   *
   * @throws Exception
   */
  @Test
  public void localDockerStrategyShouldUseInternalHostWhenContainerInfoIsUnavailable()
      throws Exception {
    // given
    strategy = new LocalDockerServerEvaluationStrategy(CHE_DOCKER_IP, null);
    when(networkSettings.getGateway()).thenReturn("");

    final Map<String, ServerImpl> expectedServers =
        getExpectedServers(DEFAULT_HOSTNAME, CONTAINERINFO_IP_ADDRESS, true);

    // when
    final Map<String, ServerImpl> servers =
        strategy.getServers(containerInfo, DEFAULT_HOSTNAME, serverConfs);

    // then
    assertEquals(servers, expectedServers);
  }

