    private void createInstanceFromSnapshot(String repo,
                                            String tag,
                                            String registry,
                                            boolean isDev,
                                            int memorySizeInMB,
                                            String machineId,
                                            String userId,
                                            String workspaceId,
                                            String displayName,
                                            String machineType,
                                            MachineSource machineSource,
                                            Channels channels,
                                            MachineStatus machineStatus,
                                            String envName)
            throws NotFoundException, MachineException {

        dockerInstanceProvider.createInstance(new DockerInstanceKey(repo, tag, "imageId", registry),
                                              new MachineStateImpl(isDev,
                                                                   displayName,
                                                                   machineType,
                                                                   machineSource,
                                                                   new LimitsImpl(memorySizeInMB),
                                                                   machineId,
                                                                   channels,
                                                                   workspaceId,
                                                                   userId,
                                                                   envName,
                                                                   machineStatus),
                                              LineConsumer.DEV_NULL);
    }

