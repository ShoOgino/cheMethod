    @Test
    public void shouldAddOnlyCommonSystemServersConfigToNonDevMachine() throws Exception {
        // given
        Map<String, List<PortBinding>> ports = new HashMap<>();
        when(networkSettings.getPorts()).thenReturn(ports);
        ports.put("4301/tcp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS )
                                                                         .withHostPort("32100")));
        ports.put("4302/udp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS )
                                                                         .withHostPort("32101")));
        ports.put("4301/udp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS )
                                                                         .withHostPort("32102")));
        // add user defined server
        ports.put("4305/tcp", Collections.singletonList(new PortBinding().withHostIp(ALL_IP_ADDRESS )
                                                                         .withHostPort("32103")));
        Set<ServerConf> commonSystemServersConfigs = new HashSet<>();
        commonSystemServersConfigs.add(new ServerConfImpl("sysServer1-tcp", "4301/tcp", "http", "/some/path"));
        commonSystemServersConfigs.add(new ServerConfImpl("sysServer2-udp", "4302/udp", "dhcp", null));
        commonSystemServersConfigs.add(new ServerConfImpl("sysServer1-udp", "4301/udp", null, "some/path"));
        Set<ServerConf> devSystemServersConfigs = new HashSet<>();
        devSystemServersConfigs.add(new ServerConfImpl("devSysServer1-tcp", "4305/tcp", "http", null));
        when(machineConfig.isDev()).thenReturn(false);
        runtimeInfo = new DockerInstanceRuntimeInfo(containerInfo,
                                                    machineConfig,
                                                    DEFAULT_HOSTNAME,
                                                    provider,
                                                    devSystemServersConfigs,
                                                    commonSystemServersConfigs);
        final HashMap<String, ServerImpl> expectedServers = new HashMap<>();
        expectedServers.put("4301/tcp", new ServerImpl("sysServer1-tcp",
                                                       "http",
                                                       CONTAINERINFO_GATEWAY  + ":32100",
                                                       "http://" + CONTAINERINFO_GATEWAY  + ":32100/some/path",
                                                       new ServerPropertiesImpl("/some/path",
                                                                   CONTAINERINFO_GATEWAY  + ":32100",
                                                                   "http://" + CONTAINERINFO_GATEWAY  + ":32100/some/path")));
        expectedServers.put("4302/udp", new ServerImpl("sysServer2-udp",
                                                       "dhcp",
                                                       CONTAINERINFO_GATEWAY  + ":32101",
                                                       "dhcp://" + CONTAINERINFO_GATEWAY  + ":32101",
                                                       new ServerPropertiesImpl(null,
                                                                    CONTAINERINFO_GATEWAY  + ":32101",
                                                                    "dhcp://" + CONTAINERINFO_GATEWAY  + ":32101")));
        expectedServers.put("4301/udp", new ServerImpl("sysServer1-udp",
                                                       null,
                                                       CONTAINERINFO_GATEWAY  + ":32102",
                                                       null,
                                                       new ServerPropertiesImpl("some/path",
                                                                   CONTAINERINFO_GATEWAY  + ":32102",
                                                                   null)));
        expectedServers.put("4305/tcp", new ServerImpl("Server-4305-tcp",
                                                       null,
                                                       CONTAINERINFO_GATEWAY  + ":32103",
                                                       null,
                                                       new ServerPropertiesImpl(null, CONTAINERINFO_GATEWAY  + ":32103", null)));

        // when
        final Map<String, ServerImpl> servers = runtimeInfo.getServers();

        // then
        assertEquals(servers, expectedServers);
    }

