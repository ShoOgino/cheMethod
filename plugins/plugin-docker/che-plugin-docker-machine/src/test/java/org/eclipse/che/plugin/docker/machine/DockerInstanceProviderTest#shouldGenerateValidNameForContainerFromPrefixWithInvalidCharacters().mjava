    @Test
    public void shouldGenerateValidNameForContainerFromPrefixWithInvalidCharacters() throws Exception {
        final String userName = "{use}r+";
        final String displayName = "displ{[ay Name@";
        EnvironmentContext.getCurrent().setUser(new UserImpl(userName, "id", "token", emptyList(), false));
        final String expectedPrefix = String.format("%s_%s_%s_", "user", "thisiswsid", "displayname");

        final String containerName = dockerInstanceProvider.generateContainerName("This is wsId", displayName);

        assertTrue(containerName.startsWith(expectedPrefix),
                   "Unexpected container name " + containerName + " while expected " + expectedPrefix + "*");
    }

