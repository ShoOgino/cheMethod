  @Test
  public void shouldCreateContainerWithPidsLimit() throws Exception {
    provider = new MachineProviderBuilder().setPidsLimit(512).build();

    createInstanceFromRecipe();

    ArgumentCaptor<CreateContainerParams> argumentCaptor =
        ArgumentCaptor.forClass(CreateContainerParams.class);
    verify(dockerConnector).createContainer(argumentCaptor.capture());
    assertEquals(
        argumentCaptor.getValue().getContainerConfig().getHostConfig().getPidsLimit(), 512);
  }

