  @Test
  public void shouldPublishAllExposedPortsOnCreateContainerOnInstanceCreationFromSnapshot()
      throws Exception {
    // when
    createInstanceFromSnapshot();

    // then
    ArgumentCaptor<CreateContainerParams> argumentCaptor =
        ArgumentCaptor.forClass(CreateContainerParams.class);
    verify(dockerConnector).createContainer(argumentCaptor.capture());
    assertTrue(argumentCaptor.getValue().getContainerConfig().getHostConfig().isPublishAllPorts());
  }

