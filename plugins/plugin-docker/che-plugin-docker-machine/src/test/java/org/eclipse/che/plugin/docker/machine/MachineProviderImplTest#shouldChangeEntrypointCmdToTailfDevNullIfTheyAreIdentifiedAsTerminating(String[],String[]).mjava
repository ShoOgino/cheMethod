  @Test(dataProvider = "terminatingContainerEntrypointCmd")
  public void shouldChangeEntrypointCmdToTailfDevNullIfTheyAreIdentifiedAsTerminating(
      String[] entrypoint, String[] cmd) throws Exception {
    // given
    when(imageConfig.getCmd()).thenReturn(cmd);
    when(imageConfig.getEntrypoint()).thenReturn(entrypoint);

    // when
    createInstanceFromRecipe();

    // then
    ArgumentCaptor<CreateContainerParams> argumentCaptor =
        ArgumentCaptor.forClass(CreateContainerParams.class);
    verify(dockerConnector).createContainer(argumentCaptor.capture());
    assertNull(argumentCaptor.getValue().getContainerConfig().getEntrypoint());
    assertEquals(
        argumentCaptor.getValue().getContainerConfig().getCmd(),
        new String[] {"tail", "-f", "/dev/null"});
  }

