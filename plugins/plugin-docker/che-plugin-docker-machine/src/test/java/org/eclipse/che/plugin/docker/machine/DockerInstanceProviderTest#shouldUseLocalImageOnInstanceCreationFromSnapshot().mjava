    @Test
    public void shouldUseLocalImageOnInstanceCreationFromSnapshot() throws Exception {
        final String repo = MACHINE_SNAPSHOT_PREFIX + "repo";
        final String tag = "latest";
        dockerInstanceProvider = getDockerInstanceProvider(false);

        MachineImpl machine = getMachineBuilder().build();
        final MachineSourceImpl machineSource = new DockerMachineSource(repo).withTag(tag);
        machine.getConfig().setSource(machineSource);

        dockerInstanceProvider.createInstance(machine,
                                              LineConsumer.DEV_NULL);

        verify(dockerConnector, never()).pull(any(PullParams.class), any(ProgressMonitor.class));
    }

