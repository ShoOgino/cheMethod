  /** Check the isDevMachine macro in template */
  @Test
  public void testIsDevMachineWhenFalse() throws Throwable {
    this.envContainerConfig =
        new String[] {WORKSPACE_ID_PROPERTY, MACHINE_NAME_PROPERTY, IS_DEV_MACHINE_PROPERTY_FALSE};
    when(containerConfig.getEnv()).thenReturn(envContainerConfig);

    this.customServerEvaluationStrategy =
        new CustomServerEvaluationStrategy(
            "10.0.0.1",
            "192.168.1.1",
            "<if(isDevMachine)><workspaceId><else><machineName><endif>",
            "http",
            "8080");

    Map<String, String> portMapping =
        this.customServerEvaluationStrategy.getExternalAddressesAndPorts(
            containerInfo, "localhost");

    Assert.assertTrue(portMapping.containsKey("4401/tcp"));
    Assert.assertEquals(portMapping.get("4401/tcp"), MACHINE_NAME_VALUE);
  }

