    @Test
    public void shouldSetMemorySizeInContainersOnInstanceCreationFromSnapshot() throws Exception {
        int memorySizeMB = 234;


        createInstanceFromSnapshot(memorySizeMB);


        ArgumentCaptor<CreateContainerParams> createContainerCaptor = ArgumentCaptor.forClass(CreateContainerParams.class);
        verify(dockerConnector).createContainer(createContainerCaptor.capture());
        verify(dockerConnector).startContainer(any(StartContainerParams.class));
        // docker accepts memory size in bytes
        assertEquals(createContainerCaptor.getValue().getContainerConfig().getHostConfig().getMemory(), memorySizeMB * 1024 * 1024);
    }

