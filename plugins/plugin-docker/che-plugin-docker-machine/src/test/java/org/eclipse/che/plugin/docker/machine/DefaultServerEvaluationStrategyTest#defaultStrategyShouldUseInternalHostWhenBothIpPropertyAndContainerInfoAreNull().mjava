    /**
     * Test: If che.docker.ip is null, and containerInfo.getGateway() is null or empty, should use provided
     *       internalHostname value. Also tests that this value is used for external address in this case.
     * @throws Exception
     */
    @Test
    public void defaultStrategyShouldUseInternalHostWhenBothIpPropertyAndContainerInfoAreNull() throws Exception {
        // given
        strategy = new DefaultServerEvaluationStrategy(null, null);
        when(networkSettings.getGateway()).thenReturn("");

        final Map<String, ServerImpl> expectedServers = getExpectedServers(DEFAULT_HOSTNAME,
                                                                           DEFAULT_HOSTNAME,
                                                                           false);

        // when
        final Map<String, ServerImpl> servers = strategy.getServers(containerInfo,
                                                                    DEFAULT_HOSTNAME,
                                                                    serverConfs);

        // then
        assertEquals(servers, expectedServers);
    }

