  @Test
  public void shouldBeAbleToParseDockerfileEnvironmentFromContent() throws ServerException {
    Environment environment =
        createDockerfileEnvConfig(DEFAULT_DOCKERFILE, null, DEFAULT_MACHINE_NAME);

    CheServicesEnvironmentImpl expected = new CheServicesEnvironmentImpl();
    expected
        .getServices()
        .put(
            DEFAULT_MACHINE_NAME,
            new CheServiceImpl()
                .withBuild(
                    new CheServiceBuildContextImpl().withDockerfileContent(DEFAULT_DOCKERFILE)));

    // when
    CheServicesEnvironmentImpl cheServicesEnvironment = parser.parse(environment);

    // then
    assertEquals(cheServicesEnvironment, expected);
  }

