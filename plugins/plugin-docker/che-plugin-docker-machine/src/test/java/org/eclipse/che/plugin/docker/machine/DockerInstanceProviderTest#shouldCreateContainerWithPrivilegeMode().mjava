    @Test
    public void shouldCreateContainerWithPrivilegeMode() throws Exception {
        dockerInstanceProvider = spy(new DockerInstanceProvider(dockerConnector,
                                                                dockerConnectorConfiguration,
                                                                credentialsReader,
                                                                dockerMachineFactory,
                                                                dockerInstanceStopDetector,
                                                                containerNameGenerator,
                                                                recipeRetriever,
                                                                Collections.emptySet(),
                                                                Collections.emptySet(),
                                                                Collections.emptySet(),
                                                                Collections.emptySet(),
                                                                null,
                                                                workspaceFolderPathProvider,
                                                                PROJECT_FOLDER_PATH,
                                                                false,
                                                                true,
                                                                Collections.emptySet(),
                                                                Collections.emptySet(),
                                                                SNAPSHOT_USE_REGISTRY,
                                                                MEMORY_SWAP_MULTIPLIER));

        createInstanceFromRecipe();

        verify(dockerConnector).createContainer(createContainerParamsArgumentCaptor.capture());
        assertTrue(createContainerParamsArgumentCaptor.getValue().getContainerConfig().getHostConfig().isPrivileged());
    }

