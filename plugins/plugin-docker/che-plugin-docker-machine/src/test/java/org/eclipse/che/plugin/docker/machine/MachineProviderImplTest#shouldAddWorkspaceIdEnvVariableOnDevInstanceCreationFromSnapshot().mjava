  @Test
  public void shouldAddWorkspaceIdEnvVariableOnDevInstanceCreationFromSnapshot() throws Exception {
    String wsId = "myWs";
    createInstanceFromSnapshot(true, wsId);
    ArgumentCaptor<CreateContainerParams> argumentCaptor =
        ArgumentCaptor.forClass(CreateContainerParams.class);
    verify(dockerConnector).createContainer(argumentCaptor.capture());
    assertTrue(
        asList(argumentCaptor.getValue().getContainerConfig().getEnv())
            .contains(DockerInstanceRuntimeInfo.CHE_WORKSPACE_ID + "=" + wsId),
        "Workspace Id variable is missing. Required "
            + DockerInstanceRuntimeInfo.CHE_WORKSPACE_ID
            + "="
            + wsId
            + ". Found "
            + Arrays.toString(argumentCaptor.getValue().getContainerConfig().getEnv()));
  }

