    protected Map<String, ServerImpl> addRefAndUrlToServers(final Map<String, ServerImpl> servers, final Map<String, String> labels) {
        final Map<String, ServerConfImpl> serversConfFromLabels = getServersConfFromLabels(servers.keySet(), labels);
        for (Map.Entry<String, ServerImpl> serverEntry : servers.entrySet()) {
            ServerConf serverConf = serversConf.getOrDefault(serverEntry.getKey(), serversConfFromLabels.get(serverEntry.getKey()));
            if (serverConf != null) {
                if (serverConf.getRef() != null) {
                    serverEntry.getValue().setRef(serverConf.getRef());
                }
                if (serverConf.getProtocol() != null) {
                    serverEntry.getValue().setUrl(serverConf.getProtocol() + "://" + serverEntry.getValue().getAddress());
                }
            }
        }

        return servers;
    }

