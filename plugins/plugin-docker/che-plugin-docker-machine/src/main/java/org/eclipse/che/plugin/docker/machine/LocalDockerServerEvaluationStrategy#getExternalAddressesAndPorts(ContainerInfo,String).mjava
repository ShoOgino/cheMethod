    @Override
    protected Map<String, String> getExternalAddressesAndPorts(ContainerInfo containerInfo, String internalHost) {
        String externalAddressContainer = containerInfo.getNetworkSettings().getGateway();

        String externalAddress = externalAddressProperty != null ?
                                 externalAddressProperty :
                                 !isNullOrEmpty(externalAddressContainer) ?
                                 externalAddressContainer :
                                 internalHost;

        Map<String, List<PortBinding>> portBindings = containerInfo.getNetworkSettings().getPorts();

        Map<String, String> addressesAndPorts = new HashMap<>();
        for (String portKey : portBindings.keySet()) {
            String port = portBindings.get(portKey).get(0).getHostPort();
            addressesAndPorts.put(portKey, externalAddress + ":" + port);
        }
        return addressesAndPorts;
    }

