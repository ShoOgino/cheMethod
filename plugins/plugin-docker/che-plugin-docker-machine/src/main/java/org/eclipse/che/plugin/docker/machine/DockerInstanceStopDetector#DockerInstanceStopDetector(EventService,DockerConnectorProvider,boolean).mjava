  @Inject
  public DockerInstanceStopDetector(
      EventService eventService,
      DockerConnectorProvider dockerConnectorProvider,
      @Named("che.docker.enable_container_stop_detector") boolean isEnabled) {
    this.isEnabled = isEnabled;
    if (!isEnabled) {
      return;
    }
    this.eventService = eventService;
    this.dockerConnector = dockerConnectorProvider.get();
    this.instances = new ConcurrentHashMap<>();
    this.containersOomTimestamps =
        CacheBuilder.newBuilder().expireAfterWrite(10, TimeUnit.SECONDS).build();
    this.executorService =
        Executors.newSingleThreadExecutor(
            new ThreadFactoryBuilder()
                .setNameFormat("DockerInstanceStopDetector-%d")
                .setUncaughtExceptionHandler(LoggingUncaughtExceptionHandler.getInstance())
                .setDaemon(true)
                .build());
  }

