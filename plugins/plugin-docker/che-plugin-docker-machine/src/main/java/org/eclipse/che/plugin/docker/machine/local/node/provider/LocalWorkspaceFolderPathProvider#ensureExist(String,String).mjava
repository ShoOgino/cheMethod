    private void ensureExist(String path,
                             String prop) throws IOException {

        if (createFolders) {
            Path folder = Paths.get(path);
            if (Files.exists(folder)) {
                if (!Files.isDirectory(folder)) {
                    if (prop != null) {
                        throw new IOException(
                                format("Workspace folder '%s' is not directory. Check %s configuration property", path, prop));
                    } else {
                        throw new IOException(format("Workspace folder '%s' is not directory", path));
                    }
                }
            } else {
                try {
                    // TODO we should not create folders in this provider
                    Files.createDirectories(folder);
                } catch (AccessDeniedException e) {
                    throw new IOException(
                            format("Workspace folder '%s' creation failed. Please check permissions of this folder. Cause: %s",
                                   path,
                                   e.getLocalizedMessage()),
                            e);
                } catch (IOException e) {
                    throw new IOException(format("Workspace folder '%s' creation failed. Cause: %s",
                                                 path,
                                                 e.getLocalizedMessage()),
                                          e);
                }
            }
        }
    }

