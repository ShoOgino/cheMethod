    @Override
    public void destroy() throws MachineException {
        try {
            outputConsumer.close();
        } catch (IOException ignored) {
        }

        machineProcesses.clear();
        processesCleaner.untrackProcesses(getId());
        dockerInstanceStopDetector.stopDetection(container);
        try {
            if (getConfig().isDev()) {
                node.unbindWorkspace();
            }

            docker.killContainer(container);

            docker.removeContainer(RemoveContainerParams.create(container)
                                                        .withRemoveVolumes(true)
                                                        .withForce(true));
        } catch (IOException e) {
            throw new MachineException(e.getLocalizedMessage());
        }

        try {
            docker.removeImage(RemoveImageParams.create(image).withForce(false));
        } catch (IOException ignore) {
        }
    }

