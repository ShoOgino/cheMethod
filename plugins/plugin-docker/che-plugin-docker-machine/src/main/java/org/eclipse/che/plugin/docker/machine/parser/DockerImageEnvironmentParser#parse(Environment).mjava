  @Override
  public CheServicesEnvironmentImpl parse(Environment environment)
      throws IllegalArgumentException, ServerException {
    EnvironmentRecipe recipe = environment.getRecipe();

    if (!"dockerimage".equals(recipe.getType())) {
      throw new IllegalArgumentException(
          format(
              "Docker image environment parser doesn't support recipe type '%s'",
              recipe.getType()));
    }

    CheServicesEnvironmentImpl cheServiceEnv = new CheServicesEnvironmentImpl();
    CheServiceImpl service = new CheServiceImpl();
    cheServiceEnv.getServices().put(getMachineName(environment), service);

    service.setImage(recipe.getLocation());

    return cheServiceEnv;
  }

