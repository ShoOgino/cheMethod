  @Override
  public void clear(Workspace workspace) throws IOException, ServerException {
    String workspaceName = workspace.getConfig().getName();
    if (isNullOrEmpty(workspaceName)) {
      LOG.error("Could not get workspace name for files removal.");
      return;
    }
    if (workspaceEnvironmentProvider.areWorkspacesExternal()) {
      String workspaceId = workspace.getId();
      LOG.info("Synchronously deleting workspace {} on PVC {}", workspaceId, workspacesPvcName);
      Subject subject = workspaceSubjectRegistry.getWorkspaceStarter(workspaceId);
      if (subject == null) {
        subject = EnvironmentContext.getCurrent().getSubject();
      }
      deleteWorkspacesOnPvc(Arrays.asList(workspaceName), subject);
    } else {
      deleteQueue.add(workspaceName);
    }
  }

