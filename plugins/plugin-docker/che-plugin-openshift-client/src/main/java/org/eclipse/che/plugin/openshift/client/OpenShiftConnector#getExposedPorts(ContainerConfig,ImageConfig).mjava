  /**
   * Gets exposed ports for both container and image.
   *
   * @param containerConfig the configuration of the container
   * @param imageConfig the configuration of the image
   * @return all exposed ports
   */
  protected Set<String> getExposedPorts(ContainerConfig containerConfig, ImageConfig imageConfig) {

    Map<String, Map<String, String>> containerExposedPortsMap = containerConfig.getExposedPorts();
    if (containerExposedPortsMap == null) {
      containerExposedPortsMap = Collections.emptyMap();
    }
    Map<String, org.eclipse.che.plugin.docker.client.json.ExposedPort> imageExposedPortsMap =
        imageConfig.getExposedPorts();
    if (imageExposedPortsMap == null) {
      imageExposedPortsMap = Collections.emptyMap();
    }

    Set<String> containerExposedPorts = containerExposedPortsMap.keySet();
    Set<String> imageExposedPorts = imageExposedPortsMap.keySet();
    return ImmutableSet.<String>builder()
        .addAll(containerExposedPorts)
        .addAll(imageExposedPorts)
        .build();
  }

