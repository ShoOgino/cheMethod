  private Subject subjectForImageId(String imageId) {
    String workspaceId = imageIdToWorkspaceId.get(imageId);
    if (workspaceId != null) {
      Subject subject = workspaceSubjectRegistry.getWorkspaceStarter(workspaceId);
      if (subject != null) {
        return subject;
      }
      Subject envSubject = EnvironmentContext.getCurrent().getSubject();
      LOG.info(
          "Didn't find the user that started workspace '{}' => using environment context subject: '{}'",
          workspaceId,
          envSubject.getUserName());
      return envSubject;
    }
    LOG.warn("Didn't find image '{}' in the map of created images", imageId);
    return null;
  }

