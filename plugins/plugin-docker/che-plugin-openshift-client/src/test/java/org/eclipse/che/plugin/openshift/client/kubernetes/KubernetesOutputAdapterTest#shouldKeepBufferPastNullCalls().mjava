  @Test
  public void shouldKeepBufferPastNullCalls() {
    // Given
    byte[] firstInput = "lin".getBytes();
    byte[] secondInput = "e1\nline2\n".getBytes();
    List<String> expected = generateExpected("line1", "line2");

    // When
    adapter.call(firstInput);
    adapter.call(null);
    adapter.call(secondInput);

    // Then
    List<String> actual = processor.getMessages();
    assertEquals(actual, expected, "Should ignore calls with null arguments");
  }

