    @Test
    public void shouldCacheUnfinishedLinesBetweenCalls() {
        // Given
        byte[] firstInput = "line1\nlin".getBytes();
        byte[] secondInput = "e2\nline3\n".getBytes();
        List<String> expected = generateExpected("line1", "line2", "line3");

        // When
        adapter.call(firstInput);
        adapter.call(secondInput);

        // Then
        List<String> actual = processor.getMessages();
        assertEquals(actual, expected, "Should store unfinished lines between calls");
    }

