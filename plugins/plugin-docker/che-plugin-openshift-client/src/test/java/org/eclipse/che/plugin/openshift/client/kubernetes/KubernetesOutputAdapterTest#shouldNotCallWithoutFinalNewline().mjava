    @Test
    public void shouldNotCallWithoutFinalNewline() {
        // Given
        byte[] input = "line1\nline2".getBytes(); // No trailing \n
        List<String> firstExpected = generateExpected("line1");
        List<String> secondExpected = generateExpected("line1", "line2");

        // When
        adapter.call(input);

        // Then
        List<String> firstActual = processor.getMessages();
        assertEquals(firstActual, firstExpected, "Should only process lines when they are terminated by \\n or \\r\\n");

        // When
        adapter.call("\n".getBytes());

        // Then
        List<String> secondActual = processor.getMessages();
        assertEquals(secondActual, secondExpected, "Should buffer lines until newline is encountered.");

    }

