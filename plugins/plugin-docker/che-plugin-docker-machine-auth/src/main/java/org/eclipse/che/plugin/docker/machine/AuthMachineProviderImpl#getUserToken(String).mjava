  @Override
  protected String getUserToken(String wsId) {
    String userToken = null;
    try {
      userToken =
          machineTokenRegistry.getOrCreateToken(
              EnvironmentContext.getCurrent().getSubject().getUserId(), wsId);
    } catch (NotFoundException ignore) {
    }
    return MoreObjects.firstNonNull(userToken, "");
  }

