    @Test(expectedExceptions = IOException.class, expectedExceptionsMessageRegExp = EXCEPTION_ERROR_MESSAGE)
    public void shouldProduceErrorWhenPutsResourcesIntoContainerIfResponseCodeIsNotSuccess() throws IOException {
        InputStream source = new CloseConnectionInputStream(new ByteArrayInputStream(ERROR_MESSAGE.getBytes()), dockerConnection);
        PutResourceParams putResourceParams = PutResourceParams.from(CONTAINER, PATH_TO_FILE)
                                                               .withSourceStream(source);

        when(dockerResponse.getStatus()).thenReturn(RESPONSE_ERROR_CODE);
        when(dockerResponse.getInputStream())
                .thenReturn(new ByteArrayInputStream(ERROR_MESSAGE.getBytes()));

        dockerConnector.putResource(putResourceParams);

        verify(dockerResponse).getStatus();
        verify(dockerConnector).getDockerException(dockerResponse);
    }

