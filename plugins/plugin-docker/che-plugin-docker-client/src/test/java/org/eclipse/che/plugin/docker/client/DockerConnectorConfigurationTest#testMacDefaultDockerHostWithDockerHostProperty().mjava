    /**
     * Use docker machine system env property if set
     */
    @Test
    public void testMacDefaultDockerHostWithDockerHostProperty() throws Exception {
        NetworkFinder networkFinder = Mockito.mock(NetworkFinder.class);
        String myCustomIpAddress = "192.168.59.104";
        InetAddress inetAddress = Mockito.mock(InetAddress.class);
        doReturn(myCustomIpAddress).when(inetAddress).getHostAddress();
        doReturn(Optional.of(inetAddress)).when(networkFinder).getMatchingInetAddress(anyString());
        DockerConnectorConfiguration dockerConnectorConfiguration = new DockerConnectorConfiguration(null, null, null, networkFinder);

        Map<String, String> env = Collections.singletonMap(DockerConnectorConfiguration.DOCKER_HOST_PROPERTY, "tcp://192.168.59.104:2375");

        String ip = dockerConnectorConfiguration.getDockerHostIp(false, env);
        assertEquals(ip, myCustomIpAddress);
        verify(networkFinder, times(0)).getIPAddress(anyString());
        verify(networkFinder).getMatchingInetAddress("192.168.59");
    }

