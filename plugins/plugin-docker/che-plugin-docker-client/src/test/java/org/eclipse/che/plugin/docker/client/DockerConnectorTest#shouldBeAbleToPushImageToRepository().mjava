    @Test
    public void shouldBeAbleToPushImageToRepository() throws IOException, InterruptedException {
        PushParams pushParams = PushParams.create(REPOSITORY);

        when(dockerResponse.getInputStream()).thenReturn(
                new ByteArrayInputStream(("{\"status\":\"latest: digest: " + DIGEST + " size: 1234\"}").getBytes()));

        dockerConnector.push(pushParams, progressMonitor);

        verify(dockerConnectionFactory).openConnection(any(URI.class));
        verify(dockerConnection).method(REQUEST_METHOD_POST);
        verify(dockerConnection).path("/images/" + pushParams.getRepository() + "/push");
        verify(dockerConnection).header(eq("X-Registry-Auth"), any(AuthConfig.class));
        verify(dockerConnection).request();
        verify(dockerResponse).getStatus();
        verify(dockerResponse).getInputStream();
    }

