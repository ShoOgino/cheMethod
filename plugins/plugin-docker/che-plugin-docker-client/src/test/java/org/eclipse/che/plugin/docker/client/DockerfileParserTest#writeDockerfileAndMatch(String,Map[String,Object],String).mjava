    private void writeDockerfileAndMatch(String templateContent, Map<String, Object> parameters, String expectedContent) throws Exception {
        Dockerfile template = DockerfileParser.parse(templateContent);
        StringBuilder buf = new StringBuilder();
        if (parameters != null) {
            template.getParameters().putAll(parameters);
        }
        template.writeDockerfile(buf);
        assertEquals(buf.toString(), expectedContent);

    }

