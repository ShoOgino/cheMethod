  @Test
  public void shouldBeAbleToConnectContainerToNetworkWithParams() throws Exception {
    // given
    String netId = "net_id";
    ConnectContainerToNetworkParams connectToNetworkParams =
        ConnectContainerToNetworkParams.create(netId, createConnectContainer());

    // when
    dockerConnector.connectContainerToNetwork(connectToNetworkParams);

    // then
    verify(dockerConnectionFactory).openConnection(nullable(URI.class));
    verify(dockerConnection).method(REQUEST_METHOD_POST);
    verify(dockerConnection).path("/networks/" + netId + "/connect");
    verify(dockerConnection).header("Content-Type", MediaType.APPLICATION_JSON);
    verify(dockerConnection).header(eq("Content-Length"), anyInt());
    ArgumentCaptor<byte[]> argumentCaptor = ArgumentCaptor.forClass(byte[].class);
    verify(dockerConnection).entity(argumentCaptor.capture());
    assertEquals(
        argumentCaptor.getValue(),
        GSON.toJson(connectToNetworkParams.getConnectContainer()).getBytes());
    verify(dockerConnection).request();
    verify(dockerResponse).getStatus();
  }

