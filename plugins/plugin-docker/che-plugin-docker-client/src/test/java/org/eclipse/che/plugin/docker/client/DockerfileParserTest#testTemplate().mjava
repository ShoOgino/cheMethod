  @Test
  public void testTemplate() throws Exception {
    String templateContent =
        "FROM $from$\n"
            + "MAINTAINER Codenvy Corp\n"
            + "ADD $app$ /tmp/$app$\n"
            + "CMD /bin/bash -cl \"java $jvm_args$ -classpath /tmp/$app$ $main_class$ $prg_args$\"\n";
    String expectedContent =
        "FROM base\n"
            + "MAINTAINER Codenvy Corp\n"
            + "ADD hello.jar /tmp/hello.jar\n"
            + "CMD /bin/bash -cl \"java -agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n -classpath /tmp/hello.jar test.Main name=andrew\"\n";
    Map<String, Object> parameters = new HashMap<>();
    parameters.put("from", "base");
    parameters.put("app", "hello.jar");
    parameters.put(
        "jvm_args", "-agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n");
    parameters.put("main_class", "test.Main");
    parameters.put("prg_args", "name=andrew");
    writeDockerfileAndMatch(templateContent, parameters, expectedContent);
  }

