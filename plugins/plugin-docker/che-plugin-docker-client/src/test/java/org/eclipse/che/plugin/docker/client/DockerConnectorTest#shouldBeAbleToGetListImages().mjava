  @Test
  public void shouldBeAbleToGetListImages() throws IOException, JsonParseException {
    ListImagesParams listImagesParams = ListImagesParams.create();
    List<Image> images = new ArrayList<>();
    images.add(mock(Image.class));

    doReturn(images)
        .when(dockerConnector)
        .parseResponseStreamAndClose(eq(inputStream), Matchers.<TypeToken<List<Image>>>any());

    List<Image> returnedImages = dockerConnector.listImages(listImagesParams);

    verify(dockerConnectionFactory).openConnection(any(URI.class));
    verify(dockerConnection).method(REQUEST_METHOD_GET);
    verify(dockerConnection).path("/images/json");
    verify(dockerConnection).request();
    verify(dockerResponse).getStatus();
    verify(dockerResponse).getInputStream();

    assertEquals(returnedImages, images);
  }

