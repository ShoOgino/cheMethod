  /**
   * With docker machine, if system env property is set, use it. And check value if no bridge
   * matching ip is found
   */
  @Test
  public void testMacDefaultDockerHostWithDockerHostPropertyNoMatchingNetwork() throws Exception {
    NetworkFinder networkFinder = Mockito.mock(NetworkFinder.class);
    doReturn(Optional.empty()).when(networkFinder).getMatchingInetAddress(anyString());
    DockerConnectorConfiguration dockerConnectorConfiguration =
        new DockerConnectorConfiguration(null, null, null, networkFinder);

    Map<String, String> env =
        Collections.singletonMap(
            DockerConnectorConfiguration.DOCKER_HOST_PROPERTY, "tcp://192.168.59.104:2375");

    String ip = dockerConnectorConfiguration.getDockerHostIp(false, env);
    assertEquals(ip, DEFAULT_DOCKER_MACHINE_DOCKER_HOST_IP);
    verify(networkFinder, times(0)).getIPAddress(anyString());
    verify(networkFinder).getMatchingInetAddress("192.168.59");
  }

