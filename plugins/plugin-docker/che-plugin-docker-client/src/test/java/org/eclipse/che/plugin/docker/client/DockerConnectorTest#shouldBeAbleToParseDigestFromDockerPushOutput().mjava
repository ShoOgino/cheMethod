    @Test
    public void shouldBeAbleToParseDigestFromDockerPushOutput() throws IOException, InterruptedException {
        String dockerPushOutput = "{\"progress\":\"[=====>              ] 25%\"}\n" +
                                  "{\"status\":\"Image already exists\"}\n" +
                                  "{\"progress\":\"[===============>    ] 75%\"}\n" +
                                  "{\"status\":\"" + TAG + ": digest: " + DIGEST + " size: 12345\"}";

        when(initialAuthConfig.getAuthConfigHeader()).thenReturn("auth-header");
        when(dockerResponse.getInputStream()).thenReturn(new ByteArrayInputStream(dockerPushOutput.getBytes()));

        assertEquals(DIGEST, dockerConnector.push(PushParams.from(REPOSITORY)
                                                            .withRegistry(REGISTRY)
                                                            .withTag(TAG),
                                                  progressMonitor));
    }

