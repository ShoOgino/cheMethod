  @Test
  public void shouldBeAbleToPutResourcesIntoContainer() throws IOException {
    InputStream source =
        new CloseConnectionInputStream(
            new ByteArrayInputStream(STREAM_DATA_BYTES), dockerConnection);
    PutResourceParams putResourceParams = PutResourceParams.create(CONTAINER, PATH_TO_FILE, source);

    dockerConnector.putResource(putResourceParams);

    verify(dockerConnectionFactory).openConnection(any(URI.class));
    verify(dockerConnection).method(REQUEST_METHOD_PUT);
    verify(dockerConnection).path("/containers/" + putResourceParams.getContainer() + "/archive");
    verify(dockerConnection).query(eq("path"), eq(PATH_TO_FILE));
    verify(dockerConnection).header("Content-Type", ExtMediaType.APPLICATION_X_TAR);
    verify(dockerConnection).header(eq("Content-Length"), anyInt());
    verify(dockerConnection).entity(any(InputStream.class));
    verify(dockerConnection).request();
    verify(dockerResponse).getStatus();
  }

