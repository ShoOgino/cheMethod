  /**
   * Check if Che server IP from container is DEFAULT_LINUX_DOCKER_HOST_IP when bridge docker0 and
   * interface eth0 are not defined
   */
  @Test
  public void testLinuxDefaultDockerHostWithoutInterfaces() throws Exception {
    Map<String, String> env = new HashMap<>();
    NetworkFinder networkFinder = Mockito.mock(NetworkFinder.class);
    doReturn(Optional.empty()).when(networkFinder).getIPAddress(BRIDGE_LINUX_INTERFACE_NAME);
    doReturn(Optional.empty()).when(networkFinder).getIPAddress(DEFAULT_LINUX_INTERFACE_NAME);
    DockerConnectorConfiguration dockerConnectorConfiguration =
        new DockerConnectorConfiguration(null, null, null, networkFinder);

    String ip = dockerConnectorConfiguration.getDockerHostIp(true, env);
    assertEquals(ip, DEFAULT_LINUX_DOCKER_HOST_IP);
    verify(networkFinder).getIPAddress(BRIDGE_LINUX_INTERFACE_NAME);
    verify(networkFinder).getIPAddress(DEFAULT_LINUX_INTERFACE_NAME);
  }

