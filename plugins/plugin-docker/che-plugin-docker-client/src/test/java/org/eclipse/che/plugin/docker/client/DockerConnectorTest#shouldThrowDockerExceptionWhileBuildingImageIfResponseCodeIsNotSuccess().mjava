    @Test(expectedExceptions = DockerException.class, expectedExceptionsMessageRegExp = EXCEPTION_ERROR_MESSAGE)
    public void shouldThrowDockerExceptionWhileBuildingImageIfResponseCodeIsNotSuccess() throws IOException, InterruptedException {
        AuthConfigs authConfigs = DtoFactory.newDto(AuthConfigs.class);
        AuthConfig authConfig = DtoFactory.newDto(AuthConfig.class);
        Map<String, AuthConfig> auth = new HashMap<>();
        auth.put("auth", authConfig);
        authConfigs.setConfigs(auth);

        BuildImageParams getExecInfoParams = BuildImageParams.create(dockerfile)
                                                             .withAuthConfigs(authConfigs);

        when(dockerResponse.getStatus()).thenReturn(RESPONSE_ERROR_CODE);

        dockerConnector.buildImage(getExecInfoParams, progressMonitor);

        verify(dockerResponse).getStatus();
        verify(dockerConnector).getDockerException(dockerResponse);
    }

