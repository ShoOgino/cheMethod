    @BeforeMethod
    public void setup() throws IOException, URISyntaxException {
        dockerConnection = mock(DockerConnection.class, new SelfReturningAnswer());
        when(dockerConnectionFactory.openConnection(any(URI.class))).thenReturn(dockerConnection);
        when(dockerConnection.request()).thenReturn(dockerResponse);
        when(dockerConnectorConfiguration.getAuthConfigs()).thenReturn(initialAuthConfig);
        when(dockerResponse.getStatus()).thenReturn(RESPONSE_SUCCESS_CODE);
        when(dockerResponse.getInputStream()).thenReturn(inputStream);

        dockerConnector = spy(new DockerConnector(dockerConnectorConfiguration, dockerConnectionFactory));

        doReturn(new DockerException(EXCEPTION_ERROR_MESSAGE, RESPONSE_ERROR_CODE))
                .when(dockerConnector).getDockerException(any(DockerResponse.class));

    }

