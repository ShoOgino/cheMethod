    @BeforeMethod
    public void setup() throws IOException, URISyntaxException {
        dockerConnection = mock(DockerConnection.class, new SelfReturningAnswer());
        when(dockerConnectionFactory.openConnection(any(URI.class))).thenReturn(dockerConnection);
        when(dockerConnection.request()).thenReturn(dockerResponse);
        when(dockerConnectorConfiguration.getAuthConfigs()).thenReturn(initialAuthConfig);
        when(dockerResponse.getStatus()).thenReturn(RESPONSE_SUCCESS_CODE);
        when(dockerResponse.getInputStream()).thenReturn(inputStream);
        when(initialAuthConfig.getAuthConfigs()).thenReturn(authConfigs);
        when(authConfigs.getConfigs()).thenReturn(new HashMap<>());
        when(dockerApiVersionPathPrefixProvider.get()).thenReturn(API_VERSION_PREFIX);

        dockerConnector = spy(new DockerConnector(dockerConnectorConfiguration,
                                                  dockerConnectionFactory,
                                                  authManager,
                                                  dockerApiVersionPathPrefixProvider));

        doReturn(new DockerException(EXCEPTION_ERROR_MESSAGE, RESPONSE_ERROR_CODE))
                .when(dockerConnector).getDockerException(any(DockerResponse.class));

    }

