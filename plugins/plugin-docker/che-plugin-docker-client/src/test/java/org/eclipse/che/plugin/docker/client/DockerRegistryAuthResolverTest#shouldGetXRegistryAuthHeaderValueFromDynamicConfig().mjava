  @Test
  public void shouldGetXRegistryAuthHeaderValueFromDynamicConfig() {
    when(dynamicAuthResolver.getXRegistryAuth(REGISTRY_WITH_DYNAMIC_PASSWORD_URL))
        .thenReturn(dynamicAuthConfigs.getConfigs().get(REGISTRY_WITH_DYNAMIC_PASSWORD_URL));

    String base64HeaderValue =
        authResolver.getXRegistryAuthHeaderValue(
            REGISTRY_WITH_DYNAMIC_PASSWORD_URL, customAuthConfigs);

    assertEqualsXRegistryAuthHeader(
        base64ToAuthConfig(base64HeaderValue),
        jsonToAuthConfig(REGISTRY_WITH_DYNAMIC_PASSWORD_AUTH_HEADER_VALUE));
  }

