  @Test
  public void shouldBeAbleToGetSystemInfo() throws IOException, JsonParseException {
    SystemInfo systemInfo = mock(SystemInfo.class);

    doReturn(systemInfo)
        .when(dockerConnector)
        .parseResponseStreamAndClose(inputStream, SystemInfo.class);

    SystemInfo returnedSystemInfo = dockerConnector.getSystemInfo();

    verify(dockerConnectionFactory).openConnection(nullable(URI.class));
    verify(dockerConnection).method(REQUEST_METHOD_GET);
    verify(dockerConnection).path("/info");
    verify(dockerConnection).request();
    verify(dockerResponse).getStatus();
    verify(dockerResponse).getInputStream();

    assertEquals(returnedSystemInfo, systemInfo);
  }

