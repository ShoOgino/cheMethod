    @Override
    public String[] getHeaders(String name) throws IOException {
        final Map<String, List<String>> allHeaders = connection.getHeaderFields();
        final List<String> headers = allHeaders.get(name);
        return headers != null ? headers.toArray(new String[headers.size()]) : new String[0];
    }

