  private int doRead(byte[] b, int off, int len) throws IOException {
    if (pos >= limit) {
      return -1;
    }
    int n = input.read(b, 0, Math.min(len - off, limit - pos));
    pos += n;
    return n;
  }

