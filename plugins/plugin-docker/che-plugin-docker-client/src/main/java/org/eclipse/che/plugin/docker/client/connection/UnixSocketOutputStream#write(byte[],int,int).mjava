    @Override
    public void write(byte[] b, int off, int len) throws IOException {
        int n;
        try {
            n = cLib.send(fd, b, len, 0);
        } catch (LastErrorException e) {
            throw new IOException("error: " + cLib.strerror(e.getErrorCode()));
        }
        if (n != len) {
            throw new IOException(String.format("Failed writing %d bytes", len));
        }
    }

