  private ProcessHandler startTestProcess(TestExecutionContext context) throws ExecutionException {
    JavaParameters parameters = new JavaParameters();
    parameters.setJavaExecutable(System.getProperty("java.home") + "/bin/java");
    parameters.setMainClassName(MAIN_CLASS_NAME);
    parameters.setWorkingDirectory(workspacePath + context.getProjectPath());

    List<String> projectClasspath = getResolvedClassPaths(context);

    List<String> classPath = new ArrayList<>();
    classPath.addAll(projectClasspath);
    classPath.add(ClasspathUtil.getJarPathForClass(CheJUnitCoreRunner.class));
    parameters.getClassPath().addAll(classPath);

    List<String> suite = findTests(context);
    for (String element : suite) {
      parameters.getParametersList().add(element);
    }
    if (context.isDebugModeEnable()) {
      generateDebuggerPort();
      parameters.getVmParameters().add("-Xdebug");
      parameters
          .getVmParameters()
          .add("-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=" + getDebugPort());
    }
    CommandLine command = parameters.createCommand();
    return new ProcessHandler(command.createProcess());
  }

