  private ProcessHandler startTestProcess(IJavaProject javaProject, TestExecutionContext context) {
    JavaParameters parameters = new JavaParameters();
    parameters.setJavaExecutable(System.getProperty("java.home") + "/bin/java");
    parameters.setMainClassName(MAIN_CLASS_NAME);
    parameters.setWorkingDirectory(workspacePath + javaProject.getPath());

    List<String> classPath = new ArrayList<>();
    Set<String> projectClassPath = classpathProvider.getProjectClassPath(javaProject);
    classPath.addAll(projectClassPath);
    classPath.add(ClasspathUtil.getJarPathForClass(CheJUnitCoreRunner.class));
    parameters.getClassPath().addAll(classPath);

    List<String> suite =
        findTests(
            context,
            javaProject,
            JavaTestAnnotations.JUNIT4X_TEST.getName(),
            JavaTestAnnotations.JUNIT4X_RUN_WITH.getName());
    for (String element : suite) {
      parameters.getParametersList().add(element);
    }
    if (context.isDebugModeEnable()) {
      generateDebuggerPort();
      parameters.getVmParameters().add("-Xdebug");
      parameters
          .getVmParameters()
          .add("-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=" + getDebugPort());
    }
    CommandLine command = parameters.createCommand();
    try {
      return new ProcessHandler(command.createProcess());
    } catch (ExecutionException e) {
      LOG.error("Can't run JUnit JVM", e);
    }

    return null;
  }

