    /**
     * {@inheritDoc}
     */
    @Override
    public ClassLoader getClassLoader(String projectPath, boolean updateClasspath) throws Exception {
        List<URL> classUrls;
        try {
            if (updateClasspath) {
                buildClasspath(projectPath);
            }
            classUrls = getProjectClasspath(projectPath);
        } catch (IOException | InterruptedException e) {
            throw new Exception("Failed to build Maven classpath.", e);
        }
        return new URLClassLoader(classUrls.toArray(new URL[classUrls.size()]), null);
    }

