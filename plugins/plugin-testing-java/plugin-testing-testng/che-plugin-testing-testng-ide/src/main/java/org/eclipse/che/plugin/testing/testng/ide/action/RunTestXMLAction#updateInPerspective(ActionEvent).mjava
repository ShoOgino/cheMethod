    @Override
    public void updateInPerspective(@NotNull ActionEvent e) {
        Resource resource = appContext.getResource();
        if (resource == null) {
            e.getPresentation().setEnabledAndVisible(false);
            return;
        }
        
        Project project = resource.getProject();
        if (project == null) {
            e.getPresentation().setEnabledAndVisible(false);
        }
        
        e.getPresentation().setVisible(true);

        String projectType = project.getType();
        if (! "maven".equals(projectType)) {
            e.getPresentation().setEnabled(false);
        }

        String expectedXmlFile = MavenAttributes.DEFAULT_TEST_RESOURCES_FOLDER + "/testng.xml";
        if (resource instanceof File) {
            File file = (File)resource;
            e.getPresentation().setEnabled(file.getLocation().toString().endsWith(expectedXmlFile));
        } else {
            e.getPresentation().setEnabled(true);
        }
    }

