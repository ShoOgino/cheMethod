    /**
     * Removes an IJavaElement's resource. Retries if deletion failed (e.g. because the indexer
     * still locks the file).
     *
     * @param elem the element to delete
     * @throws CoreException if operation failed
     * @see #ASSERT_NO_MIXED_LINE_DELIMIERS
     */
    public static void delete(final IJavaElement elem) throws CoreException {
//		if (ASSERT_NO_MIXED_LINE_DELIMIERS)
//			MixedLineDelimiterDetector.assertNoMixedLineDelimiters(elem);
        if (elem instanceof JavaProject) {
            ((JavaProject) elem).close();
            JavaModelManager.getJavaModelManager().removePerProjectInfo((JavaProject) elem, true);
        }
        JavaModelManager.getJavaModelManager().resetTemporaryCache();
        IWorkspaceRunnable runnable = new IWorkspaceRunnable() {
            public void run(IProgressMonitor monitor) throws CoreException {
//				performDummySearch();
                if (elem instanceof IJavaProject) {
                    IJavaProject jproject = (IJavaProject) elem;
                    jproject.setRawClasspath(new IClasspathEntry[0], jproject.getProject().getFullPath(), null);
                }
                delete(elem.getResource());
            }
        };
        ResourcesPlugin.getWorkspace().run(runnable, null);
//		emptyDisplayLoop();
    }

