  /**
   * Creates the suite which is represented by one XML file with name che-testng-suite.xml. It can
   * contain one or more tests.
   *
   * @param suitePath path to the suite file
   * @param suiteName the name of the suite
   * @param classesAndMethods classes and methods which should be included to the suite.
   * @return created file with suite
   */
  public File writeSuite(
      String suitePath, String suiteName, Map<String, List<String>> classesAndMethods) {
    XmlSuite suite = new XmlSuite();
    XmlTest test = new XmlTest(suite);
    test.setName(suiteName);
    List<XmlClass> xmlClasses = new ArrayList<>();

    for (String className : classesAndMethods.keySet()) {
      XmlClass xmlClass = new XmlClass(className, false);
      xmlClasses.add(xmlClass);
      List<String> methods = classesAndMethods.get(className);

      if (methods != null) {
        List<XmlInclude> includedMethods = new ArrayList<>();
        for (String method : methods) {
          includedMethods.add(new XmlInclude(method));
        }

        xmlClass.setIncludedMethods(includedMethods);
      }
    }

    test.setXmlClasses(xmlClasses);

    File result = new File(suitePath, "che-testng-suite.xml");
    try {
      com.google.common.io.Files.write(suite.toXml().getBytes("UTF-8"), result);
    } catch (IOException e) {
      LOG.error("Can't write TestNG suite xml file.", e);
    }
    return result;
  }

