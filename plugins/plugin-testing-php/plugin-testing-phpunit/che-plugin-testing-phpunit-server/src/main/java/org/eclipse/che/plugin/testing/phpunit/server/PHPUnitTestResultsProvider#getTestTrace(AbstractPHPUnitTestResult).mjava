  private TestResultTraceDto getTestTrace(AbstractPHPUnitTestResult phpTestResult) {
    TestResultTraceDto testResultTraceDto =
        DtoFactory.getInstance().createDto(TestResultTraceDto.class);
    if (phpTestResult instanceof PHPUnitTestCase) {
      PHPUnitTestCase phpTestCase = (PHPUnitTestCase) phpTestResult;
      PHPUnitTestException phpTestEvent = phpTestCase.getException();
      if (phpTestEvent != null) {
        testResultTraceDto.setMessage(
            phpTestEvent.getExceptionClass() + ": " + phpTestEvent.getMessage());
        List<TestResultTraceFrameDto> traceFrames = new ArrayList<>();
        for (PHPUnitTraceFrame phpTraceFrame : phpTestEvent.getTrace()) {
          TestResultTraceFrameDto testResultTraceFrameDto =
              DtoFactory.getInstance().createDto(TestResultTraceFrameDto.class);
          testResultTraceFrameDto.setTraceFrame(phpTraceFrame.toString());
          SimpleLocationDto simpleLocationDto =
              DtoFactory.getInstance().createDto(SimpleLocationDto.class);
          simpleLocationDto.setResourcePath(phpTraceFrame.getFile());
          simpleLocationDto.setLineNumber(phpTraceFrame.getLine() - 1);
          testResultTraceFrameDto.setLocation(simpleLocationDto);
          traceFrames.add(testResultTraceFrameDto);
        }
        testResultTraceDto.setTraceFrames(traceFrames);
        return testResultTraceDto;
      }
    }
    return null;
  }

