    @Test
    public void testOnCodeServerAddressChanged() throws Exception {
        String codeServer = "localhost";
        when(gwtCommandPageView.getCodeServerAddress()).thenReturn(codeServer);

        final CommandConfigurationPage.DirtyStateListener listener = mock(CommandConfigurationPage.DirtyStateListener.class);
        gwtCommandPagePresenter.setDirtyStateListener(listener);

        gwtCommandPagePresenter.onCodeServerAddressChanged();

        verify(gwtCommandPageView).getCodeServerAddress();
        verify(configuration).setCodeServerAddress(eq(codeServer));
        verify(listener).onDirtyStateChanged();
    }

