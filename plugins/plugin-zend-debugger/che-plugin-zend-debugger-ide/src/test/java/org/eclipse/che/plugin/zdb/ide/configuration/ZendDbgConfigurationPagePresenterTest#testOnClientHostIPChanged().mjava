  @Test
  public void testOnClientHostIPChanged() throws Exception {
    String clientHostIP = "127.0.0.1";
    when(pageView.getClientHostIP()).thenReturn(clientHostIP);
    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);
    pagePresenter.onClientHostIPChanged();
    verify(pageView).getClientHostIP();
    verify(configuration, times(3)).getConnectionProperties();
    verify(listener).onDirtyStateChanged();
  }

