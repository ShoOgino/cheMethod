  @Test
  public void testOnBreakAtFirstLineChanged() throws Exception {
    boolean breakAtFirstLine = false;
    when(pageView.getBreakAtFirstLine()).thenReturn(breakAtFirstLine);
    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);
    pagePresenter.onBreakAtFirstLineChanged(breakAtFirstLine);
    verify(pageView).getBreakAtFirstLine();
    verify(configuration, times(3)).getConnectionProperties();
    verify(listener).onDirtyStateChanged();
  }

