  @Test
  public void testOnUseSslEncryptionChanged() throws Exception {
    boolean useSslEncryption = false;
    when(pageView.getUseSslEncryption()).thenReturn(useSslEncryption);
    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);
    pagePresenter.onUseSslEncryptionChanged(useSslEncryption);
    verify(pageView).getUseSslEncryption();
    verify(configuration, times(3)).getConnectionProperties();
    verify(listener).onDirtyStateChanged();
  }

