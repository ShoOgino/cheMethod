  /** Check that with a custom factory.json we've this factory being built */
  @Test
  public void checkWithCustomFactoryJsonFile() throws Exception {

    when(factoryAdapter.adapt(any())).thenAnswer(inv -> inv.getArguments()[0]);

    WorkspaceConfigDto workspaceConfigDto = newDto(WorkspaceConfigDto.class);
    FactoryDto templateFactory =
        newDto(FactoryDto.class).withV("4.0").withName("florent").withWorkspace(workspaceConfigDto);
    String jsonFactory = DtoFactory.getInstance().toJson(templateFactory);

    String myLocation = "http://foo-location";
    when(urlChecker.exists(myLocation)).thenReturn(FALSE);
    when(urlFetcher.fetch(myLocation)).thenReturn(jsonFactory);

    FactoryDto factory = urlFactoryBuilder.createFactory(myLocation);

    assertEquals(templateFactory, factory);
  }

