  @Inject
  public TestDetector(
      EventBus eventBus,
      Set<TestFileExtension> fileExtensions,
      TestServiceClient client,
      NotificationManager notificationManager,
      DtoFactory dtoFactory,
      AppContext appContext) {
    this.client = client;
    this.notificationManager = notificationManager;
    this.dtoFactory = dtoFactory;
    this.appContext = appContext;

    isEnable = false;

    Set<String> collectedExtensions =
        fileExtensions
            .stream()
            .map(TestFileExtension::getExtensions)
            .flatMap(Collection::stream)
            .collect(Collectors.toSet());

    eventBus.addHandler(JavaReconsilerEvent.TYPE, event -> detectTests(event.getEditor()));
    eventBus.addHandler(
        ActivePartChangedEvent.TYPE,
        event -> analyzeActiveEditor(collectedExtensions, event.getActivePart()));
  }

