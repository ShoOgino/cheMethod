    @Override
    public void onTestFinished(TestFinishedEvent event) {
        String name = event.getName();
        TestState testState = getStateByStateName(name);

        if (testState == null) {
            Log.error(getClass(), "Test wasn't started: " + name);
            return;
        }

        testState.setDuration(event.getDuration());
        testState.setFinished();
        testNameToTestState.remove(name);
        currentChildren.remove(testState);

        callTestFinished(testState);
    }

