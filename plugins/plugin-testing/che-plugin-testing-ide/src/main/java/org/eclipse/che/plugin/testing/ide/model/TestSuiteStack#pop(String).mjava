    /**
     * Pops an element from the stack represented by this deque.  In other
     * words, removes and returns the first element of this deque.
     *
     * @param suiteName
     *         name of suite
     * @return element from the stack which has same name
     */
    public TestState pop(String suiteName) {
        if (stack.isEmpty()) {
            Log.error(getClass(), "Test suite stack is empty, unexpected suite name: " + suiteName);
            return null;
        }

        TestState state = stack.peek();

        if (!suiteName.equals(state.getName())) {

            TestState expectedState = null;
            for (TestState testState : stack) {
                if (suiteName.equals(testState.getName())) {
                    expectedState = testState;
                    break;
                }
            }

            if (expectedState != null) {

                TestState testState = state;
                while (testState != expectedState) {
                    testState = stack.pop();
                }

                return expectedState;
            } else {
                return null;
            }

        } else {
            stack.pop();
        }
        return state;
    }

