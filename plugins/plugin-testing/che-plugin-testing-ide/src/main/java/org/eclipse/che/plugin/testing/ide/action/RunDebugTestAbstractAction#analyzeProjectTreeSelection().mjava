  /** Analyzes project tree selection. Needs for detecting context type for the test runner. */
  private void analyzeProjectTreeSelection() {
    Resource[] resources = appContext.getResources();
    if (resources == null || resources.length > 1) {
      isEnable = false;
      return;
    }

    Resource resource = resources[0];
    if (resource.isProject() && isJavaProject((Project) resource)) {
      contextType = PROJECT;
      isEnable = true;
      return;
    }

    Project project = resource.getProject();
    if (!isJavaProject(project)) {
      isEnable = false;
      return;
    }

    if (isJavaTestFile(resource)) {
      contextType = TestExecutionContext.ContextType.FILE;
    } else if (resource instanceof Container) {
      Optional<Resource> srcFolder = resource.getParentWithMarker(SourceFolderMarker.ID);
      if (!srcFolder.isPresent() || resource.getLocation().equals(srcFolder.get().getLocation())) {
        isEnable = false;
        return;
      }
      contextType = TestExecutionContext.ContextType.FOLDER;
    }
    isEnable = true;
    selectedNodePath = resource.getLocation().toString();
  }

