    /**
     * Analyzes project tree selection. Needs for detecting context type for the test runner.
     */
    protected void analyzeProjectTreeSelection() {
        Resource[] resources = appContext.getResources();
        if (resources == null || resources.length > 1) {
            isEnable = false;
            return;
        }

        Resource resource = resources[0];
        if (resource.isProject() && JavaUtil.isJavaProject((Project)resource)) {
            contextType = PROJECT;
            isEnable = true;
            return;
        }

        Project project = resource.getProject();
        if (!JavaUtil.isJavaProject(project)) {
            isEnable = false;
            return;
        }

        Optional<Resource> srcFolder = resource.getParentWithMarker(SourceFolderMarker.ID);
        if (!srcFolder.isPresent() || resource.getLocation().equals(srcFolder.get().getLocation())) {
            isEnable = false;
            return;
        }

        if (resource.getResourceType() == FILE && isJavaFile(resource)) {
            contextType = TestExecutionContext.ContextType.FILE;
        } else if (resource instanceof Container) {
            contextType = TestExecutionContext.ContextType.FOLDER;
        }
        selectedNodePath = resource.getLocation().toString();
        isEnable = true;
    }

