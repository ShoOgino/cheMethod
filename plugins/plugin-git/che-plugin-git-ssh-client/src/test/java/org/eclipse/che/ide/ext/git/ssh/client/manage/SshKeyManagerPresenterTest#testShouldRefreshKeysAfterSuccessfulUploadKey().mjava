    @Test
    public void testShouldRefreshKeysAfterSuccessfulUploadKey() throws OperationException {
        List<SshPairDto> sshPairDtoArray = new ArrayList<>();

        presenter.onUploadClicked();

        verify(uploadSshKeyPresenter).showDialog(asyncCallbackCaptor.capture());
        AsyncCallback<Void> asyncCallback = asyncCallbackCaptor.getValue();
        asyncCallback.onSuccess(null);

        verify(sshPairDTOsPromise).then(operationSshPairDTOsCapture.capture());
        operationSshPairDTOsCapture.getValue().apply(sshPairDtoArray);

        verify(service).getPairs(Matchers.eq(SshKeyManagerPresenter.GIT_SSH_SERVICE));
        verify(view).setPairs(eq(sshPairDtoArray));
    }

