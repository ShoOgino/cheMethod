  @Override
  public Promise<Void> fetch(
      Path project,
      String remote,
      List<String> refspec,
      boolean removeDeletedRefs,
      Credentials credentials) {
    FetchRequest fetchRequest =
        dtoFactory
            .createDto(FetchRequest.class)
            .withRefSpec(refspec)
            .withRemote(remote)
            .withRemoveDeletedRefs(removeDeletedRefs);
    if (credentials != null) {
      fetchRequest.setUsername(credentials.getUsername());
      fetchRequest.setPassword(credentials.getPassword());
    }
    String url = getWsAgentBaseUrl() + FETCH + "?projectPath=" + encodePath(project);
    return asyncRequestFactory.createPostRequest(url, fetchRequest).send();
  }

