  private void show(@Nullable String diff) {
    AlteredFiles alteredFiles = new AlteredFiles(project, diff);

    view.setEnableCommitButton(!view.getCommitMessage().isEmpty());
    view.focusInMessageField();
    view.showDialog();
    selectableChangesPanelPresenter.show(alteredFiles, this);
    selectableChangesPanelPresenter.setMarkedCheckBoxes(
        stream(appContext.getResources())
            .map(resource -> resource.getLocation().removeFirstSegments(1))
            .collect(Collectors.toSet()));
  }

