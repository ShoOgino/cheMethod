  /** Create view. */
  @Inject
  protected CommitViewImpl(GitResources res, GitLocalizationConstant locale) {
    this.res = res;
    this.locale = locale;
    this.message = new ShiftableTextArea();
    this.ensureDebugId("git-commit-window");

    this.setTitle(locale.commitTitle());

    Widget widget = uiBinder.createAndBindUi(this);
    this.setWidget(widget);

    btnCancel =
        createButton(
            locale.buttonCancel(), "git-commit-cancel", event -> delegate.onCancelClicked());
    btnCommit =
        createButton(
            locale.buttonCommit(), "git-commit-commit", event -> delegate.onCommitClicked());
    btnCommit.addStyleName(resources.windowCss().primaryButton());

    remoteBranches = new ListBox();
    remoteBranches.setEnabled(false);

    pushAfterCommit = new CheckBox();
    pushAfterCommit.setHTML(locale.commitPushCheckboxTitle());
    pushAfterCommit.ensureDebugId("push-after-commit-check-box");
    pushAfterCommit.addValueChangeHandler(event -> remoteBranches.setEnabled(event.getValue()));

    pushAfterCommit.addStyleName(res.gitCSS().spacing());
    getFooter().add(pushAfterCommit);
    getFooter().add(remoteBranches);

    addButtonToFooter(btnCommit);
    addButtonToFooter(btnCancel);
  }

