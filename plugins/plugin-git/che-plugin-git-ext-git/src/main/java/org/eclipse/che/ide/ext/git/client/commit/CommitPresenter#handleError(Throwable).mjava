  private void handleError(@NotNull Throwable exception) {
    if (exception instanceof ServerException
        && ((ServerException) exception).getErrorCode()
            == ErrorCodes.NO_COMMITTER_NAME_OR_EMAIL_DEFINED) {
      dialogFactory
          .createMessageDialog(locale.commitTitle(), locale.committerIdentityInfoEmpty(), null)
          .show();
      return;
    }
    String exceptionMessage = exception.getMessage();
    String errorMessage =
        (exceptionMessage != null && !exceptionMessage.isEmpty())
            ? exceptionMessage
            : locale.commitFailed();
    GitOutputConsole console = gitOutputConsoleFactory.create(COMMIT_COMMAND_NAME);
    console.printError(errorMessage);
    consolesPanelPresenter.addCommandOutput(console);
    notificationManager.notify(locale.commitFailed(), errorMessage, FAIL, FLOAT_MODE);
  }

