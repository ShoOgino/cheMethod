  private void compare() {
    final String revisionA =
        revisions.indexOf(selectedRevision) + 1 == revisions.size()
            ? null
            : revisions.get(revisions.indexOf(selectedRevision) + 1).getId();
    final String revisionB = selectedRevision.getId();
    service
        .diff(
            project.getLocation(),
            singletonList(selectedPath.toString()),
            NAME_STATUS,
            true,
            0,
            revisionA,
            revisionB)
        .then(
            diff -> {
              if (diff.isEmpty()) {
                dialogFactory
                    .createMessageDialog(
                        locale.historyTitle(), locale.historyNothingToDisplay(), null)
                    .show();
                return;
              }
              AlteredFiles alteredFiles = new AlteredFiles(project, diff, revisionA, revisionB);
              if (alteredFiles.getFilesQuantity() == 1) {
                comparePresenter.showCompareBetweenRevisions(
                    alteredFiles, null, revisionA, revisionB);
              } else {

                changesListPresenter.show(alteredFiles, revisionA, revisionB);
              }
            })
        .catchError(
            error -> {
              notificationManager.notify(locale.diffFailed(), FAIL, EMERGE_MODE);
            });
  }

