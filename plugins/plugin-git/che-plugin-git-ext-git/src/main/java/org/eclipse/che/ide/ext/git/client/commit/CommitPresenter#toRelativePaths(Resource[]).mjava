    private Path[] toRelativePaths(Resource[] resources) {
        final Path[] paths = new Path[resources.length];

        for (int i = 0; i < resources.length; i++) {
            checkState(project.getLocation().isPrefixOf(resources[i].getLocation()));
            paths[i] = resources[i].getLocation().removeFirstSegments(project.getLocation().segmentCount());
        }

        return paths;
    }

