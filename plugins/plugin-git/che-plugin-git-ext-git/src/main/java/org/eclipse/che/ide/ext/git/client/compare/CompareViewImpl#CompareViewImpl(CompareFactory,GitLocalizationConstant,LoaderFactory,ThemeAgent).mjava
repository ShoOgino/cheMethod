    @Inject
    public CompareViewImpl(CompareFactory compareFactory,
                           GitLocalizationConstant locale,
                           LoaderFactory loaderFactory,
                           ThemeAgent themeAgent) {
        this.compareFactory = compareFactory;
        this.locale = locale;
        this.loaderFactory = loaderFactory;
        this.themeAgent = themeAgent;

        setWidget(UI_BINDER.createAndBindUi(this));

        Button closeButton = createButton(locale.buttonClose(), "git-compare-close-btn", new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                onClose();
            }
        });

        Button refreshButton = createButton(locale.buttonRefresh(), "git-compare-refresh-btn", new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                compare.refresh();
            }
        });

        addButtonToFooter(closeButton);
        addButtonToFooter(refreshButton);

        comparePanel.getElement().setId(Document.get().createUniqueId());
    }

