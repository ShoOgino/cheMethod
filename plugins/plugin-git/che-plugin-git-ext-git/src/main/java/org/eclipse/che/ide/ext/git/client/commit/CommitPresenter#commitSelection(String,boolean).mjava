    protected void commitSelection(final String message, final boolean amend) {
        final Resource[] resources = appContext.getResources();

        checkState(!isNullOrEmpty(resources));

        service.commit(appContext.getDevMachine(), project.getLocation(), message, toRelativePaths(resources), amend)
               .then(new Operation<Revision>() {
                   @Override
                   public void apply(Revision revision) throws OperationException {
                       onCommitSuccess(revision);
                       view.close();
                   }
               });
    }

