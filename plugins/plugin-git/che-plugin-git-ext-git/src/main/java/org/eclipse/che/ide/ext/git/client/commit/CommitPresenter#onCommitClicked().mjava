  @Override
  public void onCommitClicked() {
    Path location = project.getLocation();
    Path[] filesToCommitArray = getFilesToCommit();

    service
        .add(location, false, filesToCommitArray)
        .then(
            arg -> {
              service
                  .commit(location, view.getCommitMessage(), view.isAmend(), filesToCommitArray)
                  .then(
                      revision -> {
                        onCommitSuccess(revision);
                        if (view.isPushAfterCommit()) {
                          push(location);
                        }
                        view.close();
                      })
                  .catchError(
                      error -> {
                        handleError(error.getCause());
                      });
            })
        .catchError(
            error -> {
              notificationManager.notify(constant.addFailed(), FAIL, FLOAT_MODE);
            });
  }

