  @Inject
  public CompareViewImpl(
      CompareFactory compareFactory,
      GitLocalizationConstant locale,
      CompareInitializer compareInitializer,
      ModuleHolder moduleHolder) {
    this.compareFactory = compareFactory;
    this.locale = locale;
    this.compareInitializer = compareInitializer;
    this.moduleHolder = moduleHolder;

    setWidget(UI_BINDER.createAndBindUi(this));

    Button closeButton =
        createButton(locale.buttonClose(), "git-compare-close-btn", event -> onClose());
    Button refreshButton =
        createButton(
            locale.buttonRefresh(), "git-compare-refresh-btn", event -> compareWidget.refresh());

    btnSaveChanges =
        createButton(
            locale.buttonSaveChanges(),
            "git-compare-save-changes-btn",
            event -> delegate.onSaveChangesClicked());
    btnSaveChanges.addStyleName(resources.windowCss().primaryButton());

    btnNextDiff =
        createButton(
            locale.buttonNextDiff(),
            "git-compare-next-diff-btn",
            event -> delegate.onNextDiffClicked(),
            ButtonAlignment.LEFT);

    btnPrevDiff =
        createButton(
            locale.buttonPreviousDiff(),
            "git-compare-prev-diff-btn",
            event -> delegate.onPreviousDiffClicked(),
            ButtonAlignment.LEFT);

    addButtonToFooter(btnSaveChanges);
    addButtonToFooter(refreshButton);
    addButtonToFooter(closeButton);

    addButtonToFooter(btnPrevDiff);
    addButtonToFooter(btnNextDiff);

    comparePanel.getElement().setId(Document.get().createUniqueId());
  }

