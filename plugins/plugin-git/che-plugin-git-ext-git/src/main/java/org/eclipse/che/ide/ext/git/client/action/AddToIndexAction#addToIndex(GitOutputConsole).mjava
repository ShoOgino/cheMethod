    private void addToIndex(final GitOutputConsole console) {
        Resource[] resources = appContext.getResources();
        Path[] paths = new Path[resources.length];
        for (int i = 0; i < resources.length; i++) {
            Path path = resources[i].getLocation().removeFirstSegments(1);
            paths[i] = path.segmentCount() == 0 ? Path.EMPTY : path;
        }
        service.add(appContext.getDevMachine(), appContext.getRootProject().getLocation(), false, paths)
               .then(new Operation<Void>() {
                   @Override
                   public void apply(Void arg) throws OperationException {
                       console.print(constant.addSuccess());
                       notificationManager.notify(constant.addSuccess());
                   }
               })
               .catchError(new Operation<PromiseError>() {
                   @Override
                   public void apply(PromiseError arg) throws OperationException {
                       console.printError(constant.addFailed());
                       notificationManager.notify(constant.addFailed(), FAIL, FLOAT_MODE);
                   }
               });
    }

