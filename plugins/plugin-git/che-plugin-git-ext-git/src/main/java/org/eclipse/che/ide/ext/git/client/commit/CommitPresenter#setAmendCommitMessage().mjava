  @Override
  public void setAmendCommitMessage() {
    service
        .log(project.getLocation(), null, -1, -1, false)
        .then(
            log -> {
              String message = "";
              final Revision revision = getFirst(log.getCommits(), null);
              if (revision != null) {
                message = revision.getMessage();
              }
              CommitPresenter.this.view.setMessage(message);
              CommitPresenter.this.view.setEnableCommitButton(!message.isEmpty());
            })
        .catchError(
            error -> {
              if (getErrorCode(error.getCause()) == ErrorCodes.INIT_COMMIT_WAS_NOT_PERFORMED) {
                dialogFactory
                    .createMessageDialog(
                        locale.commitTitle(), locale.initCommitWasNotPerformed(), null)
                    .show();
              } else {
                CommitPresenter.this.view.setMessage("");
                notificationManager.notify(locale.logFailed(), FAIL, NOT_EMERGE_MODE);
              }
            });
  }

