    @Test
    public void testOnCheckoutClickedWhenSelectedRemoteBranch() throws Exception {
        when(service.checkout(anyObject(), any(Path.class), any(CheckoutRequest.class))).thenReturn(voidPromise);
        when(voidPromise.then(any(Operation.class))).thenReturn(voidPromise);
        when(voidPromise.catchError(any(Operation.class))).thenReturn(voidPromise);

        when(dtoFactory.createDto(CheckoutRequest.class)).thenReturn(checkoutRequest);

        selectBranch();
        presenter.onCheckoutClicked();

        verify(voidPromise).then(voidPromiseCaptor.capture());
        voidPromiseCaptor.getValue().apply(null);

        verify(checkoutRequest).setTrackBranch(eq(BRANCH_NAME));
        verifyNoMoreInteractions(checkoutRequest);
    }

