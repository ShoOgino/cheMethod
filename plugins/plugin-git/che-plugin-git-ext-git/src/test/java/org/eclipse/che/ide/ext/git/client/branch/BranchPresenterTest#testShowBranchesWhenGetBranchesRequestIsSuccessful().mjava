    @Test
    public void testShowBranchesWhenGetBranchesRequestIsSuccessful() throws Exception {
        final List<Branch> branches = Collections.singletonList(selectedBranch);

        when(service.branchList(anyObject(), anyObject(), anyString())).thenReturn(branchListPromise);
        when(branchListPromise.then(any(Operation.class))).thenReturn(branchListPromise);
        when(branchListPromise.catchError(any(Operation.class))).thenReturn(branchListPromise);

        presenter.showBranches(project);

        verify(branchListPromise).then(branchListCaptor.capture());
        branchListCaptor.getValue().apply(branches);

        verify(view).showDialogIfClosed();
        verify(view).setBranches(eq(branches));
        verify(console, never()).printError(anyString());
        verify(notificationManager, never()).notify(anyString(), any(ProjectConfigDto.class));
        verify(constant, never()).branchesListFailed();
    }

