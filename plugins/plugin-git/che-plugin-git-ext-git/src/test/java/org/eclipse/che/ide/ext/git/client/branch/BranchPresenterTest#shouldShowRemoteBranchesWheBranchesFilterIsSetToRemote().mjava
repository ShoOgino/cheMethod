  @Test
  public void shouldShowRemoteBranchesWheBranchesFilterIsSetToRemote() throws Exception {
    // given
    final List<Branch> branches = Collections.singletonList(selectedBranch);
    when(service.branchList(anyObject(), eq(BranchListMode.LIST_LOCAL)))
        .thenReturn(branchListPromise);
    when(branchListPromise.then(any(Operation.class))).thenReturn(branchListPromise);
    when(branchListPromise.catchError(any(Operation.class))).thenReturn(branchListPromise);
    when(view.getFilterValue()).thenReturn("remote");

    // when
    presenter.showBranches(project);
    verify(branchListPromise).then(branchListCaptor.capture());
    branchListCaptor.getValue().apply(branches);

    // then
    verify(view).showDialogIfClosed();
    verify(view).setBranches(eq(branches));
    verify(console, never()).printError(anyString());
    verify(notificationManager, never()).notify(anyString(), any(ProjectConfigDto.class));
    verify(constant, never()).branchesListFailed();
  }

