    @Test
    public void shouldPrintSuccessMessageOnCommitSuccess() throws Exception {
        Revision revision = mock(Revision.class);
        GitUser gitUser = mock(GitUser.class);
        when(gitUser.getName()).thenReturn("commiterName");
        when(revision.getId()).thenReturn("commitId");
        when(revision.getCommitter()).thenReturn(gitUser);
        when(constant.commitMessage(eq("commitId"), anyString())).thenReturn("commitMessage");
        when(constant.commitUser(anyString())).thenReturn("commitUser");

        presenter.showDialog(project);
        presenter.doCommit(COMMIT_TEXT, true, true, true);
        verify(revisionPromise).then(revisionCaptor.capture());
        revisionCaptor.getValue().apply(revision);

        verify(console).print("commitMessage commitUser");
        verify(notificationManager).notify("commitMessage commitUser");
    }

