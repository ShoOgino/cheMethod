    @Test
    public void shouldAddAndCommitIfAddSelectedIsSetToTrue() throws Exception {
        when(view.isAddSelectedFiles()).thenReturn(true);
        doNothing().when(presenter).doCommit(anyString(), anyBoolean(), anyBoolean(), anyBoolean());

        presenter.showDialog(project);
        presenter.onCommitClicked();
        verify(voidPromise).then(voidPromiseCaptor.capture());
        voidPromiseCaptor.getValue().apply(null);

        verify(service).add(any(DevMachine.class), any(Path.class), anyBoolean(), any(Path[].class));
        verify(presenter).doCommit(anyString(), anyBoolean(), anyBoolean(), anyBoolean());
    }

