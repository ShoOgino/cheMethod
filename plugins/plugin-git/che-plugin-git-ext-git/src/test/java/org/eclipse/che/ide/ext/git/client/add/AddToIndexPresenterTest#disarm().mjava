  @Override
  public void disarm() {
    super.disarm();

    presenter =
        new AddToIndexPresenter(
            view,
            appContext,
            constant,
            gitOutputConsoleFactory,
            processesPanelPresenter,
            service,
            notificationManager);

    when(appContext.getResources()).thenReturn(new Resource[] {});
    when(appContext.getRootProject()).thenReturn(mock(Project.class));
    when(voidPromise.then(any(Operation.class))).thenReturn(voidPromise);
    when(voidPromise.catchError(any(Operation.class))).thenReturn(voidPromise);
    when(service.add(any(Path.class), anyBoolean(), any(Path[].class))).thenReturn(voidPromise);
    when(gitOutputConsoleFactory.create(anyString())).thenReturn(console);
  }

