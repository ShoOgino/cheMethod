    @Test
    public void testOnDiffWithIndexClicked() throws Exception {
        presenter.onDiffWithWorkTreeClicked();
        presenter.onRevisionSelected(selectedRevision);
        reset(view);
        reset(service);
        presenter.onDiffWithIndexClicked();


        verify(view).selectDiffWithIndexButton(eq(SELECTED_ITEM));
        verify(view).selectDiffWithPrevVersionButton(eq(UNSELECTED_ITEM));
        verify(view).selectDiffWithWorkingTreeButton(eq(UNSELECTED_ITEM));
        verify(service)
                .diff(anyObject(), anyObject(), anyObject(), anyObject(), anyBoolean(), anyInt(), anyString(), anyBoolean(), anyObject());
        verify(service, never())
                .diff(anyObject(), anyObject(), anyObject(), anyObject(), anyBoolean(), anyInt(), anyString(), anyString(), anyObject());
        verify(service)
                .log(anyObject(), eq(rootProjectConfig), null, eq(TEXT_NOT_FORMATTED), (AsyncRequestCallback<LogResponse>)anyObject());
    }

