  @Override
  public void disarm() {
    super.disarm();

    when(service.log(any(Path.class), any(Path[].class), anyInt(), anyInt(), anyBoolean()))
        .thenReturn(logPromise);
    when(logPromise.then(any(Operation.class))).thenReturn(logPromise);
    when(logPromise.catchError(any(Operation.class))).thenReturn(logPromise);

    when(service.revert(any(Path.class), anyString())).thenReturn(revertPromise);
    when(revertPromise.then(any(Operation.class))).thenReturn(revertPromise);
    when(revertPromise.catchError(any(Operation.class))).thenReturn(revertPromise);
  }

