    @Test
    public void shouldShowDialogIfNothingToCompare() throws Exception {
        MessageDialog dialog = mock(MessageDialog.class);
        when(dialogFactory.createMessageDialog(eq("title"), eq("error message"), any(ConfirmCallback.class))).thenReturn(dialog);

        presenter.show();
        presenter.onRevisionSelected(mock(Revision.class));
        presenter.onCompareClicked();
        verify(stringPromise).then(stringCaptor.capture());
        stringCaptor.getValue().apply("");

        verify(dialog).show();
    }

