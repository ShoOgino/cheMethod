    @Override
    public void disarm() {
        super.disarm();

        presenter = new ResetFilesPresenter(view,
                                            service,
                                            appContext,
                                            constant,
                                            notificationManager,
                                            dtoFactory,
                                            dialogFactory,
                                            gitOutputConsoleFactory,
                                            processesPanelPresenter);

        when(dtoFactory.createDto(IndexFile.class)).thenReturn(indexFile);
        when(indexFile.withIndexed(anyBoolean())).thenReturn(indexFile);
        when(indexFile.withPath(anyString())).thenReturn(indexFile);
        when(indexFile.getPath()).thenReturn("foo");
        when(service.getStatus(anyObject(), any(Path.class))).thenReturn(statusPromise);
        when(statusPromise.then(any(Operation.class))).thenReturn(statusPromise);
        when(statusPromise.catchError(any(Operation.class))).thenReturn(statusPromise);
        when(appContext.getResources()).thenReturn(new Resource[]{});
    }

