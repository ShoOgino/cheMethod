    @Test
    public void testShowDialogWhenAllOperationsAreSuccessful() throws Exception {
        final List<Branch> branches = new ArrayList<>();
        branches.add(mock(Branch.class));

        presenter.showDialog(project);

        verify(branchListPromise).then(branchListCaptor.capture());
        branchListCaptor.getValue().apply(branches);

        verify(remoteListBranchPromise).then(remoteListBranchCaptor.capture());
        remoteListBranchCaptor.getValue().apply(branches);

        verify(view).setEnableMergeButton(eq(DISABLE_BUTTON));
        verify(view).showDialog();
        verify(view).setRemoteBranches(anyObject());
        verify(view).setLocalBranches(anyObject());
        verify(console, never()).printError(anyString());
    }

