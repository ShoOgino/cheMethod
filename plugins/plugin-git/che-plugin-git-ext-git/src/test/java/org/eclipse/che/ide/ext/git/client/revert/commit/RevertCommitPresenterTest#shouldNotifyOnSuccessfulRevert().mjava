  @Test
  public void shouldNotifyOnSuccessfulRevert() throws Exception {
    RevertResult revertResult = mock(RevertResult.class);
    when(revertResult.getNewHead()).thenReturn("1234");
    when(revertResult.getRevertedCommits()).thenReturn(Collections.emptyList());
    when(revertResult.getConflicts()).thenReturn(Collections.emptyMap());

    Revision selectedRevision = mock(Revision.class);
    when(selectedRevision.getId()).thenReturn("1234");

    presenter.show(project);
    presenter.onRevisionSelected(selectedRevision);
    presenter.onRevertClicked();
    verify(revertPromise).then(revertCaptor.capture());
    revertCaptor.getValue().apply(revertResult);

    verify(notificationManager).notify(constant.revertCommitSuccessfully());
  }

