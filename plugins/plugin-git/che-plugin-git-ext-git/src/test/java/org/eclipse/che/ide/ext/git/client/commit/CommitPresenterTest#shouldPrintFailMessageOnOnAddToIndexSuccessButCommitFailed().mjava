  @Test
  public void shouldPrintFailMessageOnOnAddToIndexSuccessButCommitFailed() throws Exception {
    when(constant.commitFailed()).thenReturn("commitFailed");

    presenter.showDialog(project);
    presenter.onCommitClicked();
    verify(voidPromise).then(voidPromiseCaptor.capture());
    voidPromiseCaptor.getValue().apply(null);
    verify(revisionPromise).catchError(promiseErrorCaptor.capture());
    promiseErrorCaptor.getValue().apply(promiseError);

    verify(console).printError("error");
    verify(notificationManager).notify(eq("commitFailed"), eq("error"), eq(FAIL), eq(FLOAT_MODE));
  }

