    @Test
    public void testShowListOfLocalBranchesAndStartUpdateRemoteBranches() throws Exception {
        final List<Branch> localBranches = new ArrayList<>();
        localBranches.add(localBranch);

        presenter.updateLocalBranches();

        verify(service).branchList(anyString(), anyObject(), (String)eq(null), asyncRequestCallbackArrayBranchCaptor.capture());
        AsyncRequestCallback<List<Branch>> value = asyncRequestCallbackArrayBranchCaptor.getValue();
        Method onSuccessRemotes = GwtReflectionUtils.getMethod(value.getClass(), "onSuccess");
        onSuccessRemotes.invoke(value, localBranches);

        verify(branchSearcher).getLocalBranchesToDisplay(eq(localBranches));
        verify(view).setLocalBranches((List<String>)anyObject());
        verify(view).selectLocalBranch(localBranch.getDisplayName());
    }

