  @Test
  public void testDialogWhenListOfBranchesAreEmpty() throws Exception {
    final ArrayList<Reference> emptyReferenceList = new ArrayList<>();
    final List<Branch> emptyBranchList = new ArrayList<>();

    presenter.showDialog(project);

    verify(branchListPromise).then(branchListCaptor.capture());
    branchListCaptor.getValue().apply(emptyBranchList);

    verify(remoteListBranchPromise).then(remoteListBranchCaptor.capture());
    remoteListBranchCaptor.getValue().apply(emptyBranchList);

    verify(view).showDialog();
    verify(view).setLocalBranches(eq(emptyReferenceList));
    verify(view).setRemoteBranches(eq(emptyReferenceList));
  }

