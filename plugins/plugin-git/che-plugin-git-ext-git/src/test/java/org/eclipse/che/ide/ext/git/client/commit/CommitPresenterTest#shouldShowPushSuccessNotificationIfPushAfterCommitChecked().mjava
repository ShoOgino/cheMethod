    @Test
    public void shouldShowPushSuccessNotificationIfPushAfterCommitChecked() throws Exception {
        when(constant.pushSuccess(anyString())).thenReturn("pushSuccess");
        when(view.isPushAfterCommit()).thenReturn(true);
        when(view.getRemoteBranch()).thenReturn("origin/master");

        presenter.showDialog(project);
        presenter.onCommitClicked();
        verify(voidPromise).then(voidPromiseCaptor.capture());
        voidPromiseCaptor.getValue().apply(null);
        verify(revisionPromise).then(revisionCaptor.capture());
        revisionCaptor.getValue().apply(mock(Revision.class));
        verify(pushPromise).then(pushPromiseCaptor.capture());
        pushPromiseCaptor.getValue().apply(null);

        verify(notificationManager).notify(eq("pushSuccess"), eq(SUCCESS), eq(FLOAT_MODE));
    }

