    @Test
    public void shouldPrintSuccessMessageOnAddToIndexAndCommitSuccess() throws Exception {
        Revision revision = mock(Revision.class);
        GitUser gitUser = mock(GitUser.class);
        when(gitUser.getName()).thenReturn("commiterName");
        when(revision.getId()).thenReturn("commitId");
        when(revision.getCommitter()).thenReturn(gitUser);
        when(constant.commitMessage(eq("commitId"), anyString())).thenReturn("commitMessage");
        when(constant.commitUser(anyString())).thenReturn("commitUser");

        presenter.showDialog(project);
        presenter.onCommitClicked();
        verify(voidPromise).then(voidPromiseCaptor.capture());
        voidPromiseCaptor.getValue().apply(null);
        verify(revisionPromise).then(revisionCaptor.capture());
        revisionCaptor.getValue().apply(revision);

        verify(console).print("commitMessage commitUser");
        verify(notificationManager).notify("commitMessage commitUser");
        verify(view).close();
    }

