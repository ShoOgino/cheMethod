    @Test
    public void testOnDeleteClickedWhenBranchDeleteRequestIsSuccessful() throws Exception {
        selectBranch();
        presenter.onDeleteClicked();

        verify(service).branchDelete(anyString(), eq(rootProjectConfig), eq(BRANCH_NAME), eq(NEED_DELETING), asyncRequestCallbackCaptor.capture());
        AsyncRequestCallback<String> deleteBranchCallback = asyncRequestCallbackCaptor.getValue();
        GwtReflectionUtils.callOnSuccess(deleteBranchCallback, PROJECT_PATH);

        verify(selectedBranch).getName();
        verify(service, times(2)).branchList(anyString(), eq(rootProjectConfig), eq(LIST_ALL), anyObject());
        verify(constant, never()).branchDeleteFailed();
        verify(console, never()).printError(anyString());
        verify(notificationManager, never()).notify(anyString(), eq(rootProjectConfig));
    }

