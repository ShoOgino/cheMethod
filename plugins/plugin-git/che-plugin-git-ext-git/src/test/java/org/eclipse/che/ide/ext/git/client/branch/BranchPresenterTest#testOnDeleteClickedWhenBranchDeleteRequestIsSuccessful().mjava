    @Test
    public void testOnDeleteClickedWhenBranchDeleteRequestIsSuccessful() throws Exception {
        when(service.branchDelete(anyObject(), any(Path.class), anyString(), anyBoolean())).thenReturn(voidPromise);
        when(voidPromise.then(any(Operation.class))).thenReturn(voidPromise);
        when(voidPromise.catchError(any(Operation.class))).thenReturn(voidPromise);

        selectBranch();
        presenter.onDeleteClicked();

        verify(voidPromise).then(voidPromiseCaptor.capture());
        voidPromiseCaptor.getValue().apply(null);

        verify(selectedBranch).getName();
        verify(service, times(2)).branchList(anyObject(), anyObject(), eq(LIST_ALL));
        verify(constant, never()).branchDeleteFailed();
        verify(console, never()).printError(anyString());
        verify(notificationManager, never()).notify(anyString());
    }

