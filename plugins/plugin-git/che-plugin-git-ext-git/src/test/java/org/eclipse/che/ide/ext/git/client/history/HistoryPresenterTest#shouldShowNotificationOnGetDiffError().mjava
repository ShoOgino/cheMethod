    @Test
    public void shouldShowNotificationOnGetDiffError() throws Exception {
        Revision revisionA = mock(Revision.class);
        Revision revisionB = mock(Revision.class);
        LogResponse logResponse = mock(LogResponse.class);
        List<Revision> revisions = new ArrayList<>();
        revisions.add(revisionA);
        revisions.add(revisionB);
        when(logResponse.getCommits()).thenReturn(revisions);
        when(constant.diffFailed()).thenReturn("error");

        presenter.show();
        presenter.onRevisionSelected(revisionA);
        verify(logPromise).then(logCaptor.capture());
        logCaptor.getValue().apply(logResponse);
        presenter.onCompareClicked();
        verify(stringPromise).catchError(promiseErrorCaptor.capture());
        promiseErrorCaptor.getValue().apply(null);

        verify(notificationManager).notify(eq("error"), eq(FAIL), eq(EMERGE_MODE));
    }

