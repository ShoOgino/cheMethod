    @Test
    public void testOnCheckoutClickedWhenSelectedNotRemoteBranch() throws Exception {
        when(service.checkout(any(Path.class), any(CheckoutRequest.class))).thenReturn(stringPromise);
        when(stringPromise.then(any(Operation.class))).thenReturn(stringPromise);
        when(stringPromise.catchError(any(Operation.class))).thenReturn(stringPromise);

        when(selectedBranch.isRemote()).thenReturn(false);
        when(dtoFactory.createDto(CheckoutRequest.class)).thenReturn(checkoutRequest);

        selectBranch();
        presenter.onCheckoutClicked();

        verify(stringPromise).then(stringCaptor.capture());
        stringCaptor.getValue().apply(null);

        verify(checkoutRequest).setName(eq(BRANCH_NAME));
        verifyNoMoreInteractions(checkoutRequest);
    }

