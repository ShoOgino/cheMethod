    @Test
    public void shouldPrintFailMessageOnCommitFailed() throws Exception {
        when(constant.commitFailed()).thenReturn("commitFailed");

        presenter.showDialog(project);
        presenter.doCommit(COMMIT_TEXT, true, true, true);
        verify(revisionPromise).catchError(promiseErrorCaptor.capture());
        promiseErrorCaptor.getValue().apply(promiseError);

        verify(console).printError("error");
        verify(notificationManager).notify(eq("commitFailed"), eq("error"), eq(FAIL), eq(FLOAT_MODE));
    }

