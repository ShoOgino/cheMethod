  @Test
  public void shouldShowErrorNotificationOnAddToIndexFailed() throws Exception {
    when(constant.addFailed()).thenReturn("addFailed");

    presenter.showDialog(project);
    presenter.onCommitClicked();
    verify(voidPromise).catchError(promiseErrorCaptor.capture());
    promiseErrorCaptor.getValue().apply(promiseError);

    verify(notificationManager).notify(eq("addFailed"), eq(FAIL), eq(FLOAT_MODE));
  }

