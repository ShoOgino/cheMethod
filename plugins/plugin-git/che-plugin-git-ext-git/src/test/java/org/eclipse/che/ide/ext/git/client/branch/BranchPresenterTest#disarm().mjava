    @Override
    public void disarm() {
        super.disarm();

        when(appContext.getWorkspaceId()).thenReturn("id");
        presenter = new BranchPresenter(view,
                                        dtoFactory,
                                        editorAgent,
                                        service,
                                        projectService,
                                        constant,
                                        appContext,
                                        notificationManager,
                                        dtoUnmarshallerFactory,
                                        gitOutputConsoleFactory,
                                        consolesPanelPresenter,
                                        dialogFactory,
                                        eventBus);

        NavigableMap<String, EditorPartPresenter> partPresenterMap = new TreeMap<>();
        partPresenterMap.put("partPresenter", partPresenter);

        when(selectedBranch.getDisplayName()).thenReturn(BRANCH_NAME);
        when(selectedBranch.getName()).thenReturn(BRANCH_NAME);
        when(selectedBranch.isRemote()).thenReturn(IS_REMOTE);
        when(selectedBranch.isActive()).thenReturn(IS_ACTIVE);
        when(editorAgent.getOpenedEditors()).thenReturn(partPresenterMap);
        when(partPresenter.getEditorInput()).thenReturn(editorInput);
    }

