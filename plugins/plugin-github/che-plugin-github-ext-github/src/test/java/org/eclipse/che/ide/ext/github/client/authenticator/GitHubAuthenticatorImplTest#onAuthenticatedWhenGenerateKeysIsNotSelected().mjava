    @Test
    public void onAuthenticatedWhenGenerateKeysIsNotSelected() throws Exception {
        String userId = "userId";
        OAuthStatus authStatus = mock(OAuthStatus.class);

        CurrentUser user = mock(CurrentUser.class);
        ProfileDescriptor profile = mock(ProfileDescriptor.class);
        when(view.isGenerateKeysSelected()).thenReturn(false);
        when(appContext.getCurrentUser()).thenReturn(user);
        when(user.getProfile()).thenReturn(profile);
        when(profile.getId()).thenReturn(userId);

        gitHubAuthenticator.authorize(getCallBack());
        gitHubAuthenticator.onAuthenticated(authStatus);

        verify(view).isGenerateKeysSelected();
        verifyNoMoreInteractions(registry);
    }

