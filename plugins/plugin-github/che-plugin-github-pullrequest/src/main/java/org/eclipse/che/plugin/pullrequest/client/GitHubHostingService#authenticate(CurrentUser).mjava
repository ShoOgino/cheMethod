  @Override
  public Promise<HostUser> authenticate(final CurrentUser user) {
    final Workspace workspace = this.appContext.getWorkspace();
    if (workspace == null) {
      return Promises.reject(JsPromiseError.create("Error accessing current workspace"));
    }
    final String authUrl =
        baseUrl
            + "/oauth/authenticate?oauth_provider=github&userId="
            + user.getId()
            + "&scope=user,repo,write:public_key&redirect_after_login="
            + Window.Location.getProtocol()
            + "//"
            + Window.Location.getHost()
            + "/ws/"
            + workspace.getConfig().getName();
    return ServiceUtil.performWindowAuth(this, authUrl);
  }

