    @Test
    public void onAuthenticatedWhenGenerateKeysIsNotSelected() throws Exception {
        String userId = "userId";
        OAuthStatus authStatus = mock(OAuthStatus.class);

        CurrentUser user = mock(CurrentUser.class);
        ProfileDto profile = mock(ProfileDto.class);
        when(view.isGenerateKeysSelected()).thenReturn(false);
        when(appContext.getCurrentUser()).thenReturn(user);
        when(user.getProfile()).thenReturn(profile);
        when(profile.getUserId()).thenReturn(userId);

        gitHubAuthenticator.authenticate(null, getCallBack());
        gitHubAuthenticator.onAuthenticated(authStatus);

        verify(view).isGenerateKeysSelected();
        verifyNoMoreInteractions(registry);
    }

