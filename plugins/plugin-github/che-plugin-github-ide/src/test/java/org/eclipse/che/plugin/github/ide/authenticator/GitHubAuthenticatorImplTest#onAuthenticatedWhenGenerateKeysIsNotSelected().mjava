  @Test
  public void onAuthenticatedWhenGenerateKeysIsNotSelected() throws Exception {
    String userId = "userId";
    OAuthStatus authStatus = mock(OAuthStatus.class);

    CurrentUser user = mock(CurrentUser.class);
    when(view.isGenerateKeysSelected()).thenReturn(false);
    when(appContext.getCurrentUser()).thenReturn(user);
    when(user.getId()).thenReturn(userId);

    gitHubAuthenticator.authenticate(null, getCallBack());
    gitHubAuthenticator.onAuthenticated(authStatus);

    verify(view).isGenerateKeysSelected();
    verifyNoMoreInteractions(registry);
  }

