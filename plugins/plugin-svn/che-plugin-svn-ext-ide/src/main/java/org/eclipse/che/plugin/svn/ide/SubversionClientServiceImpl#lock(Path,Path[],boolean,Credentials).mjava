    @Override
    public Promise<CLIOutputResponse> lock(Path project, Path[] paths, boolean force, Credentials credentials) {
        final String url = getBaseUrl() + "/lock";
        final LockRequest request = dtoFactory.createDto(LockRequest.class)
                                              .withProjectPath(project.toString())
                                              .withTargets(toList(paths))
                                              .withForce(force);
        if (credentials != null) {
            request.setUsername(credentials.getUsername());
            request.setPassword(credentials.getPassword());
        }

        return asyncRequestFactory.createPostRequest(url, request)
                                  .loader(loader)
                                  .send(dtoUnmarshallerFactory.newUnmarshaller(CLIOutputResponse.class));
    }

