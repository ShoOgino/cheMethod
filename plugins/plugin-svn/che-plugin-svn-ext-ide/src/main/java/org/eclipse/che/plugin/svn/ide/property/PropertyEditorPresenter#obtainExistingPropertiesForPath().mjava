  @Override
  public void obtainExistingPropertiesForPath() {
    final Project project = appContext.getRootProject();

    checkState(project != null);

    final Resource[] resources = appContext.getResources();

    checkState(!Arrays.isNullOrEmpty(resources));
    checkState(resources.length == 1);

    service
        .propertyList(project.getLocation(), toRelative(project, resources[0]))
        .then(
            new Operation<CLIOutputResponse>() {
              @Override
              public void apply(CLIOutputResponse response) throws OperationException {
                List<String> properties = new ArrayList<String>();
                for (String property : response.getOutput()) {
                  properties.add(property.trim());
                }
                view.setExistingPropertiesForPath(properties);
              }
            })
        .catchError(
            new Operation<PromiseError>() {
              @Override
              public void apply(PromiseError error) throws OperationException {
                notificationManager.notify(
                    notificationManager.notify(error.getMessage(), FAIL, FLOAT_MODE));
              }
            });
  }

