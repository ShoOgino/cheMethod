  /** Performs actions when clicking Merge button. */
  @Override
  public void mergeClicked() {
    view.hide();

    final Project project = appContext.getRootProject();

    checkState(project != null);

    final Resource[] resources = appContext.getResources();

    checkState(resources != null && resources.length == 1);

    service
        .merge(project.getLocation(), resources[0].getLocation(), Path.valueOf(sourceURL))
        .then(
            new Operation<CLIOutputResponse>() {
              @Override
              public void apply(CLIOutputResponse response) throws OperationException {
                printResponse(
                    response.getCommand(), response.getOutput(), null, constants.commandMerge());
              }
            })
        .catchError(
            new Operation<PromiseError>() {
              @Override
              public void apply(PromiseError error) throws OperationException {
                notificationManager.notify(error.getMessage(), FAIL, FLOAT_MODE);
              }
            });
  }

