    @Test
    public void testMoveViewShouldSetProjectNode() throws Exception {
        final Selection selection = mock(Selection.class);
        final List<StorableNode> allItems = new ArrayList<>();
        final FileNode fileNode = mock(FileNode.class);
        final FolderNode folderNode = mock(FolderNode.class);

        when(treeStructureProvider.get()).thenReturn(filteredTreeStructure);
        when(projectExplorerPart.getSelection()).thenReturn(selection);
        when(selection.isEmpty()).thenReturn(false);
        when(selection.getAllElements()).thenReturn(allItems);

        allItems.add(fileNode);
        allItems.add(folderNode);

        presenter.showMove();

        List<TreeNode<?>> children = new ArrayList<>();
        children.add(mock(ProjectNode.class));

        verify(filteredTreeStructure).getRootNodes(asyncRequestCallbackStatusCaptor.capture());
        AsyncCallback<List<TreeNode<?>>> requestCallback = asyncRequestCallbackStatusCaptor.getValue();
        GwtReflectionUtils.callPrivateMethod(requestCallback, "onSuccess", children);

        verify(view).setProjectNodes(eq(children));
    }

