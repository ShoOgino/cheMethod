    @Override
    public EncryptTextService getPreferredService() {
        if (this.cachedPreferredImpl != null) {
            return this.cachedPreferredImpl;
        }
        for (final Integer schemeVersion : this.cryptoPreferences) {
            final EncryptTextService encrypt = this.registry.get(schemeVersion);
            if (encrypt.isActive()) {
                this.cachedPreferredImpl = encrypt;
                return encrypt;
            }
        }
        throw new RuntimeException("no encrypt text service available");
    }

