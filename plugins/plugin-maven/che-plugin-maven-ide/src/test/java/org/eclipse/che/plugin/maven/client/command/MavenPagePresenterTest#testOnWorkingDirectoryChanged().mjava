    @Test
    public void testOnWorkingDirectoryChanged() throws Exception {
        when(view.getWorkingDirectory()).thenReturn(WORK_DIR);

        final CommandPage.DirtyStateListener listener = mock(CommandPage.DirtyStateListener.class);
        presenter.setDirtyStateListener(listener);

        presenter.onWorkingDirectoryChanged();

        verify(view).getWorkingDirectory();
        verify(command).setCommandLine(eq(COMMAND_LINE));
        verify(listener).onDirtyStateChanged();
    }

