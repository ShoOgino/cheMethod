    private MavenPlugin findPlugin(String groupId, String artifactId, boolean declaredOnly) {
        List<MavenPlugin> plugins;
        if (declaredOnly) {
            plugins = getDeclaredPlugins();
        } else {
            plugins = getPlugins();
        }

        for (MavenPlugin plugin : plugins) {
            if (plugin.getGroupId().equals(groupId) && plugin.getArtifactId().equals(artifactId)) {
                return plugin;
            }
        }
        return null;
    }

