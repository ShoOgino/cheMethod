    private Pair<ModelReadingResult, Pair<List<String>, List<String>>> readModel(File pom, MavenServerManager serverManager) {
        ModelReadingResult readingResult = doRead(pom);
        //TODO resolve parent pom

        ProfileApplicationResult applied = serverManager.applyProfiles(readingResult.model,
                                                                       pom.getParentFile(),
                                                                       MavenExplicitProfiles.NONE,
                                                                       emptyList());
        final MavenModel model = applied.getModel();
        updateModelBody(model);

        final MavenExplicitProfiles activatedProfiles = applied.getActivatedProfiles();

        final ArrayList<String> disabledProfiles = new ArrayList<>(activatedProfiles.getDisabledProfiles().size());
        disabledProfiles.addAll(activatedProfiles.getDisabledProfiles());

        final ArrayList<String> enableProfiles = new ArrayList<>(activatedProfiles.getEnabledProfiles().size());
        enableProfiles.addAll(activatedProfiles.getEnabledProfiles());

        return Pair.of(new ModelReadingResult(model, readingResult.problems, readingResult.enabledProfiles),
                       Pair.of(enableProfiles, disabledProfiles));
    }

