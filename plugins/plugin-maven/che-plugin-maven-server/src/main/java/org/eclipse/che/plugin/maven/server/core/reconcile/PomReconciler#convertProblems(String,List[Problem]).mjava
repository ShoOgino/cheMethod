  private static List<Diagnostic> convertProblems(String text, List<Problem> problems) {
    Map<Integer, Position> positions = mapPositions(text, problems);
    return problems
        .stream()
        .map(p -> convertProblem(positions, p))
        .filter(Objects::nonNull)
        .collect(Collectors.toList());
  }

