  private static List<Diagnostic> convertProblems(String text, List<Problem> problems) {
    Map<Integer, Position> positions = mapPositions(text, problems);
    List<Diagnostic> diagnostics =
        problems
            .stream()
            .map((Problem p) -> convertProblem(positions, p))
            .filter(o -> o != null)
            .collect(Collectors.toList());
    return diagnostics;
  }

