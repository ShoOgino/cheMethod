  private boolean getInfo(Ref<RunningInfo> ref, Pair<Object, Object> key) {
    ProcessInfo info;
    synchronized (infoMap) {
      info = infoMap.get(key);
      try {
        while (info != null
            && (!(info instanceof RunningInfo)
                || info.processHandler.isProcessTerminating()
                || info.processHandler.isProcessTerminated())) {
          infoMap.wait(1000);
          info = infoMap.get(key);
        }
      } catch (InterruptedException ignore) {
      }

      if (info == null) {
        infoMap.put(key, new PendingInfo(null, ref));
      }
    }

    if (info instanceof RunningInfo) {
      synchronized (ref) {
        ref.setValue((RunningInfo) info);
        ref.notifyAll();
      }
    }
    return info != null;
  }

