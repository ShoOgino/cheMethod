    @Test
    public void profileShouldBeActivatedByOs() throws Exception {
        OSValidator osValidator = new OSValidator();
        String os = osValidator.isWindows() ? "windows" : osValidator.isMac() ? "mac" : "unix";

        final String content = "<artifactId>project-with-properties</artifactId>\n" +
                               "    <groupId>com.aw.ad</groupId>\n" +
                               "    <name>${prop1}</name>\n" +
                               "    <packaging>${prop2}</packaging>\n" +
                               "    <version>1.0</version>\n" +
                               "    <profiles>" +
                               "        <profile>" +
                               "            <id>one</id>" +
                               "            <activation>" +
                               "                <os><family>" + os + "</family></os>" +
                               "            </activation>" +
                               "        </profile>" +
                               "        <profile>" +
                               "            <id>two</id>" +
                               "            <activation>" +
                               "                <os><family>xxx</family></os>" +
                               "            </activation>" +
                               "        </profile>" +
                               "    </profiles>";

        final File pom = createTestPom("propertiesFromProfile", content);

        final MavenModelReaderResult mavenModelReaderResult = mavenModelReader.readMavenProject(pom, mavenServerManager);

        assertEquals(1, mavenModelReaderResult.getActiveProfiles().size());
        assertEquals("one", mavenModelReaderResult.getActiveProfiles().get(0));
    }

