  @Test
  public void propertiesFromProfileShouldBeExpanded() throws Exception {
    final String content =
        "<artifactId>project-with-properties</artifactId>\n"
            + "    <groupId>com.aw.ad</groupId>\n"
            + "    <name>${prop1}</name>\n"
            + "    <packaging>${prop2}</packaging>\n"
            + "    <version>1.0</version>\n"
            + "    <profiles>\n"
            + "        <profile>\n"
            + "            <id>prop1</id>\n"
            + "            <activation>\n"
            + "                <activeByDefault>true</activeByDefault>\n"
            + "            </activation>\n"
            + "            <properties>\n"
            + "                <prop1>value1</prop1>\n"
            + "            </properties>\n"
            + "        </profile>\n"
            + "        <profile>\n"
            + "            <id>prop2</id>\n"
            + "            <activation>\n"
            + "                <activeByDefault>true</activeByDefault>\n"
            + "            </activation>\n"
            + "            <properties>\n"
            + "                <prop2>jar</prop2>\n"
            + "            </properties>\n"
            + "        </profile>\n"
            + "    </profiles>";
    final File pom = createTestPom("propertiesFromProfile", content);
    final MavenModelReaderResult mavenModelReaderResult =
        mavenModelReader.readMavenProject(pom, mavenServerManager);

    final MavenModel mavenModel = mavenModelReaderResult.getMavenModel();

    assertEquals("value1", mavenModel.getName());
    assertEquals("jar", mavenModel.getPackaging());
  }

