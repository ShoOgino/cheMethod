  @Test
  public void testUpdateProject() throws Exception {
    when(project.getFile(MavenConstants.POM_FILE_NAME)).thenReturn(pom);
    when(pom.getLocation())
        .thenReturn(
            new Path(MavenProjectManagerTest.class.getResource("/FirstProject/pom.xml").getFile()));
    when(pom.getFullPath()).thenReturn(new Path("/FirstProject/pom.xml"));
    when(project.getFullPath()).thenReturn(new Path("/FirstProject/"));

    projectManager.addListener(listener);
    MavenProject mavenProject = new MavenProject(project, workspace);
    mavenProject.read(project, manager);
    MavenKey mavenKey = mavenProject.getMavenKey();
    assertThat(mavenKey).isNotNull();

    projectManager.update(Collections.singletonList(project), true);
    verify(listener).projectUpdated(mapArgument.capture(), any());
  }

