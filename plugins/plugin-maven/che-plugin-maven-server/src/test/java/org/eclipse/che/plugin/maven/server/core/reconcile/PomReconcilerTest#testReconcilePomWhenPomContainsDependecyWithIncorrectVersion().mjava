  @Test
  public void testReconcilePomWhenPomContainsDependecyWithIncorrectVersion() throws Exception {
    String brokenDependency =
        "    <dependency>\n"
            + "        <groupId>junit</groupId>\n"
            + "        <artifactId>junit</artifactId>\n"
            + "        <version>33333333.8.1</version>\n"
            + "        <scope>test</scope>\n"
            + "    </dependency>\n";
    FolderEntry testProject =
        createTestProject(PROJECT_NAME, getPomContentWithDependency(brokenDependency));
    VirtualFileEntry pom = testProject.getChild("pom.xml");
    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(PROJECT_NAME);
    mavenWorkspace.update(Collections.singletonList(project));
    mavenWorkspace.waitForUpdate();

    String projectPath = "/" + PROJECT_NAME;
    List<Problem> problems =
        pomReconciler.reconcile(
            projectPath + "/pom.xml", projectPath, pom.getVirtualFile().getContentAsString());

    assertThat(problems).hasSize(1);
    assertThat(problems.get(0).isError()).isTrue();
    assertThat(pom).isNotNull();
  }

