  @Test
  public void testReconcilePomWhenPomContainsCorrectDependency() throws Exception {
    String dependency =
        "    <dependency>\n"
            + "        <groupId>junit</groupId>\n"
            + "        <artifactId>junit</artifactId>\n"
            + "        <version>3.8.1</version>\n"
            + "        <scope>test</scope>\n"
            + "    </dependency>\n";
    FolderEntry testProject =
        createTestProject(PROJECT_NAME, getPomContentWithDependency(dependency));
    VirtualFileEntry pom = testProject.getChild("pom.xml");
    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(PROJECT_NAME);
    mavenWorkspace.update(Collections.singletonList(project));
    mavenWorkspace.waitForUpdate();

    String projectPath = format("/%s/pom.xml", PROJECT_NAME);
    List<Problem> problems =
        pomReconciler.reconcile(
            projectPath + "/pom.xml", projectPath, pom.getVirtualFile().getContentAsString());

    assertThat(problems).isEmpty();
    assertThat(pom).isNotNull();
  }

