  @BeforeMethod
  public void setUp() throws Exception {
    Provider<ProjectRegistry> projectRegistryProvider =
        (Provider<ProjectRegistry>) mock(Provider.class);
    when(projectRegistryProvider.get()).thenReturn(projectRegistry);
    MavenServerManagerTest.MyMavenServerProgressNotifier mavenNotifier =
        new MavenServerManagerTest.MyMavenServerProgressNotifier();
    MavenTerminal terminal =
        (level, message, throwable) -> {
          System.out.println(message);
          if (throwable != null) {
            throwable.printStackTrace();
          }
        };
    localRepository = new File(new File("target/localRepo").getAbsolutePath());
    localRepository.mkdirs();
    mavenServerManager.setLocalRepository(localRepository);
    MavenWrapperManager wrapperManager = new MavenWrapperManager(mavenServerManager);
    mavenProjectManager =
        new MavenProjectManager(
            wrapperManager,
            mavenServerManager,
            terminal,
            mavenNotifier,
            new EclipseWorkspaceProvider());
    classpathManager =
        new ClasspathManager(
            root.getAbsolutePath(), wrapperManager, mavenProjectManager, terminal, mavenNotifier);
    mavenWorkspace =
        new MavenWorkspace(
            mavenProjectManager,
            mavenNotifier,
            new MavenExecutorService(),
            projectRegistryProvider,
            classpathManager,
            eventService,
            new EclipseWorkspaceProvider());
  }

