  @Test
  public void shouldBeAbleToAddResourcesToBuild() throws Exception {
    final File pom = getTestPomFile();
    write(
        pom,
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <build>\n"
            + "        <resources>\n"
            + "            <resource>\n"
            + "                 <directory>${basedir}/src/main/temp</directory>\n"
            + "            </resource>\n"
            + "         </resources>\n"
            + "    </build>\n"
            + "</project>");
    final Model model = Model.readFrom(pom);

    final List<Resource> resources = new ArrayList<>(model.getBuild().getResources());

    resources.add(new Resource().setDirectory("${basedir}/src/main/fake"));

    model.getBuild().setResources(resources);
    model.save();

    assertEquals(
        read(pom),
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <build>\n"
            + "        <resources>\n"
            + "            <resource>\n"
            + "                <directory>${basedir}/src/main/temp</directory>\n"
            + "            </resource>\n"
            + "            <resource>\n"
            + "                <directory>${basedir}/src/main/fake</directory>\n"
            + "            </resource>\n"
            + "         </resources>\n"
            + "    </build>\n"
            + "</project>");
    assertEquals(model.getBuild().getResources(), resources);
  }

