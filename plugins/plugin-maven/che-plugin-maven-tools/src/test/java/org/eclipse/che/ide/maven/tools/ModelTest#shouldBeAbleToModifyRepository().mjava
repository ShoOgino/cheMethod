  @Test
  public void shouldBeAbleToModifyRepository() throws Exception {
    final File pom = getTestPomFile();
    write(
        pom,
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <!-- Repositories --> \n"
            + "    <repositories>\n"
            + "        <repository>\n"
            + "            <id>central</id>\n"
            + "            <name>Central Repository</name>\n"
            + "            <url>http://repo.maven.apache.org/maven2</url>\n"
            + "            <layout>default</layout>\n"
            + "            <releases>\n"
            + "                <enabled>true</enabled>\n"
            + "                <updatePolicy>daily</updatePolicy>\n"
            + "                <checksumPolicy>warn</checksumPolicy>\n"
            + "            </releases>\n"
            + "        </repository>\n"
            + "    </repositories>\n"
            + "</project>");
    final Model model = Model.readFrom(pom);

    model
        .getRepositories()
        .get(0)
        .setId("other-id")
        .setName("other-name")
        .setUrl("http://other-url.com")
        .setLayout("other layout")
        .setReleases(new RepositoryPolicy(false, "fail", "monthly"))
        .setSnapshots(new RepositoryPolicy(false, "fail", "monthly"));
    model.writeTo(pom);

    assertEquals(
        read(pom),
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <!-- Repositories --> \n"
            + "    <repositories>\n"
            + "        <repository>\n"
            + "            <id>other-id</id>\n"
            + "            <name>other-name</name>\n"
            + "            <url>http://other-url.com</url>\n"
            + "            <layout>other layout</layout>\n"
            + "            <snapshots>\n"
            + "                <enabled>false</enabled>\n"
            + "                <checksumPolicy>fail</checksumPolicy>\n"
            + "                <updatePolicy>monthly</updatePolicy>\n"
            + "            </snapshots>\n"
            + "            <releases>\n"
            + "                <enabled>false</enabled>\n"
            + "                <checksumPolicy>fail</checksumPolicy>\n"
            + "                <updatePolicy>monthly</updatePolicy>\n"
            + "            </releases>\n"
            + "        </repository>\n"
            + "    </repositories>\n"
            + "</project>");
  }

