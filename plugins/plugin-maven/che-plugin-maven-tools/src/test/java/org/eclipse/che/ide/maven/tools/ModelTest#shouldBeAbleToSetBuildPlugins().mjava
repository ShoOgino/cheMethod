  @Test
  public void shouldBeAbleToSetBuildPlugins() throws Exception {
    final File pom = getTestPomFile();
    write(
        pom,
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <build>\n"
            + "        <!-- BUILD PLUGINS --> \n"
            + "        <plugins>\n"
            + "            <plugin>\n"
            + "                <artifactId>artifactId</artifactId>\n"
            + "                <groupId>groupId</groupId>\n"
            + "            </plugin>\n"
            + "        </plugins>\n"
            + "    </build>\n"
            + "</project>");
    final Model model = Model.readFrom(pom);

    model
        .getBuild()
        .setPlugins(
            asList(
                new Plugin()
                    .setArtifactId("plugin1-artifactId")
                    .setGroupId("plugin1-groupId")
                    .setConfigProperty("p1-config-property", "value"),
                new Plugin()
                    .setArtifactId("plugin2-artifactId")
                    .setGroupId("plugin2-groupId")
                    .setConfigProperty("p2-config-property", "value")));
    model.save();

    assertEquals(model.getBuild().getPlugins().size(), 2);
    assertEquals(
        read(pom),
        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
            + "<project>\n"
            + "    <build>\n"
            + "        <!-- BUILD PLUGINS --> \n"
            + "        <plugins>\n"
            + "            <plugin>\n"
            + "                <groupId>plugin1-groupId</groupId>\n"
            + "                <artifactId>plugin1-artifactId</artifactId>\n"
            + "                <configuration>\n"
            + "                    <p1-config-property>value</p1-config-property>\n"
            + "                </configuration>\n"
            + "            </plugin>\n"
            + "            <plugin>\n"
            + "                <groupId>plugin2-groupId</groupId>\n"
            + "                <artifactId>plugin2-artifactId</artifactId>\n"
            + "                <configuration>\n"
            + "                    <p2-config-property>value</p2-config-property>\n"
            + "                </configuration>\n"
            + "            </plugin>\n"
            + "        </plugins>\n"
            + "    </build>\n"
            + "</project>");
  }

