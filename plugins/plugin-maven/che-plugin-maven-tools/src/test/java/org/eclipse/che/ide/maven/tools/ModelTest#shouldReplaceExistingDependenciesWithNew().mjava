    @Test
    public void shouldReplaceExistingDependenciesWithNew() throws Exception {
        final File pom = getTestPomFile();
        write(pom, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
                   "<project>\n" +
                   "    <dependencies>\n" +
                   "        <dependency>\n" +
                   "            <artifactId>artifact-id</artifactId>\n" +
                   "            <groupId>group-id</groupId>\n" +
                   "            <version>version</version>\n" +
                   "        </dependency>\n" +
                   "    </dependencies>\n" +
                   "</project>");
        final Model model = Model.readFrom(pom);

        model.dependencies().set(asList(new Dependency("a", "b", "c")));

        model.writeTo(pom);

        assertEquals(model.getDependencies().size(), 1);
        final Dependency inserted = model.dependencies().first();
        assertEquals(inserted.getGroupId(), "a");
        assertEquals(inserted.getArtifactId(), "b");
        assertEquals(inserted.getVersion(), "c");
        assertEquals(read(pom), "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
                                "<project>\n" +
                                "    <dependencies>\n" +
                                "        <dependency>\n" +
                                "            <groupId>a</groupId>\n" +
                                "            <artifactId>b</artifactId>\n" +
                                "            <version>c</version>\n" +
                                "        </dependency>\n" +
                                "    </dependencies>\n" +
                                "</project>");
    }

