  @Test
  public void testGetModules() throws Exception {
    URL project = Thread.currentThread().getContextClassLoader().getResource("multi-module");
    Assert.assertNotNull(project);
    List<Model> modules = MavenUtils.getModules(new File(project.getFile()));
    List<String> expected =
        Arrays.asList(
            "parent:module1:jar:x.x.x",
            "parent:module2:jar:x.x.x",
            "project:project-modules-x:pom:x.x.x",
            "project:module3:jar:x.x.x",
            "project:module4:jar:x.x.x");
    Assert.assertEquals(expected.size(), modules.size());
    List<String> modulesStr = new ArrayList<>(modules.size());
    for (Model model : modules) {
      modulesStr.add(toString(model));
    }
    modulesStr.removeAll(expected);
    Assert.assertTrue("Unexpected modules " + modules, modulesStr.isEmpty());
  }

