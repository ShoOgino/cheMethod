  /**
   * Set the version of the dependency, e.g. <i>3.2.1</i>. In Maven 2, this can also be specified as
   * a range of versions.
   *
   * <p>If {@code version} is {@code null} and this dependency instance is associated with xml
   * element then {@code version} will be removed from model as well as from xml.
   *
   * @param version new dependency version
   * @return this dependency instance
   */
  public Dependency setVersion(String version) {
    this.version = version;
    if (!isNew()) {
      if (version == null) {
        dependencyElement.removeChild("version");
      } else if (dependencyElement.hasChild("version")) {
        dependencyElement.getSingleChild("version").setText(version);
      } else {
        dependencyElement.insertChild(
            createElement("version", version),
            afterAnyOf("artifactId", "groupId").or(inTheBegin()));
      }
    }
    return this;
  }

