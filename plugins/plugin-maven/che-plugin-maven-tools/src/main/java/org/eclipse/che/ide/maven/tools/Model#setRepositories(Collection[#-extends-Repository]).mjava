  /**
   * Sets collection of repositories.
   *
   * <p><b>Note: all existing repositories will be removed from model and xml as well</b>
   *
   * @param repositories new plugin repositories
   */
  public Model setRepositories(Collection<? extends Repository> repositories) {
    // remove existing repositories
    for (Repository repository : repositories()) {
      repository.remove();
    }
    // add repositories if necessary
    if (repositories != null && !repositories.isEmpty()) {
      for (Repository repository : repositories) {
        addRepository(repository);
      }
    } else {
      root.removeChild("repositories");
      this.repositories = null;
    }
    return this;
  }

