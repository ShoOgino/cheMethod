  @Test
  public void profileShouldBeActivatedByProperty() throws Exception {
    final String osProperty = System.getProperty("os.name");
    final String content =
        "<artifactId>project-with-properties</artifactId>\n"
            + "    <groupId>com.aw.ad</groupId>\n"
            + "    <name>${prop1}</name>\n"
            + "    <packaging>jar</packaging>\n"
            + "    <version>1.0</version>\n"
            + "    <profiles>"
            + "        <profile>"
            + "            <id>one</id>"
            + "            <activation>"
            + "                <property>"
            + "                    <name>os.name</name>"
            + "                    <value>"
            + osProperty
            + "</value>"
            + "                </property>"
            + "            </activation>"
            + "        </profile>"
            + "        <profile>"
            + "            <id>two</id>"
            + "            <activation>"
            + "                <property>"
            + "                    <name>os.name</name>"
            + "                    <value>xxx</value>"
            + "                </property>"
            + "            </activation>"
            + "        </profile>"
            + "    </profiles>";

    final File pom = createTestPom("propertiesFromProfile", content);

    MavenServerResult resolveProject = mavenServer.resolveProject(pom, emptyList(), emptyList());
    final MavenModel mavenModel = resolveProject.getProjectInfo().getMavenModel();
    assertNotNull(mavenModel);
  }

