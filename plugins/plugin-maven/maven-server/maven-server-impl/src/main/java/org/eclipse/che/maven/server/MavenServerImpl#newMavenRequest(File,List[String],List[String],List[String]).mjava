  public MavenExecutionRequest newMavenRequest(
      File pom, List<String> activeProfiles, List<String> inactiveProfiles, List<String> goals) {
    MavenExecutionRequest request = new DefaultMavenExecutionRequest();
    try {
      getMavenComponent(MavenExecutionRequestPopulator.class)
          .populateFromSettings(request, settings);
      request.setGoals(goals);
      request.setPom(pom);
      getMavenComponent(MavenExecutionRequestPopulator.class).populateDefaults(request);
      request.setSystemProperties(properties);
      request.setActiveProfiles(activeProfiles);
      request.setInactiveProfiles(inactiveProfiles);
      request.setStartTime(buildDate);
      return request;

    } catch (MavenExecutionRequestPopulationException e) {
      throw new RuntimeException(e);
    }
  }

