    public static Model convertToMavenModel(MavenModel model, File projectDir) {
        Model result = new Model();
        result.setArtifactId(model.getMavenKey().getArtifactId());
        result.setGroupId(model.getMavenKey().getGroupId());
        result.setVersion(model.getMavenKey().getVersion());
        result.setPackaging(model.getPackaging());
        result.setName(model.getName());

        if (model.getParent() != null) {
            Parent parent = new Parent();
            MavenKey parentKey = model.getParent().getMavenKey();
            parent.setArtifactId(parentKey.getArtifactId());
            parent.setGroupId(parentKey.getGroupId());
            parent.setVersion(parentKey.getVersion());
            parent.setRelativePath(model.getParent().getRelativePath());
            result.setParent(parent);
        }

        result.setProperties(model.getProperties());
        result.setModules(model.getModules());
        result.setBuild(new Build());
        MavenBuild modelBuild = model.getBuild();
        convertToMavenBuildBase(modelBuild, result.getBuild(), projectDir);
        result.getBuild().setSourceDirectory(relativize(projectDir, modelBuild.getSources().get(0)));
        result.getBuild().setTestSourceDirectory(relativize(projectDir, modelBuild.getTestSources().get(0)));

        result.getBuild().setOutputDirectory(modelBuild.getOutputDirectory());
        result.getBuild().setTestOutputDirectory(modelBuild.getTestOutputDirectory());

        result.setProfiles(convertToMavenProfiles(model.getProfiles(), projectDir));
        return result;
    }

