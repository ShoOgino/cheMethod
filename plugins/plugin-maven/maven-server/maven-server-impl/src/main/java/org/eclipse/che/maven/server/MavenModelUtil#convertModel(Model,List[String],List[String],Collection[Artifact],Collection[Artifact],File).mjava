    public static MavenModel convertModel(Model model, List<String> sources, List<String> testSources, Collection<Artifact> dependencies,
                                          Collection<Artifact> extensions, File localRepo) {

        MavenModel result = new MavenModel();
        result.setMavenKey(new MavenKey(model.getGroupId(), model.getArtifactId(), model.getVersion()));

        Parent parent = model.getParent();
        if (parent != null) {
            result.setParent(new MavenParent(new MavenKey(parent.getGroupId(), parent.getArtifactId(), parent.getVersion()),
                                             parent.getRelativePath()));
        }

        result.setName(model.getName());
        result.setPackaging(model.getPackaging());
        result.setProperties(model.getProperties() != null ? model.getProperties() : new Properties());
        result.setModules(model.getModules());
        result.setPlugins(convertPlugins(model));

        Map<Artifact, MavenArtifact> convertedArtifacts = new HashMap<>();

        result.setExtensions(convertArtifacts(extensions, convertedArtifacts, localRepo));
        result.setDependencies(convertArtifacts(dependencies, convertedArtifacts, localRepo));

        result.setRemoteRepositories(convertRepositories(model.getRepositories()));
        result.setProfiles(convertProfiles(model.getProfiles()));
        convertBuild(result.getBuild(), model.getBuild(), sources, testSources);

        return result;
    }

