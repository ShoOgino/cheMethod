  public void start(LineConsumer output) throws ConflictException, MachineException {
    if (started) {
      throw new ConflictException("Process already started.");
    }

    sshProcess = sshClient.createProcess(commandLine);

    started = true;

    if (output == null) {
      sshProcess.start();
    } else {
      sshProcess.start(
          new PrefixingLineConsumer("[STDOUT] ", output),
          new PrefixingLineConsumer("[STDERR] ", output));
    }
  }

