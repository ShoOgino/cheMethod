    @Override
    public Instance createInstance(Recipe recipe,
                                   Machine machine,
                                   LineConsumer machineLogsConsumer) throws MachineException {
        requireNonNull(machine, "Non null machine required");
        requireNonNull(machineLogsConsumer, "Non null logs consumer required");

        if (machine.getConfig().isDev()) {
            throw new MachineException("Dev machine is not supported for Ssh machine implementation");
        }

        SshMachineRecipe sshMachineRecipe = parseRecipe(recipe);

        SshClient sshClient = sshMachineFactory.createSshClient(sshMachineRecipe,
                                                                machine.getConfig().getEnvVariables());
        sshClient.start();

        return sshMachineFactory.createInstance(machine,
                                                sshClient,
                                                machineLogsConsumer);
    }

