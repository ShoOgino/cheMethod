  @Override
  public void start(LineConsumer output) throws MachineException {
    try (PipedOutputStream pipedOS = new PipedOutputStream();
        PipedInputStream pipedIS = new PipedInputStream(pipedOS);
        BufferedReader outReader = new BufferedReader(new InputStreamReader(pipedIS))) {

      exec.setOutputStream(pipedOS);
      exec.setExtOutputStream(pipedOS);
      exec.connect();

      String outLine;
      while ((outLine = outReader.readLine()) != null) {
        output.writeLine(outLine);
      }
    } catch (IOException | JSchException e) {
      throw new MachineException("Ssh machine command execution error:" + e.getLocalizedMessage());
    } finally {
      exec.disconnect();
    }
  }

