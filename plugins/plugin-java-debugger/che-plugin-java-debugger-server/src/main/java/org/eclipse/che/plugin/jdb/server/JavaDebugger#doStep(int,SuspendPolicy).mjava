  private void doStep(int depth, SuspendPolicy suspendPolicy) throws DebuggerException {
    lock.lock();
    try {
      clearSteps();

      StepRequest request =
          getEventManager().createStepRequest(getCurrentThread(), StepRequest.STEP_LINE, depth);
      request.addCountFilter(1);
      request.setSuspendPolicy(toSuspendEventRequest(suspendPolicy));
      request.enable();

      resume(newDto(ResumeActionDto.class));
    } finally {
      lock.unlock();
    }
  }

