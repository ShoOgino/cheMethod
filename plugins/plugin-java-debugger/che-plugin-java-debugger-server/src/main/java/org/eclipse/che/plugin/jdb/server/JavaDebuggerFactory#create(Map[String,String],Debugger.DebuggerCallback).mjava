  @Override
  public Debugger create(Map<String, String> properties, Debugger.DebuggerCallback debuggerCallback)
      throws DebuggerException {
    Map<String, String> normalizedProps =
        properties
            .entrySet()
            .stream()
            .collect(toMap(e -> e.getKey().toLowerCase(), Map.Entry::getValue));

    String host = normalizedProps.get("host");
    if (host == null) {
      throw new DebuggerException("Can't establish connection: host property is unknown.");
    }

    String portProp = normalizedProps.get("port");
    if (portProp == null) {
      throw new DebuggerException("Can't establish connection: port property is unknown.");
    }

    int port;
    try {
      port = Integer.parseInt(portProp);
    } catch (NumberFormatException e) {
      throw new DebuggerException("Unknown port property format: " + portProp);
    }

    return new JavaDebugger(host, port, debuggerCallback);
  }

