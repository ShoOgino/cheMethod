  private boolean processStepEvent(com.sun.jdi.event.StepEvent event) throws DebuggerException {
    event.request().suspendPolicy();
    setCurrentThread(event.thread());

    try {
      StackFrame jdiFrame = event.thread().frame(0);
      JdbLocation jdbLocation = new JdbLocation(languageServer, jdiFrame);
      SuspendPolicy suspendPolicy = toSuspendPolicy(event.request().suspendPolicy());
      debuggerCallback.onEvent(new SuspendEventImpl(jdbLocation, suspendPolicy));
      return false;
    } catch (IncompatibleThreadStateException e) {
      invalidateCurrentThread();
      return true;
    }
  }

