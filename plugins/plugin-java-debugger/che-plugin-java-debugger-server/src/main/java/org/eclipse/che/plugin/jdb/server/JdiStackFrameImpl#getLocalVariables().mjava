    @Override
    public JdiLocalVariable[] getLocalVariables() throws DebuggerException {
        if (localVariables == null) {
            try {
                List<LocalVariable> targetVariables = stackFrame.visibleVariables();
                localVariables = new JdiLocalVariable[targetVariables.size()];
                int i = 0;
                for (LocalVariable var : targetVariables) {
                    localVariables[i++] = new JdiLocalVariableImpl(stackFrame, var);
                }
            } catch (AbsentInformationException e) {
                throw new DebuggerAbsentInformationException(e.getMessage(), e);
            } catch (InvalidStackFrameException | NativeMethodException e) {
                throw new DebuggerException(e.getMessage(), e);
            }
        }
        return localVariables;
    }

