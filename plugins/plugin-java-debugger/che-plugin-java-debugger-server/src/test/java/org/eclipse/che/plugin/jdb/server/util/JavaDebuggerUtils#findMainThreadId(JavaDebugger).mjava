  /**
   * Iterates threads until main is found and returns its id.
   *
   * @see ThreadReference#uniqueID()
   */
  public static long findMainThreadId(JavaDebugger javaDebugger) throws DebuggerException {
    Optional<ThreadState> main =
        javaDebugger.getThreadDump().stream().filter(t -> t.getName().equals("main")).findAny();
    main.orElseThrow(() -> new DebuggerException("Main thread not found"));
    return main.get().getId();
  }

