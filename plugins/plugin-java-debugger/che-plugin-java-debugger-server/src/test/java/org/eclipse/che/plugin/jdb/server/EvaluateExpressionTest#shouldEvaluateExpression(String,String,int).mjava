  @Test(dataProvider = "evaluateExpression")
  public void shouldEvaluateExpression(String expression, String expectedResult, int frameIndex)
      throws Exception {
    Optional<ThreadState> main =
        debugger.getThreadDump().stream().filter(t -> t.getName().equals("main")).findAny();
    assertTrue(main.isPresent());

    ThreadState mainThread = main.get();

    String actualResult = debugger.evaluate(expression, mainThread.getId(), frameIndex);
    assertEquals(actualResult, expectedResult);
  }

