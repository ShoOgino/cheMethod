  @Test
  public void shouldGetNestedVariables() throws Exception {
    SimpleValue debuggerValue =
        debugger.getValue(new VariablePathImpl(ImmutableList.of("var1")), mainThreadId, 0);

    assertEquals(debuggerValue.getString(), "\"var1\"");

    Variable hashVar =
        debuggerValue
            .getVariables()
            .stream()
            .filter(v -> v.getName().equals("value"))
            .findAny()
            .get();
    assertNotNull(hashVar);
    assertEquals(hashVar.getType(), "char[]");
    assertEquals(hashVar.getName(), "value");
    assertTrue(hashVar.getValue().getString().contains("instance of char[4]"));
    assertEquals(hashVar.getVariablePath().getPath(), ImmutableList.of("var1", "value"));

    List<? extends Variable> valueVariables = hashVar.getValue().getVariables();
    for (int i = 0; i < 4; i++) {
      Variable variable = valueVariables.get(i);
      assertEquals(
          variable.getVariablePath().getPath(), ImmutableList.of("var1", "value", "[" + i + "]"));
      assertEquals(variable.getValue().getString(), "var1".substring(i, i + 1));
    }
  }

