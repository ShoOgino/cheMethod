  public static void ensureSuspendAtDesiredLocation(
      Location desiredLocation, BlockingQueue<DebuggerEvent> debuggerEvents)
      throws InterruptedException {
    for (; ; ) {
      DebuggerEvent event = debuggerEvents.take();
      if (event instanceof SuspendEvent) {
        SuspendEvent suspendEvent = (SuspendEvent) event;
        Location location = suspendEvent.getLocation();

        if (location.getTarget().equals(desiredLocation.getTarget())
            && location.getLineNumber() == desiredLocation.getLineNumber()) {

          return;
        }
      }
    }
  }

