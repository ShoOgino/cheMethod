  @Test
  public void shouldStopByHitCount() throws Exception {
    debugger.addBreakpoint(
        new BreakpointImpl(
            new LocationImpl("/test/src/org/eclipse/BreakpointsByConditionTest.java", 20, "/test"),
            true,
            new BreakpointConfigurationImpl(3)));

    DebuggerEvent debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof BreakpointActivatedEvent);

    debugger.resume(new ResumeActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);

    assertEquals("2", debugger.evaluate("i"));
    assertEquals("2", debugger.evaluate("k"));
  }

