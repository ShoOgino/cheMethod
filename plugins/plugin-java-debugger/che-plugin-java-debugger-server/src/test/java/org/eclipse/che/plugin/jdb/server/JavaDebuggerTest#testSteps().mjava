  @Test(priority = 90)
  public void testSteps() throws Exception {
    debugger.deleteAllBreakpoints();

    debugger.addBreakpoint(new BreakpointImpl(new LocationImpl("com.HelloWorld", 20), false, null));

    assertTrue(events.take() instanceof BreakpointActivatedEvent);

    debugger.resume(new ResumeActionImpl());

    DebuggerEvent debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    Location location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 20);
    assertEquals(location.getExternalResourceId(), -1);
    assertEquals(location.getResourceProjectPath(), "/test");

    debugger.stepInto(new StepIntoActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 28);

    debugger.stepOut(new StepOutActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 20);

    debugger.stepOver(new StepOverActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 21);

    debugger.stepOver(new StepOverActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 23);

    debugger.stepOver(new StepOverActionImpl());

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/com/HelloWorld.java");
    assertEquals(location.getLineNumber(), 24);
  }

