  @Test(priority = 90)
  public void testSteps() throws Exception {
    debugger.deleteAllBreakpoints();

    debugger.addBreakpoint(
        new BreakpointImpl(new LocationImpl("org.eclipse.HelloWorld", 21), false, null));

    assertTrue(events.take() instanceof BreakpointActivatedEvent);

    debugger.resume(new ResumeActionImpl());

    DebuggerEvent debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    Location location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 21);
    assertNull(location.getExternalResourceId());
    assertEquals(location.getResourceProjectPath(), "/test");

    debugger.stepInto(new StepIntoActionImpl(SuspendPolicy.ALL));

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 29);

    debugger.stepOut(new StepOutActionImpl(SuspendPolicy.ALL));

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 21);

    debugger.stepOver(new StepOverActionImpl(SuspendPolicy.ALL));

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 22);

    debugger.stepOver(new StepOverActionImpl(SuspendPolicy.ALL));

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 24);

    debugger.stepOver(new StepOverActionImpl(SuspendPolicy.ALL));

    debuggerEvent = events.take();
    assertTrue(debuggerEvent instanceof SuspendEvent);
    location = ((SuspendEvent) debuggerEvent).getLocation();
    assertEquals(location.getTarget(), "/test/src/org/eclipse/HelloWorld.java");
    assertEquals(location.getLineNumber(), 25);
  }

