  private void findExternalResource(
      final Location location, final AsyncCallback<VirtualFile> callback) {

    Resource resource = appContext.getResource();
    if (resource == null) {
      callback.onFailure(new IllegalStateException("Resource is undefined"));
      return;
    }

    Project project = resource.getProject();
    if (project == null) {
      callback.onFailure(new IllegalStateException("Project is undefined"));
      return;
    }

    service
        .libraryEntry(location.getExternalResourceId())
        .then(
            jarEntry -> {
              final JarFileNode file =
                  nodeFactory.newJarFileNode(
                      jarEntry,
                      location.getExternalResourceId(),
                      Path.valueOf(project.getPath()),
                      null);
              callback.onSuccess(file);
            })
        .catchError(
            error -> {
              callback.onFailure(error.getCause());
            });
  }

