  @Inject
  public ContributionMixinProvider(
      EventBus eventBus,
      AppContext appContext,
      WorkspaceAgent workspaceAgent,
      ContributePartPresenter contributePart,
      WorkflowExecutor workflowExecutor,
      VcsServiceProvider vcsServiceProvider,
      VcsHostingServiceProvider vcsHostingServiceProvider,
      PromiseProvider promiseProvider,
      ContributeMessages messages) {
    this.eventBus = eventBus;
    this.appContext = appContext;
    this.workspaceAgent = workspaceAgent;
    this.contributePart = contributePart;
    this.workflowExecutor = workflowExecutor;
    this.vcsServiceProvider = vcsServiceProvider;
    this.vcsHostingServiceProvider = vcsHostingServiceProvider;
    this.promiseProvider = promiseProvider;
    this.messages = messages;

    if (appContext.getFactory() != null) {
      eventBus.addHandler(FactoryAcceptedEvent.TYPE, event -> subscribeToSelectionChangedEvent());
    } else {
      eventBus.addHandler(
          WorkspaceReadyEvent.getType(), event -> subscribeToSelectionChangedEvent());
    }

    eventBus.addHandler(
        WorkspaceStoppedEvent.TYPE,
        event -> {
          lastSelected = null;
          contributePart.showStub("");
          if (selectionHandlerReg != null) {
            selectionHandlerReg.removeHandler();
          }
        });
  }

