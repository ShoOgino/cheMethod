  private Promise<Boolean> checkVcsState(final Context context) {
    return context
        .getVcsService()
        .getBranchName(context.getProject())
        .then(
            new Function<String, Boolean>() {
              @Override
              public Boolean apply(String branchName) throws FunctionException {
                return !branchName.equals(context.getWorkBranchName());
              }
            });
  }

