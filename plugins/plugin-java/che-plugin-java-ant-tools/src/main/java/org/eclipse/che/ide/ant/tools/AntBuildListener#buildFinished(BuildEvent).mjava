    @Override
    public void buildFinished(BuildEvent event) {
        final AntMessage message;
        final Throwable throwable = event.getException();
        if (throwable == null) {
            message = new AntMessage(AntMessage.BUILD_SUCCESSFUL, null, null, event.getMessage());
        } else {
            StringWriter writer = new StringWriter();
            throwable.printStackTrace(new PrintWriter(writer));
            message = new AntMessage(AntMessage.BUILD_ERROR, null, null, writer.toString());
        }
        send(message);
        send(null);
        disconnect();
    }

