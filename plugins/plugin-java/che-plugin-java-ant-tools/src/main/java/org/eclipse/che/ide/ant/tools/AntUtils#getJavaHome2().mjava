    private static java.io.File getJavaHome2() {
        String javaHomeSys = System.getProperty("java.home");
        if (javaHomeSys == null) {
            return null;
        }
        java.io.File javaHome = new java.io.File(javaHomeSys);
        if (!javaHome.exists()) {
            return null;
        }
        final String toolsJar = "lib" + java.io.File.separatorChar + "tools.jar";
        if (new java.io.File(javaHome, toolsJar).exists()) {
            return javaHome;
        }
        if (javaHomeSys.endsWith("jre")) {
            javaHomeSys = javaHomeSys.substring(0, javaHomeSys.length() - 4); // remove "/jre"
        }
        javaHome = new java.io.File(javaHomeSys);
        if (!javaHome.exists()) {
            return null;
        }
        if (new java.io.File(javaHome, toolsJar).exists()) {
            return javaHome;
        }
        return null;
    }

