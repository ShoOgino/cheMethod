  /*
   * Encode the given path and key combo to a form which is suitable for
   * persisting or using when searching. If the key contains a slash character
   * then we must use a double-slash to indicate the end of the
   * path/the beginning of the key.
   */
  public static String encodePath(String path, String key) {
    String result;
    int pathLength = path == null ? 0 : path.length();
    if (key.indexOf(IPath.SEPARATOR) == -1) {
      if (pathLength == 0) result = key;
      else result = path + IPath.SEPARATOR + key;
    } else {
      if (pathLength == 0) result = DOUBLE_SLASH + key;
      else result = path + DOUBLE_SLASH + key;
    }
    return result;
  }

