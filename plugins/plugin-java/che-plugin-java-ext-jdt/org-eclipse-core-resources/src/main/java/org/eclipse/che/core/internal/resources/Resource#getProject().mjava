  @Override
  public IProject getProject() {
    if (this instanceof IProject) {
      return (IProject) this;
    }
    final IProject[] projects = workspace.getRoot().getProjects();
    //here we try to found project by path of resources. We will get all projects and select longest path of project that
    //start with path of resource.
    final Optional<IProject> max =
        Arrays.stream(projects)
            .filter(iProject -> path.toOSString().startsWith(iProject.getFullPath().toOSString()))
            .max(
                (o1, o2) -> {
                  if (o1.getFullPath().toOSString().length()
                      > o2.getFullPath().toOSString().length()) {
                    return 1;
                  }
                  if (o2.getFullPath().toOSString().length()
                      > o1.getFullPath().toOSString().length()) {
                    return -1;
                  }
                  return 0;
                });
    if (max.isPresent()) {
      return max.get();
    } else {
      return null;
    }
  }

