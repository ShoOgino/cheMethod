  /**
   * Stores the given (key,value) pair, performing lazy initialization of the properties field if
   * necessary. Returns the old value for the given key, or null if no value existed.
   */
  protected String internalPut(String key, String newValue) {
    synchronized (childAndPropertyLock) {
      // illegal state if this node has been removed
      //            checkRemoved();
      String oldValue = properties.get(key);
      if (oldValue != null && oldValue.equals(newValue)) return oldValue;
      //            if (DEBUG_PREFERENCE_SET)
      //                PrefsMessages.message("Setting preference: " + absolutePath() + '/' + key + '=' + newValue); //$NON-NLS-1$
      properties = properties.put(key, newValue);
      return oldValue;
    }
  }

