  /**
   * Returns true if the nested operation depth is the same as the prepared operation depth, and
   * false otherwise. This method can only be safely called from inside a workspace operation.
   * Should NOT be called from outside a prepareOperation/endOperation block.
   */
  boolean isBalanced() {
    return nestedOperations == preparedOperations;
  }

