    /**
     * Called before checking the pre-conditions of an operation.  Optionally supply
     * a scheduling rule to determine when the operation is safe to run.  If a scheduling
     * rule is supplied, this method will block until it is safe to run.
     *
     * @param rule the scheduling rule that describes what this operation intends to modify.
     */
    public void prepareOperation(ISchedulingRule rule, IProgressMonitor monitor) throws CoreException {
        try {
            //make sure autobuild is not running if it conflicts with this operation
            ISchedulingRule buildRule = getRuleFactory().buildRule();
//            if (rule != null && buildRule != null && (rule.isConflicting(buildRule) || buildRule.isConflicting(rule)))
//                buildManager.interrupt();
        } finally {
            getWorkManager().checkIn(rule, monitor);
        }
//        if (!isOpen()) {
//            String message = Messages.resources_workspaceClosed;
//            throw new ResourceException(IResourceStatus.OPERATION_FAILED, null, message, null);
//        }
    }

