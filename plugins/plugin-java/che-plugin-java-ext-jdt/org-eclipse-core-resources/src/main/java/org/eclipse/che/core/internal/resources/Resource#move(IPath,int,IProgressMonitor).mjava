  @Override
  public void move(IPath destination, int updateFlags, IProgressMonitor monitor)
      throws CoreException {
    monitor = Policy.monitorFor(monitor);
    try {
      String message = NLS.bind(Messages.resources_moving, getFullPath());
      monitor.beginTask(message, Policy.totalWork);
      Policy.checkCanceled(monitor);
      destination = makePathAbsolute(destination);
      //            checkValidPath(destination, getType(), false);
      Resource destResource = workspace.newResource(destination, getType());
      final ISchedulingRule rule = workspace.getRuleFactory().moveRule(this, destResource);
      WorkManager workManager = workspace.getWorkManager();
      try {
        workspace.prepareOperation(rule, monitor);
        workspace.beginOperation(true);
        int depth = 0;
        try {
          depth = workManager.beginUnprotected();
          unprotectedMove(destResource, updateFlags, monitor);
        } finally {
          workManager.endUnprotected(depth);
        }
      } finally {
        workspace.endOperation(rule, true, Policy.subMonitorFor(monitor, Policy.endOpWork));
      }
    } finally {
      monitor.done();
    }
  }

