  private void locateMatches(IFile file, CharSequence searchInput) throws CoreException {
    try {
      fMatcher.reset(searchInput);
      int k = 0;
      while (fMatcher.find()) {
        int start = fMatcher.start();
        int end = fMatcher.end();
        if (end != start) { // don't report 0-length matches
          fMatchAccess.initialize(file, start, end - start, searchInput);
          boolean res = fCollector.acceptPatternMatch(fMatchAccess);
          if (!res) {
            return; // no further reporting requested
          }
        }
        if (k++ == 20) {
          if (fProgressMonitor.isCanceled()) {
            throw new OperationCanceledException(SearchMessages.TextSearchVisitor_canceled);
          }
          k = 0;
        }
      }
    } finally {
      fMatchAccess.initialize(null, 0, 0, new String()); // clear references
    }
  }

