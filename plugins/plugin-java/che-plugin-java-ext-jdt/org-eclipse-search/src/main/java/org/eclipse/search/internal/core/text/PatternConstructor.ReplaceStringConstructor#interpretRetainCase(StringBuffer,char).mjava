    /**
     * Interprets current Retain Case mode (all upper-case,all lower-case,capitalized or mixed) and
     * appends the character <code>ch</code> to <code>buf</code> after processing.
     *
     * @param buf the output buffer
     * @param ch the character to process
     * @since 3.4
     */
    private void interpretRetainCase(StringBuffer buf, char ch) {
      if (fRetainCaseMode == RC_UPPER) buf.append(String.valueOf(ch).toUpperCase());
      else if (fRetainCaseMode == RC_LOWER) buf.append(String.valueOf(ch).toLowerCase());
      else if (fRetainCaseMode == RC_FIRSTUPPER) {
        buf.append(String.valueOf(ch).toUpperCase());
        fRetainCaseMode = RC_MIXED;
      } else buf.append(ch);
    }

