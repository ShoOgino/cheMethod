  /**
   * Run a runnable. Convert all thrown exceptions to either InterruptedException or
   * InvocationTargetException
   */
  private static void runInCurrentThread(
      IRunnableWithProgress runnable, IProgressMonitor progressMonitor)
      throws InterruptedException, InvocationTargetException {
    try {
      if (runnable != null) {
        runnable.run(progressMonitor);
      }
    } catch (InvocationTargetException e) {
      throw e;
    } catch (InterruptedException e) {
      throw e;
    } catch (OperationCanceledException e) {
      throw new InterruptedException();
    } catch (ThreadDeath e) {
      // Make sure to propagate ThreadDeath, or threads will never fully
      // terminate
      throw e;
    } catch (RuntimeException e) {
      throw new InvocationTargetException(e);
    } catch (Error e) {
      throw new InvocationTargetException(e);
    }
  }

