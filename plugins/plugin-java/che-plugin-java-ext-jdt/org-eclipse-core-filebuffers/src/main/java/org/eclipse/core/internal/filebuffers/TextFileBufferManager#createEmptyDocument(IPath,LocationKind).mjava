	/*
	 * @see org.eclipse.core.filebuffers.ITextFileBufferManager#createEmptyDocument(org.eclipse.core.runtime.IPath, org.eclipse.core.filebuffers.LocationKind)
	 * @since 3.3
	 */
	public IDocument createEmptyDocument(final IPath location, final LocationKind locationKind) {
//		IDocument documentFromFactory= createDocumentFromFactory(location, locationKind);
		final IDocument document;
//		if (documentFromFactory != null)
//			document= documentFromFactory;
//		else
			document= new SynchronizableDocument();

		if (location == null)
			return document;

		// Set the initial line delimiter
		if (document instanceof IDocumentExtension4) {
			String initalLineDelimiter= getLineDelimiterPreference(location, locationKind);
			if (initalLineDelimiter != null)
				((IDocumentExtension4)document).setInitialLineDelimiter(initalLineDelimiter);
		}

//		final IDocumentSetupParticipant[] participants= fRegistry.getDocumentSetupParticipants(location, locationKind);
//		if (participants != null) {
//			for (int i= 0; i < participants.length; i++) {
//				final IDocumentSetupParticipant participant= participants[i];
//				ISafeRunnable runnable= new ISafeRunnable() {
//					public void run() throws Exception {
//						if (participant instanceof IDocumentSetupParticipantExtension)
//							((IDocumentSetupParticipantExtension)participant).setup(document, location, locationKind);
//						else
//							participant.setup(document);
//
//						if (document.getDocumentPartitioner() != null) {
//							String message= NLSUtility.format(FileBuffersMessages.TextFileBufferManager_warning_documentSetupInstallsDefaultPartitioner, participant.getClass());
//							IStatus status= new Status(IStatus.WARNING, FileBuffersPlugin.PLUGIN_ID, IStatus.OK, message, null);
//							FileBuffersPlugin.getDefault().log(status);
//						}
//					}
//					public void handleException(Throwable t) {
//						IStatus status= new Status(IStatus.FAILED, FileBuffersPlugin.PLUGIN_ID, IStatus.OK, FileBuffersMessages.TextFileBufferManager_error_documentSetupFailed, t);
//						FileBuffersPlugin.getDefault().log(status);
//					}
//				};
//				SafeRunner.run(runnable);
//			}
//		}

		return document;
	}

