  public OutputStream openOutputStream(int options, IProgressMonitor monitor) throws CoreException {
    monitor = Policy.monitorFor(monitor);
    try {
      monitor.beginTask("", 1); //$NON-NLS-1$
      return new FileOutputStream(file, (options & EFS.APPEND) != 0);
    } catch (FileNotFoundException e) {
      checkReadOnlyParent(file, e);
      String message;
      String path = filePath;
      if (file.isDirectory()) message = NLS.bind(Messages.notAFile, path);
      else message = NLS.bind(Messages.couldNotWrite, path);
      Policy.error(EFS.ERROR_WRITE, message, e);
      return null;
    } finally {
      monitor.done();
    }
  }

