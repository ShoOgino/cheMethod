  /** {@inheritDoc} */
  protected IDocument acquireDocument(IProgressMonitor pm) throws CoreException {
    fAcquireCount++;
    if (fAcquireCount > 1) return fBuffer.getDocument();

    ITextFileBufferManager manager = FileBuffers.getTextFileBufferManager();
    IPath path = fFile.getFullPath();
    manager.connect(path, LocationKind.IFILE, pm);
    fBuffer = manager.getTextFileBuffer(path, LocationKind.IFILE);
    IDocument result = fBuffer.getDocument();
    fContentStamp = ContentStamps.get(fFile, result);
    return result;
  }

