  private RefactoringDescriptor getRefactoringDescriptor(IUndoableOperation operation) {
    if (operation instanceof TriggeredOperations) {
      operation = ((TriggeredOperations) operation).getTriggeringOperation();
    }
    if (operation instanceof UndoableOperation2ChangeAdapter) {
      ChangeDescriptor changeDescriptor =
          ((UndoableOperation2ChangeAdapter) operation).getChangeDescriptor();
      if (changeDescriptor instanceof RefactoringChangeDescriptor) {
        return ((RefactoringChangeDescriptor) changeDescriptor).getRefactoringDescriptor();
      }
    }
    return null;
  }

