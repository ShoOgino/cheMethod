  /**
   * Un-escapes the specified string from the history index.
   *
   * @param string the string from the history index
   * @return the un-escaped string
   */
  public static String unescapeString(final String string) {
    if (string.indexOf(DELIMITER_COMPONENT) < 0) {
      final int length = string.length();
      final StringBuffer buffer = new StringBuffer(length);
      for (int index = 0; index < length; index++) {
        final char character = string.charAt(index);
        if (DELIMITER_COMPONENT == character) {
          if (index < length - 1) {
            final char escape = string.charAt(index + 1);
            if (DELIMITER_COMPONENT == escape) continue;
          }
        }
        buffer.append(character);
      }
      return buffer.toString();
    }
    return string;
  }

