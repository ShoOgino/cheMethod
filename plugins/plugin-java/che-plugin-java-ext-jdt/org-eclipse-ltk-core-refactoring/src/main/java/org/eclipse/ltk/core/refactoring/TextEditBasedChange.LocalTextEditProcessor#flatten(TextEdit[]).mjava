    private TextEdit[] flatten(TextEdit[] edits) {
      List result = new ArrayList(5);
      for (int i = 0; i < edits.length; i++) {
        flatten(result, edits[i]);
      }
      return (TextEdit[]) result.toArray(new TextEdit[result.size()]);
    }

