  /**
   * Does the text file change need saving?
   *
   * <p>The implementation of this method returns <code>true</code> if the <code>FORCE_SAVE</code>
   * flag is enabled, or the underlying file is not dirty and <code>KEEP_SAVE_STATE</code> is
   * enabled.
   *
   * @return <code>true</code> if it needs saving according to its dirty state and the save mode
   *     flags, <code>false</code> otherwise
   * @since 3.3
   */
  protected boolean needsSaving() {
    if ((fSaveMode & FORCE_SAVE) != 0) {
      return true;
    }
    if ((fSaveMode & KEEP_SAVE_STATE) != 0) {
      return fValidationState == null || !fValidationState.wasDirty();
    }
    return false;
  }

