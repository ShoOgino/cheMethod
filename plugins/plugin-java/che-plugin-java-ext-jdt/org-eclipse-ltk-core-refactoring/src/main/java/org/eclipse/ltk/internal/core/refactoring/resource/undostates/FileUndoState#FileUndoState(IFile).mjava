  /**
   * Create a {@link FileUndoState} that can be used to later restore the given file. The file
   * typically already exists, but this constructor will not fail if the file does not exist.
   *
   * @param file the file to be restored.
   */
  public FileUndoState(IFile file) {
    super(file);
    this.name = file.getName();
    try {
      this.charset = file.getCharset(false);
    } catch (CoreException e) {
      // we don't care, a null charset is fine.
    }
    if (file.isLinked()) {
      location = file.getLocationURI();
    }
  }

