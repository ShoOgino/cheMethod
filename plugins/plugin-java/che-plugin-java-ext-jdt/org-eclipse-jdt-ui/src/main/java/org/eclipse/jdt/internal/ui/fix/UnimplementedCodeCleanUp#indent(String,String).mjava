  private String indent(String code, String indent) {
    if (code.length() == 0) return code;

    StringBuffer buf = new StringBuffer();
    buf.append(indent);
    char[] codeArray = code.toCharArray();
    for (int i = 0; i < codeArray.length; i++) {
      buf.append(codeArray[i]);
      if (codeArray[i] == '\n') buf.append(indent);
    }
    buf.append("\n"); //$NON-NLS-1$

    return buf.toString();
  }

