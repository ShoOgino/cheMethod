  @Override
  protected IFile[] getChangedFiles() throws CoreException {
    List<IFile> result = new ArrayList<IFile>();
    result.addAll(Arrays.asList(ResourceUtil.getFiles(fChangeManager.getAllCompilationUnits())));
    if (fQualifiedNameSearchResult != null)
      result.addAll(Arrays.asList(fQualifiedNameSearchResult.getAllFiles()));
    if (willRenameCU()) result.add(ResourceUtil.getFile(fType.getCompilationUnit()));
    return result.toArray(new IFile[result.size()]);
  }

