  public static boolean isValidExpression(String string) {
    String trimmed = string.trim();
    if ("".equals(trimmed)) // speed up for a common case //$NON-NLS-1$
    return false;
    StringBuffer cuBuff = new StringBuffer();
    cuBuff
        .append(CONST_CLASS_DECL)
        .append("Object") // $NON-NLS-1$
        .append(CONST_ASSIGN);
    int offset = cuBuff.length();
    cuBuff.append(trimmed).append(CONST_CLOSE);
    ASTParser p = ASTParser.newParser(ASTProvider.SHARED_AST_LEVEL);
    p.setSource(cuBuff.toString().toCharArray());
    CompilationUnit cu = (CompilationUnit) p.createAST(null);
    Selection selection = Selection.createFromStartLength(offset, trimmed.length());
    SelectionAnalyzer analyzer = new SelectionAnalyzer(selection, false);
    cu.accept(analyzer);
    ASTNode selected = analyzer.getFirstSelectedNode();
    return (selected instanceof Expression)
        && trimmed.equals(
            cuBuff.substring(
                cu.getExtendedStartPosition(selected),
                cu.getExtendedStartPosition(selected) + cu.getExtendedLength(selected)));
  }

