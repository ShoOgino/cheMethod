  private ITypeBinding typeToBinding(IType type, CompilationUnit root) throws JavaModelException {
    ASTNode typeNode = typeToDeclaration(type, root);
    if (type.isAnonymous()) {
      return ((AnonymousClassDeclaration) typeNode).resolveBinding();
    } else {
      return ((AbstractTypeDeclaration) typeNode).resolveBinding();
    }
  }

