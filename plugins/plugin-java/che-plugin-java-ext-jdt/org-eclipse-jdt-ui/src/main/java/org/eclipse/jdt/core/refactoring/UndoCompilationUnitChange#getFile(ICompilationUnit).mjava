  private static IFile getFile(ICompilationUnit cunit) throws CoreException {
    IFile file = (IFile) cunit.getResource();
    if (file == null) {
      String message =
          MessageFormat.format(
              "Compilation unit ''{0}'' does not have an underlying file.",
              TextProcessor.process(cunit.getElementName()));
      throw new CoreException(new Status(IStatus.ERROR, JavaPlugin.getPluginId(), message));
    }
    return file;
  }

