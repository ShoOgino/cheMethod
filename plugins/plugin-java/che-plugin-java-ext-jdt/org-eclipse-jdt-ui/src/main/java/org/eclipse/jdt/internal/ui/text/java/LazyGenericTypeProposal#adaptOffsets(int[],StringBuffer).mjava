  /**
   * Adapt the parameter offsets to any modification of the replacement string done by <code>apply
   * </code>. For example, applying the proposal may add an import instead of inserting the fully
   * qualified name.
   *
   * <p>This assumes that modifications happen only at the beginning of the replacement string and
   * do not touch the type arguments list.
   *
   * @param offsets the offsets to modify
   * @param buffer the original replacement string
   */
  private void adaptOffsets(int[] offsets, StringBuffer buffer) {
    String replacementString = getReplacementString();
    int delta =
        buffer.length() - replacementString.length(); // due to using an import instead of package
    for (int i = 0; i < offsets.length; i++) {
      offsets[i] -= delta;
    }
  }

