	private static boolean hasFatalError(CompilationUnit compilationUnit) {
		try {
			if (!((ICompilationUnit) compilationUnit.getJavaElement()).isStructureKnown())
				return true;
		} catch (JavaModelException e) {
			JavaPlugin.log(e);
			return true;
		}

		IProblem[] problems= compilationUnit.getProblems();
		for (int i= 0; i < problems.length; i++) {
			if (problems[i].isError()) {
				if (!(problems[i] instanceof CategorizedProblem))
					return true;

				CategorizedProblem categorizedProblem= (CategorizedProblem) problems[i];
				int categoryID= categorizedProblem.getCategoryID();

				if (categoryID == CategorizedProblem.CAT_BUILDPATH)
					return true;
				if (categoryID == CategorizedProblem.CAT_SYNTAX)
					return true;
				if (categoryID == CategorizedProblem.CAT_IMPORT)
					return true;
				if (categoryID == CategorizedProblem.CAT_TYPE)
					return true;
				if (categoryID == CategorizedProblem.CAT_MEMBER)
					return true;
				if (categoryID == CategorizedProblem.CAT_INTERNAL)
					return true;
			}
		}

		return false;
	}

