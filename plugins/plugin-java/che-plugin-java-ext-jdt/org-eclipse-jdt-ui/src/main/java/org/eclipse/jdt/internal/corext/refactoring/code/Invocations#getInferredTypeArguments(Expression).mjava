  public static ITypeBinding[] getInferredTypeArguments(Expression invocation) {
    IMethodBinding methodBinding;
    switch (invocation.getNodeType()) {
      case ASTNode.METHOD_INVOCATION:
        methodBinding = ((MethodInvocation) invocation).resolveMethodBinding();
        return methodBinding == null ? null : methodBinding.getTypeArguments();
      case ASTNode.SUPER_METHOD_INVOCATION:
        methodBinding = ((SuperMethodInvocation) invocation).resolveMethodBinding();
        return methodBinding == null ? null : methodBinding.getTypeArguments();
      case ASTNode.CLASS_INSTANCE_CREATION:
        Type type = ((ClassInstanceCreation) invocation).getType();
        ITypeBinding typeBinding = type.resolveBinding();
        return typeBinding == null ? null : typeBinding.getTypeArguments();

      default:
        throw new IllegalArgumentException(invocation.toString());
    }
  }

