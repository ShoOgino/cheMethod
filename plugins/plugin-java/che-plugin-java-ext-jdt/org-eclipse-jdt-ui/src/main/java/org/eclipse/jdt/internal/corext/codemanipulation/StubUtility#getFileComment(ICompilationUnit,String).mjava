  /*
   * Don't use this method directly, use CodeGeneration.
   * @see org.eclipse.jdt.ui.CodeGeneration#getFileComment(ICompilationUnit, String)
   */
  public static String getFileComment(ICompilationUnit cu, String lineDelimiter)
      throws CoreException {
    Template template =
        getCodeTemplate(CodeTemplateContextType.FILECOMMENT_ID, cu.getJavaProject());
    if (template == null) {
      return null;
    }

    IJavaProject project = cu.getJavaProject();
    CodeTemplateContext context =
        new CodeTemplateContext(template.getContextTypeId(), project, lineDelimiter);
    context.setCompilationUnitVariables(cu);
    context.setVariable(
        CodeTemplateContextType.TYPENAME, JavaCore.removeJavaLikeExtension(cu.getElementName()));
    return evaluateTemplate(context, template);
  }

