  /**
   * Creates and returns a stub for the given top-level type.
   *
   * @param topLevelType the top-level type
   * @param monitor the progress monitor, can be <code>null</code>
   * @return the source stub
   * @throws JavaModelException if this element does not exist or if an exception occurs while
   *     accessing its corresponding resource
   */
  public String createStub(IType topLevelType, IProgressMonitor monitor) throws JavaModelException {
    Assert.isTrue(Checks.isTopLevel(topLevelType));
    if (monitor == null) monitor = new NullProgressMonitor();

    fBuffer = new StringBuffer(2046);
    appendTopLevelType(topLevelType, monitor);
    String result = fBuffer.toString();
    fBuffer = null;
    return result;
  }

