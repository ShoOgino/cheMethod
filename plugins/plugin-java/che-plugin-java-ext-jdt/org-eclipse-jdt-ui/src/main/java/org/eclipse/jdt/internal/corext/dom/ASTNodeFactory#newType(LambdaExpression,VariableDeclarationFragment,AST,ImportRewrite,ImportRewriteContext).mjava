  private static Type newType(
      LambdaExpression lambdaExpression,
      VariableDeclarationFragment declaration,
      AST ast,
      ImportRewrite importRewrite,
      ImportRewriteContext context) {
    IMethodBinding method = lambdaExpression.resolveMethodBinding();
    if (method != null) {
      ITypeBinding[] parameterTypes = method.getParameterTypes();
      int index = lambdaExpression.parameters().indexOf(declaration);
      ITypeBinding typeBinding = parameterTypes[index];
      if (importRewrite != null) {
        return importRewrite.addImport(typeBinding, ast, context);
      } else {
        String qualifiedName = typeBinding.getQualifiedName();
        if (qualifiedName.length() > 0) {
          return newType(ast, qualifiedName);
        }
      }
    }
    // fall-back
    return ast.newSimpleType(ast.newSimpleName("Object")); //$NON-NLS-1$
  }

