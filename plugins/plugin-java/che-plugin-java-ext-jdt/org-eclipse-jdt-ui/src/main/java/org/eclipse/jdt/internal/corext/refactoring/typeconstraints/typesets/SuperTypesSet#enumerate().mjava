  /* (non-Javadoc)
   * @see org.eclipse.jdt.internal.corext.refactoring.typeconstraints.typesets.TypeSet#enumerate()
   */
  @Override
  public EnumeratedTypeSet enumerate() {
    if (fEnumCache == null) {
      fEnumCache = new EnumeratedTypeSet(getTypeSetEnvironment());
      boolean anyLBIsIntfOrArray = false;

      for (Iterator<TType> iter = fLowerBounds.iterator(); iter.hasNext(); ) {
        TType lb = iter.next();

        if (lb instanceof ArrayType) {
          ArrayType at = (ArrayType) lb;
          int numDims = at.getDimensions();
          for (Iterator<TType> elemSuperIter = TTypes.getAllSuperTypesIterator(at.getElementType());
              elemSuperIter.hasNext(); )
            fEnumCache.add(TTypes.createArrayType(elemSuperIter.next(), numDims));
          anyLBIsIntfOrArray = true;
        } else {
          for (Iterator<TType> iterator = TTypes.getAllSuperTypesIterator(lb); iterator.hasNext(); )
            fEnumCache.fMembers.add(iterator.next());
        }
        fEnumCache.add(lb);
      }
      if (anyLBIsIntfOrArray) fEnumCache.add(getJavaLangObject());
      // fEnumCache.initComplete();
    }
    return fEnumCache;
  }

