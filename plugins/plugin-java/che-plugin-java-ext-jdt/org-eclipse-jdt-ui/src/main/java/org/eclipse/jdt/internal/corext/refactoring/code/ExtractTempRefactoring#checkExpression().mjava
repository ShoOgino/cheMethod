  private RefactoringStatus checkExpression() throws JavaModelException {
    Expression selectedExpression = getSelectedExpression().getAssociatedExpression();
    if (selectedExpression != null) {
      final ASTNode parent = selectedExpression.getParent();
      if (selectedExpression instanceof NullLiteral) {
        return RefactoringStatus.createFatalErrorStatus(
            RefactoringCoreMessages.ExtractTempRefactoring_null_literals);
      } else if (selectedExpression instanceof ArrayInitializer) {
        return RefactoringStatus.createFatalErrorStatus(
            RefactoringCoreMessages.ExtractTempRefactoring_array_initializer);
      } else if (selectedExpression instanceof Assignment) {
        if (parent instanceof Expression && !(parent instanceof ParenthesizedExpression))
          return RefactoringStatus.createFatalErrorStatus(
              RefactoringCoreMessages.ExtractTempRefactoring_assignment);
        else return null;
      } else if (selectedExpression instanceof SimpleName) {
        if ((((SimpleName) selectedExpression)).isDeclaration())
          return RefactoringStatus.createFatalErrorStatus(
              RefactoringCoreMessages.ExtractTempRefactoring_names_in_declarations);
        if (parent instanceof QualifiedName
                && selectedExpression.getLocationInParent() == QualifiedName.NAME_PROPERTY
            || parent instanceof FieldAccess
                && selectedExpression.getLocationInParent() == FieldAccess.NAME_PROPERTY)
          return RefactoringStatus.createFatalErrorStatus(
              RefactoringCoreMessages.ExtractTempRefactoring_select_expression);
      } else if (selectedExpression instanceof VariableDeclarationExpression
          && parent instanceof TryStatement) {
        return RefactoringStatus.createFatalErrorStatus(
            RefactoringCoreMessages.ExtractTempRefactoring_resource_in_try_with_resources);
      }
    }

    return null;
  }

