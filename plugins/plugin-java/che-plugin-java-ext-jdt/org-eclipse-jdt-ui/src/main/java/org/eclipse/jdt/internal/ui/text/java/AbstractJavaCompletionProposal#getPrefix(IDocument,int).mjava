  /**
   * Returns the text in <code>document</code> from {@link #getReplacementOffset()} to <code>offset
   * </code>. Returns the empty string if <code>offset</code> is before the replacement offset or if
   * an exception occurs when accessing the document.
   *
   * @param document the document
   * @param offset the offset
   * @return the prefix
   * @since 3.2
   */
  protected String getPrefix(IDocument document, int offset) {
    try {
      int length = offset - getReplacementOffset();
      if (length > 0) return document.get(getReplacementOffset(), length);
    } catch (BadLocationException x) {
    }
    return ""; // $NON-NLS-1$
  }

