	/* package */ IFile[] getChangedFiles() throws CoreException {
		IResourceDelta root = fDeltaFactory.getDelta();
		final List result = new ArrayList();
		root.accept(new IResourceDeltaVisitor() {
			public boolean visit(IResourceDelta delta) throws CoreException {
				final IResource resource = delta.getResource();
				if (resource.getType() == IResource.FILE) {
					final int kind = delta.getKind();
					if (isSet(kind, IResourceDelta.CHANGED)) {
						result.add(resource);
					} else if (isSet(kind, IResourceDelta.ADDED) &&
							   isSet(delta.getFlags(), IResourceDelta.CONTENT | IResourceDelta.MOVED_FROM)) {
						final IFile movedFrom = resource.getWorkspace().getRoot().getFile(delta.getMovedFromPath());
						result.add(movedFrom);
					}
				}
				return true;
			}
		});
		return (IFile[]) result.toArray(new IFile[result.size()]);
	}

