  private RefactoringStatus checkTypeNameConflicts(
      ICompilationUnit iCompilationUnit, Set<String> topLevelTypeNames) throws CoreException {
    RefactoringStatus result = new RefactoringStatus();
    IType[] types = iCompilationUnit.getTypes();

    for (int i = 0; i < types.length; i++) {
      String name = types[i].getElementName();
      if (topLevelTypeNames.contains(name)) {
        String[] keys = {getElementLabel(iCompilationUnit.getParent()), getElementLabel(types[i])};
        String msg =
            Messages.format(RefactoringCoreMessages.RenamePackageRefactoring_contains_type, keys);
        RefactoringStatusContext context = JavaStatusContext.create(types[i]);
        result.addError(msg, context);
      }
    }
    return result;
  }

