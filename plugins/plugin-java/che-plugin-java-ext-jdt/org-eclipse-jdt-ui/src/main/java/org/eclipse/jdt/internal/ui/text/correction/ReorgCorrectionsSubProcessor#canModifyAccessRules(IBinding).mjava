  private static boolean canModifyAccessRules(IBinding binding) {
    IJavaElement element = binding.getJavaElement();
    if (element == null) return false;

    IPackageFragmentRoot root = JavaModelUtil.getPackageFragmentRoot(element);
    if (root == null) return false;

    try {
      IClasspathEntry classpathEntry = root.getRawClasspathEntry();
      if (classpathEntry == null) return false;
      if (classpathEntry.getEntryKind() == IClasspathEntry.CPE_LIBRARY) return true;
      if (classpathEntry.getEntryKind() == IClasspathEntry.CPE_CONTAINER) {
        ClasspathContainerInitializer classpathContainerInitializer =
            JavaCore.getClasspathContainerInitializer(classpathEntry.getPath().segment(0));
        IStatus status =
            classpathContainerInitializer.getAccessRulesStatus(
                classpathEntry.getPath(), root.getJavaProject());
        return status.isOK();
      }
    } catch (JavaModelException e) {
      return false;
    }
    return false;
  }

