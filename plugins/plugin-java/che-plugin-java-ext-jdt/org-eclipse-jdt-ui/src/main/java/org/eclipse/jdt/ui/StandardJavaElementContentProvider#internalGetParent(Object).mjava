    /**
     * Note: This method is for internal use only. Clients should not call this method.
     *
     * @param element the element
     * @return the parent of the element
     *
     * @noreference This method is not intended to be referenced by clients.
     */
    protected Object internalGetParent(Object element) {

        // try to map resources to the containing package fragment
        if (element instanceof IResource) {
            IResource parent = ((IResource)element).getParent();
            IJavaElement jParent = JavaCore.create(parent);
            // http://bugs.eclipse.org/bugs/show_bug.cgi?id=31374
            if (jParent != null && jParent.exists())
                return jParent;
            return parent;
        } else if (element instanceof IJavaElement) {
            IJavaElement parent = ((IJavaElement)element).getParent();
            // for package fragments that are contained in a project package fragment
            // we have to skip the package fragment root as the parent.
            if (element instanceof IPackageFragment) {
                return skipProjectPackageFragmentRoot((IPackageFragmentRoot)parent);
            }
            return parent;
        } else if (element instanceof IJarEntryResource) {
            return ((IJarEntryResource)element).getParent();
        }
        return null;
    }

