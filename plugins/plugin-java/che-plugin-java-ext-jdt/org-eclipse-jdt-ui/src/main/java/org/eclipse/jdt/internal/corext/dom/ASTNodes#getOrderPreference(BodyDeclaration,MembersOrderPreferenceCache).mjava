  private static int getOrderPreference(BodyDeclaration member, MembersOrderPreferenceCache store) {
    int memberType = member.getNodeType();
    int modifiers = member.getModifiers();

    switch (memberType) {
      case ASTNode.TYPE_DECLARATION:
      case ASTNode.ENUM_DECLARATION:
      case ASTNode.ANNOTATION_TYPE_DECLARATION:
        return store.getCategoryIndex(MembersOrderPreferenceCache.TYPE_INDEX) * 2;
      case ASTNode.FIELD_DECLARATION:
        if (Modifier.isStatic(modifiers)) {
          int index = store.getCategoryIndex(MembersOrderPreferenceCache.STATIC_FIELDS_INDEX) * 2;
          if (Modifier.isFinal(modifiers)) {
            return index; // first final static, then static
          }
          return index + 1;
        }
        return store.getCategoryIndex(MembersOrderPreferenceCache.FIELDS_INDEX) * 2;
      case ASTNode.INITIALIZER:
        if (Modifier.isStatic(modifiers)) {
          return store.getCategoryIndex(MembersOrderPreferenceCache.STATIC_INIT_INDEX) * 2;
        }
        return store.getCategoryIndex(MembersOrderPreferenceCache.INIT_INDEX) * 2;
      case ASTNode.ANNOTATION_TYPE_MEMBER_DECLARATION:
        return store.getCategoryIndex(MembersOrderPreferenceCache.METHOD_INDEX) * 2;
      case ASTNode.METHOD_DECLARATION:
        if (Modifier.isStatic(modifiers)) {
          return store.getCategoryIndex(MembersOrderPreferenceCache.STATIC_METHODS_INDEX) * 2;
        }
        if (((MethodDeclaration) member).isConstructor()) {
          return store.getCategoryIndex(MembersOrderPreferenceCache.CONSTRUCTORS_INDEX) * 2;
        }
        return store.getCategoryIndex(MembersOrderPreferenceCache.METHOD_INDEX) * 2;
      default:
        return 100;
    }
  }

