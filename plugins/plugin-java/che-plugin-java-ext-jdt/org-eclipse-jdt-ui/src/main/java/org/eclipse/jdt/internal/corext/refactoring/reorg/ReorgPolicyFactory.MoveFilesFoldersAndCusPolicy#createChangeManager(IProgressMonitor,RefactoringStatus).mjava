    private TextChangeManager createChangeManager(IProgressMonitor pm, RefactoringStatus status)
        throws JavaModelException {
      pm.beginTask("", 1); // $NON-NLS-1$
      try {
        if (!fUpdateReferences) return new TextChangeManager();

        IPackageFragment packageDest = getDestinationAsPackageFragment();
        if (packageDest != null) {
          MoveCuUpdateCreator creator = new MoveCuUpdateCreator(getCus(), packageDest);
          return creator.createChangeManager(new SubProgressMonitor(pm, 1), status);
        } else return new TextChangeManager();
      } finally {
        pm.done();
      }
    }

