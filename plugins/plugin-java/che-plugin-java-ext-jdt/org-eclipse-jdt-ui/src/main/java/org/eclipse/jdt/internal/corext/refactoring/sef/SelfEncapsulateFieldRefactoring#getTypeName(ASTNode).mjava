  private String getTypeName(ASTNode type) {
    if (type instanceof AbstractTypeDeclaration) {
      return ((AbstractTypeDeclaration) type).getName().getIdentifier();
    } else if (type instanceof AnonymousClassDeclaration) {
      ClassInstanceCreation node =
          (ClassInstanceCreation) ASTNodes.getParent(type, ClassInstanceCreation.class);
      return ASTNodes.asString(node.getType());
    }
    Assert.isTrue(false, "Should not happen"); // $NON-NLS-1$
    return null;
  }

