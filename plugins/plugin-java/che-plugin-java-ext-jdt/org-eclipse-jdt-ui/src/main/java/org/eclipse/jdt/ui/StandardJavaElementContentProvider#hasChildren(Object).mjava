    /* (non-Javadoc)
     * @see ITreeContentProvider
     */
    public boolean hasChildren(Object element) {
        if (getProvideMembers()) {
            // assume CUs and class files are never empty
            if (element instanceof ICompilationUnit ||
                element instanceof IClassFile) {
                return true;
            }
        } else {
            // don't allow to drill down into a compilation unit or class file
            if (element instanceof ICompilationUnit ||
                element instanceof IClassFile ||
                element instanceof IFile)
                return false;
        }

        if (element instanceof IJavaProject) {
            IJavaProject jp = (IJavaProject)element;
            if (!jp.getProject().isOpen()) {
                return false;
            }
        }

        if (element instanceof IParent) {
            try {
                // when we have Java children return true, else we fetch all the children
                if (((IParent)element).hasChildren())
                    return true;
            } catch (JavaModelException e) {
                return true;
            }
        }
        Object[] children = getChildren(element);
        return (children != null) && children.length > 0;
    }

