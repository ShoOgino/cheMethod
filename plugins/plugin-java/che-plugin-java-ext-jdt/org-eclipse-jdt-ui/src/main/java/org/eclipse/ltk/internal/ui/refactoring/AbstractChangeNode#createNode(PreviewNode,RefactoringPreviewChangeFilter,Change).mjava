  public static PreviewNode createNode(
      PreviewNode parent, RefactoringPreviewChangeFilter filter, Change change) {
    if (change instanceof CompositeChange) {
      return new CompositeChangeNode(parent, filter, (CompositeChange) change);
    } else if (change instanceof TextEditBasedChange) {
      InternalTextEditChangeNode result =
          (TextEditChangeNode) change.getAdapter(TextEditChangeNode.class);
      if (result == null) {
        result = new TextEditChangeNode((TextEditBasedChange) change);
      }
      result.initialize(parent);
      return result;
    }
    return new DefaultChangeNode(parent, change);
  }

