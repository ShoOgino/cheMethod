  private void addImportToSourcePackageTypes(ICompilationUnit movedUnit, IProgressMonitor pm)
      throws CoreException {
    List<ICompilationUnit> cuList = Arrays.asList(fCus);
    IType[] allCuTypes = movedUnit.getAllTypes();
    IType[] referencedTypes = ReferenceFinderUtil.getTypesReferencedIn(allCuTypes, pm);
    ImportRewrite importEdit = getImportRewrite(movedUnit);
    importEdit.setFilterImplicitImports(false);
    IPackageFragment srcPack = (IPackageFragment) movedUnit.getParent();
    for (int i = 0; i < referencedTypes.length; i++) {
      IType iType = referencedTypes[i];
      if (!iType.exists()) continue;
      if (!JavaModelUtil.isSamePackage(iType.getPackageFragment(), srcPack)) continue;
      if (cuList.contains(iType.getCompilationUnit())) continue;
      importEdit.addImport(iType.getFullyQualifiedName('.'));
    }
  }

