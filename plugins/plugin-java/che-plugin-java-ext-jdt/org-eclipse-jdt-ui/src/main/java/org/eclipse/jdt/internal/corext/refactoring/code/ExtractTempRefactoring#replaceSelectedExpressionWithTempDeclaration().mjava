	private void replaceSelectedExpressionWithTempDeclaration() throws CoreException {
		ASTRewrite rewrite= fCURewrite.getASTRewrite();
		Expression selectedExpression= getSelectedExpression().getAssociatedExpression(); // whole expression selected

		Expression initializer= (Expression) rewrite.createMoveTarget(selectedExpression);
		ASTNode replacement= createTempDeclaration(initializer); // creates a VariableDeclarationStatement

		ExpressionStatement parent= (ExpressionStatement) selectedExpression.getParent();
		if (ASTNodes.isControlStatementBody(parent.getLocationInParent())) {
			Block block= rewrite.getAST().newBlock();
			block.statements().add(replacement);
			replacement= block;

		}
		rewrite.replace(parent, replacement, fCURewrite.createGroupDescription(RefactoringCoreMessages.ExtractTempRefactoring_declare_local_variable));
	}

