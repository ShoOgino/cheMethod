  public static RefactoringStatus checkCompileErrorsInAffectedFiles(
      SearchResultGroup[] references, IResource declaring) throws JavaModelException {
    RefactoringStatus result = new RefactoringStatus();
    for (int i = 0; i < references.length; i++) {
      IResource resource = references[i].getResource();
      if (resource.equals(declaring)) declaring = null;
      checkCompileErrorsInAffectedFile(result, resource);
    }
    if (declaring != null) checkCompileErrorsInAffectedFile(result, declaring);
    return result;
  }

