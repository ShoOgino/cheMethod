  private void computeLastStatementSelected() {
    ASTNode[] nodes = getSelectedNodes();
    if (nodes.length == 0) {
      fIsLastStatementSelected = false;
    } else {
      Block body = null;
      LambdaExpression enclosingLambdaExpr =
          ASTResolving.findEnclosingLambdaExpression(getFirstSelectedNode());
      if (enclosingLambdaExpr != null) {
        ASTNode lambdaBody = enclosingLambdaExpr.getBody();
        if (lambdaBody instanceof Block) {
          body = (Block) lambdaBody;
        } else {
          fIsLastStatementSelected = true;
          return;
        }
      } else {
        if (fEnclosingBodyDeclaration instanceof MethodDeclaration) {
          body = ((MethodDeclaration) fEnclosingBodyDeclaration).getBody();
        } else if (fEnclosingBodyDeclaration instanceof Initializer) {
          body = ((Initializer) fEnclosingBodyDeclaration).getBody();
        }
      }
      if (body != null) {
        List<Statement> statements = body.statements();
        if (statements.size() > 0) {
          fIsLastStatementSelected =
              nodes[nodes.length - 1] == statements.get(statements.size() - 1);
        } else {
          fIsLastStatementSelected = true;
        }
      }
    }
  }

