    public IProject[] getProjects(IJavaSearchScope scope) {
        IPath[] paths = scope.enclosingProjectsAndJars();
        HashSet<IResource> temp = new HashSet<IResource>();
        for (int i = 0; i < paths.length; i++) {
            IResource resource = ResourcesPlugin.getWorkspace().getRoot().findMember(paths[i]);
            if (resource != null && resource.getType() == IResource.PROJECT)
                temp.add(resource);
        }
        return temp.toArray(new IProject[temp.size()]);
    }

