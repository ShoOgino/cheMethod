    private static IType resolveType(IType baseType, String refTypeName) throws JavaModelException {
        if (refTypeName.length() == 0)
            return baseType;

        String[][] resolvedNames= baseType.resolveType(refTypeName);
        if (resolvedNames != null && resolvedNames.length > 0) {
            return baseType.getJavaProject().findType(resolvedNames[0][0], resolvedNames[0][1].replace('$', '.'), (IProgressMonitor) null);

        } else if (baseType.isBinary()) {
            // workaround for https://bugs.eclipse.org/bugs/show_bug.cgi?id=206597
            IType type= baseType.getJavaProject().findType(refTypeName, (IProgressMonitor) null);
            if (type == null) {
                // could be unqualified reference:
                type= baseType.getJavaProject().findType(baseType.getPackageFragment().getElementName() + '.' + refTypeName, (IProgressMonitor) null);
            }
            return type;

        } else {
            return null;
        }
    }

