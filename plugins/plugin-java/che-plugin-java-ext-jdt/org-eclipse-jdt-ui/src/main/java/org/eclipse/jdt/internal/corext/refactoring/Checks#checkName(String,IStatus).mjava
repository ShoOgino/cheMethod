  /**
   * Returns a fatal error in case the name is empty. In all other cases, an error based on the
   * given status is returned.
   *
   * @param name a name
   * @param status a status
   * @return RefactoringStatus based on the given status or the name, if empty.
   */
  public static RefactoringStatus checkName(String name, IStatus status) {
    RefactoringStatus result = new RefactoringStatus();
    if ("".equals(name)) // $NON-NLS-1$
    return RefactoringStatus.createFatalErrorStatus(RefactoringCoreMessages.Checks_Choose_name);

    if (status.isOK()) return result;

    switch (status.getSeverity()) {
      case IStatus.ERROR:
        return RefactoringStatus.createFatalErrorStatus(status.getMessage());
      case IStatus.WARNING:
        return RefactoringStatus.createWarningStatus(status.getMessage());
      case IStatus.INFO:
        return RefactoringStatus.createInfoStatus(status.getMessage());
      default: // no nothing
        return new RefactoringStatus();
    }
  }

