  private boolean isTypeDeclarationSubTypeCompatible(
      ASTNode typeDeclaration, ITypeBinding supertype) {
    if (typeDeclaration instanceof AbstractTypeDeclaration) {
      ITypeBinding binding = ((AbstractTypeDeclaration) typeDeclaration).resolveBinding();
      return binding != null && binding.isSubTypeCompatible(supertype);
    } else if (typeDeclaration instanceof AnonymousClassDeclaration) {
      ITypeBinding binding = ((AnonymousClassDeclaration) typeDeclaration).resolveBinding();
      return binding != null && binding.isSubTypeCompatible(supertype);
    } else {
      return false;
    }
  }

