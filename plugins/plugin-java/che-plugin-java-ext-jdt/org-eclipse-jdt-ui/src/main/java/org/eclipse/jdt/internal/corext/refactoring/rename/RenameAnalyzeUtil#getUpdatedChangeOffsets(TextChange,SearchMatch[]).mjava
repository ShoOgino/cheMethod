  /**
   * @param change
   * @param oldMatches
   * @return Map &lt;Integer updatedOffset, SearchMatch oldMatch&gt;
   */
  private static Map<Integer, SearchMatch> getUpdatedChangeOffsets(
      TextChange change, SearchMatch[] oldMatches) {
    Map<Integer, SearchMatch> updatedOffsets = new HashMap<Integer, SearchMatch>();
    Map<Integer, Integer> oldToUpdatedOffsets = getEditChangeOffsetUpdates(change);
    for (int i = 0; i < oldMatches.length; i++) {
      SearchMatch oldMatch = oldMatches[i];
      Integer updatedOffset = oldToUpdatedOffsets.get(new Integer(oldMatch.getOffset()));
      if (updatedOffset == null) updatedOffset = new Integer(-1); //match not updated
      updatedOffsets.put(updatedOffset, oldMatch);
    }
    return updatedOffsets;
  }

