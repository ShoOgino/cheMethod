  private static void setElementVariable(
      ConstraintVariable2 typeConstraintVariable,
      CollectionElementVariable2 elementVariable,
      TypeVariable typeVariable) {
    HashMap<String, CollectionElementVariable2> keyToElementVar =
        getIndexedCollectionElements(typeConstraintVariable);
    String key = typeVariable.getBindingKey();
    if (keyToElementVar == null) {
      keyToElementVar = new HashMap<String, CollectionElementVariable2>();
      typeConstraintVariable.setData(INDEXED_COLLECTION_ELEMENTS, keyToElementVar);
    } else {
      Object existingElementVar = keyToElementVar.get(key);
      if (existingElementVar != null) {
        Assert.isTrue(existingElementVar == elementVariable);
      }
    }
    keyToElementVar.put(key, elementVariable);
  }

