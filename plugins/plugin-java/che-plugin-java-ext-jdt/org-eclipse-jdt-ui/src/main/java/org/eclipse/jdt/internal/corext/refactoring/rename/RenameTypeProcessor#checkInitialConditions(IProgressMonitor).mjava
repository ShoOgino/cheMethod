  @Override
  public RefactoringStatus checkInitialConditions(IProgressMonitor pm) throws CoreException {
    IType primary = (IType) fType.getPrimaryElement();
    if (primary == null || !primary.exists()) {
      String qualifiedTypeName =
          JavaElementLabels.getElementLabel(fType, JavaElementLabels.F_FULLY_QUALIFIED);
      String message =
          Messages.format(
              RefactoringCoreMessages.RenameTypeRefactoring_does_not_exist,
              new String[] {
                BasicElementLabels.getJavaElementName(qualifiedTypeName),
                BasicElementLabels.getFileName(fType.getCompilationUnit())
              });
      return RefactoringStatus.createFatalErrorStatus(message);
    }
    fType = primary;
    return Checks.checkIfCuBroken(fType);
  }

