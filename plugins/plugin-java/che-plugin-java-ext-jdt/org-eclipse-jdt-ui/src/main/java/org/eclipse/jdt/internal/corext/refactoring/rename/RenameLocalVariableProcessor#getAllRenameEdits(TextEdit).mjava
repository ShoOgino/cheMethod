  private TextEdit[] getAllRenameEdits(TextEdit declarationEdit) {
    if (!fUpdateReferences) return new TextEdit[] {declarationEdit};

    TempOccurrenceAnalyzer fTempAnalyzer = new TempOccurrenceAnalyzer(fTempDeclarationNode, true);
    fTempAnalyzer.perform();
    int[] referenceOffsets = fTempAnalyzer.getReferenceAndJavadocOffsets();

    TextEdit[] allRenameEdits = new TextEdit[referenceOffsets.length + 1];
    for (int i = 0; i < referenceOffsets.length; i++)
      allRenameEdits[i] = createRenameEdit(referenceOffsets[i]);
    allRenameEdits[referenceOffsets.length] = declarationEdit;
    return allRenameEdits;
  }

