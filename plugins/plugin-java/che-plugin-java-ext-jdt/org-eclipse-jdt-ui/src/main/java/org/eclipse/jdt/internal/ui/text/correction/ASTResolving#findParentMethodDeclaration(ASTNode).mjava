  /**
   * The node's enclosing method declaration or <code>null</code> if the node is not inside a method
   * and is not a method declaration itself.
   *
   * @param node a node
   * @return the enclosing method declaration or <code>null</code>
   */
  public static MethodDeclaration findParentMethodDeclaration(ASTNode node) {
    while (node != null) {
      if (node instanceof MethodDeclaration) {
        return (MethodDeclaration) node;
      } else if (node instanceof BodyDeclaration
          || node instanceof AnonymousClassDeclaration
          || node instanceof LambdaExpression) {
        return null;
      }
      node = node.getParent();
    }
    return null;
  }

