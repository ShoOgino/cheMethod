  /* (non-Javadoc)
   * Method declared in ASTVisitor
   */
  @Override
  public void endVisit(TryStatement node) {
    ASTNode firstSelectedNode = getFirstSelectedNode();
    if (getSelection().getEndVisitSelectionMode(node) == Selection.AFTER) {
      if (firstSelectedNode == node.getBody() || firstSelectedNode == node.getFinally()) {
        invalidSelection(RefactoringCoreMessages.StatementAnalyzer_try_statement);
      } else {
        List<CatchClause> catchClauses = node.catchClauses();
        for (Iterator<CatchClause> iterator = catchClauses.iterator(); iterator.hasNext(); ) {
          CatchClause element = iterator.next();
          if (element == firstSelectedNode || element.getBody() == firstSelectedNode) {
            invalidSelection(RefactoringCoreMessages.StatementAnalyzer_try_statement);
          } else if (element.getException() == firstSelectedNode) {
            invalidSelection(RefactoringCoreMessages.StatementAnalyzer_catch_argument);
          }
        }
      }
    }
    super.endVisit(node);
  }

