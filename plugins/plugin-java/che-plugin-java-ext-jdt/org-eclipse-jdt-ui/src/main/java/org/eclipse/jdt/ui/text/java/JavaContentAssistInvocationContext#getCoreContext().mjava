  /**
   * Returns the {@link org.eclipse.jdt.core.CompletionContext core completion context} if
   * available, <code>null</code> otherwise.
   *
   * <p><strong>Note:</strong> This method may run {@linkplain
   * org.eclipse.jdt.core.ICodeAssist#codeComplete(int, org.eclipse.jdt.core.CompletionRequestor)
   * codeComplete} on the compilation unit.
   *
   * @return the core completion context if available, <code>null</code> otherwise
   */
  public CompletionContext getCoreContext() {
    if (fCollector != null) {
      CompletionContext context = fCollector.getContext();
      if (context != null) {
        if (fCoreContext == null) fCoreContext = context;
        return context;
      }
    }

    if (fCoreContext == null) computeKeywordsAndContext(); // Retrieve the context ourselves

    return fCoreContext;
  }

