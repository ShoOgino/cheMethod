    protected String getFullTypeName() {
      ASTNode node = getNode();
      while (true) {
        node = node.getParent();
        if (node instanceof AbstractTypeDeclaration) {
          String typeName = ((AbstractTypeDeclaration) node).getName().getIdentifier();
          if (getNode() instanceof LambdaExpression) {
            return Messages.format(
                RefactoringCoreMessages.ChangeSignatureRefactoring_lambda_expression, typeName);
          }
          return typeName;
        } else if (node instanceof ClassInstanceCreation) {
          ClassInstanceCreation cic = (ClassInstanceCreation) node;
          return Messages.format(
              RefactoringCoreMessages.ChangeSignatureRefactoring_anonymous_subclass,
              BasicElementLabels.getJavaElementName(ASTNodes.asString(cic.getType())));
        } else if (node instanceof EnumConstantDeclaration) {
          EnumDeclaration ed = (EnumDeclaration) node.getParent();
          return Messages.format(
              RefactoringCoreMessages.ChangeSignatureRefactoring_anonymous_subclass,
              BasicElementLabels.getJavaElementName(ASTNodes.asString(ed.getName())));
        }
      }
    }

