  /**
   * Returns the template store for the code generation templates.
   *
   * @return the template store for the code generation templates
   * @since 3.0
   */
  public TemplateStore getCodeTemplateStore() {
    if (fCodeTemplateStore == null) {
      //            IPreferenceStore store= getPreferenceStore();
      //            boolean alreadyMigrated= store.getBoolean(CODE_TEMPLATES_MIGRATION_KEY);
      //            if (alreadyMigrated)
      fCodeTemplateStore =
          new ContributionTemplateStore(
              getCodeTemplateContextRegistry(), /*store,*/ CODE_TEMPLATES_KEY);
      //            else {
      //                fCodeTemplateStore= new CompatibilityTemplateStore(getCodeTemplateContextRegistry(), store, CODE_TEMPLATES_KEY,
      // getOldCodeTemplateStoreInstance());
      //                store.setValue(CODE_TEMPLATES_MIGRATION_KEY, true);
      //            }

      try {
        fCodeTemplateStore.load();
      } catch (IOException e) {
        log(e);
      }

      //            fCodeTemplateStore.startListeningForPreferenceChanges();

      // compatibility / bug fixing code for duplicated templates
      // TODO remove for 3.0
      //            CompatibilityTemplateStore.pruneDuplicates(fCodeTemplateStore, true);

    }

    return fCodeTemplateStore;
  }

