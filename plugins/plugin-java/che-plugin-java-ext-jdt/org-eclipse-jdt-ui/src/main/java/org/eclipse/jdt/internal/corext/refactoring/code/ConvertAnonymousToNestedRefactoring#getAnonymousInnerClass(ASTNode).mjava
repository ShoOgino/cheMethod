  private static AnonymousClassDeclaration getAnonymousInnerClass(ASTNode node) {
    if (node == null) return null;
    if (node instanceof AnonymousClassDeclaration) return (AnonymousClassDeclaration) node;
    if (node instanceof ClassInstanceCreation) {
      AnonymousClassDeclaration anon =
          ((ClassInstanceCreation) node).getAnonymousClassDeclaration();
      if (anon != null) return anon;
    }
    node = ASTNodes.getNormalizedNode(node);
    if (node.getLocationInParent() == ClassInstanceCreation.TYPE_PROPERTY) {
      AnonymousClassDeclaration anon =
          ((ClassInstanceCreation) node.getParent()).getAnonymousClassDeclaration();
      if (anon != null) return anon;
    }
    return (AnonymousClassDeclaration) ASTNodes.getParent(node, AnonymousClassDeclaration.class);
  }

