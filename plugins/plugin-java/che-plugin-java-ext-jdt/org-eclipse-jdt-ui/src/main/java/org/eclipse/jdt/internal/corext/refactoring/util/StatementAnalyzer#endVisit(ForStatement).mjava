  /* (non-Javadoc)
   * Method declared in ASTVisitor
   */
  @Override
  public void endVisit(ForStatement node) {
    ASTNode[] selectedNodes = getSelectedNodes();
    if (doAfterValidation(node, selectedNodes)) {
      boolean containsExpression = contains(selectedNodes, node.getExpression());
      boolean containsUpdaters = contains(selectedNodes, node.updaters());
      if (contains(selectedNodes, node.initializers()) && containsExpression) {
        invalidSelection(RefactoringCoreMessages.StatementAnalyzer_for_initializer_expression);
      } else if (containsExpression && containsUpdaters) {
        invalidSelection(RefactoringCoreMessages.StatementAnalyzer_for_expression_updater);
      } else if (containsUpdaters && contains(selectedNodes, node.getBody())) {
        invalidSelection(RefactoringCoreMessages.StatementAnalyzer_for_updater_body);
      }
    }
    super.endVisit(node);
  }

