  /**
   * Retrieves a <code>boolean[]</code> attribute from map.
   *
   * @param map the map with <code>&lt;String, String&gt;</code> mapping
   * @param countAttribute the attribute that contains the number of elements
   * @param arrayAttribute the attribute name where the values are stored. The index starting from
   *     '0' is appended to this
   * @param offset the starting index for arrayAttribute
   * @return the <code>boolean[]</code>
   * @throws IllegalArgumentException if any of the attribute does not exist or is not a boolean
   */
  public static boolean[] getBooleanArray(
      Map map, String countAttribute, String arrayAttribute, int offset)
      throws IllegalArgumentException {
    int count = getInt(map, countAttribute);
    boolean[] result = new boolean[count];
    for (int i = 0; i < count; i++) {
      result[i] = getBoolean(map, getAttributeName(arrayAttribute, i + offset));
    }
    return result;
  }

