  private static SearchMatch[] getFieldReferencesIn(
      IJavaElement[] elements, WorkingCopyOwner owner, IProgressMonitor pm)
      throws JavaModelException {
    List<SearchMatch> referencedFields = new ArrayList<SearchMatch>();
    pm.beginTask("", elements.length); //$NON-NLS-1$
    for (int i = 0; i < elements.length; i++) {
      referencedFields.addAll(
          getFieldReferencesIn(elements[i], owner, new SubProgressMonitor(pm, 1)));
    }
    pm.done();
    return referencedFields.toArray(new SearchMatch[referencedFields.size()]);
  }

