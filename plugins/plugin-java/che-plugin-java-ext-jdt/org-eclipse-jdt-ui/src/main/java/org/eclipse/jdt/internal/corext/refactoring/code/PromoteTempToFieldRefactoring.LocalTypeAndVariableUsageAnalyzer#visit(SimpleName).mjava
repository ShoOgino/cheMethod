    @Override
    public boolean visit(SimpleName node) {
      ITypeBinding typeBinding = node.resolveTypeBinding();
      if (typeBinding != null && typeBinding.isLocal()) {
        if (node.isDeclaration()) {
          fLocalDefinitions.add(typeBinding);
        } else if (!fLocalDefinitions.contains(typeBinding)) {
          fLocalReferencesToEnclosing.add(node);
        }
      }
      if (typeBinding != null && typeBinding.isTypeVariable()) {
        if (node.isDeclaration()) {
          fLocalDefinitions.add(typeBinding);
        } else if (!fLocalDefinitions.contains(typeBinding)) {
          if (fMethodTypeVariables.contains(typeBinding)) {
            fLocalReferencesToEnclosing.add(node);
          } else {
            fClassTypeVariablesUsed = true;
          }
        }
      }
      IBinding binding = node.resolveBinding();
      if (binding != null
          && binding.getKind() == IBinding.VARIABLE
          && !((IVariableBinding) binding).isField()) {
        if (node.isDeclaration()) {
          fLocalDefinitions.add(binding);
        } else if (!fLocalDefinitions.contains(binding)) {
          fLocalReferencesToEnclosing.add(node);
        }
      }
      return super.visit(node);
    }

