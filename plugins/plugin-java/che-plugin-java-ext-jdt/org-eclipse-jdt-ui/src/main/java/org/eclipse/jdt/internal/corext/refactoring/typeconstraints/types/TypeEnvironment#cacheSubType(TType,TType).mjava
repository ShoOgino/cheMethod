  private void cacheSubType(TType supertype, TType result) {
    if (fSubTypes == null) return;
    if (supertype == null) supertype = OBJECT_TYPE;

    ArrayList<TType> subtypes = fSubTypes.get(supertype);
    if (subtypes == null) {
      subtypes = new ArrayList<TType>(5);
      fSubTypes.put(supertype, subtypes);
    } else {
      Assert.isTrue(!subtypes.contains(result));
    }
    subtypes.add(result);
  }

