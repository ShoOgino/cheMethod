  private static List<ParameterInfo> createParameterInfoList(IMethod method) {
    try {
      String[] typeNames = method.getParameterTypes();
      String[] oldNames = method.getParameterNames();
      List<ParameterInfo> result = new ArrayList<ParameterInfo>(typeNames.length);
      for (int i = 0; i < oldNames.length; i++) {
        ParameterInfo parameterInfo;
        if (i == oldNames.length - 1 && Flags.isVarargs(method.getFlags())) {
          String varargSignature = typeNames[i];
          int arrayCount = Signature.getArrayCount(varargSignature);
          String baseSignature = Signature.getElementType(varargSignature);
          if (arrayCount > 1)
            baseSignature = Signature.createArraySignature(baseSignature, arrayCount - 1);
          parameterInfo =
              new ParameterInfo(
                  Signature.toString(baseSignature) + ParameterInfo.ELLIPSIS, oldNames[i], i);
        } else {
          parameterInfo = new ParameterInfo(Signature.toString(typeNames[i]), oldNames[i], i);
        }
        result.add(parameterInfo);
      }
      return result;
    } catch (JavaModelException e) {
      JavaPlugin.log(e);
      return new ArrayList<ParameterInfo>(0);
    }
  }

