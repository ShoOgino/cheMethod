  public static BodyDeclaration findParentBodyDeclaration(
      ASTNode node, boolean treatModifiersOutside) {
    StructuralPropertyDescriptor lastLocation = null;

    while (node != null) {
      if (node instanceof BodyDeclaration) {
        BodyDeclaration decl = (BodyDeclaration) node;
        if (!treatModifiersOutside || lastLocation != decl.getModifiersProperty()) {
          return decl;
        }
        treatModifiersOutside = false;
      }
      lastLocation = node.getLocationInParent();
      node = node.getParent();
    }
    return (BodyDeclaration) node;
  }

