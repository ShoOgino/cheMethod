  private IMethod[] searchForDeclarationsOfClashingMethods(IProgressMonitor pm)
      throws CoreException {
    final List<IMethod> results = new ArrayList<IMethod>();
    SearchPattern pattern = createNewMethodPattern();
    IJavaSearchScope scope = RefactoringScopeFactory.create(getMethod().getJavaProject());
    SearchRequestor requestor =
        new SearchRequestor() {
          @Override
          public void acceptSearchMatch(SearchMatch match) throws CoreException {
            Object method = match.getElement();
            if (method
                instanceof
                IMethod) // check for bug 90138: [refactoring] [rename] Renaming method throws
              // internal exception
              results.add((IMethod) method);
            else
              JavaPlugin.logErrorMessage(
                  "Unexpected element in search match: " + match.toString()); // $NON-NLS-1$
          }
        };
    new SearchEngine()
        .search(pattern, SearchUtils.getDefaultSearchParticipants(), scope, requestor, pm);
    return results.toArray(new IMethod[results.size()]);
  }

