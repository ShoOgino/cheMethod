  /**
   * Returns the text file buffer for the specified compilation unit.
   *
   * @param unit the compilation unit whose text file buffer to retrieve
   * @return the associated text file buffer, or <code>null</code> if no text file buffer is managed
   *     for the compilation unit
   */
  public static ITextFileBuffer getTextFileBuffer(final ICompilationUnit unit) {
    Assert.isNotNull(unit);
    final IResource resource = unit.getResource();
    if (resource == null || resource.getType() != IResource.FILE) return null;
    return FileBuffers.getTextFileBufferManager()
        .getTextFileBuffer(resource.getFullPath(), LocationKind.IFILE);
  }

