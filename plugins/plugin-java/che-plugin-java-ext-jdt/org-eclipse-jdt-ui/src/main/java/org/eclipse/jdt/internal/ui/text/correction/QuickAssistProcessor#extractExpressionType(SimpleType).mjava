  private static ITypeBinding extractExpressionType(SimpleType variableIdentifier) {
    ScopeAnalyzer analyzer = new ScopeAnalyzer((CompilationUnit) variableIdentifier.getRoot());
    // get the name of the variable to search the type for
    Name name = null;
    if (variableIdentifier.getName() instanceof SimpleName) {
      name = variableIdentifier.getName();
    } else if (variableIdentifier.getName() instanceof QualifiedName) {
      name = ((QualifiedName) variableIdentifier.getName()).getName();
    }

    // analyze variables which are available in the scope at the position of the quick assist invokation
    IBinding[] declarationsInScope =
        analyzer.getDeclarationsInScope(name.getStartPosition(), ScopeAnalyzer.VARIABLES);
    for (int i = 0; i < declarationsInScope.length; i++) {
      IBinding currentVariable = declarationsInScope[i];
      if (((IVariableBinding) currentVariable).getName().equals(name.getFullyQualifiedName())) {
        return ((IVariableBinding) currentVariable).getType();
      }
    }
    return null;
  }

