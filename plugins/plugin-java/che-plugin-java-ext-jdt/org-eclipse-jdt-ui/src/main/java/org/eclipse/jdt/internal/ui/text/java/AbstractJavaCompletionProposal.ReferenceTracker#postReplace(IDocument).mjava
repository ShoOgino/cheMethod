        /**
         * Called after the document changed occurred. It must be preceded by a call to preReplace().
         *
         * @param document the document on which to track the reference position.
         * @return offset after the replace
         */
        public int postReplace(IDocument document) {
            try {
                document.removePosition(CATEGORY, fPosition);
                document.removePositionUpdater(fPositionUpdater);
                document.removePositionCategory(CATEGORY);

            } catch (BadPositionCategoryException e) {
                // should not happen
                JavaPlugin.log(e);
            }
            return fPosition.getOffset();
        }

