    /**
     * For {@link Name} or {@link org.eclipse.jdt.core.dom.Type} nodes, returns the topmost {@link org.eclipse.jdt.core.dom.Type} node
     * that shares the same type binding as the given node.
     *
     * @param node
     *         an ASTNode
     * @return the normalized {@link org.eclipse.jdt.core.dom.Type} node or the original node
     */
    public static ASTNode getNormalizedNode(ASTNode node) {
        ASTNode current = node;
        // normalize name
        if (QualifiedName.NAME_PROPERTY.equals(current.getLocationInParent())) {
            current = current.getParent();
        }
        // normalize type
        if (QualifiedType.NAME_PROPERTY.equals(current.getLocationInParent())
            || SimpleType.NAME_PROPERTY.equals(current.getLocationInParent())
            || NameQualifiedType.NAME_PROPERTY.equals(current.getLocationInParent())) {
            current = current.getParent();
        }
        // normalize parameterized types
        if (ParameterizedType.TYPE_PROPERTY.equals(current.getLocationInParent())) {
            current = current.getParent();
        }
        return current;
    }

