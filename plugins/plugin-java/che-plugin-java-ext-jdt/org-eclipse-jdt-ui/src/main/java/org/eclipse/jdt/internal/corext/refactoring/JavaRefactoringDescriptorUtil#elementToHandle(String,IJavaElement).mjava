  /**
   * Converts the specified element to an input handle.
   *
   * @param project the project, or <code>null</code> for the workspace
   * @param element the element
   * @return a corresponding input handle Note: if the given project is not the element's project,
   *     then the full handle is returned
   */
  public static String elementToHandle(final String project, final IJavaElement element) {
    final String handle = element.getHandleIdentifier();
    if (project != null && !(element instanceof IJavaProject)) {
      IJavaProject javaProject = element.getJavaProject();
      if (project.equals(javaProject.getElementName())) {
        final String id = javaProject.getHandleIdentifier();
        return handle.substring(id.length());
      }
    }
    return handle;
  }

