  static ICompilationUnit createNewWorkingCopy(
      ICompilationUnit cu, TextChangeManager manager, WorkingCopyOwner owner, SubProgressMonitor pm)
      throws CoreException {
    ICompilationUnit newWc = cu.getWorkingCopy(owner, null);
    String previewContent = manager.get(cu).getPreviewContent(new NullProgressMonitor());
    newWc.getBuffer().setContents(previewContent);
    newWc.reconcile(ICompilationUnit.NO_AST, false, owner, pm);
    return newWc;
  }

