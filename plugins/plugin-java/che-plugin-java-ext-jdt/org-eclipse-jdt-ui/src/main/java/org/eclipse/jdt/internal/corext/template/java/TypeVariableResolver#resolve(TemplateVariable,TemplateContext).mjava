  /*
   * @see org.eclipse.jface.text.templates.TemplateVariableResolver#resolve(org.eclipse.jface.text.templates.TemplateVariable, org.eclipse.jface.text.templates.TemplateContext)
   * @since 3.3
   */
  @Override
  public void resolve(TemplateVariable variable, TemplateContext context) {
    if (!(variable instanceof MultiVariable)) {
      super.resolve(variable, context);
      return;
    }
    MultiVariable mv = (MultiVariable) variable;
    List<String> params = variable.getVariableType().getParams();
    if (params.isEmpty()) {
      super.resolve(variable, context);
      return;
    }

    JavaContext jc = (JavaContext) context;
    String reference = params.get(0);
    int index = 0;
    if (params.size() > 1) {
      String indexParam = params.get(1);
      try {
        index = Integer.parseInt(indexParam);
      } catch (NumberFormatException x) {
      }
    }
    TemplateVariable refVar = jc.getTemplateVariable(reference);
    if (refVar instanceof JavaVariable) {
      JavaVariable jvar = (JavaVariable) refVar;
      resolve(mv, jvar, index, jc);

      return;
    }

    super.resolve(variable, context);
  }

