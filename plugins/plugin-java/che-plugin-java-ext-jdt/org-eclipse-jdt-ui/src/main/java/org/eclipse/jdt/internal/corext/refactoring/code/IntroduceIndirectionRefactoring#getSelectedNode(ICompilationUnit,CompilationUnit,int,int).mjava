  private static ASTNode getSelectedNode(
      ICompilationUnit unit, CompilationUnit root, int offset, int length) {
    ASTNode node = null;
    try {
      if (unit != null) node = checkNode(NodeFinder.perform(root, offset, length, unit));
      else node = checkNode(NodeFinder.perform(root, offset, length));
    } catch (JavaModelException e) {
      // Do nothing
    }
    if (node != null) return node;
    return checkNode(NodeFinder.perform(root, offset, length));
  }

