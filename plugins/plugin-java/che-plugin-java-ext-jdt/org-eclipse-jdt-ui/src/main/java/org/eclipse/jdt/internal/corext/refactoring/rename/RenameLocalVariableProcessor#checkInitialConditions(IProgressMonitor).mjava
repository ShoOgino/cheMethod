	@Override
	public RefactoringStatus checkInitialConditions(IProgressMonitor pm) throws CoreException {
		initAST();
		if (fTempDeclarationNode == null || fTempDeclarationNode.resolveBinding() == null)
			return RefactoringStatus.createFatalErrorStatus(RefactoringCoreMessages.RenameTempRefactoring_must_select_local);

		if (!Checks.isDeclaredIn(fTempDeclarationNode, MethodDeclaration.class)
				&& !Checks.isDeclaredIn(fTempDeclarationNode, Initializer.class)
				&& !Checks.isDeclaredIn(fTempDeclarationNode, LambdaExpression.class)) {
			if (JavaModelUtil.is18OrHigher(fCu.getJavaProject()))
				return RefactoringStatus.createFatalErrorStatus(RefactoringCoreMessages.RenameTempRefactoring_only_in_methods_initializers_and_lambda);

			return RefactoringStatus.createFatalErrorStatus(RefactoringCoreMessages.RenameTempRefactoring_only_in_methods_and_initializers);
		}

		initNames();
		return new RefactoringStatus();
	}

