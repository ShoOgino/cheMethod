  /*
   * @see org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal#computeReplacementString()
   */
  @Override
  protected String computeReplacementString() {
    if (!hasArgumentList()) return super.computeReplacementString();

    // we're inserting a method plus the argument list - respect formatter preferences
    StringBuffer buffer = new StringBuffer();
    appendMethodNameReplacement(buffer);

    FormatterPrefs prefs = getFormatterPrefs();

    if (hasParameters()) {
      setCursorPosition(buffer.length());

      if (prefs.afterOpeningParen) buffer.append(SPACE);

      // don't add the trailing space, but let the user type it in himself - typing the closing paren will exit
      //			if (prefs.beforeClosingParen)
      //				buffer.append(SPACE);
    } else {
      if (prefs.inEmptyList) buffer.append(SPACE);
    }

    buffer.append(RPAREN);

    if (canAutomaticallyAppendSemicolon()) buffer.append(SEMICOLON);

    return buffer.toString();
  }

