  private static SimpleName getSelectedName(
      CompilationUnit compilationUnit, IProblemLocation problem) {
    final ASTNode selection = problem.getCoveredNode(compilationUnit);
    if (selection == null) return null;

    Name name = null;
    if (selection instanceof SimpleType) {
      name = ((SimpleType) selection).getName();
    } else if (selection instanceof NameQualifiedType) {
      name = ((NameQualifiedType) selection).getName();
    } else if (selection instanceof QualifiedType) {
      name = ((QualifiedType) selection).getName();
    } else if (selection instanceof ParameterizedType) {
      final ParameterizedType type = (ParameterizedType) selection;
      final Type raw = type.getType();
      if (raw instanceof SimpleType) name = ((SimpleType) raw).getName();
      else if (raw instanceof NameQualifiedType) name = ((NameQualifiedType) raw).getName();
      else if (raw instanceof QualifiedType) name = ((QualifiedType) raw).getName();
    } else if (selection instanceof Name) {
      name = (Name) selection;
    }
    if (name == null) return null;

    if (name.isSimpleName()) {
      return (SimpleName) name;
    } else {
      return ((QualifiedName) name).getName();
    }
  }

