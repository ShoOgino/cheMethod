  public IJavaSearchScope createWorkspaceScope(int includeMask) {
    if ((includeMask & NO_PROJ) != NO_PROJ) {
      try {
        IJavaProject[] projects =
            JavaCore.create(ResourcesPlugin.getWorkspace().getRoot()).getJavaProjects();
        return SearchEngine.createJavaSearchScope(projects, getSearchFlags(includeMask));
      } catch (JavaModelException e) {
        // ignore, use workspace scope instead
      }
    }
    return SearchEngine.createWorkspaceScope();
  }

