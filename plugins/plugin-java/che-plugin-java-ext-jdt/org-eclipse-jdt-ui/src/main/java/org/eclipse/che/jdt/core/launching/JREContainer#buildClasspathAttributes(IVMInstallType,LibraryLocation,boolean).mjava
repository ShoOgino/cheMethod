  private static IClasspathAttribute[] buildClasspathAttributes(
      final IVMInstallType vm, final LibraryLocation lib, final boolean overrideJavaDoc) {

    List<IClasspathAttribute> classpathAttributes = new LinkedList<IClasspathAttribute>();
    // process the javadoc location
    URL javadocLocation = lib.getJavadocLocation();
    if (overrideJavaDoc && javadocLocation == null) {
      javadocLocation = null; // vm.getJavadocLocation();
    }
    if (javadocLocation != null) {
      IClasspathAttribute javadocCPAttribute =
          JavaCore.newClasspathAttribute(
              IClasspathAttribute.JAVADOC_LOCATION_ATTRIBUTE_NAME,
              javadocLocation.toExternalForm());
      classpathAttributes.add(javadocCPAttribute);
    }
    // process the index location
    URL indexLocation = lib.getIndexLocation();
    if (indexLocation != null) {
      IClasspathAttribute indexCPLocation =
          JavaCore.newClasspathAttribute(
              IClasspathAttribute.INDEX_LOCATION_ATTRIBUTE_NAME, indexLocation.toExternalForm());
      classpathAttributes.add(indexCPLocation);
    }
    return classpathAttributes.toArray(new IClasspathAttribute[classpathAttributes.size()]);
  }

