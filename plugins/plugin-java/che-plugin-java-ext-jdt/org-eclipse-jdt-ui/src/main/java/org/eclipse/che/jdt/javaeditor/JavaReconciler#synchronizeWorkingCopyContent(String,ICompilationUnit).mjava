  private void synchronizeWorkingCopyContent(String filePath, ICompilationUnit workingCopy)
      throws JavaModelException {
    EditorWorkingCopy editorWorkingCopy = editorWorkingCopyManager.getWorkingCopy(filePath);
    if (editorWorkingCopy == null) {
      return;
    }

    String oldContent = workingCopy.getBuffer().getContents();
    String newContent = editorWorkingCopy.getContentAsString();

    TextEdit textEdit = new ReplaceEdit(0, oldContent.length(), newContent);
    workingCopy.applyTextEdit(textEdit, null);
  }

