  // !! Same as in ExtractConstantRefactoring
  private RefactoringStatus checkExpressionFragmentIsRValue() throws JavaModelException {
    switch (Checks.checkExpressionIsRValue(getSelectedExpression().getAssociatedExpression())) {
      case Checks.NOT_RVALUE_MISC:
        return RefactoringStatus.createStatus(
            RefactoringStatus.FATAL,
            RefactoringCoreMessages.ExtractTempRefactoring_select_expression,
            null,
            Corext.getPluginId(),
            RefactoringStatusCodes.EXPRESSION_NOT_RVALUE,
            null);
      case Checks.NOT_RVALUE_VOID:
        return RefactoringStatus.createStatus(
            RefactoringStatus.FATAL,
            RefactoringCoreMessages.ExtractTempRefactoring_no_void,
            null,
            Corext.getPluginId(),
            RefactoringStatusCodes.EXPRESSION_NOT_RVALUE_VOID,
            null);
      case Checks.IS_RVALUE_GUESSED:
      case Checks.IS_RVALUE:
        return new RefactoringStatus();
      default:
        Assert.isTrue(false);
        return null;
    }
  }

