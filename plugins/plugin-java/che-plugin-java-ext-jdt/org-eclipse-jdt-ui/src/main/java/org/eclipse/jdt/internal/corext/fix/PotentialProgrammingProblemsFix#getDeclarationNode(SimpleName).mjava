  /**
   * Returns the declaration node for the originally selected node.
   *
   * @param name the name of the node
   * @return the declaration node
   */
  private static ASTNode getDeclarationNode(SimpleName name) {
    ASTNode parent = name.getParent();
    if (!(parent instanceof AbstractTypeDeclaration)) {

      parent = parent.getParent();
      if (parent instanceof ParameterizedType || parent instanceof Type)
        parent = parent.getParent();
      if (parent instanceof ClassInstanceCreation) {

        final ClassInstanceCreation creation = (ClassInstanceCreation) parent;
        parent = creation.getAnonymousClassDeclaration();
      }
    }
    return parent;
  }

