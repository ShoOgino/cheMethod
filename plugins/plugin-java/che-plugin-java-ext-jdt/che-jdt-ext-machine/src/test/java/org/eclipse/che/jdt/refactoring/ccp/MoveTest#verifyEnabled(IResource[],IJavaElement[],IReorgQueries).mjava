    private JavaMoveProcessor verifyEnabled(IResource[] resources, IJavaElement[] javaElements, IReorgQueries reorgQueries)
            throws JavaModelException {
        assertTrue("move should be enabled", RefactoringAvailabilityTester.isMoveAvailable(resources, javaElements));
        IMovePolicy policy = ReorgPolicyFactory.createMovePolicy(resources, javaElements);
        JavaMoveProcessor processor = policy.canEnable() ? new JavaMoveProcessor(policy) : null;
        if (reorgQueries != null)
            processor.setReorgQueries(reorgQueries);
        assertNotNull(processor);
        return processor;
    }

