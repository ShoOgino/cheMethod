  @Override
  public void onFileOperation(FileEvent event) {
    Path filePath = event.getFile().getLocation();
    Path currentPath = getLocation();

    if (!filePath.equals(currentPath)) {
      return;
    }

    switch (event.getOperationType()) {
      case OPEN:
        {
          if (resourceChangeHandlerRegistration == null) {
            resourceChangeHandlerRegistration =
                eventBus.addHandler(ResourceChangedEvent.getType(), this);
          }

          break;
        }

      case CLOSE:
        {
          if (resourceChangeHandlerRegistration != null) {
            resourceChangeHandlerRegistration.removeHandler();
            resourceChangeHandlerRegistration = null;
          }

          break;
        }
    }
  }

