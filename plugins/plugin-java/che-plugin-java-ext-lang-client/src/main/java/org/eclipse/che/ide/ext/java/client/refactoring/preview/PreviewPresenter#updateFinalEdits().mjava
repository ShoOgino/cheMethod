  private void updateFinalEdits() {
    for (PreviewNode node : fileNodes.values()) {
      Either<ResourceChange, TextEdit> data = node.getData();
      if (data != null && data.isLeft()) {
        if (node.isEnable()) {
          continue;
        }
        ResourceChange left = data.getLeft();
        List<CheResourceChange> selectedResourceChanges =
            workspaceEdit
                .getCheResourceChanges()
                .stream()
                .filter(item -> !item.equals(left))
                .collect(toList());
        workspaceEdit.setCheResourceChanges(selectedResourceChanges);
      } else {
        if (data == null && !node.isEnable()) {
          workspaceEdit.getChanges().remove(node.getUri());
          continue;
        }
        List<PreviewNode> children = node.getChildren();
        for (PreviewNode textNode : children) {
          if (textNode.isEnable()) {
            continue;
          }
          TextEdit right = textNode.getData().getRight();
          List<TextEdit> textNodes =
              workspaceEdit
                  .getChanges()
                  .get(node.getUri())
                  .stream()
                  .filter(item -> !item.equals(right))
                  .collect(toList());

          workspaceEdit.getChanges().put(node.getUri(), textNodes);
        }
      }
    }
  }

