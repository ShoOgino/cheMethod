    private void prepareDiffEditor(@NotNull ChangePreview preview) {
        newFile = compareFactory.createFieOptions();
        newFile.setReadOnly(true);

        oldFile = compareFactory.createFieOptions();
        oldFile.setReadOnly(true);

        refreshComperingFiles(preview);

        CompareConfig compareConfig = compareFactory.createCompareConfig();
        compareConfig.setNewFile(newFile);
        compareConfig.setOldFile(oldFile);
        compareConfig.setShowTitle(true);
        compareConfig.setShowLineStatus(true);

        compare = new CompareWidget(compareConfig, themeAgent.getCurrentThemeId(), loaderFactory);
        diff.add(compare);
    }

