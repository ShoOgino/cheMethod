  /**
   * Updates progress for one task.
   *
   * @param progress updated progress
   */
  public void updateProgress(ProgressReportDto progress) {
    String taskId = progress.getId();
    if (!progresses.containsKey(taskId)) {
      return;
    }
    Pair<ProgressView, Long> updatedView = progresses.get(taskId);
    ProgressView progressView = updatedView.getFirst();
    if (progress.isComplete()) {
      view.remove(progressView);
      progresses.remove(taskId);
      return;
    }
    Long updated = updatedView.getSecond();
    if (currentTimeMillis() - updated < UPDATE_PERIOD) {
      return;
    }
    progressView.updateProgressBar(progress);
  }

