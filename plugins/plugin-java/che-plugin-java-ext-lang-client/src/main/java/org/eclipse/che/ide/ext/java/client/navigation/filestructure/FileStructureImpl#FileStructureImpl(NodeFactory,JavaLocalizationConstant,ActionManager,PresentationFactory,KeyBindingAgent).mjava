  @Inject
  public FileStructureImpl(
      NodeFactory nodeFactory,
      JavaLocalizationConstant locale,
      ActionManager actionManager,
      PresentationFactory presentationFactory,
      KeyBindingAgent keyBindingAgent) {
    this.nodeFactory = nodeFactory;
    this.locale = locale;
    this.actionManager = actionManager;
    this.presentationFactory = presentationFactory;
    this.keyBindingAgent = keyBindingAgent;

    setWidget(UI_BINDER.createAndBindUi(this));

    NodeStorage storage =
        new NodeStorage((NodeUniqueKeyProvider) item -> String.valueOf(item.hashCode()));
    NodeLoader loader = new NodeLoader(Collections.emptySet());
    tree = new Tree(storage, loader);
    tree.setAutoExpand(false);
    tree.getSelectionModel().setSelectionMode(SINGLE);

    tree.addDomHandler(
        event -> {
          if (all(tree.getSelectionModel().getSelectedNodes(), LEAFS)) {
            hide();
          }
        },
        DoubleClickEvent.getType());

    treeContainer.add(tree);

    tree.enableSpeedSearch(true);
    ensureDebugId("file-structure");
  }

