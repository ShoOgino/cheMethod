  /**
   * Returns <code>true</code> if the two regions overlap. Returns <code>false</code> if one of the
   * arguments is <code>null</code>.
   *
   * @param left the left region
   * @param right the right region
   * @return <code>true</code> if the two regions overlap, <code>false</code> otherwise
   */
  public static boolean overlaps(Region left, Region right) {

    if (left == null || right == null) return false;

    int rightEnd = right.getOffset() + right.getLength();
    int leftEnd = left.getOffset() + left.getLength();

    if (right.getLength() > 0) {
      if (left.getLength() > 0) return left.getOffset() < rightEnd && right.getOffset() < leftEnd;
      return right.getOffset() <= left.getOffset() && left.getOffset() < rightEnd;
    }

    if (left.getLength() > 0)
      return left.getOffset() <= right.getOffset() && right.getOffset() < leftEnd;

    return left.getOffset() == right.getOffset();
  }

