  private void setCursorAndActivateEditor(final EditorPartPresenter editor, final int offset) {

    /*
    For some undefined reason we need to wrap cursor and focus setting into timer with 1ms.
    When editors are switching, they don't have enough time to redraw and set focus. Need
    to investigate this problem more deeply. But at this moment this trick works as well.
    */

    new DelayedTask() {
      @Override
      public void onExecute() {
        if (editor instanceof TextEditor) {
          ((TextEditor) editor)
              .getDocument()
              .setSelectedRange(LinearRange.createWithStart(offset).andLength(0), true);
          editor.activate(); // force set focus to the editor
        }
      }
    }.delay(1);
  }

