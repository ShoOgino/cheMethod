  @Override
  public void updateInPerspective(@NotNull ActionEvent e) {
    final Resource resource = appContext.getResource();
    if (resource == null) {
      e.getPresentation().setEnabledAndVisible(false);
      return;
    }

    final Optional<Project> project = resource.getRelatedProject();
    if (!project.isPresent()) {
      e.getPresentation().setEnabledAndVisible(false);
      return;
    }

    e.getPresentation()
        .setEnabledAndVisible(
            isJavaProject(project.get()) && resource.getParentWithMarker(ID).isPresent());
  }

