  private void prepareResourceChangeNodes(List<CheResourceChange> resourceChanges) {
    for (ResourceChange resourceChange : resourceChanges) {
      PreviewNode node = new PreviewNode();
      node.setData(Either.forLeft(resourceChange));
      node.setEnable(true);
      String uniqueId = Document.get().createUniqueId();
      node.setId(uniqueId);
      String current = resourceChange.getCurrent();
      String newUri = resourceChange.getNewUri();
      node.setUri(newUri);
      if (current != null && newUri != null) {
        if (Path.valueOf(current)
            .removeLastSegments(1)
            .equals(Path.valueOf(newUri).removeLastSegments(1))) {
          node.setDescription(
              "Rename resource '"
                  + Path.valueOf(current).lastSegment()
                  + "' to '"
                  + Path.valueOf(newUri).lastSegment()
                  + "'");
        } else {
          node.setDescription(
              "Move resource '"
                  + Path.valueOf(current).lastSegment()
                  + "' to '"
                  + Path.valueOf(newUri).removeLastSegments(1)
                  + "'");
        }
        fileNodes.put(newUri, node);
      } else if (current == null && newUri != null) {
        node.setDescription("Create resource: '" + Path.valueOf(newUri) + "'");
        fileNodes.put(newUri, node);
      }
    }
  }

