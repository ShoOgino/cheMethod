    @Inject
    public FileStructureImpl(NodeFactory nodeFactory, JavaLocalizationConstant locale) {
        super(false);
        this.nodeFactory = nodeFactory;
        this.locale = locale;
        setWidget(UI_BINDER.createAndBindUi(this));

        NodeStorage storage = new NodeStorage(new NodeUniqueKeyProvider() {
            @Override
            public String getKey(@NotNull Node item) {
                return String.valueOf(item.hashCode());
            }
        });
        NodeLoader loader = new NodeLoader(Collections.<NodeInterceptor>emptySet());
        tree = new Tree(storage, loader);
        tree.setAutoExpand(false);
        tree.getSelectionModel().setSelectionMode(SINGLE);

        KeyboardNavigationHandler handler = new KeyboardNavigationHandler() {
            @Override
            public void onEnter(NativeEvent evt) {
                hide();
            }
        };
        tree.addDomHandler(new DoubleClickHandler() {
            @Override
            public void onDoubleClick(DoubleClickEvent event) {
                if (all(tree.getSelectionModel().getSelectedNodes(), LEAFS)) {
                    hide();
                }
            }
        }, DoubleClickEvent.getType());

        handler.bind(tree);

        treeContainer.add(tree);
    }

