    @NotNull
    @Override
    protected Promise<List<Node>> getChildrenImpl() {
        return service.getLibraryChildren(project, getData().getId()).then(new Function<List<JarEntry>, List<Node>>() {
            @Override
            public List<Node> apply(List<JarEntry> entries) throws FunctionException {
                List<Node> nodes = new ArrayList<>();

                for (JarEntry entry : entries) {
                    if (entry.getType() == FOLDER || entry.getType() == PACKAGE) {
                        nodes.add(nodeFactory.newJarFolderNode(entry, getData().getId(), project, getSettings()));
                    } else if (entry.getType() == FILE || entry.getType() == CLASS_FILE) {
                        nodes.add(nodeFactory.newJarFileNode(entry, getData().getId(), project, getSettings()));
                    }
                }

                return nodes;
            }
        });
    }

