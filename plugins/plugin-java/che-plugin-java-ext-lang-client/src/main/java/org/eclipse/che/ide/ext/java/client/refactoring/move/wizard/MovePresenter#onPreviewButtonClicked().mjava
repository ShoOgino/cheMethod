  /** {@inheritDoc} */
  @Override
  public void onPreviewButtonClicked() {
    RefactoringSession session = dtoFactory.createDto(RefactoringSession.class);
    session.setSessionId(refactoringSessionId);
    prepareMovingChanges(session)
        .then(
            new Operation<ChangeCreationResult>() {
              @Override
              public void apply(ChangeCreationResult arg) throws OperationException {
                if (arg.isCanShowPreviewPage()) {
                  previewPresenter.show(refactoringSessionId, refactorInfo);

                  view.close();
                } else {
                  view.showStatusMessage(arg.getStatus());
                }
              }
            })
        .catchError(
            new Operation<PromiseError>() {
              @Override
              public void apply(PromiseError error) throws OperationException {
                notificationManager.notify(
                    locale.showPreviewError(), error.getMessage(), Status.FAIL, FLOAT_MODE);
              }
            });
  }

