  private void checkChildrenState(TreeItem treeItem, Boolean value) {
    int childCount = treeItem.getChildCount();
    if (childCount == 0) {
      return;
    }

    for (int i = 0; i < childCount; i++) {
      TreeItem childItem = treeItem.getChild(i);
      if (!(childItem.getWidget() instanceof FlowPanel)) {
        return;
      }
      FlowPanel childItemContainer = (FlowPanel) childItem.getWidget();

      if (!(childItemContainer.getWidget(0) instanceof CheckBox)) {
        return;
      }
      CheckBox childCheckBox = (CheckBox) childItemContainer.getWidget(0);

      childCheckBox.setValue(value);
      checkChildrenState(childItem, value);
    }
  }

