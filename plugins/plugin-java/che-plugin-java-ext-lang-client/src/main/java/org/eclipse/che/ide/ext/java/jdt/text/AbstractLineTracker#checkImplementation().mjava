  /**
   * Converts the implementation to be a {@link TreeLineTracker} if it isn't yet.
   *
   * @since 3.2
   */
  private void checkImplementation() {
    if (fNeedsConversion) {
      fNeedsConversion = false;
      fDelegate =
          new TreeLineTracker((ListLineTracker) fDelegate) {
            protected DelimiterInfo nextDelimiterInfo(String text, int offset) {
              return AbstractLineTracker.this.nextDelimiterInfo(text, offset);
            }

            public String[] getLegalLineDelimiters() {
              return AbstractLineTracker.this.getLegalLineDelimiters();
            }
          };
    }
  }

