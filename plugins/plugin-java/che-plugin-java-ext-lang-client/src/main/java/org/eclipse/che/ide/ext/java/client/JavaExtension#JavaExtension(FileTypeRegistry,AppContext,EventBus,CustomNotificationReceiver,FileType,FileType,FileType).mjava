  @Inject
  public JavaExtension(
      FileTypeRegistry fileTypeRegistry,
      AppContext appContext,
      EventBus eventBus,
      CustomNotificationReceiver customNotificationReceiver,
      @Named("JavaFileType") FileType javaFile,
      @Named("JavaClassFileType") FileType classFile,
      @Named("JspFileType") FileType jspFile) {
    JavaResources.INSTANCE.css().ensureInjected();

    fileTypeRegistry.registerFileType(javaFile);
    fileTypeRegistry.registerFileType(jspFile);
    fileTypeRegistry.registerFileType(classFile);

    eventBus.addHandler(
        WsAgentServerRunningEvent.TYPE,
        e -> {
          customNotificationReceiver.subscribe();
        });

    if (appContext.getWorkspace().getStatus() == RUNNING) {
      customNotificationReceiver.subscribe();
    }
  }

