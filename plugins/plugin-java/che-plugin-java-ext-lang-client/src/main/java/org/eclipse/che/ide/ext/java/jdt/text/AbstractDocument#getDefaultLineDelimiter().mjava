    /*
     * @see org.eclipse.jface.text.IDocumentExtension4#getDefaultLineDelimiter()
     * @since 3.1
     */
    public String getDefaultLineDelimiter() {

        String lineDelimiter = null;

        try {
            lineDelimiter = getLineDelimiter(0);
        } catch (BadLocationException x) {
        }

        if (lineDelimiter != null)
            return lineDelimiter;

        if (fInitialLineDelimiter != null)
            return fInitialLineDelimiter;

        String sysLineDelimiter = "\n"; //$NON-NLS-1$
        String[] delimiters = getLegalLineDelimiters();
        Assert.isTrue(delimiters.length > 0);
        for (String delimiter : delimiters) {
            if (delimiter.equals(sysLineDelimiter)) {
                lineDelimiter = sysLineDelimiter;
                break;
            }
        }

        if (lineDelimiter == null)
            lineDelimiter = delimiters[0];

        return lineDelimiter;

    }

