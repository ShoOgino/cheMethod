    /** {@inheritDoc} */
    @Override
    public void update(ActionEvent event) {
        event.getPresentation().setVisible(true);

        final Resource[] resources = appContext.getResources();

        if (resources == null || resources.length != 1) {
            event.getPresentation().setEnabled(false);
            return;
        }

        final Resource resource = resources[0];

        final Optional<Project> project = resource.getRelatedProject();

        if (!project.isPresent()) {
            event.getPresentation().setEnabled(false);
            return;
        }

        final Optional<Resource> srcFolder = resource.getParentWithMarker(SourceFolderMarker.ID);

        if (resource.getResourceType() == FILE) {
            event.getPresentation().setEnabled(JavaUtil.isJavaProject(project.get()) && srcFolder.isPresent() && isJavaFile((File)resource));
        } else if (resource instanceof Container) {
            event.getPresentation().setEnabled(JavaUtil.isJavaProject(project.get()) && srcFolder.isPresent());
        }
    }

