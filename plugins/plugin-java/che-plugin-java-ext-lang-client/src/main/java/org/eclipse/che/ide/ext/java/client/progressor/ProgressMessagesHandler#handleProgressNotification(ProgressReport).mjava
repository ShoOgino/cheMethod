  private void handleProgressNotification(ProgressReport progress) {
    if (isNullOrEmpty(progress.getId())) {
      return;
    }
    String progressId = progress.getId();

    if (progressFinished(progress)) {
      progresses.remove(progressId);
      backgroundLoader.updateProgressBar(progress);
      backgroundLoader.removeProgress(progress);
      updateCurrentProgress();
      return;
    }

    if (progress.isComplete()) {
      return;
    }

    if (progresses.isEmpty()) {
      addFirstProgress(progress);
    }

    progresses.put(progressId, Pair.of(progress, currentTimeMillis()));
    backgroundLoader.addProgress(progress);

    if (currentProgress == null) {
      currentProgress = progress;
    }
    String currentTaskId = currentProgress.getId();

    if (progressId.equals(currentTaskId)) {
      currentProgress = progress;
      backgroundLoader.updateProgressBar(currentProgress);
    }
    backgroundLoader.show();
  }

