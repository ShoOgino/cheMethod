    protected Function<Node, Node> openNode(final OpenDeclarationDescriptor descriptor) {
        return new Function<Node, Node>() {
            @Override
            public Node apply(Node node) throws FunctionException {
                if (node instanceof FileReferenceNode) {
                    openFile((VirtualFile)node, descriptor);
                }

                return node;
            }
        };
    }

