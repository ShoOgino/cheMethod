    private void openFile(VirtualFile result, final OpenDeclarationDescriptor descriptor) {
        Log.info(getClass(), result.getPath());
        EditorPartPresenter openedEditor = editorAgent.getOpenedEditor(Path.valueOf(result.getPath()));
        if (openedEditor != null) {
            editorAgent.activateEditor(openedEditor);
            fileOpened(openedEditor, descriptor.getOffset());
        } else {
            editorAgent.openEditor(result, new OpenEditorCallbackImpl() {
                @Override
                public void onEditorOpened(EditorPartPresenter editor) {
                    fileOpened(editor, descriptor.getOffset());
                }
            });
        }
    }

