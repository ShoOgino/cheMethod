    private Promise<Void> updateAfterRefactoring(List<ChangeInfo> changes) {
        return refactoringUpdater.updateAfterRefactoring(changes).then(arg -> {
            final Resource[] resources = refactorInfo != null ? refactorInfo.getResources() : null;
            Project project = null;

            final Resource resource = (resources != null && resources.length == 1) ? resources[0] : appContext.getResource();
            if (resource != null) {
                project = resource.getProject();
            }

            if (project != null) {
                refactorService.reindexProject(project.getLocation().toString());
            }

            setEditorFocus();
        });
    }

