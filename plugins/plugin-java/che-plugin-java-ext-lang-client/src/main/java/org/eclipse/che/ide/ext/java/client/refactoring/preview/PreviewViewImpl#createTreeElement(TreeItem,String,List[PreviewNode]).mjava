  private void createTreeElement(
      final TreeItem root, String changeName, List<PreviewNode> children) {
    FlowPanel element = new FlowPanel();
    element.getElement().getStyle().setFloat(LEFT);
    CheckBox itemCheckBox = new CheckBox();
    itemCheckBox.setValue(true);
    itemCheckBox.getElement().getStyle().setFloat(LEFT);
    itemCheckBox.getElement().getStyle().setMarginTop(3, PX);
    Label name = new Label(changeName);
    name.addClickHandler(
        event -> {
          delegate.onSelectionChanged(containerChanges.get(root));
          root.setSelected(true);
        });
    name.getElement().getStyle().setFloat(LEFT);
    element.add(itemCheckBox);
    element.add(name);

    root.setWidget(element);

    element.getElement().getParentElement().getStyle().setMargin(1, PX);

    itemCheckBox.addValueChangeHandler(
        event -> {
          checkChildrenState(root, event.getValue());
          checkParentState(root, event.getValue());

          PreviewNode change = containerChanges.get(root);
          change.setEnable(event.getValue());

          delegate.onEnabledStateChanged(change);
        });

    if (children.isEmpty()) {
      return;
    }

    for (PreviewNode child : children) {
      TreeItem treeItem = new TreeItem();
      containerChanges.put(treeItem, child);
      createTreeElement(treeItem, child.getDescription(), child.getChildren());
      root.addItem(treeItem);
    }
  }

