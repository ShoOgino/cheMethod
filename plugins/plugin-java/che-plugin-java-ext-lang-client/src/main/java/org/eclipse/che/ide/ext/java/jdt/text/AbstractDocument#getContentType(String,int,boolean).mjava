    /*
     * @see org.eclipse.jface.text.IDocumentExtension3#getZeroLengthContentType(java .lang.String, int)
     * @since 3.0
     */
    public String getContentType(String partitioning, int offset, boolean preferOpenPartitions)
            throws BadLocationException, BadPartitioningException {
        if ((0 > offset) || (offset > getLength()))
            throw new BadLocationException();

        DocumentPartitioner partitioner = getDocumentPartitioner(partitioning);

        // if (partitioner instanceof IDocumentPartitionerExtension2)
        // {
        // checkStateOfPartitioner(partitioner, partitioning);
        // return ((IDocumentPartitionerExtension2)partitioner).getContentType(offset, preferOpenPartitions);
        // }
        // else
        if (partitioner != null) {
            checkStateOfPartitioner(partitioner, partitioning);
            return partitioner.getContentType(offset);
        } else if (DEFAULT_PARTITIONING.equals(partitioning))
            return DEFAULT_CONTENT_TYPE;
        else
            throw new BadPartitioningException();
    }

