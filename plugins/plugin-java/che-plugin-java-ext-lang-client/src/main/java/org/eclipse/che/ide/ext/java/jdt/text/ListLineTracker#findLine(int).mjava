  /**
   * Binary search for the line at a given offset.
   *
   * @param offset the offset whose line should be found
   * @return the line of the offset
   */
  private int findLine(int offset) {

    if (fLines.size() == 0) return -1;

    int left = 0;
    int right = fLines.size() - 1;
    int mid = 0;
    Line line = null;

    while (left < right) {

      mid = (left + right) / 2;

      line = (Line) fLines.get(mid);
      if (offset < line.offset) {
        if (left == mid) right = left;
        else right = mid - 1;
      } else if (offset > line.offset) {
        if (right == mid) left = right;
        else left = mid + 1;
      } else if (offset == line.offset) {
        left = right = mid;
      }
    }

    line = (Line) fLines.get(left);
    if (line.offset > offset) --left;
    return left;
  }

