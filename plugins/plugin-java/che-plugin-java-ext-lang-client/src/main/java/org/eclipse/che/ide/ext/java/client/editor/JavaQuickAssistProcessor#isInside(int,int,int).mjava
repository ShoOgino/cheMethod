  /**
   * Tells is the offset is inside the (inclusive) range defined by start-end.
   *
   * @param offset the offset
   * @param start the start of the range
   * @param end the end of the range
   * @return true iff offset is inside
   */
  private static boolean isInside(int offset, int start, int end) {
    return offset == start
        || offset == end
        || (offset > start && offset < end); // make sure to handle 0-length ranges
  }

