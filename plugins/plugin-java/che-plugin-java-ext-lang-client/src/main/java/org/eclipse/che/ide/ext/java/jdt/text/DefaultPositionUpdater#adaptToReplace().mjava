    /**
     * Adapts the currently investigated position to the replace operation. First it checks whether the change replaces only a
     * non-zero range inside the range of the position (including the borders). If not, it performs first the deletion of the
     * previous text and afterwards the insertion of the new text.
     */
    protected void adaptToReplace() {

        if (fLength > 0 && fPosition.offset <= fOffset && fOffset + fLength <= fPosition.offset + fPosition.length) {

            fPosition.length += fReplaceLength - fLength;

        } else {

            if (fLength > 0)
                adaptToRemove();

            if (fReplaceLength > 0)
                adaptToInsert();
        }
    }

