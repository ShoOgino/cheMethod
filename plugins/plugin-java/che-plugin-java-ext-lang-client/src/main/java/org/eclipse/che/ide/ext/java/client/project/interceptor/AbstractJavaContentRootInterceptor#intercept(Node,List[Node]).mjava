    @Override
    public Promise<List<Node>> intercept(Node parent, List<Node> children) {
        List<Node> nodes = new ArrayList<>();

        for (Node child : children) {
            ContentRoot contentRoot = getSourceType(child);

            if (contentRoot == null) {
                nodes.add(child);
                continue;
            }

            FolderReferenceNode oldNode = (FolderReferenceNode)child;

            JavaNodeSettings settings = (JavaNodeSettings)nodeManager.getJavaSettingsProvider().getSettings();

            nodes.add(nodeManager.getJavaNodeFactory().newSourceFolderNode(oldNode.getData(),
                                                                           oldNode.getProjectConfig(),
                                                                           settings,
                                                                           contentRoot));
        }

        return Promises.resolve(nodes);
    }

