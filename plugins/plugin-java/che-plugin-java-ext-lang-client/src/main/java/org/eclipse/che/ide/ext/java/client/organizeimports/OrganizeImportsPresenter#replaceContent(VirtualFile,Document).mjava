    private void replaceContent(VirtualFile file, final Document document) {
        if (file instanceof File) {
            file.getContent().then(new Operation<String>() {
                @Override
                public void apply(String content) throws OperationException {
                    document.replace(0, document.getContents().length(), content);
                }
            });
        }
    }

