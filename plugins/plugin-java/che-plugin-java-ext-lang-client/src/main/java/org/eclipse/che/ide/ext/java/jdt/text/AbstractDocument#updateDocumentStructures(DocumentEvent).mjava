    /**
     * Updates document partitioning and document positions according to the specification given by the document event.
     *
     * @param event
     *         the document event describing the change to which structures must be adapted
     */
    protected void updateDocumentStructures(DocumentEvent event) {

        if (fDocumentPartitioners != null) {
            fDocumentPartitioningChangedEvent = new DocumentPartitioningChangedEvent(this);
            for (String partitioning : fDocumentPartitioners.keySet()) {
                DocumentPartitioner partitioner = fDocumentPartitioners.get(partitioning);

                if (partitioner.documentChanged(event))
                    fDocumentPartitioningChangedEvent
                            .setPartitionChange(partitioning, 0, event.getDocument().getLength());
            }
        }

        if (fPositions.size() > 0)
            updatePositions(event);
    }

