  @Override
  public Promise<Map<String, String>> loadPreferences() {
    List<String> options = new ArrayList<>();
    for (ErrorWarningsOptions option : ErrorWarningsOptions.values()) {
      options.add(option.toString());
    }

    return service
        .getJavaCoreOptions(options)
        .then(
            (Function<JavaCoreOptions, Map<String, String>>)
                javaCoreOptions -> {
                  persistedPreferences.putAll(javaCoreOptions.getOptions());
                  return javaCoreOptions.getOptions();
                });
  }

