    /*
     * @see org.eclipse.jface.text.IDocumentExtension3#computeZeroLengthPartitioning (java.lang.String, int, int)
     * @since 3.0
     */
    public TypedRegion[] computePartitioning(String partitioning, int offset, int length,
                                             boolean includeZeroLengthPartitions) throws BadLocationException, BadPartitioningException {
        if ((0 > offset) || (0 > length) || (offset + length > getLength()))
            throw new BadLocationException();

        DocumentPartitioner partitioner = getDocumentPartitioner(partitioning);
        //
        // if (partitioner instanceof IDocumentPartitionerExtension2)
        // {
        // checkStateOfPartitioner(partitioner, partitioning);
        // return ((IDocumentPartitionerExtension2)partitioner).computePartitioning(offset, length,
        // includeZeroLengthPartitions);
        // }
        // else
        if (partitioner != null) {
            checkStateOfPartitioner(partitioner, partitioning);
            return partitioner.computePartitioning(offset, length);
        } else if (DEFAULT_PARTITIONING.equals(partitioning))
            return new TypedRegionImpl[]{new TypedRegionImpl(offset, length, DEFAULT_CONTENT_TYPE)};
        else
            throw new BadPartitioningException();
    }

