    /**
     * Make Organize imports operation. If the operation doesn't have conflicts all imports will be applied
     * otherwise a special window will be showed for resolving conflicts.
     *
     * @param editor
     *         current active editor
     */
    public void organizeImports(EditorPartPresenter editor) {
        this.editor = editor;
        this.document = ((TextEditor)editor).getDocument();
        this.file = editor.getEditorInput().getFile();

        if (file instanceof Resource) {
            final Optional<Project> project = ((Resource)file).getRelatedProject();

            final Optional<Resource> srcFolder = ((Resource)file).getParentWithMarker(SourceFolderMarker.ID);

            if (!srcFolder.isPresent()) {
                return;
            }

            final String fqn = JavaUtil.resolveFQN((Container)srcFolder.get(), (Resource)file);

            eventBus.fireEvent(newFileTrackingSuspendEvent());
            javaCodeAssistClient.organizeImports(project.get().getLocation().toString(), fqn)
                                .then(new Operation<OrganizeImportResult>() {
                                    @Override
                                    public void apply(OrganizeImportResult result) throws OperationException {
                                        if (result.getConflicts() != null && !result.getConflicts().isEmpty()) {
                                            show(result.getConflicts());
                                        } else {
                                            applyChanges(document, result.getChanges());
                                        }
                                        eventBus.fireEvent(newFileTrackingResumeEvent());
                                    }
                                })
                                .catchError(new Operation<PromiseError>() {
                                    @Override
                                    public void apply(PromiseError arg) throws OperationException {
                                        String title = locale.failedToProcessOrganizeImports();
                                        String message = arg.getMessage();
                                        notificationManager.notify(title, message, FAIL, FLOAT_MODE);
                                        eventBus.fireEvent(newFileTrackingResumeEvent());
                                    }
                                });
        }
    }

