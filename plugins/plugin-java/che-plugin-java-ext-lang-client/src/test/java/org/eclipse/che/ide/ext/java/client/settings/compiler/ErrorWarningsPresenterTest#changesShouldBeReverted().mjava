    @Test
    public void changesShouldBeReverted() throws Exception {
        presenter.go(container);

        verify(mapPromise).then(operationCaptor.capture());
        operationCaptor.getValue().apply(getAllProperties());

        presenter.onPropertyChanged(COMPILER_UNUSED_IMPORT.toString(), VALUE_1);
        reset(widget);

        presenter.revertChanges();

        verify(widget, times(18)).selectPropertyValue(anyString());

        assertThat(presenter.isDirty(), equalTo(false));
    }

