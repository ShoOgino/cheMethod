    @Test
    public void showConfirmDialogIfHaveUnsavedChanges() throws Exception {
        when(page1.isDirty()).thenReturn(true);

        ConfirmDialog confirmDialog = Mockito.mock(ConfirmDialog.class);
        when(dialogFactory.createConfirmDialog(anyString(),
                                               anyString(),
                                               anyString(),
                                               anyString(),
                                               Matchers.<ConfirmCallback>anyObject(),
                                               Matchers.<CancelCallback>anyObject()))
                .thenReturn(confirmDialog);

        presenter.onCloseClicked();

        verify(confirmDialog).show();
        verify(locale).unsavedChangesTitle();
        verify(locale).messagesPromptSaveChanges();
        verify(locale).buttonSave();
    }

