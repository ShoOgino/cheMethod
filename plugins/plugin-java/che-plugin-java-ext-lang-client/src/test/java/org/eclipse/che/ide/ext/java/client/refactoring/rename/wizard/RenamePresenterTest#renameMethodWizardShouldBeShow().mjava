  @Test
  public void renameMethodWizardShouldBeShow() throws Exception {
    when(session.getWizardType()).thenReturn(RenameRefactoringSession.RenameWizard.METHOD);

    RefactorInfo refactorInfo =
        RefactorInfo.of(
            MoveType.REFACTOR_MENU, RefactoredItemType.COMPILATION_UNIT, new Resource[] {file});

    renamePresenter.show(refactorInfo);

    verifyPreparingRenameRefactoringDto();

    verify(refactorService).createRenameRefactoring(createRenameRefactoringDto);
    verify(renameRefactoringSessionPromise).then(renameRefactoringSessionCaptor.capture());
    renameRefactoringSessionCaptor.getValue().apply(session);

    verifyPreparingWizard();

    verify(locale).renameMethodTitle();
    verify(view).setTitle(nullable(String.class));
    verify(view).setVisibleKeepOriginalPanel(true);

    verify(view).show();
  }

