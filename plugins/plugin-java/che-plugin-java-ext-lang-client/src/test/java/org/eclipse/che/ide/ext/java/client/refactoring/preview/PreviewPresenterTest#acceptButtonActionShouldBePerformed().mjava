    @Test
    public void acceptButtonActionShouldBePerformed() throws Exception {
        List<ChangeInfo> changes = new ArrayList<>();
        VirtualFile virtualFile = Mockito.mock(VirtualFile.class);
        EditorInput editorInput = Mockito.mock(EditorInput.class);
        when(refactoringStatus.getSeverity()).thenReturn(OK);
        when(refactoringStatus.getChanges()).thenReturn(changes);
        when(editor.getEditorInput()).thenReturn(editorInput);
        when(editorInput.getFile()).thenReturn(virtualFile);

        presenter.onAcceptButtonClicked();

        verify(refactoringStatusPromise).then(refactoringStatusOperation.capture());
        refactoringStatusOperation.getValue().apply(refactoringStatus);
        verify(view).hide();
        verify(refactoringUpdater).updateAfterRefactoring(null, changes);
    }

