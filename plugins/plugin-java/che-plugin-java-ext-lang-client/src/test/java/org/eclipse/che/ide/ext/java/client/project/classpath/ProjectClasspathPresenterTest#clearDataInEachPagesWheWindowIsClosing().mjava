    @Test
    public void clearDataInEachPagesWheWindowIsClosing() throws Exception {
        when(page1.isDirty()).thenReturn(true);
        when(page2.isDirty()).thenReturn(true);

        presenter.onDoneClicked();

        verify(page1).storeChanges();
        verify(page2).storeChanges();
        verify(classpathResolve).updateClasspath();
        verify(updatePromise).then(updateCapture.capture());
        updateCapture.getValue().apply(null);

        verify(view).hideWindow();
        verify(page1).clearData();
        verify(page2).clearData();
    }

