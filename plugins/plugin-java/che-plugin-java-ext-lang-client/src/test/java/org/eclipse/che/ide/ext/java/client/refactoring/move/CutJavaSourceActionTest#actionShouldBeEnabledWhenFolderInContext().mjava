  @Test
  public void actionShouldBeEnabledWhenFolderInContext() throws Exception {
    final Container container = mock(Container.class);
    when(updateActionEvent.getPresentation()).thenReturn(presentation);
    when(appContext.getResources()).thenReturn(new Resource[] {container});
    when(container.getRelatedProject()).thenReturn(Optional.of(project));
    when(container.getParentWithMarker(eq(SourceFolderMarker.ID)))
        .thenReturn(Optional.of(srcFolder));

    final Map<String, List<String>> attributes = new HashMap<>();
    attributes.put(Constants.LANGUAGE, Collections.singletonList("java"));

    when(project.getAttributes()).thenReturn(attributes);

    action.update(updateActionEvent);

    verify(presentation).setEnabled(eq(true));
  }

