  @Test
  public void moveDestinationPathChangedWithOKStatus() throws Exception {
    when(refactoringStatus.getSeverity()).thenReturn(OK);

    presenter.setMoveDestinationPath(DESTINATION, PROJECT_PATH);

    verify(destination).setType(ReorgDestination.DestinationType.PACKAGE);
    verify(destination).setSessionId(nullable(String.class));
    verify(destination).setProjectPath(PROJECT_PATH);
    verify(destination).setDestination(DESTINATION);

    verify(refactoringStatusPromise).then(refactoringStatusOperation.capture());
    refactoringStatusOperation.getValue().apply(refactoringStatus);
    verify(moveView).setEnableAcceptButton(true);
    verify(moveView).setEnablePreviewButton(true);
    verify(moveView).clearStatusMessage();
  }

