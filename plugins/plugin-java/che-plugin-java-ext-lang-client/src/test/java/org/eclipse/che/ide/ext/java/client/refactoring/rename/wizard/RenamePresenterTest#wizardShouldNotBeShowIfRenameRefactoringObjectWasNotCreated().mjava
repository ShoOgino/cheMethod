  @Test
  public void wizardShouldNotBeShowIfRenameRefactoringObjectWasNotCreated() throws Exception {
    RefactorInfo refactorInfo =
        RefactorInfo.of(
            MoveType.REFACTOR_MENU, RefactoredItemType.COMPILATION_UNIT, new Resource[] {file});

    renamePresenter.show(refactorInfo);

    verify(createRenameRefactoringDto).setRefactorLightweight(false);
    verify(createRenameRefactoringDto).setPath(nullable(String.class));
    verify(createRenameRefactoringDto).setType(COMPILATION_UNIT);
    verify(createRenameRefactoringDto).setProjectPath(eq("/project"));

    verify(refactorService).createRenameRefactoring(createRenameRefactoringDto);
    verify(renameRefactoringSessionPromise).catchError(promiseErrorCaptor.capture());
    promiseErrorCaptor.getValue().apply(promiseError);
    verify(notificationManager)
        .notify(
            nullable(String.class),
            nullable(String.class),
            any(StatusNotification.Status.class),
            any(DisplayMode.class));
  }

