    @Test
    public void testShouldDisplayNoImplementations() throws Exception {
        when(editorPartPresenter.getEditorInput()).thenReturn(editorInput);
        when(editorInput.getFile()).thenReturn(file);
        when(file.getRelatedProject()).thenReturn(Optional.of(relatedProject));
        when(file.getParentWithMarker(eq(SourceFolderMarker.ID))).thenReturn(Optional.of(srcFolder));
        when(file.getLocation()).thenReturn(Path.valueOf("/a/b/c/d/file.java"));
        when(srcFolder.getLocation()).thenReturn(Path.valueOf("/a/b"));
        when(file.getResourceType()).thenReturn(Resource.FILE);
        when(file.getExtension()).thenReturn("java");
        when(file.getName()).thenReturn("file.java");
        when(relatedProject.getLocation()).thenReturn(Path.valueOf("/a"));
        when(editorPartPresenter.getCursorOffset()).thenReturn(123);
        when(implementationsPromise.then(any(Operation.class))).thenReturn(implementationsPromise);
        when(javaNavigationService.getImplementations(eq(Path.valueOf("/a")), eq("c.d.file"), eq(123))).thenReturn(implementationsPromise);

        when(implementationDescriptor.getImplementations()).thenReturn(Collections.emptyList());
        when(implementationDescriptor.getMemberName()).thenReturn("memberName");
        when(locale.openImplementationWindowTitle(eq("memberName"), eq(1))).thenReturn("foo");
        when(type1.getFlags()).thenReturn(-1);

        when(dtoFactory.createDto(eq(Type.class))).thenReturn(type1);
        when(editorPartPresenter.getPositionConverter()).thenReturn(positionConverter);
        when(positionConverter.offsetToPixel(anyInt())).thenReturn(new PositionConverter.PixelCoordinates(1, 1));

        presenter.show(editorPartPresenter);
        verify(implementationsPromise).then(implementationsOperation.capture());
        implementationsOperation.getValue().apply(implementationDescriptor);

        verify(locale, times(2)).noImplementations();
    }

