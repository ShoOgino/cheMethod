    @Before
    public void setUp() throws Exception {
        when(editorPartPresenter.getEditorInput()).thenReturn(editorInput);
        when(editorPartPresenter.getDocument()).thenReturn(document);
        when(editorInput.getFile()).thenReturn(virtualFile);
        when(virtualFile.getName()).thenReturn(CLASS_NAME);
        when(virtualFile.getProject()).thenReturn(hasProjectConfig);
        when(hasProjectConfig.getProjectConfig()).thenReturn(profileConfig);
        when(profileConfig.getPath()).thenReturn(PROJECT_PATH);
        when(javaNavigationService.getCompilationUnit(anyString(), anyString(), anyBoolean())).thenReturn(promice);
        when(promice.then(Matchers.<Operation<CompilationUnit>>anyObject())).thenReturn(promice);
        when(promice.catchError(Matchers.<Operation<PromiseError>>anyObject())).thenReturn(promice);
        when(context.getCurrentProject()).thenReturn(currentProject);
        when(currentProject.getProjectConfig()).thenReturn(profileConfig);
        when(member.getLibId()).thenReturn(1);
        when(member.getRootPath()).thenReturn(PROJECT_PATH);
        when(member.getFileRegion()).thenReturn(region);
        when(region.getOffset()).thenReturn(1);
        when(region.getLength()).thenReturn(2);
        when(loaderFactory.newLoader()).thenReturn(loader);


        presenter = new FileStructurePresenter(view,
                                               javaNavigationService,
                                               context,
                                               editorAgent,
                                               loaderFactory,
                                               projectExplorer,
                                               javaNodeManager);
    }

