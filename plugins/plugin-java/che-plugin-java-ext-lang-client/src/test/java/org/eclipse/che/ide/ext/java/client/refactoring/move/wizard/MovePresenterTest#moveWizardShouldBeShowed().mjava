    @Test
    public void moveWizardShouldBeShowed() throws Exception {
        List<JavaProject> javaProjects = new ArrayList<>();
        JavaProject javaProject = Mockito.mock(JavaProject.class);
        javaProjects.add(javaProject);

        when(sessionPromise.then(Matchers.<Operation<String>>anyObject())).thenReturn(sessionPromise);
        when(sourceFileNode.getName()).thenReturn("file.name");
        when(javaProject.getPath()).thenReturn(PROJECT_PATH);

        presenter.show(refactorInfo);

        verify(moveView).setEnablePreviewButton(false);
        verify(moveView).setEnableAcceptButton(false);
        verify(moveView).clearErrorLabel();
        verify(moveRefactoring).setProjectPath(PROJECT_PATH);
        verify(refactorService).createMoveRefactoring(moveRefactoring);
        verify(packageNode).getStorablePath();

        verify(sessionPromise).then(sessionOperation.capture());
        sessionOperation.getValue().apply("sessionId");

        verify(projectsPromise).then(projectsOperation.capture());
        projectsOperation.getValue().apply(javaProjects);

        verify(moveView).setTreeOfDestinations(any());
        verify(moveView).show(refactorInfo);
    }

