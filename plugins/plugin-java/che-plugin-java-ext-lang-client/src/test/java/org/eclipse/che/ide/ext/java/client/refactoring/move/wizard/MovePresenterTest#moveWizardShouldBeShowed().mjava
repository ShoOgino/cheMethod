    @Test
    public void moveWizardShouldBeShowed() throws Exception {
        List<JavaProject> javaProjects = new ArrayList<>();
        JavaProject javaProject = Mockito.mock(JavaProject.class);
        javaProjects.add(javaProject);

        when(refactorInfo.getResources()).thenReturn(new Resource[]{file});
        when(file.getParentWithMarker(eq(SourceFolderMarker.ID))).thenReturn(Optional.of(srcFolder));
        when(file.getLocation()).thenReturn(Path.valueOf("/project/src/a/b/C.java"));
        when(file.getName()).thenReturn("C.java");
        when(file.getExtension()).thenReturn("java");
        when(srcFolder.getLocation()).thenReturn(Path.valueOf("/project/src"));
        when(file.getResourceType()).thenReturn(Resource.FILE);

        when(file.getRelatedProject()).thenReturn(Optional.of(relatedProject));
        when(relatedProject.getLocation()).thenReturn(Path.valueOf("/project"));

        presenter.show(refactorInfo);

        verify(sessionPromise).then(sessionOperation.capture());
        sessionOperation.getValue().apply("sessionId");

        verify(projectsPromise).then(projectsOperation.capture());
        projectsOperation.getValue().apply(javaProjects);

        verify(moveView).setTreeOfDestinations(any());
        verify(moveView).show(refactorInfo);
    }

