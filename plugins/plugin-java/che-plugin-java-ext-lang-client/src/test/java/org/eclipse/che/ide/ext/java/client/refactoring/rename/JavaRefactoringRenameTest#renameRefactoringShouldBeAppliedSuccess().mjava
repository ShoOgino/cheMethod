  @Test
  public void renameRefactoringShouldBeAppliedSuccess() throws OperationException {
    when(result.getSeverity()).thenReturn(OK);
    List<ChangeInfo> changes = new ArrayList<>();
    when(result.getChanges()).thenReturn(changes);

    refactoringRename.refactor(textEditor);

    mainCheckRenameRefactoring();

    verify(refactoringUpdater).updateAfterRefactoring(Matchers.<List<ChangeInfo>>any());
    verify(eventBus).addHandler(FileEvent.TYPE, refactoringRename);

    verify(updateAfterRefactoringPromise).then(updateAfterRefactoringOperation.capture());
    updateAfterRefactoringOperation.getValue().apply(null);
    verify(refactoringUpdater).handleMovingFiles(anyList());
    verify(clientServerEventService).sendFileTrackingResumeEvent();
  }

