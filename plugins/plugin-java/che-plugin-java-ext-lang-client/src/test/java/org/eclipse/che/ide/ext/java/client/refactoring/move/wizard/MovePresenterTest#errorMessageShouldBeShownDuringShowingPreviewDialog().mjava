  @Test
  public void errorMessageShouldBeShownDuringShowingPreviewDialog() throws OperationException {
    presenter.onPreviewButtonClicked();

    verify(changeCreationResultPromise).catchError(promiseErrorCaptor.capture());
    promiseErrorCaptor.getValue().apply(promiseError);

    verify(locale).showPreviewError();
    verify(promiseError).getMessage();
    verify(notificationManager)
        .notify(nullable(String.class), nullable(String.class), eq(FAIL), eq(FLOAT_MODE));
  }

