    @Test
    public void shouldBeAbleToSetPluginConfiguration() throws Exception {
        final File pom = getTestPomFile();
        write(pom, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
                   "<project>\n" +
                   "    <build>\n" +
                   "        <plugins>\n" +
                   "            <plugin>\n" +
                   "                <artifactId>artifactId</artifactId>\n" +
                   "                <groupId>groupId</groupId>\n" +
                   "                <configuration>\n" +
                   "                    <item1>value1</item1>\n" +
                   "                    <item2>value2</item2>\n" +
                   "                </configuration>\n" +
                   "            </plugin>\n" +
                   "        </plugins>\n" +
                   "    </build>\n" +
                   "</project>");
        final Model model = Model.readFrom(pom);

        final Plugin plugin = model.getBuild()
                                   .getPlugins()
                                   .get(0);
        plugin.setConfiguration(singletonMap("newItem", "value"));
        model.save();

        assertEquals(read(pom), "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
                                "<project>\n" +
                                "    <build>\n" +
                                "        <plugins>\n" +
                                "            <plugin>\n" +
                                "                <artifactId>artifactId</artifactId>\n" +
                                "                <groupId>groupId</groupId>\n" +
                                "                <configuration>\n" +
                                "                    <newItem>value</newItem>\n" +
                                "                </configuration>\n" +
                                "            </plugin>\n" +
                                "        </plugins>\n" +
                                "    </build>\n" +
                                "</project>");
        assertEquals(plugin.getConfiguration(), singletonMap("newItem", "value"));
    }

