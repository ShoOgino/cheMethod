    /**
     * Publishes the message over WebSocket connection.
     *
     * @param data
     *         the data to be sent to the client
     * @param channelID
     *         channel identifier
     */
    private static void publishWebSocketMessage(Object data, String channelID) {
        ChannelBroadcastMessage message = new ChannelBroadcastMessage();
        message.setChannel(channelID);
        message.setType(ChannelBroadcastMessage.Type.NONE);
        if (data instanceof String) {
            message.setBody((String)data);
        } else if (data != null) {
            message.setBody(toJson(data));
        }

        try {
            WSConnectionContext.sendMessage(message);
        } catch (Exception e) {
            LOG.error("Failed to send message over WebSocket.", e);
        }
    }

