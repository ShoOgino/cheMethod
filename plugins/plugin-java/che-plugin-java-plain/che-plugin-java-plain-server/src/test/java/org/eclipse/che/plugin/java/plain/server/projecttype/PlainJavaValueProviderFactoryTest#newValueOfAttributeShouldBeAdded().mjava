    @Test
    public void newValueOfAttributeShouldBeAdded() throws Exception {
        Map<String, List<String>> attributes = new HashMap<>();

        attributes.put(SOURCE_FOLDER, Arrays.asList("src1", "src2"));
        RegisteredProject registeredProject = mock(RegisteredProject.class);
        ProjectRegistry pr = mock(ProjectRegistry.class);

        when(projectRegistryProvider.get()).thenReturn(pr);
        when(pr.getProject(anyString())).thenReturn(registeredProject);
        when(registeredProject.getAttributes()).thenReturn(attributes);
        List<String> sources = new ArrayList<>();
        sources.add("src3");
        plainJavaValueProviderFactory.newInstance(rootProjectFolder).setValues(SOURCE_FOLDER, sources);

        assertThat(attributes.get(SOURCE_FOLDER).containsAll(Arrays.asList("src3", "src1", "src2")));
    }

