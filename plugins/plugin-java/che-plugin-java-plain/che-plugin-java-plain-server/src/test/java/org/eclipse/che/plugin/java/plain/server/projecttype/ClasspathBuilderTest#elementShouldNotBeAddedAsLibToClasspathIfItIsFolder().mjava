  @Test
  public void elementShouldNotBeAddedAsLibToClasspathIfItIsFolder() throws Exception {
    library.add(LIBRARY);
    IFolder libraryFolder1 = mock(IFolder.class);
    IResourceProxy iResourceProxy = mock(IResourceProxy.class);

    when(iProject.getFolder(LIBRARY)).thenReturn(libraryFolder1);
    when(libraryFolder1.exists()).thenReturn(true);
    when(iResourceProxy.getType()).thenReturn(IResource.FOLDER);

    classpathBuilder.generateClasspath(iJavaProject, sourceFolders, library);

    ArgumentCaptor<IResourceProxyVisitor> resourceProxyVisitorArgumentCaptor =
        ArgumentCaptor.forClass(IResourceProxyVisitor.class);
    verify(libraryFolder1)
        .accept(resourceProxyVisitorArgumentCaptor.capture(), eq(IContainer.INCLUDE_PHANTOMS));

    resourceProxyVisitorArgumentCaptor.getValue().visit(iResourceProxy);
    verify(iResourceProxy).getType();

    verifyIfOnlyJREContainerInClasspath();
  }

