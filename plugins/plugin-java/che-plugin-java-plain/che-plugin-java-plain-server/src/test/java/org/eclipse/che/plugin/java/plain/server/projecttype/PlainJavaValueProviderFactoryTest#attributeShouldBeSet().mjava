  @Test
  public void attributeShouldBeSet() throws Exception {
    Map<String, List<String>> attributes = new HashMap<>();
    RegisteredProject registeredProject = mock(RegisteredProject.class);
    ProjectRegistry pr = mock(ProjectRegistry.class);

    when(projectRegistryProvider.get()).thenReturn(pr);
    when(pr.getProject(anyString())).thenReturn(registeredProject);
    when(registeredProject.getAttributes()).thenReturn(attributes);
    plainJavaValueProviderFactory
        .newInstance(rootProjectFolder)
        .setValues(SOURCE_FOLDER, Collections.singletonList("src"));

    assertThat(attributes.get(SOURCE_FOLDER).contains("src"));
  }

