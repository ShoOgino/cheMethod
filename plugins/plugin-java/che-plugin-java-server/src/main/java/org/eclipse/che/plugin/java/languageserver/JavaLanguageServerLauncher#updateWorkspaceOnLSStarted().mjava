  private void updateWorkspaceOnLSStarted() {

    projectManager
        .getAll()
        .forEach(
            registeredProject -> {
              if (new StringTokenizer(registeredProject.getPath(), "/", false).countTokens() == 1) {
                // only do this for root paths
                CompletableFuture.runAsync(
                    () -> projectSynchronizer.synchronize(registeredProject.getPath()));
              }
              try {
                projectManager.update(registeredProject);
                eventService.publish(new ProjectClassPathChangedEvent(registeredProject.getPath()));
                notifyTransmitter.sendNotification(
                    new ExecuteCommandParams(
                        Notifications.UPDATE_PROJECTS_CLASSPATH,
                        Collections.singletonList(registeredProject.getPath())));
              } catch (ForbiddenException
                  | ServerException
                  | NotFoundException
                  | ConflictException
                  | BadRequestException e) {
                LOG.error(
                    String.format(
                        "Failed to update project '%s' configuration", registeredProject.getName()),
                    e);
              }
            });
  }

