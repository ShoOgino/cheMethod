  public CompletableFuture<List<? extends TextEdit>> formatting(DocumentFormattingParams params)
      throws LanguageServerException {

    String fileUri = params.getTextDocument().getUri();
    FormattingOptions options = params.getOptions();
    if (options == null) {
      options = new FormattingOptions();
      params.setOptions(options);
    }

    updateFormatterOptions(params, fileUri);

    return wrapped.formatting(params);
  }

