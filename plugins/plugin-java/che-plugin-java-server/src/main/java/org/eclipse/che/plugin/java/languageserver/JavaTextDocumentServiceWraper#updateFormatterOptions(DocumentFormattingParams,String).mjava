  private void updateFormatterOptions(DocumentFormattingParams params, String fileUri)
      throws LanguageServerException {
    String projectPath = WsPathUtils.absolutize(LanguageServiceUtils.extractProjectPath(fileUri));
    String formatterPathSuffix = CHE_FOLDER + SEPARATOR + CHE_FORMATTER_XML;
    Path projectFormatterPath = Paths.get(projectPath, formatterPathSuffix);
    Path wsFormatterPath = Paths.get(LanguageServiceUtils.PROJECTS, formatterPathSuffix);
    if (Files.exists(projectFormatterPath)) {
      updateFormatterOptions(params, getFormatSettingsFromFile(projectFormatterPath.toFile()));
    } else if (Files.exists(wsFormatterPath)) {
      updateFormatterOptions(params, getFormatSettingsFromFile(wsFormatterPath.toFile()));
    }
  }

