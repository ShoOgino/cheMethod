  private <T> void iterate(
      T root, Function<T, List<T>> childrenAccessor, Consumer<T> elementHandler) {
    elementHandler.accept(root);
    for (T child : childrenAccessor.apply(root)) {
      iterate(child, childrenAccessor, elementHandler);
    }
  }

