  public CompletableFuture<InitializeResult> initialize(InitializeParams params) {
    Map<String, Object> initOptions = new HashMap<>();
    Map<String, String> extendedCapabilities = new HashMap<>();
    extendedCapabilities.put("progressReportProvider", "true");
    extendedCapabilities.put("classFileContentsSupport", "true");
    initOptions.put("extendedClientCapabilities", extendedCapabilities);

    WorkspaceClientCapabilities workspaceClientCapabilities =
        params.getCapabilities().getWorkspace();
    WorkspaceEditCapabilities workspaceEditCapabilities = new WorkspaceEditCapabilities();
    workspaceEditCapabilities.setResourceChanges(true);
    workspaceClientCapabilities.setWorkspaceEdit(workspaceEditCapabilities);

    Map<String, String> settings = new HashMap<>();
    settings.put("java.configuration.updateBuildConfiguration", "automatic");
    initOptions.put("settings", settings);
    params.setInitializationOptions(initOptions);
    return wrapped
        .initialize(params)
        .thenApply(
            result -> {
              result.getCapabilities().setDocumentSymbolProvider(false);
              result.getCapabilities().setReferencesProvider(false);
              result.getCapabilities().setRenameProvider(false);
              return result;
            });
  }

