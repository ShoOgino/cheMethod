    @Test
    public void testGetStackFrameDumpWithoutConnection() throws Exception {
        debugger.setJavaDebuggerInfo(null);

        try {
            debugger.getStackFrameDump();
        } catch (UnsatisfiedLinkError e) {
            assertTrue(e.getMessage().contains("JsPromiseError.create"));  // verify calling "Promises.resolve(null)"
            verify(service, never()).getStackFrameDump(any());
            return;
        }

        fail("debugger.getStackFrameDump() didn't try to obtain rejected promise when there is no connection");
    }

