    @Test
    public void testChangeVariableValue() throws Exception {
        final List<String> path = mock(List.class);
        final String newValue = "new-value";

        VariablePath variablePath = mock(VariablePath.class);
        doReturn(variablePath).when(dtoFactory).createDto(VariablePath.class);

        UpdateVariableRequest updateVariableRequest = mock(UpdateVariableRequest.class);
        doReturn(updateVariableRequest).when(dtoFactory).createDto(UpdateVariableRequest.class);

        doReturn(promiseVoid).when(service).setValue(DEBUGGER_ID, updateVariableRequest);
        doReturn(promiseVoid).when(promiseVoid).then((Operation<Void>)any());

        debugger.changeVariableValue(path, newValue);

        verify(promiseVoid).then(operationVoidCaptor.capture());
        operationVoidCaptor.getValue().apply(null);
        verify(observer).onValueChanged(path, newValue);

        verify(promiseVoid).catchError(operationPromiseErrorCaptor.capture());
        operationPromiseErrorCaptor.getValue().apply(promiseError);
        verify(promiseError).getMessage();
    }

