    @Test
    public void testEvaluateExpressionWithoutConnection() throws Exception {
        debugger.setJavaDebuggerInfo(null);

        try {
            debugger.evaluateExpression("any");
        } catch (UnsatisfiedLinkError e) {
            assertTrue(e.getMessage().contains("JsPromiseError.create"));  // verify calling "Promises.resolve(null)"
            verify(service, never()).evaluateExpression(any(), any());
            return;
        }

        fail("debugger.evaluateExpression() didn't try to obtain rejected promise when there is no connection");
    }

