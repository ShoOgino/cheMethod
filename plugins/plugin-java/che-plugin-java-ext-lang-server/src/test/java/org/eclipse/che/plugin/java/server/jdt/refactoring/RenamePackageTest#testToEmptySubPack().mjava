    @Test
    public void testToEmptySubPack() throws Exception {
        fRenameSubpackages = true;

        PackageRename rename = new PackageRename(new String[]{"p", "p.q"}, new String[][]{{}, {}}, "p.q");
        IPackageFragment p = rename.fPackages[0];
        IPackageFragment pq = rename.fPackages[1];

        ParticipantTesting.reset();
        String[] renameHandles = ParticipantTesting.createHandles(p, pq);

        rename.createAndPerform(RefactoringStatus.OK);
        assertTrue(p.exists());
        assertTrue(pq.exists());
        IPackageFragment ppq = getRoot().getPackageFragment("p.q.q");
        assertTrue(ppq.exists());

        ParticipantTesting.testRename(renameHandles, new RenameArguments[]{
                new RenameArguments(rename.getNewPackageName(rename.fPackageNames[0]), true),
                new RenameArguments(rename.getNewPackageName(rename.fPackageNames[1]), true),
        });
        ParticipantTesting.testCreate(ParticipantTesting.createHandles(
                ppq.getResource()
                                                                      ));
    }

