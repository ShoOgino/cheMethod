  @Test
  public void testRenamePackageAlwaysWithWizard() throws Exception {
    StringBuilder b = new StringBuilder();
    b.append("package p;\n");
    b.append("public class A{}\n");

    ICompilationUnit unit =
        getPackageP().createCompilationUnit("A.java", b.toString(), false, null);
    RenameRefactoringSession refactoring =
        manager.createRenameRefactoring(getPackageP(), unit, b.indexOf("p;"), true);
    assertThat(refactoring).isNotNull();
    assertThat(refactoring.getSessionId()).isNotNull().isNotEmpty();
    assertThat(refactoring.getLinkedModeModel()).isNull();
    assertThat(refactoring.getWizardType())
        .isEqualTo(RenameRefactoringSession.RenameWizard.PACKAGE);
  }

