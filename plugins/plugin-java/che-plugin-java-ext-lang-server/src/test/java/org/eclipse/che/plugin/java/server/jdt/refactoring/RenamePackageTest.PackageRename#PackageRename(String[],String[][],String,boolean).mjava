        public PackageRename(String[] packageNames, String[][] packageFileNames, String newPackageName, boolean testWithDummyFiles)
                throws Exception {
            fPackageNames = packageNames;
            fPackageFileNames = packageFileNames;
            fNewPackageName = newPackageName;
            fTestWithDummyFiles = testWithDummyFiles;

            fPackages = new IPackageFragment[packageNames.length];
            fCus = new ICompilationUnit[packageFileNames.length][];
            for (int i = 0; i < packageFileNames.length; i++) {
                fPackages[i] = getRoot().createPackageFragment(packageNames[i], true, null);
                fCus[i] = new ICompilationUnit[packageFileNames[i].length];
                for (int j = 0; j < packageFileNames[i].length; j++) {
                    if (testWithDummyFiles) {
                        fCus[i][j] = createDummyCU(fPackages[i], packageFileNames[i][j]);
                    } else {
                        fCus[i][j] = createCUfromTestFile(fPackages[i], packageFileNames[i][j], packageNames[i].replace('.', '/') + "/");
                    }
                }
            }
        }

