  protected static final ArrayList collectAssists(IInvocationContext context, Class[] filteredTypes)
      throws CoreException {
    ArrayList proposals = new ArrayList();
    IStatus status =
        JavaCorrectionProcessor.collectAssists(context, new IProblemLocation[0], proposals);
    assertStatusOk(status);

    if (!proposals.isEmpty()) {
      assertTrue("should be marked as 'has assist'", JavaCorrectionProcessor.hasAssists(context));
    }

    if (filteredTypes != null && filteredTypes.length > 0) {
      for (Iterator iter = proposals.iterator(); iter.hasNext(); ) {
        if (isFiltered(iter.next(), filteredTypes)) {
          iter.remove();
        }
      }
    }
    return proposals;
  }

