    @Test
    public void testCompilationUnitReconcile() throws Exception {
        setWorkingCopyContents(
                "package p1;\n" +
                "public class X {\n" +
                "  public void foo() {\n" +
                "  }\n" +
                "  public void foo() {\n" +
                "  }\n" +
                "}");

        ReconcileResult reconcile = reconciler.reconcile(project, "p1.X");
        assertThat(reconcile).isNotNull();
        assertThat(reconcile.getProblems()).hasSize(2);
        assertThat(reconcile.getProblems()).onProperty("message").containsSequence("Duplicate method foo() in type X");
        assertThat(reconcile.getProblems()).onProperty("error").containsSequence(true);

    }

