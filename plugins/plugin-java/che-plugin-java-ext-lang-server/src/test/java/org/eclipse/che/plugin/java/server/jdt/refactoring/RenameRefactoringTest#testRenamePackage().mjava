  @Test
  public void testRenamePackage() throws Exception {
    final IPackageFragment packageFragment = getRoot().createPackageFragment("p.a.b.c", true, null);
    RenameRefactoringSession refactoring =
        manager.createRenameRefactoring(packageFragment, null, -1, false);
    assertThat(refactoring).isNotNull();
    assertThat(refactoring.getSessionId()).isNotNull().isNotEmpty();
    final ValidateNewName validateNewName =
        new DtoServerImpls.ValidateNewNameImpl().withNewName("p.x.s.z");
    validateNewName.setSessionId(refactoring.getSessionId());
    final RefactoringStatus status = manager.renameValidateNewName(validateNewName);
    assertThat(status.getSeverity()).isEqualTo(RefactoringStatus.OK);
  }

