  private static void performDummySearch(IJavaSearchScope searchScope, boolean doIt)
      throws JavaModelException {
    /*
     * Workaround for intermittent test failures. The problem is that the Java indexer
     * may still be reading a file that has just been created, but a test already tries to delete
     * the file again.
     *
     * This can theoretically also happen in real life, but it's expected to be very rare,
     * and there's no good solution for the problem, since the Java indexer should not
     * take a workspace lock for these files.
     *
     * performDummySearch() was found to be a performance bottleneck, so we've disabled it in most situations.
     * Use a mustPerformDummySearch() method if you really need it and you can't
     * use a delete(..) method that retries a few times before failing.
     */
    if (!doIt) return;

    new SearchEngine()
        .searchAllTypeNames(
            null,
            SearchPattern.R_EXACT_MATCH,
            "XXXXXXXXX"
                .toCharArray(), // make sure we search a concrete name. This is faster according to Kent
            SearchPattern.R_EXACT_MATCH | SearchPattern.R_CASE_SENSITIVE,
            IJavaSearchConstants.CLASS,
            searchScope,
            new Requestor(),
            IJavaSearchConstants.WAIT_UNTIL_READY_TO_SEARCH,
            null);
  }

