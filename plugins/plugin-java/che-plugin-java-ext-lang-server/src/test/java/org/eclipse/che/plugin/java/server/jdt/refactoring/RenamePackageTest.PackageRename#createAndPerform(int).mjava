        public void createAndPerform(int expectedSeverity) throws CoreException, Exception {
            IPackageFragment thisPackage = fPackages[0];
            RenameJavaElementDescriptor descriptor = createRefactoringDescriptor(thisPackage, fNewPackageName);
            descriptor.setUpdateReferences(fUpdateReferences);
            descriptor.setUpdateTextualOccurrences(fUpdateTextualMatches);
            setFilePatterns(descriptor);
            descriptor.setUpdateHierarchy(fRenameSubpackages);
            RefactoringStatus result = performRefactoring(descriptor);
            if (expectedSeverity == RefactoringStatus.OK)
                TestCase.assertEquals("preconditions were supposed to pass", null, result);
            else
                TestCase.assertEquals(expectedSeverity, result.getSeverity());
        }

