  public ProposalApplyResult applyCompletion(String sessionId, int index, boolean insert) {
    CodeAssistContext context = cache.getIfPresent(sessionId);
    if (context != null) {
      try {
        return context.apply(index, insert);
      } finally {
        cache.invalidate(sessionId);
      }
    } else {
      throw new IllegalArgumentException(
          "CodeAssist context doesn't exist or time of completion was expired");
    }
  }

