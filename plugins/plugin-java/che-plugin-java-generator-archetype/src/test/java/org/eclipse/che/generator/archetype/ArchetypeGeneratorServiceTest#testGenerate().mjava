    @Test
    public void testGenerate() throws Exception {
        MavenArchetype archetype = DtoFactory.getInstance().createDto(MavenArchetype.class)
                                             .withGroupId("archetypeGroupId")
                                             .withArtifactId("archetypeArtifactId")
                                             .withVersion("archetypeVersion");

        when(archetypeGenerator.generateFromArchetype(anyObject(), anyString(), anyString(), anyString()))
                .thenReturn(taskMock);

        GenerationTaskDescriptor task = service.generate(uriInfo, "groupId", "artifactId", "version", archetype);

        verify(archetypeGenerator).generateFromArchetype(eq(archetype), eq("groupId"), eq("artifactId"), eq("version"));
        Assert.assertEquals("http://localhost:8080/generator-archetype/status/" + taskId, task.getStatusUrl());
    }

