  @Test
  public void testOnGwtModuleChanged() throws Exception {
    when(view.getGwtModule()).thenReturn(GWT_MODULE);

    final CommandPage.DirtyStateListener listener = mock(CommandPage.DirtyStateListener.class);
    presenter.setDirtyStateListener(listener);

    presenter.onGwtModuleChanged();

    verify(view).getGwtModule();
    verify(command).setCommandLine(eq(COMMAND_LINE));
    verify(listener).onDirtyStateChanged();
  }

