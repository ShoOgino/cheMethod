    @Override
    public LanguageServer initialize(LanguageServerLauncher launcher, String projectPath) throws LanguageServerException {
        String languageId = launcher.getLanguageDescription().getLanguageId();

        synchronized (launcher) {
            LanguageServer server = languageIdToServers.get(languageId);
            if (server != null) {
//                LanguageServerDescription initializeResult = serversToInitResult.get(server);
//                if (!initializeResult.getCapabilities().isMultiplyProjectsProvider()) {
                server = doInitialize(launcher, projectPath);
//                }
            } else {
                server = doInitialize(launcher, projectPath);
                languageIdToServers.put(languageId, server);
            }
//            InitializeResult initializeResult = serversToInitResult.get(server);
//            if (initializeResult instanceof InitializeResultImpl) {
//                ((InitializeResultImpl)initializeResult)
//                        .setSupportedLanguages(Collections.singletonList((LanguageDescriptionImpl)launcher.getLanguageDescription()));
//            }
            onServerInitialized(server, serversToInitResult.get(server).getInitializeResult().getCapabilities(), launcher.getLanguageDescription(), projectPath);
            return server;
        }
    }

