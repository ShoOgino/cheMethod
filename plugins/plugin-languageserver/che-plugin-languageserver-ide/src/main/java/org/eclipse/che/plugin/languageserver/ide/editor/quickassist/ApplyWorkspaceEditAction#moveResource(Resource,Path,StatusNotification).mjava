  private void moveResource(Resource resource, Path path, StatusNotification notification) {
    if (resource.isProject()) {
      closeRelatedEditors(resource);
    }
    resource
        .move(path)
        .then(
            movedResource -> {
              if (movedResource.isFolder()) {
                return;
              }
              final List<EditorPartPresenter> openedEditors = editorAgent.getOpenedEditors();

              for (EditorPartPresenter editor : openedEditors) {
                VirtualFile file = editor.getEditorInput().getFile();
                if (movedResource.getLocation().equals(file.getLocation())) {
                  eventBus.fireEvent(FileEvent.createFileOpenedEvent(file));
                  return;
                }
              }
            })
        .catchError(
            error -> {
              notification.setStatus(Status.FAIL);
              notification.setContent(error.getMessage());
            });
  }

