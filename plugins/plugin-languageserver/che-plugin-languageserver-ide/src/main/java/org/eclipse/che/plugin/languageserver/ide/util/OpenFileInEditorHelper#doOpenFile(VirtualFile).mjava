  private Promise<TextEditor> doOpenFile(VirtualFile result) {
    return promiseProvider.create(
        Executor.create(
            (resolve, reject) -> {
              editorAgent.openEditor(
                  result,
                  new OpenEditorCallbackImpl() {
                    @Override
                    public void onEditorOpened(EditorPartPresenter editor) {
                      if (editor instanceof TextEditor) {
                        resolve.apply((TextEditor) editor);
                      } else {
                        reject.apply(JsPromiseError.create("Editor is not a TextEditor"));
                      }
                    }
                  });
            }));
  }

