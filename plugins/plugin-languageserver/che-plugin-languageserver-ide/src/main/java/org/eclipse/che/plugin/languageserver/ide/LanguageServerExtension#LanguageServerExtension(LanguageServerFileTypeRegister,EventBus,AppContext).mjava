    @Inject
    public LanguageServerExtension(LanguageServerFileTypeRegister languageServerFileTypeRegister,
                                   EventBus eventBus,
                                   AppContext appContext) {
        eventBus.addHandler(WsAgentStateEvent.TYPE, new WsAgentStateHandler() {
            @Override
            public void onWsAgentStarted(WsAgentStateEvent event) {
                languageServerFileTypeRegister.start();
            }

            @Override
            public void onWsAgentStopped(WsAgentStateEvent event) {
            }
        });

        final Workspace workspace = appContext.getWorkspace();
        if (workspace != null && workspace.getStatus() == RUNNING) {
            languageServerFileTypeRegister.start();
        }
    }

