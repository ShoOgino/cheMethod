    @Inject
    protected void registerFileEventHandler(final EventBus eventBus,
                                            final TextDocumentServiceClient serviceClient,
                                            final DtoFactory dtoFactory) {
        eventBus.addHandler(FileEvent.TYPE, new FileEvent.FileEventHandler() {

            @Override
            public void onFileOperation(final FileEvent event) {
                final TextDocumentIdentifierDTO documentId = dtoFactory.createDto(TextDocumentIdentifierDTO.class);
                documentId.setUri(event.getFile().getPath());
                switch (event.getOperationType()) {
                    case OPEN:
                        onOpen(event, dtoFactory, serviceClient);
                        break;
                    case CLOSE:
                        onClose(documentId, dtoFactory, serviceClient);
                        break;
                    case SAVE:
                        onSave(documentId, dtoFactory, serviceClient);
                        break;
                }
            }
        });
    }

