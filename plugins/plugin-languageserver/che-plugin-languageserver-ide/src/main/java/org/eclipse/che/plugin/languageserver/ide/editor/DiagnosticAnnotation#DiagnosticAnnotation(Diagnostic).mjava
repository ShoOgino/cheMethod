    public DiagnosticAnnotation(Diagnostic diagnostic) {

        this.diagnostic = diagnostic;

        DiagnosticSeverity severity = diagnostic.getSeverity();
        if (severity == null) {
            layer = ERROR_LAYER;
            setType(ERROR_ANNOTATION_TYPE);
        } else {
            switch (severity) {
                case Error:
                    layer = ERROR_LAYER;
                    setType(ERROR_ANNOTATION_TYPE);
                    break;
                case Warning:
                    layer = WARNING_LAYER;
                    setType(WARNING_ANNOTATION_TYPE);
                    break;
                case Information:
                    layer = INFO_LAYER;
                    setType(INFO_ANNOTATION_TYPE);
                    break;
                case Hint:
                    layer = HINT_LAYER;
                    setType(HINT_ANNOTATION_TYPE);
                    break;
                default:
                    layer = ERROR_LAYER;
                    setType(ERROR_ANNOTATION_TYPE);
                    break;
            }
        }
    }

