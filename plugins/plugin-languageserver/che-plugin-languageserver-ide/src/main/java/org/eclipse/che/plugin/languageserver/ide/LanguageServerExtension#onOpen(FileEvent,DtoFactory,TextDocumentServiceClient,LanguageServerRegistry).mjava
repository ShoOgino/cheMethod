  private void onOpen(
      final FileEvent event,
      final DtoFactory dtoFactory,
      final TextDocumentServiceClient serviceClient,
      final LanguageServerRegistry lsRegistry) {
    event
        .getFile()
        .getContent()
        .then(
            text -> {
              TextDocumentItem documentItem = dtoFactory.createDto(TextDocumentItem.class);
              documentItem.setUri(event.getFile().getLocation().toString());
              documentItem.setVersion(LanguageServerEditorConfiguration.INITIAL_DOCUMENT_VERSION);
              documentItem.setText(text);
              documentItem.setLanguageId(
                  lsRegistry.getLanguageDescription(event.getFile()).getLanguageId());

              DidOpenTextDocumentParams openEvent =
                  dtoFactory.createDto(DidOpenTextDocumentParams.class);
              openEvent.setTextDocument(documentItem);
              openEvent.getTextDocument().setUri(event.getFile().getLocation().toString());
              openEvent.setText(text);

              serviceClient.didOpen(openEvent);
            });
  }

