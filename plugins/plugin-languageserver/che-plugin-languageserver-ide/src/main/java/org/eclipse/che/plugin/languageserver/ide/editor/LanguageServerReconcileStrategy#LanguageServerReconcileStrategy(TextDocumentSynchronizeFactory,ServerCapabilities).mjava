    @Inject
    public LanguageServerReconcileStrategy(TextDocumentSynchronizeFactory synchronizeFactory,
                                           @Assisted ServerCapabilities serverCapabilities) {

        Either<TextDocumentSyncKind, TextDocumentSyncOptions> sync = serverCapabilities.getTextDocumentSync();
        TextDocumentSyncKind documentSync;
        if (sync.isLeft()) {
            documentSync = sync.getLeft();
        } else {
            documentSync = sync.getRight().getChange();
        }

        synchronize = synchronizeFactory.getSynchronize(documentSync);
    }

