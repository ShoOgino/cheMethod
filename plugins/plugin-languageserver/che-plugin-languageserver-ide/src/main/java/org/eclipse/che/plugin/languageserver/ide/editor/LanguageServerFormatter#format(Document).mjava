    @Override
    public void format(Document document) {

        TextRange selectedRange = document.getSelectedTextRange();
        if (selectedRange != null && !selectedRange.getFrom().equals(selectedRange.getTo()) &&
            capabilities.isDocumentRangeFormattingProvider()) {
            //selection formatting
            formatRange(selectedRange, document);
        } else if (capabilities.isDocumentFormattingProvider()) {
            //full document formatting
            formatFullDocument(document);
        }


    }

