  @Override
  public void actionPerformed(ActionEvent evt) {
    EditorPartPresenter activeEditor = editorAgent.getActiveEditor();
    if (!(activeEditor instanceof TextEditor)) {
      return;
    }
    Document document = ((TextEditor) activeEditor).getDocument();
    // We expect the arguments to be of the correct type: static misconfiguration is
    // a programming error.
    List<Object> arguments = ((QuickassistActionEvent) evt).getArguments();
    List<TextEdit> edits =
        arguments
            .stream()
            .map(arg -> dtoFactory.createDtoFromJson(arg.toString(), TextEdit.class))
            .sorted(COMPARATOR)
            .collect(Collectors.toList());

    // jdt.ls sends text edits in reverse order of application
    // see https://github.com/eclipse/eclipse.jdt.ls/issues/398
    for (int i = edits.size() - 1; i >= 0; i--) {
      TextEdit e = edits.get(i);
      Range r = e.getRange();
      Position start = r.getStart();
      Position end = r.getEnd();
      document.replace(
          start.getLine(), start.getCharacter(), end.getLine(), end.getCharacter(), e.getNewText());
    }
  }

