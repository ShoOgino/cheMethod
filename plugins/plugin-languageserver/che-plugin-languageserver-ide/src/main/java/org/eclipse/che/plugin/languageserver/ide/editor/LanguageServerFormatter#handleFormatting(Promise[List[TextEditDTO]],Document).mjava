    private void handleFormatting(Promise<List<TextEditDTO>> promise, final Document document) {
        promise.then(new Operation<List<TextEditDTO>>() {
            @Override
            public void apply(List<TextEditDTO> arg) throws OperationException {
                applyEdits(arg, document);
            }
        }).catchError(new Operation<PromiseError>() {
            @Override
            public void apply(PromiseError arg) throws OperationException {
                manager.notify(arg.getMessage());
            }
        });
    }

