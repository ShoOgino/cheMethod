  private Choice parseChoice() {
    int start = pos;
    inChoice = true;
    List<String> choices = new ArrayList<>();
    nextToken(); // consume pipe token
    StringBuilder b = new StringBuilder();
    while (token != Token.EOF && token != Token.PIPE) {
      if (token == Token.COMMA || token == Token.PIPE) {
        choices.add(b.toString());
        b = new StringBuilder();
        nextToken();
      } else if (token != Token.EOF) {
        b.append(value);
        nextToken();
      }
    }
    if (token == Token.PIPE) {
      nextToken();
    }
    choices.add(b.toString());
    inChoice = false;
    return new Choice(start, pos, choices);
  }

