    /**
     * Subscribes to websocket for 'textDocument/publishDiagnostics' notifications.
     */
    private void subscribeToPublishDiagnostics(final MessageBus messageBus) {
        org.eclipse.che.ide.websocket.rest.Unmarshallable<PublishDiagnosticsParams> unmarshaller =
                unmarshallerFactory.newWSUnmarshaller(PublishDiagnosticsParams.class);
        try {
            messageBus.subscribe("languageserver/textDocument/publishDiagnostics",
                                 new SubscriptionHandler<PublishDiagnosticsParams>(unmarshaller) {
                                     @Override
                                     protected void onMessageReceived(PublishDiagnosticsParams statusEvent) {
                                         publishDiagnosticsProcessor.processDiagnostics(statusEvent);
                                     }

                                     @Override
                                     protected void onErrorReceived(Throwable exception) {
                                         notificationManager.notify(exception.getMessage(), StatusNotification.Status.FAIL,
                                                                    StatusNotification.DisplayMode.NOT_EMERGE_MODE);
                                     }
                                 });
        } catch (WebSocketException exception) {
            Log.error(getClass(), exception);
        }
    }

