  @Test
  public void resolveVariables() {
    HasLinkedMode linkedMode = mock(HasLinkedMode.class);
    when(linkedMode.createLinkedModel()).thenReturn(mock(LinkedModel.class));
    when(linkedMode.createLinkedGroup()).thenReturn(mock(LinkedModelGroup.class));
    when(linkedMode.createLinkedModelData()).thenReturn(mock(LinkedModelData.class));
    SnippetResolver snippetResolver =
        new SnippetResolver(
            new TestVarResolver(
                Pair.of("foo", "bar"), Pair.of("lolo", "lala"), Pair.of("bla", null)));
    Pair<String, LinkedModel> resolved = snippetResolver.resolve("${foo}", linkedMode, 25);
    assertEquals("bar", resolved.first);
    resolved = snippetResolver.resolve("${gogo}", linkedMode, 25);
    assertEquals("gogo", resolved.first);
    resolved = snippetResolver.resolve("${foo:dflt}", linkedMode, 25);
    assertEquals("bar", resolved.first);
    resolved = snippetResolver.resolve("${bla:dflt}", linkedMode, 25);
    assertEquals("dflt", resolved.first);
  }

