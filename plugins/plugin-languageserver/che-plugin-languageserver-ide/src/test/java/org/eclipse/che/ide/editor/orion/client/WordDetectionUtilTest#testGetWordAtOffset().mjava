  @Test
  public void testGetWordAtOffset() throws Exception {
    when(document.getLineAtOffset(5)).thenReturn(1);
    when(document.getLineContent(1)).thenReturn("foo bar foo   ");
    when(document.getLineStart(1)).thenReturn(0);

    Position wordAtOffset = detectionUtil.getWordAtOffset(document, 5);

    assertNotNull(wordAtOffset);
    assertEquals(4, wordAtOffset.offset);
    assertEquals(3, wordAtOffset.length);
  }

