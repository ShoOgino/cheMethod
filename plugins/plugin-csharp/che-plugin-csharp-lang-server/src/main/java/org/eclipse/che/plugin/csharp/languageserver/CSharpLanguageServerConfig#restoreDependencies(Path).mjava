  private void restoreDependencies(Path workspaceRootFsPath) throws LanguageServerException {
    File workspaceRootFile = workspaceRootFsPath.toFile();
    if (workspaceRootFile.isDirectory()) {
      ProcessBuilder processBuilder = new ProcessBuilder("dotnet", "restore");
      processBuilder.directory(workspaceRootFile);

      try {
        Process process = processBuilder.start();
        int resultCode = process.waitFor();
        if (resultCode != 0) {
          String err = IoUtil.readStream(process.getErrorStream());
          String in = IoUtil.readStream(process.getInputStream());
          throw new LanguageServerException(
              "Can't restore dependencies. Error: " + err + ". Output: " + in);
        }
      } catch (IOException | InterruptedException e) {
        throw new LanguageServerException("Can't start CSharp language server", e);
      }
    }
  }

