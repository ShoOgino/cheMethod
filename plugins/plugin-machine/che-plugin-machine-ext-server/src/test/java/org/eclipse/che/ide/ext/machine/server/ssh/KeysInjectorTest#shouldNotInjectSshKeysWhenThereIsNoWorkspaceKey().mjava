    /**
     * Validate the usecase of no workspace keypair (notfound exception) and no machine keypair
     * Expect no ssh keys are injected
     */
    @Test
    public void shouldNotInjectSshKeysWhenThereIsNoWorkspaceKey() throws Exception {
        // no machine key pairs
        when(sshManager.getPairs(anyString(), eq("machine")))
                .thenReturn(Collections.emptyList());

        // no workspace keypair
        when(sshManager.getPair(anyString(), eq("workspace"), anyString()))
                .thenThrow(NotFoundException.class);


        subscriber.onEvent(newDto(MachineStatusEvent.class).withEventType(MachineStatusEvent.EventType.RUNNING)
                                                           .withMachineId(MACHINE_ID)
                                                           .withWorkspaceId(WORKSPACE_ID));

        verify(environmentEngine).getMachine(eq(WORKSPACE_ID), eq(MACHINE_ID));
        // check calls for machine and workspace ssh pairs
        verify(sshManager).getPairs(eq(USER_ID), eq("machine"));
        verify(sshManager).getPair(eq(USER_ID), eq("workspace"), eq(WORKSPACE_ID));

        verifyZeroInteractions(docker, environmentEngine, sshManager);
    }

