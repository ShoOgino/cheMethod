  /**
   * Validate the usecase of no workspace keypair (notfound exception) and no machine keypair Expect
   * no ssh keys are injected
   */
  @Test
  public void shouldNotInjectSshKeysWhenThereIsNoWorkspaceKey() throws Exception {
    // no machine key pairs
    when(sshManager.getPairs(anyString(), eq("machine"))).thenReturn(Collections.emptyList());

    // no workspace keypair
    when(sshManager.getPair(anyString(), eq("workspace"), anyString()))
        .thenThrow(NotFoundException.class);

    keysInjector.injectPublicKeys(WORKSPACE_ID);

    // check calls for machine and workspace ssh pairs
    verify(sshManager).getPairs(eq(OWNER), eq("machine"));
    verify(sshManager).getPair(eq(OWNER), eq("workspace"), eq(WORKSPACE_ID));

    verifyZeroInteractions(execAgentClientFactory, sshManager);
  }

