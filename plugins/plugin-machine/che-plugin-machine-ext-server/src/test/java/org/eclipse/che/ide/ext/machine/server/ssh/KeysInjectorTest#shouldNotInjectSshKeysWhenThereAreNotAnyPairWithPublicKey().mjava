    @Test
    public void shouldNotInjectSshKeysWhenThereAreNotAnyPairWithPublicKey() throws Exception {
        when(sshManager.getPairs(anyString(), anyString()))
                .thenReturn(Collections.singletonList(new SshPairImpl(OWNER, "machine", "myPair", null, null)));

        subscriber.onEvent(newDto(MachineStatusEvent.class).withEventType(MachineStatusEvent.EventType.RUNNING)
                                                           .withMachineId(MACHINE_ID)
                                                           .withWorkspaceId(WORKSPACE_ID));

        verify(environmentEngine).getMachine(eq(WORKSPACE_ID), eq(MACHINE_ID));
        verify(sshManager).getPairs(eq(OWNER), eq("machine"));
        verify(sshManager).getPair(eq(OWNER), eq("workspace"), eq(WORKSPACE_ID));
        verifyZeroInteractions(docker, environmentEngine, sshManager);
    }

