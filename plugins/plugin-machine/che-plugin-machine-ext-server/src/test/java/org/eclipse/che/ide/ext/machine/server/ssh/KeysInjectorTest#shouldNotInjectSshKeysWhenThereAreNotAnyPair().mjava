  @Test
  public void shouldNotInjectSshKeysWhenThereAreNotAnyPair() throws Exception {
    when(sshManager.getPairs(anyString(), anyString())).thenReturn(Collections.emptyList());

    subscriber.onEvent(
        newDto(MachineStatusEvent.class)
            .withEventType(MachineStatusEvent.EventType.RUNNING)
            .withMachineId(MACHINE_ID)
            .withWorkspaceId(WORKSPACE_ID));

    verify(environmentEngine).getMachine(eq(WORKSPACE_ID), eq(MACHINE_ID));
    verify(sshManager).getPairs(eq(OWNER), eq("machine"));
    verify(sshManager).getPair(eq(OWNER), eq("workspace"), eq(WORKSPACE_ID));
    verifyZeroInteractions(docker, environmentEngine, sshManager);
  }

