    /** Opens new terminal for the selected machine. */
    public void newTerminal() {
        workspaceAgent.setActivePart(this);

        final ProcessTreeNode selectedTreeNode = view.getSelectedTreeNode();
        if (selectedTreeNode != null) {
            if (selectedTreeNode.getType() == MACHINE_NODE) {
                onAddTerminal(appContext.getWorkspaceId(), selectedTreeNode.getId());
            } else {
                if (selectedTreeNode.getParent() != null &&
                    selectedTreeNode.getParent().getType() == MACHINE_NODE) {
                    onAddTerminal(appContext.getWorkspaceId(), appContext.getDevMachine().getId());
                }
            }
        }

        // no selected node
        if (appContext.getDevMachine() != null) {
            onAddTerminal(appContext.getWorkspaceId(), appContext.getDevMachine().getId());
        }
    }

