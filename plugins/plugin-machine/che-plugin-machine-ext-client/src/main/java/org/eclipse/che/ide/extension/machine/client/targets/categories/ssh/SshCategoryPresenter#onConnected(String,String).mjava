    /**
     * Ensures machine is started.
     */
    private void onConnected(final String workspaceId, final String machineId) {
        // There is a little bug in machine service on the server side.
        // The machine info is updated with a little delay after running a machine.
        // Using timer must fix the problem.
        new Timer() {
            @Override
            public void run() {
                getMachine(workspaceId, machineId).then(new Operation<MachineEntity>() {
                    @Override
                    public void apply(MachineEntity machine) throws OperationException {
                        if (machine != null && machine.getStatus() == RUNNING) {
                            final String machineName = machine.getConfig().getName();
                            connectNotification.setTitle(machineLocale.targetsViewConnectSuccess(machineName));
                            connectNotification.setStatus(StatusNotification.Status.SUCCESS);
                            updateTargets(machineName);
                        } else {
                            onConnectingFailed(null);
                        }
                    }
                }).catchError(new Operation<PromiseError>() {
                    @Override
                    public void apply(PromiseError arg) throws OperationException {
                        onConnectingFailed(null);
                    }
                });
            }
        }.schedule(500);
    }

