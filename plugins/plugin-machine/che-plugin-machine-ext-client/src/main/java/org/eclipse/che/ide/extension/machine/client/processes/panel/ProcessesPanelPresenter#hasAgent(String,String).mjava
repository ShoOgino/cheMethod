    /**
     * Determines the agent is injected in the specified machine.
     *
     * @param machineName
     *          machine name
     * @param agent
     *          agent
     * @return
     *          <b>true</b> is the agent is injected, otherwise return <b>false</b>
     */
    private boolean hasAgent(String machineName, String agent) {
        Workspace workspace = appContext.getWorkspace();
        if (workspace == null) {
            return false;
        }

        WorkspaceConfig workspaceConfig = workspace.getConfig();
        if (workspaceConfig == null) {
            return false;
        }

        Map<String, ? extends Environment> environments = workspaceConfig.getEnvironments();
        if (environments == null) {
            return false;
        }
        for (Environment environment : environments.values()) {
            ExtendedMachine extendedMachine = environment.getMachines().get(machineName);
            if (extendedMachine != null) {
                if (extendedMachine.getAgents() != null && extendedMachine.getAgents().contains(agent)) {
                    return true;
                }
            }
        }

        return false;
    }

