    @Override
    public Promise<Void> destroyMachine(final MachineEntity machineState) {
        return machineServiceClient.destroyMachine(machineState.getWorkspaceId(),
                                                   machineState.getId()).then(new Operation<Void>() {
            @Override
            public void apply(Void arg) throws OperationException {
                eventBus.fireEvent(new MachineStateEvent(machineState, DESTROYED));

                final DevMachine devMachine = appContext.getDevMachine();
                if (devMachine != null && machineState.getId().equals(devMachine.getId()) && appContext instanceof AppContextImpl) {
                    ((AppContextImpl)appContext).setDevMachine(null);
                }
            }
        });
    }

