    private void onStopProcess(@NotNull ProcessTreeNode node) {
        String processId = node.getId();
        ProcessTreeNode parentNode = node.getParent();

        int processIndex = view.getNodeIndex(processId);
        if (processIndex < 0) {
            return;
        }

        int countWidgets = terminals.size() + consoles.size();
        if (countWidgets <= 2) {
            view.hideProcessOutput(processId);
            removeChildFromMachineNode(node, parentNode);
            return;
        }

        int neighborIndex = processIndex > 0 ? processIndex - 1 : processIndex + 1;
        ProcessTreeNode neighborNode = view.getNodeByIndex(neighborIndex);
        String neighborNodeId = neighborNode.getId();

        removeChildFromMachineNode(node, parentNode);
        view.selectNode(neighborNode);
        resfreshStopButtonState(neighborNodeId);
        view.showProcessOutput(neighborNodeId);
        view.hideProcessOutput(processId);
    }

