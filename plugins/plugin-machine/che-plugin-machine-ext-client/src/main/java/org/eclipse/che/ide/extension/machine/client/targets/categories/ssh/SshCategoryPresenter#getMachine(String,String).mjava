    private Promise<MachineEntity> getMachine(final String workspaceId, final String machineId) {
        return workspaceServiceClient.getWorkspace(workspaceId).then(new Function<WorkspaceDto, MachineEntity>() {
            @Override
            public MachineEntity apply(WorkspaceDto workspace) throws FunctionException {
                WorkspaceRuntimeDto workspaceRuntime = workspace.getRuntime();
                if (workspaceRuntime == null) {
                    return null;
                }

                for (MachineDto machineDto : workspaceRuntime.getMachines()) {
                    if (machineId.equals(machineDto.getId())) {
                        return entityFactory.createMachine(machineDto);
                    }
                }
                return null;
            }
        });
    }

