    @Override
    public void onWsAgentStarted(WsAgentStateEvent event) {
        machineService.getMachines(appContext.getWorkspaceId()).then(new Operation<List<MachineDto>>() {
            @Override
            public void apply(List<MachineDto> machines) throws OperationException {
                for (MachineDto machine : machines) {
                    restoreState(machine);
                }
            }
        });
    }

