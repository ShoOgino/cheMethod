    private void initializeEditor(@NotNull final VirtualFile file) {
        FileType fileType = fileTypeRegistry.getFileTypeByFile(file);
        editor = getEditor();
        editor.activate();
        editor.onOpen();
        view.showEditor(editor);

        // wait when editor is initialized
        editor.addPropertyListener(new PropertyListener() {
            @Override
            public void propertyChanged(PartPresenter source, int propId) {
                switch (propId) {
                    case PROP_INPUT:
                        setReadOnlyProperty(file);
                        view.showEditor(editor);
                        break;
                    case PROP_DIRTY:
                        if (validateUndoOperation()) {
                            setEnableSaveAndCancelButtons(true);
                        }
                        break;
                    default:
                }
            }
        });

        editor.init(new RecipeEditorInput(fileType, file), new OpenEditorCallbackImpl());
    }

