    @Override
    public void onMachineStatusChanged(final MachineStatusChangedEvent event) {
        final String machineId = event.getMachineId();
        final String workspaceId = event.getWorkspaceId();

        workspaceServiceClient.getWorkspace(workspaceId).then(new Operation<WorkspaceDto>() {
            @Override
            public void apply(WorkspaceDto workspace) throws OperationException {
                WorkspaceRuntimeDto workspaceRuntime = workspace.getRuntime();
                if (workspaceRuntime == null) {
                    return;
                }

                appContext.setWorkspace(workspace);

                switch (event.getEventType()) {
                    case CREATING:
                        handleMachineCreating(machineId, workspaceRuntime);
                        break;
                    case RUNNING:
                        handleMachineRunning(machineId, workspaceRuntime);
                        break;
                    case ERROR:
                        notificationManager.notify(event.getErrorMessage(), FAIL, EMERGE_MODE);
                        break;
                }
            }
        });
    }

