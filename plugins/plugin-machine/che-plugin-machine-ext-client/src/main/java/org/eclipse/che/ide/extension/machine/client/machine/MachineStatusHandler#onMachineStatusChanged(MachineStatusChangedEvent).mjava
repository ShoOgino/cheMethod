    @Override
    public void onMachineStatusChanged(final MachineStatusChangedEvent event) {
        final String machineId = event.getMachineId();
        final String workspaceId = event.getWorkspaceId();

        workspaceServiceClient.getWorkspace(workspaceId).then(workspace -> {
            RuntimeDto workspaceRuntime = workspace.getRuntime();
            if (workspaceRuntime == null) {
                return;
            }

            appContext.setWorkspace(workspace);

            switch (event.getEventType()) {
                case CREATING:
                    handleMachineCreating(machineId, workspaceRuntime);
                    break;
                case RUNNING:
                    handleMachineRunning(machineId, workspaceRuntime);
                    break;
                case ERROR:
                    handleMachineError(event);
                    break;
            }
        });
    }

