    @Test
    public void shouldNotifyWhenNonDevMachineStateIsRunning() throws Exception {
        when(machineConfig.isDev()).thenReturn(false);

        when(environmentStatusChangedEvent.getEventType()).thenReturn(RUNNING);
        statusNotifier.onEnvironmentStatusChanged(environmentStatusChangedEvent);

        verify(machinePromise).then(machineCaptor.capture());
        machineCaptor.getValue().apply(machine);

        verify(machine).getConfig();
        verify(machineConfig).isDev();
        verify(handler).onMachineRunning(Matchers.<MachineStateEvent>anyObject());
        verify(initialLoadingInfo, never()).setOperationStatus(eq(MACHINE_BOOTING.getValue()), eq(SUCCESS));
        verify(locale).notificationMachineIsRunning(MACHINE_NAME);
        verify(notificationManager).notify(anyString(), (StatusNotification.Status)anyObject(), anyObject());
    }

