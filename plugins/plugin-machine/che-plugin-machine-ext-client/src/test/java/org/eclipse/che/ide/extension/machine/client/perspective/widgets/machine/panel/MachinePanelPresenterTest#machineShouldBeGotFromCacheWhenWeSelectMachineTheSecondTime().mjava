    @Test
    public void machineShouldBeGotFromCacheWhenWeSelectMachineTheSecondTime() throws Exception {
        when(machineDtoFromAPI1.getStatus()).thenReturn(MachineStatus.RUNNING);

        presenter.onMachineSelected(selectedMachine1);

        verify(machinePromise).then(operationMachineCaptor.capture());
        operationMachineCaptor.getValue().apply(machineDtoFromAPI1);
        reset(service, appliance);

        presenter.onMachineSelected(selectedMachine1);

        verify(appliance).showAppliance(machine1);

        verify(service, never()).getMachine(anyString());

        assertThat(selectedMachine1, is(equalTo(presenter.getSelectedMachineState())));
        assertThat(presenter.isMachineRunning(), is(true));
    }

