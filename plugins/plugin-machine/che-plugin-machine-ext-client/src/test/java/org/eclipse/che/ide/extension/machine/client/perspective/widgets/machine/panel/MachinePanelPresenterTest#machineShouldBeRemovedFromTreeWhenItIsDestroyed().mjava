    @Test
    public void machineShouldBeRemovedFromTreeWhenItIsDestroyed() {
        MachineStartingEvent startingEvent = mock(MachineStartingEvent.class);

        when(startingEvent.getMachine()).thenReturn(selectedMachine1);
        when(stateEvent.getMachine()).thenReturn(selectedMachine1);

        presenter.onMachineStarting(startingEvent);
        reset(view);
        presenter.onMachineRunning(stateEvent);

        verify(view).selectNode(machineNode1);

        reset(view);

        presenter.onMachineDestroyed(stateEvent);

        verify(view).setData(rootNode);
        verify(view, never()).selectNode(machineNode1);
    }

