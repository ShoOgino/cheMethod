    @Test
    public void machineShouldBeRemovedFromTreeWhenItIsDestroyed() {
        when(machine1.getId()).thenReturn("machine1");

        MachineStateEvent stateEvent = mock(MachineStateEvent.class);
        when(stateEvent.getMachineId()).thenReturn("machine1");
        when(stateEvent.getMachine()).thenReturn(machine1);

        presenter.onMachineCreating(stateEvent);
        reset(view);
        presenter.onMachineRunning(stateEvent);

        verify(view).selectNode(machineNode1);

        reset(view);

        presenter.onMachineDestroyed(stateEvent);

        verify(view).setData(rootNode);
        verify(view, never()).selectNode(machineNode1);
    }

