    @Test
    public void shouldStartNewDevMachine() throws Exception {
        when(appContext.getDevMachine()).thenReturn(null);
        when(machineServiceClient.getMachine(WORKSPACE_ID, SOME_TEXT)).thenReturn(machineDescriptorPromise);

        presenter.onReplaceDevMachineClicked();

        verify(view).getMachineName();
        verify(view).getRecipeURL();
        verify(appContext).getDevMachine();
        verify(machineManager).startDevMachine(eq(RECIPE_URL), eq(MACHINE_NAME));
        verify(view).close();
        verify(machineServiceClient, never()).getMachine(WORKSPACE_ID, SOME_TEXT);
        verify(machineManager, never()).destroyMachine(any(MachineDto.class));
        verify(machineManager).startDevMachine(eq(RECIPE_URL), eq(MACHINE_NAME));
    }

