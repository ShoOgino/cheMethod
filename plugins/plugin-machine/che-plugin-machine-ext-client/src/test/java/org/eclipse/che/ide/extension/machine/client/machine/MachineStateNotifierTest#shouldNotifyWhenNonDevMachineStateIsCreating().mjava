    @Test
    public void shouldNotifyWhenNonDevMachineStateIsCreating() throws Exception {
        when(machineConfig.isDev()).thenReturn(false);

        when(machineStatusChangedEvent.getEventType()).thenReturn(CREATING);
        statusNotifier.onMachineStatusChanged(machineStatusChangedEvent);

        verify(machinePromise).then(machineCaptor.capture());
        machineCaptor.getValue().apply(machine);

        verify(handler).onMachineCreating(Matchers.<MachineStateEvent>anyObject());
    }

