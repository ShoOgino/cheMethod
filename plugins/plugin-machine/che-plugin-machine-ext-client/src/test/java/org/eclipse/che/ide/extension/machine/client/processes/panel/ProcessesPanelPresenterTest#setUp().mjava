    @Before
    public void setUp() {
        DevMachine devMachine = mock(DevMachine.class);
        when(devMachine.getId()).thenReturn(WORKSPACE_ID);
        when(appContext.getDevMachine()).thenReturn(devMachine);
        when(appContext.getWorkspace()).thenReturn(workspace);
        when(workspace.getRuntime()).thenReturn(workspaceRuntime);

        when(processesPromise.then(Matchers.<Operation<List<MachineProcessDto>>>anyObject())).thenReturn(processesPromise);
        when(commandConsoleFactory.create(anyString())).thenReturn(mock(OutputConsole.class));

        when(appContext.getWorkspaceId()).thenReturn(WORKSPACE_ID);
        when(workspaceAgent.getPartStack(eq(PartStackType.INFORMATION))).thenReturn(partStack);

        when(execAgentCommandManager.getProcesses(anyString(), anyBoolean())).thenReturn(promise);
        when(promise.then(any(Operation.class))).thenReturn(promise);

        presenter = new ProcessesPanelPresenter(view,
                                                localizationConstant,
                                                resources,
                                                eventBus,
                                                machineService,
                                                workspaceAgent,
                                                appContext,
                                                notificationManager,
                                                entityFactory,
                                                terminalFactory,
                                                commandConsoleFactory,
                                                dialogFactory,
                                                consoleTreeContextMenuFactory,
                                                commandTypeRegistry,
                                                sshService,
                                                execAgentCommandManager);
    }

