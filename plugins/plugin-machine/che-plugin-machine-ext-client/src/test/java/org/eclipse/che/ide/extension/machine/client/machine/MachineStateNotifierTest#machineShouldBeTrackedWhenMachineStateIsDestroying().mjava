    @Test
    public void machineShouldBeTrackedWhenMachineStateIsDestroying() throws Exception {
        UsersWorkspaceDto workspace = mock(UsersWorkspaceDto.class);
        when(appContext.getWorkspace()).thenReturn(workspace);
        when(workspace.getId()).thenReturn(SOME_TEXT);
        when(machineConfig.getName()).thenReturn(SOME_TEXT);
        when(notificationManager.notify(anyString(), eq(PROGRESS), anyBoolean())).thenReturn(notification);
        stateNotifier.trackMachine(machine, MachineManager.MachineOperationType.DESTROY);

        verify(notification).setTitle(eq(SOME_TEXT));

        verify(locale).notificationDestroyingMachine(SOME_TEXT);
        verify(locale, never()).notificationCreatingMachine(SOME_TEXT);

        verify(messageBus).subscribe(anyString(), Matchers.<MessageHandler>anyObject());
    }

