    @Before
    public void setUp() {
        presenter.editedCommandNameInitial = COMMAND_NAME;

        when(commandManager.update(anyString(), anyObject())).thenReturn(commandPromise);

        CommandType commandType = mock(CommandType.class);
        when(commandType.getId()).thenReturn(COMMAND_TYPE);
        List<CommandType> commandTypes = new ArrayList<>(1);
        commandTypes.add(commandType);
        when(commandTypeRegistry.getCommandTypes()).thenReturn(commandTypes);

        when(command.getType()).thenReturn(COMMAND_TYPE);
        when(command.getName()).thenReturn(COMMAND_NAME);
        List<CommandImpl> commands = new ArrayList<>(1);
        commands.add(command);
        when(commandManager.getCommands()).thenReturn(commands);
    }

