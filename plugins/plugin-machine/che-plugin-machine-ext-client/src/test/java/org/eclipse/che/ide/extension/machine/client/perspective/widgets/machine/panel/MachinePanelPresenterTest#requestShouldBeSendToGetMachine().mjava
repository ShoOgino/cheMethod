    @Test
    public void requestShouldBeSendToGetMachine() throws Exception {
        when(machineDtoFromAPI1.getStatus()).thenReturn(MachineStatus.RUNNING);

        presenter.onMachineSelected(selectedMachine1);

        verify(selectedMachine1, times(2)).getId();

        verify(machinePromise).then(operationMachineCaptor.capture());
        operationMachineCaptor.getValue().apply(machineDtoFromAPI1);

        verify(entityFactory).createMachine(machineDtoFromAPI1);
        verify(appliance).showAppliance(machine1);

        assertThat(selectedMachine1, is(equalTo(presenter.getSelectedMachineState())));
        assertThat(presenter.isMachineRunning(), is(true));
    }

