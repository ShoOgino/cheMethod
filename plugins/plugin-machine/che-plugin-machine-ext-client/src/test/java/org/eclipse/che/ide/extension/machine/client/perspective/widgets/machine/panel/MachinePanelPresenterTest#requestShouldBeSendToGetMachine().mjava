    @Test
    public void requestShouldBeSendToGetMachine() throws Exception {
        presenter.onMachineSelected(machineState1);

        verify(machineState1).getId();

        verify(machinePromise).then(operationMachineCaptor.capture());
        operationMachineCaptor.getValue().apply(machineDescriptor1);

        verify(entityFactory).createMachine(machineDescriptor1);
        verify(appliance).showAppliance(machine1);

        assertThat(machineState1, is(equalTo(presenter.getSelectedMachineState())));
        assertThat(presenter.isMachineRunning(), is(true));
    }

