    @Test
    public void shouldNotifyWhenMachineStateIsError() throws Exception {
        when(environmentStatusChangedEvent.getEventType()).thenReturn(ERROR);
        statusNotifier.onEnvironmentStatusChanged(environmentStatusChangedEvent);

        verify(environmentStatusChangedEvent).getError();
        verify(notificationManager).notify(anyString(), (StatusNotification.Status)anyObject(), anyObject());
    }

