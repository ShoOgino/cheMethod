  @Override
  public void onUploadClicked() {
    String host = view.getHost();
    if (host.isEmpty()) {
      view.setMessage(constant.hostValidationError());
      return;
    }
    view.setEncoding(FormPanel.ENCODING_MULTIPART);

    String action = restContext + "/ssh";
    StringBuilder queryParametersBuilder = new StringBuilder();

    String csrfToken = appContext.getProperties().get("X-CSRF-Token");
    if (!isNullOrEmpty(csrfToken)) {
      queryParametersBuilder.append("&X-CSRF-Token=").append(csrfToken);
    }

    String machineToken = appContext.getWorkspace().getRuntime().getMachineToken();
    if (!isNullOrEmpty(machineToken)) {
      queryParametersBuilder.append("&token=").append(machineToken);
    }

    String queryParameters = queryParametersBuilder.toString();
    if (!isNullOrEmpty(queryParameters)) {
      action += queryParameters.replaceFirst("&", "?");
    }

    view.setAction(action);
    view.submit();
  }

