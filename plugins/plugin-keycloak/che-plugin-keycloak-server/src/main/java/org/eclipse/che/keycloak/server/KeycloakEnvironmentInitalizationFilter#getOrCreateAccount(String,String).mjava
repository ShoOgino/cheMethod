  private synchronized Account getOrCreateAccount(String id, String namespace)
      throws ServletException {
    try {
      return accountManager.getById(id);
    } catch (NotFoundException e) {
      try {
        Account account = new AccountImpl(id, namespace, "personal");
        accountManager.create(account);
        return account;
      } catch (ServerException | ConflictException ex) {
        throw new ServletException("Unable to create new account", ex);
      }
    } catch (ServerException e) {
      throw new ServletException("Unable to get account", e);
    }
  }

