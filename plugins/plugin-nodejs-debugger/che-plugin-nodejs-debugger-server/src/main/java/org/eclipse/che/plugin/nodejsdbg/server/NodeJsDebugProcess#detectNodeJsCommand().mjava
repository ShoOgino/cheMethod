    /**
     * Returns NodeJs command to run: either {@code nodejs} or {@code node}.
     */
    private static String detectNodeJsCommand() {
        String detectionCommand = "if command -v nodejs >/dev/null 2>&1; then echo -n 'nodejs'; else echo -n 'node'; fi";
        ProcessBuilder builder = new ProcessBuilder("sh", "-c", detectionCommand);

        try {
            Process process = builder.start();
            int resultCode = process.waitFor();
            if (resultCode != 0) {
                String errMsg = IoUtil.readAndCloseQuietly(process.getErrorStream());
                throw new IllegalStateException("NodeJs not found. " + errMsg);
            }

            return IoUtil.readAndCloseQuietly(process.getInputStream());
        } catch (IOException | InterruptedException e) {
            throw new IllegalStateException("NodeJs not found", e);
        }
    }

