    private InputStream getInputStream() throws IOException {
        return hasError() ? process.getErrorStream()
                          : (hasInput() ? (hasError() ? process.getErrorStream() : process.getInputStream())
                                        : null);
    }

