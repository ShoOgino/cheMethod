    @Test
    public void testManageBreakpoints() throws Exception {
        List<Breakpoint> breakpoints = debugger.getAllBreakpoints();
        assertEquals(breakpoints.size(), 1);

        debugger.addBreakpoint(new BreakpointImpl(new LocationImpl("app.js", 2)));

        ArgumentCaptor<BreakpointActivatedEvent> breakpointActivated = ArgumentCaptor.forClass(BreakpointActivatedEvent.class);
        verify(callback).onEvent(breakpointActivated.capture());
        BreakpointActivatedEvent event = breakpointActivated.getValue();
        Breakpoint breakpoint = event.getBreakpoint();
        assertEquals(breakpoint.getLocation().getTarget(), "app.js");
        assertEquals(breakpoint.getLocation().getLineNumber(), 2);

        debugger.addBreakpoint(new BreakpointImpl(new LocationImpl("app.js", 5)));

        breakpoints = debugger.getAllBreakpoints();
        assertEquals(breakpoints.size(), 3);

        debugger.deleteBreakpoint(new LocationImpl("app.js", 2));
        breakpoints = debugger.getAllBreakpoints();
        assertEquals(breakpoints.size(), 2);

        debugger.deleteAllBreakpoints();
        breakpoints = debugger.getAllBreakpoints();
        assertEquals(breakpoints.size(), 1);
    }

