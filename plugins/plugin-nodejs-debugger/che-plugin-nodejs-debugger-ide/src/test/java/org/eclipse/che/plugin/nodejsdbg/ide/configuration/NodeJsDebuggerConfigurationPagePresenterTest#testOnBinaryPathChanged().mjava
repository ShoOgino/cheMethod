  @Test
  public void testOnBinaryPathChanged() throws Exception {
    String binPath = "/path";
    when(pageView.getScriptPath()).thenReturn(binPath);

    final DebugConfigurationPage.DirtyStateListener listener =
        mock(DebugConfigurationPage.DirtyStateListener.class);
    pagePresenter.setDirtyStateListener(listener);

    pagePresenter.onScriptPathChanged();

    verify(pageView).getScriptPath();
    ArgumentCaptor<Map> argumentCaptor = ArgumentCaptor.forClass(Map.class);

    verify(configuration).setConnectionProperties(argumentCaptor.capture());
    Map argumentCaptorValue = argumentCaptor.getValue();
    assertEquals(binPath, argumentCaptorValue.get(SCRIPT.toString()));

    verify(listener).onDirtyStateChanged();
  }

