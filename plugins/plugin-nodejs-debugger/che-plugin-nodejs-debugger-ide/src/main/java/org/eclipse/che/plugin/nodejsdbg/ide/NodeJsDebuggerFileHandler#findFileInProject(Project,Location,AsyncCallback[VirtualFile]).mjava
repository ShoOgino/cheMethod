    private void findFileInProject(final Project project,
                                   final Location location,
                                   final AsyncCallback<VirtualFile> callback) {
        project.getFile(location.getTarget()).then(new Operation<Optional<File>>() {
            @Override
            public void apply(Optional<File> file) throws OperationException {
                if (file.isPresent()) {
                    openFileInEditorAndScrollToLine(file.get(), callback, location.getLineNumber());
                    callback.onSuccess(file.get());
                } else {
                    findFileInWorkspace(location, callback);
                }
            }
        }).catchError(new Operation<PromiseError>() {
            @Override
            public void apply(PromiseError arg) throws OperationException {
                callback.onFailure(new IllegalArgumentException("File not found." + arg.getMessage()));
            }
        });
    }

