    private void findFileInWorkspace(final Location location,
                                     final AsyncCallback<VirtualFile> callback) {
        try {
            appContext.getWorkspaceRoot().getFile(location.getTarget()).then(new Operation<Optional<File>>() {
                @Override
                public void apply(Optional<File> file) throws OperationException {
                    if (file.isPresent()) {
                        openFileInEditorAndScrollToLine(file.get(), callback, location.getLineNumber());
                        callback.onSuccess(file.get());
                    } else {
                        searchSource(location, callback);
                    }
                }
            }).catchError(new Operation<PromiseError>() {
                @Override
                public void apply(PromiseError arg) throws OperationException {
                    callback.onFailure(new IllegalArgumentException("File not found." + arg.getMessage()));
                }
            });
        } catch (IllegalStateException ignored) {
            searchSource(location, callback);
        }
    }

