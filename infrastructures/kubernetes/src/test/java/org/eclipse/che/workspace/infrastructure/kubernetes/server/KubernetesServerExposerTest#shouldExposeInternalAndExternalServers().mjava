  @Test
  public void shouldExposeInternalAndExternalServers() throws Exception {
    // given
    ServerConfigImpl internalServerConfig =
        new ServerConfigImpl("8080/tcp", "http", "/api", INTERNAL_SERVER_ATTRIBUTE_MAP);
    ServerConfigImpl externalServerConfig =
        new ServerConfigImpl("9090/tcp", "http", "/api", ATTRIBUTES_MAP);
    Map<String, ServerConfigImpl> serversToExpose =
        ImmutableMap.of("int-server", internalServerConfig, "ext-server", externalServerConfig);

    // when
    serverExposer.expose(serversToExpose);

    // then
    assertThatInternalServerIsExposed(
        MACHINE_NAME,
        "int-server",
        "tcp",
        8080,
        new ServerConfigImpl(internalServerConfig).withAttributes(INTERNAL_SERVER_ATTRIBUTE_MAP));
    assertThatExternalServerIsExposed(
        MACHINE_NAME,
        "tcp",
        9090,
        "ext-server",
        new ServerConfigImpl(externalServerConfig).withAttributes(ATTRIBUTES_MAP));
  }

