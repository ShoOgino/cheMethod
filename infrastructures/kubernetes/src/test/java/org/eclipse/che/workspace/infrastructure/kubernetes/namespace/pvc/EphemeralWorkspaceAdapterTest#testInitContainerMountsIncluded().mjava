  @Test
  public void testInitContainerMountsIncluded() throws Exception {
    Container container1 = new Container();
    Container container2 = new Container();
    Container initContainer = new Container();
    Pod pod = buildPod(POD_ID, container1, container2);
    PodData podData = new PodData(pod.getSpec(), pod.getMetadata());
    when(k8sEnv.getPodsData()).thenReturn(ImmutableMap.of(POD_ID, podData));
    pod.getSpec().setInitContainers(ImmutableList.of(initContainer));

    ephemeralWorkspaceAdapter.provision(k8sEnv, runtimeIdentity);

    List<Container> podInitContainers = pod.getSpec().getInitContainers();
    assertEquals(podInitContainers.size(), 1);
    Container podInitContainer = podInitContainers.iterator().next();
    List<VolumeMount> initContainerVolumeMounts = podInitContainer.getVolumeMounts();
    assertEquals(initContainerVolumeMounts.size(), 2);
  }

