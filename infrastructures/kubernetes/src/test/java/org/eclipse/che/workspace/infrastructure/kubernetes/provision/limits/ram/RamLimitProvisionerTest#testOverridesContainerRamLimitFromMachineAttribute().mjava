  @Test
  public void testOverridesContainerRamLimitFromMachineAttribute() throws Exception {
    final ResourceRequirements containerResource = mock(ResourceRequirements.class);
    final HashMap<String, Quantity> limits = new HashMap<>();
    limits.put("memory", new Quantity("3221225472"));
    when(containerResource.getLimits()).thenReturn(limits);
    when(container.getResources()).thenReturn(containerResource);

    ramLimitProvisioner.provision(k8sEnv, identity);

    verify(container).setResources(resourceCaptor.capture());
    final ResourceRequirements captured = resourceCaptor.getValue();
    assertEquals(captured.getLimits().get("memory").getAmount(), RAM_LIMIT_ATTRIBUTE);
  }

