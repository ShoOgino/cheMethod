  @Test
  public void testDeletesExistingManagedNamespace() throws Exception {
    // given
    KubernetesNamespace namespace = new KubernetesNamespace(clientFactory, NAMESPACE, WORKSPACE_ID);
    Resource resource = prepareManagedNamespaceResource(NAMESPACE);

    // when
    namespace.deleteIfManaged();

    // then
    verify(resource).delete();
  }

