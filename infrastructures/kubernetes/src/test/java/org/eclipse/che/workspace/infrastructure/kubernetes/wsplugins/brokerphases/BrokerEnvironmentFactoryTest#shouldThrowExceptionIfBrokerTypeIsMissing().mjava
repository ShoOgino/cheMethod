  @Test(
      expectedExceptions = InfrastructureException.class,
      expectedExceptionsMessageRegExp = "Plugin '.*:.*' has invalid type 'null'")
  public void shouldThrowExceptionIfBrokerTypeIsMissing() throws Exception {
    // given
    Collection<PluginMeta> metas = singletonList(new PluginMeta());

    // when
    factory.create(metas, runtimeId, new BrokersResult());
  }

