  @BeforeMethod
  public void setup() {
    ramProvisioner = new RamLimitRequestProvisioner(memoryAttributeProvisioner);
    container = new Container();
    container.setName(CONTAINER_NAME);
    when(k8sEnv.getPods()).thenReturn(of(POD_NAME, pod));
    when(k8sEnv.getMachines()).thenReturn(of(MACHINE_NAME, internalMachineConfig));
    when(internalMachineConfig.getAttributes())
        .thenReturn(
            of(
                MEMORY_LIMIT_ATTRIBUTE,
                RAM_LIMIT_ATTRIBUTE,
                MEMORY_REQUEST_ATTRIBUTE,
                RAM_REQUEST_ATTRIBUTE));
    final ObjectMeta podMetadata = mock(ObjectMeta.class);
    when(podMetadata.getName()).thenReturn(POD_NAME);
    when(pod.getMetadata()).thenReturn(podMetadata);
    final PodSpec podSpec = mock(PodSpec.class);
    when(podSpec.getContainers()).thenReturn(Collections.singletonList(container));
    when(pod.getSpec()).thenReturn(podSpec);
  }

