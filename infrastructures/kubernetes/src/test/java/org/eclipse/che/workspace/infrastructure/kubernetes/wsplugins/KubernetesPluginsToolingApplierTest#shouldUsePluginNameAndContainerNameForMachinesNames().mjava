  @Test
  public void shouldUsePluginNameAndContainerNameForMachinesNames() throws Exception {
    // given
    internalEnvironment.getMachines().clear();

    ChePlugin chePlugin1 = createChePlugin("plugin1", createContainer("container1"));
    ChePlugin chePlugin2 = createChePlugin("plugin2", createContainer("container2"));

    // when
    applier.apply(runtimeIdentity, internalEnvironment, asList(chePlugin1, chePlugin2));

    // then
    Map<String, InternalMachineConfig> machines = internalEnvironment.getMachines();
    assertEquals(machines.size(), 2);
    assertTrue(machines.containsKey("plugin1-container1"));
    assertTrue(machines.containsKey("plugin2-container2"));
  }

