  @Test
  public void testDoNotRethrowExceptionWhenErrorOnCleanupOccurs() throws Exception {
    doAnswer(
            invocationOnMock -> {
              final EventSubscriber<WorkspaceRemovedEvent> argument =
                  invocationOnMock.getArgument(0);
              final WorkspaceRemovedEvent event = mock(WorkspaceRemovedEvent.class);
              when(event.getWorkspace()).thenReturn(workspace);
              argument.onEvent(event);
              return invocationOnMock;
            })
        .when(eventService)
        .subscribe(any(), eq(WorkspaceRemovedEvent.class));
    doThrow(InfrastructureException.class).when(pvcStrategy).cleanup(workspace);

    workspacePVCCleaner.subscribe(eventService);

    verify(pvcStrategy).cleanup(workspace);
  }

