  @Test(dataProvider = "handledTypes")
  public void shouldThrowExceptionIfWorkspaceHasEnvironmentWithExactlyOneHandledType(
      String handledType) {
    // given
    WorkspaceConfigImpl workspaceConfig = new WorkspaceConfigImpl();
    EnvironmentImpl k8sEnv = new EnvironmentImpl();
    k8sEnv.setRecipe(new RecipeImpl(handledType, null, null, null));
    workspaceConfig.getEnvironments().put("Env", k8sEnv);

    try {
      // when
      kubernetesComponentProvisioner.provision(new DevfileImpl(), workspaceConfig);
    } catch (WorkspaceExportException e) {
      // then
      String expectedMessage =
          format("Exporting of workspace with `%s` is not supported yet.", handledType);

      Assert.assertEquals(e.getMessage(), expectedMessage);
    }
  }

