  @Test
  public void testDoesntDeleteExistingNonManagedNamespace() throws Exception {
    // given
    KubernetesNamespace namespace = new KubernetesNamespace(clientFactory, NAMESPACE, WORKSPACE_ID);
    Resource resource = prepareNamespaceResource(NAMESPACE);

    // when
    try {
      namespace.deleteIfManaged();
      fail("Deleting a non-managed namespace shouldn't have succeeded.");
    } catch (InfrastructureException e) {
      // good
    }

    // then
    verify(resource, never()).delete();
  }

