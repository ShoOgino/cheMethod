  @Test(
      expectedExceptions = InfrastructureException.class,
      expectedExceptionsMessageRegExp =
          "Plugin '.*:.*' has unsupported type 'Unsupported test type'")
  public void shouldThrowExceptionIfImageForBrokerIsNonFound() throws Exception {
    // given
    Collection<PluginMeta> metas = singletonList(new PluginMeta().type("Unsupported test type"));

    // when
    factory.create(metas, runtimeId, new BrokersResult());
  }

