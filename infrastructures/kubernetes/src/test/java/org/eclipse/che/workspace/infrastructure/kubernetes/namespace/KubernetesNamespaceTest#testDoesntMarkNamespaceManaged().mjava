  @Test
  public void testDoesntMarkNamespaceManaged() throws Exception {
    // given
    MetadataNested namespaceMeta = prepareCreateNamespaceRequest();

    Namespace nsResource = prepareNamespace(NAMESPACE);
    ObjectMeta metadata = mock(ObjectMeta.class);
    @SuppressWarnings("unchecked")
    Map<String, String> labels = mock(Map.class);
    when(nsResource.getMetadata()).thenReturn(metadata);
    when(metadata.getLabels()).thenReturn(labels);

    KubernetesNamespace namespace = new KubernetesNamespace(clientFactory, NAMESPACE, WORKSPACE_ID);

    // when
    namespace.prepare(false, false);

    // then
    verify(namespaceMeta, never()).withName(NAMESPACE);
    verify(labels, never()).put(anyString(), anyString());
  }

