  private void provisionCheVolumes(
      Map<String, PersistentVolumeClaim> volumeName2PVC,
      KubernetesEnvironment k8sEnv,
      String workspaceId)
      throws InfrastructureException {
    for (PodData pod : k8sEnv.getPodsData().values()) {
      final PodSpec podSpec = pod.getSpec();
      List<Container> containers = new ArrayList<>();
      containers.addAll(podSpec.getContainers());
      containers.addAll(podSpec.getInitContainers());
      for (Container container : containers) {
        final String machineName = Names.machineName(pod, container);
        Map<String, Volume> volumes = k8sEnv.getMachines().get(machineName).getVolumes();
        addMachineVolumes(
            workspaceId,
            k8sEnv.getPersistentVolumeClaims(),
            volumeName2PVC,
            pod,
            container,
            volumes);
      }
    }
  }

