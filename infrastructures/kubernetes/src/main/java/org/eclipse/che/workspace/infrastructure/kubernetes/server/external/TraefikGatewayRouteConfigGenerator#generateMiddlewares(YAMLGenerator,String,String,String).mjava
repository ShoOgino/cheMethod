  /**
   * generates Middlewares part of Traefik config
   *
   * <pre>
   * {name}:
   *   stripPrefix:
   *     prefixes:
   *     - "{path}"
   * {name}_headers:
   *   headers:
   *     customRequestHeaders:
   *       X-Forwarded-Proto: "{protocol}"
   * </pre>
   */
  private void generateMiddlewares(
      YAMLGenerator generator, String name, String path, String protocol) throws IOException {
    generator.writeStartObject();
    generator.writeFieldName(name);
    generator.writeStartObject();
    generator.writeFieldName("stripPrefix");
    generator.writeStartObject();
    generator.writeFieldName("prefixes");
    generator.writeStartArray();
    generator.writeString(path);
    generator.writeEndArray();
    generator.writeEndObject();
    generator.writeEndObject();

    generator.writeFieldName(name + "_headers");
    generator.writeStartObject();
    generator.writeFieldName("headers");
    generator.writeStartObject();
    generator.writeFieldName("customRequestHeaders");
    generator.writeStartObject();
    generator.writeFieldName("X-Forwarded-Proto");
    generator.writeString(protocol);
    generator.writeEndObject();
    generator.writeEndObject();
    generator.writeEndObject();

    generator.writeEndObject();
  }

