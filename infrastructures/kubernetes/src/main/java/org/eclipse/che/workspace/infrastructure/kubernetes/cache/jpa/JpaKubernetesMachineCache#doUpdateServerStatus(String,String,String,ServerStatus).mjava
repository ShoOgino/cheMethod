  @Transactional
  protected boolean doUpdateServerStatus(
      String workspaceId, String machineName, String serverName, ServerStatus status) {
    EntityManager entityManager = managerProvider.get();

    KubernetesServerImpl server =
        entityManager.find(
            KubernetesServerImpl.class, new ServerId(workspaceId, machineName, serverName));

    if (server.getStatus() != status) {
      server.setStatus(status);

      entityManager.flush();
      return true;
    }
    return false;
  }

