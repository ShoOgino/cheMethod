  @Transactional(rollbackOn = {RuntimeException.class, InfrastructureException.class})
  @Override
  public WorkspaceStatus getStatus(RuntimeIdentity runtimeId) throws InfrastructureException {
    try {
      RuntimeId id = new RuntimeId(runtimeId);

      KubernetesRuntimeState runtimeState =
          managerProvider.get().find(KubernetesRuntimeState.class, id);

      if (runtimeState == null) {
        throw new InfrastructureException("State for runtime with id '" + id + "' was not found");
      }

      return runtimeState.getStatus();
    } catch (RuntimeException x) {
      throw new InfrastructureException(x.getMessage(), x);
    }
  }

