  private void useSecureProtocolForGatewayServers(ConfigMap cm) {
    Map<String, ServerConfigImpl> servers =
        Annotations.newDeserializer(cm.getMetadata().getAnnotations()).servers();

    if (servers.isEmpty()) {
      return;
    }

    servers.values().forEach(s -> s.setProtocol(getSecureProtocol(s.getProtocol())));

    Map<String, String> annotations = Annotations.newSerializer().servers(servers).annotations();
    if (!annotations.isEmpty() && cm.getMetadata().getAnnotations() != null) {
      cm.getMetadata().getAnnotations().putAll(annotations);
    }
  }

