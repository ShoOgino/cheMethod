  private Pod newPod(
      String podName,
      RuntimeIdentity runtimeId,
      String configMapName,
      List<Pair<String, String>> envVars) {
    final Container container =
        new ContainerBuilder()
            .withName(CONTAINER_NAME)
            .withImage(pluginBrokerImage)
            .withArgs(
                "-metas",
                CONF_FOLDER + "/" + CONFIG_FILE,
                "-push-endpoint",
                cheWebsocketEndpoint,
                "-runtime-id",
                String.format(
                    "%s:%s:%s",
                    runtimeId.getWorkspaceId(), runtimeId.getEnvName(), runtimeId.getOwnerId()))
            .withImagePullPolicy(brokerPullPolicy)
            .withVolumeMounts(new VolumeMount(CONF_FOLDER + "/", BROKER_VOLUME, true, null))
            .withEnv(envVars.stream().map(this::asEnvVar).collect(toList()))
            .withNewResources()
            .endResources()
            .build();
    Containers.addRamLimit(container, "250Mi");
    Containers.addRamRequest(container, "250Mi");
    return new PodBuilder()
        .withNewMetadata()
        .withName(podName)
        .endMetadata()
        .withNewSpec()
        .withContainers(container)
        .withVolumes(
            new VolumeBuilder()
                .withName(BROKER_VOLUME)
                .withNewConfigMap()
                .withName(configMapName)
                .endConfigMap()
                .build())
        .withRestartPolicy("Never")
        .endSpec()
        .build();
  }

