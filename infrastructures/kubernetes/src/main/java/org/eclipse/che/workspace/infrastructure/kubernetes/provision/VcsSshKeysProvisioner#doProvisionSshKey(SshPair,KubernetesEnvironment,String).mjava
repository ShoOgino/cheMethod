  private void doProvisionSshKey(SshPair sshPair, KubernetesEnvironment k8sEnv, String wsId) {
    if (isNullOrEmpty(sshPair.getName()) || isNullOrEmpty(sshPair.getPrivateKey())) {
      return;
    }
    String validNameForSecret = getValidNameForSecret(sshPair.getName());
    Secret secret =
        new SecretBuilder()
            .addToData(
                SSH_PRIVATE_KEY,
                Base64.getEncoder().encodeToString(sshPair.getPrivateKey().getBytes()))
            .withType(SECRET_TYPE_SSH)
            .withNewMetadata()
            .withName(wsId + "-" + validNameForSecret)
            .endMetadata()
            .build();

    k8sEnv.getSecrets().put(secret.getMetadata().getName(), secret);

    k8sEnv
        .getPodsData()
        .values()
        .forEach(
            p ->
                mountSshKeySecret(secret.getMetadata().getName(), validNameForSecret, p.getSpec()));
  }

