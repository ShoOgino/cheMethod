  private Container newContainer(
      RuntimeIdentity runtimeId, List<EnvVar> envVars, String image, String brokerVolumeName) {
    final Container container =
        new ContainerBuilder()
            .withName(generateUniqueName(CONTAINER_NAME_SUFFIX))
            .withImage(image)
            .withArgs(
                "-metas",
                CONF_FOLDER + "/" + CONFIG_FILE,
                "-push-endpoint",
                cheWebsocketEndpoint,
                "-runtime-id",
                String.format(
                    "%s:%s:%s",
                    runtimeId.getWorkspaceId(), runtimeId.getEnvName(), runtimeId.getOwnerId()))
            .withImagePullPolicy(brokerPullPolicy)
            .withVolumeMounts(new VolumeMount(CONF_FOLDER + "/", "", brokerVolumeName, true, null))
            .withEnv(envVars)
            .withNewResources()
            .endResources()
            .build();
    Containers.addRamLimit(container, "250Mi");
    Containers.addRamRequest(container, "250Mi");
    return container;
  }

