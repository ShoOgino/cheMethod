    @Test
    public void testResolvingServersWhenThereIsMatchedServiceForContainer() {
        Container container = createContainer();
        Pod pod = createPod(ImmutableMap.of("kind", "web-app"));
        Service nonMatchedByPodService = createService("matched", CONTAINER_PORT, ImmutableMap.of("kind", "web-app"));
        Route route = createRoute("matched", ImmutableMap.of("http-server",
                                                             new ServerConfigImpl("3054", "http", "/api"),
                                                             "ws-server",
                                                             new ServerConfigImpl("3054", "ws", "/connect")));

        ServerResolver serverResolver = ServerResolver.of(singletonList(nonMatchedByPodService), singletonList(route));

        Map<String, ServerImpl> resolved = serverResolver.resolve(pod, container);

        assertEquals(resolved.size(), 2);
        assertEquals(resolved.get("http-server"), new ServerImpl("http://localhost/api"));
        assertEquals(resolved.get("ws-server"), new ServerImpl("ws://localhost/connect"));
    }

