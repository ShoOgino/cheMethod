  @Test
  public void performsOrderedProvisioning() throws Exception {
    osInfraProvisioner.provision(environment, osEnv, runtimeIdentity);

    provisionOrder
        .verify(installerProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(serversProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(envVarsProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(labelsProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(restartPolicyRewriter)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(pvcProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(uniqueNamesProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder
        .verify(tlsRouteProvisioner)
        .provision(eq(environment), eq(osEnv), eq(runtimeIdentity));
    provisionOrder.verifyNoMoreInteractions();
  }

