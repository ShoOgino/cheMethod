  @BeforeMethod
  public void setup() {
    ramLimitProvisioner = new RamLimitProvisioner();
    when(osEnv.getPods()).thenReturn(ImmutableMap.of(POD_NAME, pod));
    when(osEnv.getMachines()).thenReturn(ImmutableMap.of(MACHINE_NAME, internalMachineConfig));
    when(internalMachineConfig.getAttributes())
        .thenReturn(ImmutableMap.of(MachineConfig.MEMORY_LIMIT_ATTRIBUTE, RAM_LIMIT_ATTRIBUTE));
    when(container.getName()).thenReturn(CONTAINER_NAME);
    final ObjectMeta podMetadata = mock(ObjectMeta.class);
    when(podMetadata.getName()).thenReturn(POD_NAME);
    when(pod.getMetadata()).thenReturn(podMetadata);
    final PodSpec podSpec = mock(PodSpec.class);
    when(podSpec.getContainers()).thenReturn(Collections.singletonList(container));
    when(pod.getSpec()).thenReturn(podSpec);
  }

