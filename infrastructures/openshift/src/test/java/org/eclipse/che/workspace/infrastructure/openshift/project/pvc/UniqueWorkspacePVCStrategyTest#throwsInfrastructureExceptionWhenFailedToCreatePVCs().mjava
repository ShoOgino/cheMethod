  @Test(expectedExceptions = InfrastructureException.class)
  public void throwsInfrastructureExceptionWhenFailedToCreatePVCs() throws Exception {
    final PersistentVolumeClaim pvc = mockName(mock(PersistentVolumeClaim.class), PVC_NAME_PREFIX);
    when(osEnv.getPersistentVolumeClaims()).thenReturn(singletonMap(PVC_NAME_PREFIX, pvc));
    doThrow(InfrastructureException.class).when(pvcs).createIfNotExist(any());

    strategy.prepare(osEnv, WORKSPACE_ID);
  }

