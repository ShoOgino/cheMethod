  @Test
  public void testRemovesPVCWhenCleanupCalled() throws Exception {
    final MixedOperation mixedOperation = mock(MixedOperation.class);
    final NonNamespaceOperation namespace = mock(NonNamespaceOperation.class);
    final Resource resource = mock(Resource.class);
    doReturn(mixedOperation).when(client).persistentVolumeClaims();
    doReturn(namespace).when(mixedOperation).inNamespace(PROJECT_NAME);
    doReturn(resource).when(namespace).withName(PVC_NAME + '-' + WORKSPACE_ID);
    when(resource.delete()).thenReturn(true);

    uniqueWorkspacePVCStrategy.cleanup(WORKSPACE_ID);

    verify(resource).delete();
  }

