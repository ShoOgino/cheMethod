  @Test
  public void testReplacePVCWhenItsAlreadyInOsEnvironment() throws Exception {
    final Map<String, PersistentVolumeClaim> claims = new HashMap<>();
    final PersistentVolumeClaim provisioned = mock(PersistentVolumeClaim.class);
    claims.put(PVC_NAME, provisioned);
    when(osEnv.getPersistentVolumeClaims()).thenReturn(claims);

    commonPVCStrategy.prepare(env, osEnv, WORKSPACE_ID);

    verify(factory).create(WORKSPACE_ID);
    assertNotEquals(osEnv.getPersistentVolumeClaims().get(PVC_NAME), provisioned);
  }

