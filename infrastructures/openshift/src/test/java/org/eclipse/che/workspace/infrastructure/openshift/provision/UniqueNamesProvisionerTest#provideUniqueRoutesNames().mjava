  @Test
  public void provideUniqueRoutesNames() throws Exception {
    final HashMap<String, Route> routes = new HashMap<>();
    routes.put(POD_NAME, newRoute());
    doReturn(routes).when(osEnv).getRoutes();

    uniqueNamesProvisioner.provision(environment, osEnv, runtimeIdentity);

    final ObjectMeta routeData =
        osEnv.getRoutes().values().stream().map(Route::getMetadata).collect(toList()).get(0);
    assertTrue(routeData.getName().startsWith(ROUTE_PREFIX));
    assertTrue(UNIQUE_ROUTE_NAME_REGEX.matcher(routeData.getName()).matches());
    assertEquals(routeData.getLabels().get(CHE_ORIGINAL_NAME_LABEL), ROUTE_NAME);
  }

