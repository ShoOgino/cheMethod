  @Test(expectedExceptions = InternalInfrastructureException.class)
  public void throwsInternalInfrastructureExceptionWhenRuntimeErrorOccurs() throws Exception {
    doNothing().when(project).cleanUp();
    final OpenShiftPersistentVolumeClaims pvcs = mock(OpenShiftPersistentVolumeClaims.class);
    when(project.persistentVolumeClaims()).thenReturn(pvcs);
    doThrow(RuntimeException.class).when(pvcs).create(any(PersistentVolumeClaim.class));

    try {
      internalRuntime.internalStart(emptyMap());
    } catch (Exception rethrow) {
      verify(project, times(1)).cleanUp();
      verify(project, never()).services();
      verify(project, never()).routes();
      verify(project, never()).pods();
      throw rethrow;
    }
  }

