  @Test
  public void testMarksNamespaceManaged() throws Exception {
    // given
    MetadataNested projectMeta = prepareProjectRequest();

    Project projectResource = prepareProject(PROJECT_NAME);
    ObjectMeta metadata = mock(ObjectMeta.class);
    @SuppressWarnings("unchecked")
    Map<String, String> labels = mock(Map.class);
    when(projectResource.getMetadata()).thenReturn(metadata);
    when(metadata.getLabels()).thenReturn(labels);

    OpenShiftProject project = new OpenShiftProject(clientFactory, PROJECT_NAME, WORKSPACE_ID);

    // when
    project.prepare(true, false);

    // then
    verify(projectMeta, never()).withName(PROJECT_NAME);
    verify(labels).put("che-managed", "true");
  }

