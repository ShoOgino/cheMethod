    @Test(expectedExceptions = InfrastructureException.class)
    public void throwsInfrastructureExceptionWhenInstallerExceptionOccurs() throws Exception {
        final String podName = "test";
        final Pod pod = mockPod(podName, "machine");
        when(osEnv.getPods()).thenReturn(ImmutableMap.of(podName, pod));
        when(environment.getMachines()).thenReturn(ImmutableMap.of("test/machine", mock(MachineConfigImpl.class)));
        when(registry.getOrderedInstallers(any())).thenThrow(new InstallerException("not found"));

        installerConfigProvisioner.provision(environment, osEnv, runtimeIdentity);
    }

