  @Test(expectedExceptions = InfrastructureException.class)
  public void throwsInfrastructureExceptionWhenInstallerExceptionOccurs() throws Exception {
    final String podName = "test";
    final Pod pod = mockPod(podName, "machine");
    when(osEnv.getPods()).thenReturn(ImmutableMap.of(podName, pod));
    when(environment.getMachines())
        .thenReturn(ImmutableMap.of("test/machine", mock(InternalMachineConfig.class)));

    installerConfigProvisioner.provision(environment, osEnv, runtimeIdentity);
  }

