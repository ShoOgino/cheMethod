  @Test
  public void addPVCWithUniqueNameToOsEnv() throws Exception {
    when(osEnv.getPersistentVolumeClaims()).thenReturn(new HashMap<>());

    uniqueWorkspacePVCStrategy.prepare(osEnv, WORKSPACE_ID);

    verify(container, times(2)).getVolumeMounts();
    verify(container2).getVolumeMounts();
    verify(container3).getVolumeMounts();
    // 2x on each volume in pod 1
    verify(podSpec, times(6)).getVolumes();
    verify(podSpec2, times(2)).getVolumes();
    assertFalse(podSpec.getVolumes().isEmpty());
    assertFalse(podSpec2.getVolumes().isEmpty());
    assertFalse(container.getVolumeMounts().isEmpty());
    assertFalse(container2.getVolumeMounts().isEmpty());
    assertFalse(container3.getVolumeMounts().isEmpty());
    assertFalse(osEnv.getPersistentVolumeClaims().isEmpty());
    assertTrue(
        osEnv.getPersistentVolumeClaims().containsKey(PVC_UNIQUE_NAME + '-' + VOLUME_1_NAME));
    assertTrue(
        osEnv.getPersistentVolumeClaims().containsKey(PVC_UNIQUE_NAME + '-' + VOLUME_2_NAME));
  }

