  @Override
  public void provision(
      InternalEnvironment environment, OpenShiftEnvironment osEnv, RuntimeIdentity identity)
      throws InfrastructureException {
    final String workspaceId = identity.getWorkspaceId();
    final Set<Pod> pods = new HashSet<>(osEnv.getPods().values());
    osEnv.getPods().clear();
    for (Pod pod : pods) {
      final ObjectMeta podMeta = pod.getMetadata();
      putLabel(pod, Constants.CHE_ORIGINAL_NAME_LABEL, podMeta.getName());
      final String podName = workspaceId + SEPARATOR + podMeta.getName();
      podMeta.setName(podName);
      osEnv.getPods().put(podName, pod);
    }
    final Set<Route> routes = new HashSet<>(osEnv.getRoutes().values());
    osEnv.getRoutes().clear();
    for (Route route : routes) {
      final ObjectMeta routeMeta = route.getMetadata();
      putLabel(route, Constants.CHE_ORIGINAL_NAME_LABEL, routeMeta.getName());
      final String routeName = NameGenerator.generate(ROUTE_PREFIX, ROUTE_PREFIX_SIZE);
      routeMeta.setName(routeName);
      osEnv.getRoutes().put(routeName, route);
    }
  }

