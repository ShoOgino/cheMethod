    private static boolean isExposedByService(Container container, Service service) {
        for (ServicePort servicePort : service.getSpec().getPorts()) {
            IntOrString targetPort = servicePort.getTargetPort();
            if (targetPort.getIntVal() != null) {
                for (ContainerPort containerPort : container.getPorts()) {
                    if (targetPort.getIntVal().equals(containerPort.getContainerPort())) {
                        return true;
                    }
                }
            } else {
                for (ContainerPort containerPort : container.getPorts()) {
                    if (targetPort.getStrVal().equals(containerPort.getName())) {
                        return true;
                    }
                }
            }
        }
        return false;
    }

