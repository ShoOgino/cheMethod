    public void provision(Environment envConfig,
                          OpenshiftEnvironment internalEnv,
                          RuntimeIdentity identity) throws InfrastructureException {
        //TODO Add required ports to service(or create new one) and routes for agents

        EnvVar workspaceIdEnv = new EnvVar("CHE_WORKSPACE_ID", identity.getWorkspaceId(), null);
        EnvVar cheApiEnv = new EnvVar("CHE_API", cheServerEndpoint, null);

        internalEnv.getPods()
                   .values()
                   .stream()
                   .flatMap(p -> p.getSpec().getContainers().stream())
                   .forEach(c -> {
                       c.getEnv().removeIf(e -> e.getName().equals("CHE_WORKSPACE_ID") || e.getName().equals("CHE_API"));

                       c.getEnv().add(workspaceIdEnv);
                       c.getEnv().add(cheApiEnv);
                   });
    }

