  @Override
  public Long deserialize(JsonParser jsonParser, DeserializationContext ctxt)
      throws IOException, JsonProcessingException {
    Object memLimit = jsonParser.readValueAs(Object.class);
    if (memLimit instanceof Long) {
      return (Long) memLimit;
    }
    if (memLimit instanceof Integer) {
      return ((Integer) memLimit).longValue();
    }
    if (memLimit instanceof String) {
      return Size.parseSize((String) memLimit);
    }
    throw ctxt.mappingException(format(UNSUPPORTED_VALUE_MESSAGE, memLimit));
  }

