  /**
   * Resolves order of start for compose services in an environment.
   *
   * @throws ValidationException if order of services can not be calculated
   */
  public LinkedHashMap<String, ComposeService> order(Map<String, ComposeService> services)
      throws ValidationException {

    Map<String, Integer> weights = weightServices(services);
    List<String> orderedServicesNames = sortByWeight(weights);

    LinkedHashMap<String, ComposeService> orderedServices = new LinkedHashMap<>();
    for (String serviceName : orderedServicesNames) {
      orderedServices.put(serviceName, services.get(serviceName));
    }

    return orderedServices;
  }

