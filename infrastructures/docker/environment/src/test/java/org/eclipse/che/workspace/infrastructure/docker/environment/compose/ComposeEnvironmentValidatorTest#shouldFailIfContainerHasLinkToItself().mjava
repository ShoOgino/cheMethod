  @Test(
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp = "Container '.*' has illegal link to itself"
  )
  public void shouldFailIfContainerHasLinkToItself() throws Exception {
    // given
    when(service.getLinks()).thenReturn(singletonList(MACHINE_NAME + ":alias1"));

    // when
    composeEnvironmentValidator.validate(composeEnv);
  }

