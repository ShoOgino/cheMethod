  @Test(
      expectedExceptions = ValidationException.class,
      expectedExceptionsMessageRegExp =
          "Launch order of services '.*, .*' can't be evaluated. Circular dependency.")
  public void shouldFailIfCircularDependencyFound() throws Exception {
    // given
    Map<String, ComposeService> services = new HashMap<>();
    services.put("second", new ComposeService().withDependsOn(singletonList("third")));
    services.put("third", new ComposeService().withDependsOn(singletonList("second")));
    services.put("first", new ComposeService());

    // when
    strategy.order(services);
  }

