  @Test
  public void shouldOrderServicesWithDependenciesWhereOrderIsNotStrict() throws Exception {
    // given
    Map<String, ComposeService> services = new HashMap<>();
    services.put("second", new ComposeService().withDependsOn(singletonList("first")));
    services.put("third", new ComposeService().withDependsOn(singletonList("second")));
    services.put("first", new ComposeService().withDependsOn(emptyList()));
    services.put("forth", new ComposeService().withDependsOn(singletonList("second")));
    services.put("fifth", new ComposeService().withDependsOn(singletonList("second")));

    // when
    Set<String> actual = strategy.order(services).keySet();

    Iterator<String> iterator = actual.iterator();
    // then
    assertEquals(iterator.next(), "first");
    assertEquals(iterator.next(), "second");
    assertTrue(actual.contains("third"));
    assertTrue(actual.contains("forth"));
    assertTrue(actual.contains("fifth"));
  }

