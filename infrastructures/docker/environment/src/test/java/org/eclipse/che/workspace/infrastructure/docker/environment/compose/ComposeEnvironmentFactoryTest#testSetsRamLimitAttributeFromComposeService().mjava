  @Test
  public void testSetsRamLimitAttributeFromComposeService() throws Exception {
    final long firstMachineLimit = 3072;
    final long secondMachineLimit = 1028;
    final Map<String, InternalMachineConfig> machines =
        ImmutableMap.of(
            MACHINE_NAME_1,
            mockInternalMachineConfig(new HashMap<>()),
            MACHINE_NAME_2,
            mockInternalMachineConfig(new HashMap<>()));
    final Map<String, ComposeService> services =
        ImmutableMap.of(
            MACHINE_NAME_1,
            mockComposeService(firstMachineLimit),
            MACHINE_NAME_2,
            mockComposeService(secondMachineLimit));

    composeEnvironmentFactory.addRamLimitAttribute(machines, services);

    final long[] actual = machinesRam(machines.values());
    long[] expected = new long[] {firstMachineLimit, secondMachineLimit};
    assertTrue(Arrays.equals(actual, expected));
  }

