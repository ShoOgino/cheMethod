  @Test
  public void testAddsMachineConfIntoEnvAndSetsRamLimAttributeWhenMachinePresentOnlyInRecipe()
      throws Exception {
    final long customRamLimit = 3072 * BYTES_IN_MB;
    final Map<String, InternalMachineConfig> machines = new HashMap<>();
    final Map<String, ComposeService> services =
        ImmutableMap.of(MACHINE_NAME_1, mockComposeService(customRamLimit));

    composeEnvironmentFactory.addRamLimitAttribute(machines, services);

    final long[] actual = machinesRam(machines.values());
    final long[] expected = new long[actual.length];
    fill(expected, customRamLimit);
    assertTrue(Arrays.equals(actual, expected));
  }

