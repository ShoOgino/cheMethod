  @Test
  public void testSetRamLimitAttributeWhenRamLimitIsMissingInConfig() throws Exception {
    final Map<String, InternalMachineConfig> machines =
        ImmutableMap.of(MACHINE_NAME, mockInternalMachineConfig(new HashMap<>()));

    factory.doCreate(recipe, machines, Collections.emptyList());

    final long[] actual = machinesRam(machines.values());
    final long[] expected = new long[actual.length];
    fill(expected, DEFAULT_RAM_LIMIT_MB * BYTES_IN_MB);
    assertTrue(Arrays.equals(actual, expected));
  }

