  @Test
  public void testRamProvisionerIsInvokedForEachMachine() throws Exception {
    final Map<String, InternalMachineConfig> machines = new HashMap<>();
    machines.put(MACHINE_NAME_1, mock(InternalMachineConfig.class));
    final Map<String, ComposeService> services =
        ImmutableMap.of(
            MACHINE_NAME_1,
            mockComposeService(0L, 0L),
            MACHINE_NAME_2,
            mockComposeService(4608L, 2048L));

    composeEnvironmentFactory.addRamAttributes(machines, services);

    verify(memoryProvisioner).provision(any(), eq(0L), eq(0L));
    verify(memoryProvisioner).provision(any(), eq(4608L), eq(2048L));
  }

