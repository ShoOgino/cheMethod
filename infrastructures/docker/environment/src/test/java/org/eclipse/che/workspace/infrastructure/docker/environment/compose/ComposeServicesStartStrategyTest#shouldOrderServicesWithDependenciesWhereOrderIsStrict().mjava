  @Test
  public void shouldOrderServicesWithDependenciesWhereOrderIsStrict() throws Exception {
    // given
    Map<String, ComposeService> services = new HashMap<>();
    services.put("second", new ComposeService().withDependsOn(singletonList("first")));
    services.put("third", new ComposeService().withDependsOn(asList("first", "second")));
    services.put("first", new ComposeService().withDependsOn(emptyList()));
    services.put("forth", new ComposeService().withDependsOn(singletonList("third")));
    services.put("fifth", new ComposeService().withDependsOn(asList("forth", "first")));
    String[] expected = new String[] {"first", "second", "third", "forth", "fifth"};

    // when
    Map<String, ComposeService> actual = strategy.order(services);

    // then
    assertEquals(actual.keySet().toArray(), expected);
  }

