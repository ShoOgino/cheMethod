  @Test(
      expectedExceptions = ValidationException.class,
      expectedExceptionsMessageRegExp = "Dependency '.*' in service '.*' in environment is invalid")
  public void shouldFailIfContainerDependencyIsInvalid() throws Exception {
    // given
    when(service.getDependsOn()).thenReturn(singletonList("!--service"));

    // when
    composeEnvironmentValidator.validate(composeEnv);
  }

