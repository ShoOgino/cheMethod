  @Test
  public void shouldOrderServicesWithLinks() throws Exception {
    // given
    Map<String, ComposeService> services = new HashMap<>();
    services.put("second", new ComposeService().withLinks(singletonList("first:alias")));
    services.put("third", new ComposeService().withLinks(asList("first", "second")));
    services.put("first", new ComposeService().withLinks(emptyList()));
    services.put("forth", new ComposeService().withLinks(singletonList("third")));
    services.put("fifth", new ComposeService().withLinks(asList("forth:alias", "first:alias")));
    String[] expected = new String[] {"first", "second", "third", "forth", "fifth"};

    // when
    Map<String, ComposeService> actual = strategy.order(services);

    // then
    assertEquals(actual.keySet().toArray(), expected);
  }

