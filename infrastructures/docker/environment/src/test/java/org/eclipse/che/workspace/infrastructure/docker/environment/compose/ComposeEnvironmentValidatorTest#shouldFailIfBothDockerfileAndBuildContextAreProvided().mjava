  @Test(
      expectedExceptions = ValidationException.class,
      expectedExceptionsMessageRegExp =
          "Service '.*' in environment contains mutually exclusive dockerfile content and build context.")
  public void shouldFailIfBothDockerfileAndBuildContextAreProvided() throws Exception {
    // given
    when(service.getImage()).thenReturn(null);
    when(service.getBuild()).thenReturn(buildContext);
    when(buildContext.getContext()).thenReturn("some value");
    when(buildContext.getDockerfile()).thenReturn("FROM ubuntu");

    // when
    composeEnvironmentValidator.validate(composeEnv);
  }

