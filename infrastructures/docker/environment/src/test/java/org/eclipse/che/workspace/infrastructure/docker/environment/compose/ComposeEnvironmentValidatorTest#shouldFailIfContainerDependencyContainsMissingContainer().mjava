  @Test(
      expectedExceptions = ValidationException.class,
      expectedExceptionsMessageRegExp =
          "Service '.*' in environment contains dependency to non existing service '.*'")
  public void shouldFailIfContainerDependencyContainsMissingContainer() throws Exception {
    // given
    when(service.getDependsOn()).thenReturn(singletonList("nonExistingContainer"));

    // when
    composeEnvironmentValidator.validate(composeEnv);
  }

