  @Test
  public void shouldOrderServicesWithDependenciesWhereOrderIsStrict2() throws Exception {
    // given
    Map<String, ComposeService> services = new HashMap<>();
    services.put("web", new ComposeService().withDependsOn(asList("db", "redis")));
    services.put("redis", new ComposeService().withDependsOn(singletonList("dev-machine")));
    services.put("db", new ComposeService().withDependsOn(singletonList("redis")));
    services.put("dev-machine", new ComposeService().withDependsOn(emptyList()));

    String[] expected = new String[] {"dev-machine", "redis", "db", "web"};

    // when
    Map<String, ComposeService> actual = strategy.order(services);

    // then
    assertEquals(actual.keySet().toArray(), expected);
  }

