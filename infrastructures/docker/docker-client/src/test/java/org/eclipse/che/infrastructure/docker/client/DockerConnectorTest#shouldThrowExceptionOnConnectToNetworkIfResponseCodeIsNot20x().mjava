  @Test(
      expectedExceptions = DockerException.class,
      expectedExceptionsMessageRegExp =
          "Error response from docker API, status: 404, message: exc_message")
  public void shouldThrowExceptionOnConnectToNetworkIfResponseCodeIsNot20x() throws Exception {
    // given
    doReturn(404).when(dockerResponse).getStatus();
    ByteArrayInputStream inputStream = new ByteArrayInputStream("exc_message".getBytes());
    doReturn(inputStream).when(dockerResponse).getInputStream();
    ConnectContainerToNetworkParams connectToNetworkParams =
        ConnectContainerToNetworkParams.create("net_id", createConnectContainer());

    // when
    dockerConnector.connectContainerToNetwork(connectToNetworkParams);
  }

