  @Test
  public void shouldGetXRegistryConfigValueFromDynamicAuthConfigOnly() {
    when(initialAuthConfig.getAuthConfigs()).thenReturn(emptyAuthConfigs);
    when(dynamicAuthResolver.getXRegistryConfig()).thenReturn(dynamicAuthConfigs.getConfigs());

    String base64HeaderValue = authResolver.getXRegistryConfigHeaderValue(emptyAuthConfigs);

    assertEqualsXRegistryConfigHeader(
        base64ToAuthConfigs(base64HeaderValue),
        jsonToAuthConfigs(REGISTRY_WITH_DYNAMIC_PASSWORD_X_AUTH_CONFIG_VALUE));
  }

