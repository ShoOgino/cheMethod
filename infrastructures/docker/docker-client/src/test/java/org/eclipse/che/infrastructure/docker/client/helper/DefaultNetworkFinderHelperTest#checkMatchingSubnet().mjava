  /**
   * Check that we can find a network ip address by having the subnet
   *
   * @throws SocketException
   */
  @Test
  public void checkMatchingSubnet() throws SocketException, UnknownHostException {

    DefaultNetworkFinder networkFinder = new DefaultNetworkFinder();

    InetAddress loopBack = InetAddress.getLoopbackAddress();
    if (loopBack instanceof Inet4Address) {
      Optional<InetAddress> matchingAddress =
          networkFinder.getMatchingInetAddress(
              loopBack.getHostAddress().substring(0, loopBack.getHostAddress().lastIndexOf('.')));

      assertTrue(matchingAddress.isPresent());
      assertEquals(matchingAddress.get().getHostAddress(), loopBack.getHostAddress());
    }
  }

