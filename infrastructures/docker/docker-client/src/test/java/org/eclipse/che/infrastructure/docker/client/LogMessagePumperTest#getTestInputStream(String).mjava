  private InputStream getTestInputStream(String src) throws UnsupportedEncodingException {
    final byte remaining = (byte) src.getBytes("UTF-8").length;
    final byte[] stdoutHeader = {1, 0, 0, 0, 0, 0, 0, remaining};
    final int capacity = stdoutHeader.length + src.getBytes().length;

    ByteBuffer byteBuffer = ByteBuffer.allocate(capacity);
    byteBuffer.put(stdoutHeader);
    byteBuffer.put(src.getBytes());

    return new ByteArrayInputStream(byteBuffer.array());
  }

