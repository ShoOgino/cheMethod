  @Test(
    expectedExceptions = DockerException.class,
    expectedExceptionsMessageRegExp =
        "Error response from docker API, status: 404, message: exc_message"
  )
  public void shouldThrowExceptionOnDisconnectFromNetworkIfResponseCodeIsNot20x() throws Exception {
    // given
    doReturn(404).when(dockerResponse).getStatus();
    ByteArrayInputStream inputStream = new ByteArrayInputStream("exc_message".getBytes());
    doReturn(inputStream).when(dockerResponse).getInputStream();
    DisconnectContainerFromNetworkParams disconnectFromNetworkParams =
        DisconnectContainerFromNetworkParams.create(
            "net_id", new DisconnectContainer().withContainer("container_id").withForce(true));

    // when
    dockerConnector.disconnectContainerFromNetwork(disconnectFromNetworkParams);
  }

