  @Test
  public void shouldNotIncludeCarriageReturnCharInLogMessageWhenLineFeedCharFollow()
      throws Exception {
    final String src = CONTENT + CARRIAGE_RETURN + LINE_FEED;
    MessageProcessor<LogMessage> messageProcessor =
        new MessageProcessor<LogMessage>() {
          @Override
          public void process(LogMessage message) {
            String actual = message.getContent();

            assertEquals(actual, CONTENT);
            assertFalse(actual.endsWith(CARRIAGE_RETURN));
          }
        };
    LogMessagePumper logMessagePumper =
        new LogMessagePumper(getTestInputStream(src), messageProcessor);
    logMessagePumper.start();
  }

