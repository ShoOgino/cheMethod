  /**
   * Maps ports in the same way {@link #map(ContainerPort[], Map)} method does, but for convenience
   * allows to use port bindings in different format, like defined by {@link
   * NetworkSettings#getPorts()}.
   */
  public Map<String, ServerImpl> map(
      Map<String, List<PortBinding>> ports, Map<String, ServerConfig> configs) {
    if (ports == null) {
      return Collections.emptyMap();
    }
    return map(
        ports
            .entrySet()
            .stream()
            .filter(entry -> entry.getValue() != null && entry.getValue().size() == 1)
            .map(entry -> toContainerPort(entry.getKey(), entry.getValue().get(0)))
            .toArray(ContainerPort[]::new),
        configs);
  }

