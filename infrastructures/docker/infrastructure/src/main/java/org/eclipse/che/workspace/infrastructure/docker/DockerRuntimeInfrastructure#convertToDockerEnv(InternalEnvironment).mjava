  private DockerEnvironment convertToDockerEnv(InternalEnvironment sourceEnv)
      throws ValidationException {
    String recipeType = sourceEnv.getRecipe().getType();
    String envType = sourceEnv.getType();
    if (!recipeType.equals(envType)) {
      throw new ValidationException(
          format(
              "Environments with different type and source type are not supported. Type '%s'. Source type '%s'.",
              envType, recipeType));
    }
    DockerEnvironmentConverter converter = envConverters.get(recipeType);
    if (converter == null) {
      throw new ValidationException(
          format(
              "Environment type '%s' is not supported. Supported environment types: %s",
              recipeType, Joiner.on(", ").join(envConverters.keySet())));
    }
    return converter.convert(sourceEnv);
  }

