  private void restoreMachine(String name, DockerContainerConfig originalConfig)
      throws InfrastructureException, InterruptedException {
    RuntimeIdentity identity = getContext().getIdentity();
    try {
      SnapshotImpl snapshot =
          snapshotDao.getSnapshot(identity.getWorkspaceId(), identity.getEnvName(), name);
      startMachine(name, configForSnapshot(snapshot, originalConfig));
    } catch (NotFoundException | SourceNotFoundException x) {
      LOG.warn(
          "Snapshot for machine '{}:{}:{}' is missing, machine will be started from source",
          identity.getWorkspaceId(),
          identity.getEnvName(),
          name);
      startMachine(name, originalConfig);
    } catch (SnapshotException x) {
      throw new InternalInfrastructureException(x);
    }
  }

