  private Map<String, PortBinding[]> convertPortBindings(
      List<String> portsSpecs, String machineName) throws InternalInfrastructureException {
    Map<String, PortBinding[]> portsBindings = Maps.newHashMapWithExpectedSize(portsSpecs.size());
    for (String portSpec : portsSpecs) {
      String[] portMapping = portSpec.split(":");
      if (portMapping.length == 1) {
        portsBindings.put(portMapping[0], new PortBinding[] {new PortBinding()});
      } else if (portMapping.length == 2) {
        portsBindings.put(
            portMapping[0], new PortBinding[] {new PortBinding().withHostPort(portMapping[1])});
      } else {
        throw new InternalInfrastructureException(
            format("Invalid port specification '%s' found machine '%s'", portsSpecs, machineName));
      }
    }
    return portsBindings;
  }

