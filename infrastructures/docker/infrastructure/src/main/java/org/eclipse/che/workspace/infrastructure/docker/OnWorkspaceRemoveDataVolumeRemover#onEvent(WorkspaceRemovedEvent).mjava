  @Override
  public void onEvent(WorkspaceRemovedEvent event) {
    String wsId = event.getWorkspace().getId();
    try {
      List<Volume> volumes = docker.getVolumes().getVolumes();
      // May happen because Docker API is not very consistent on whether it returns null or empty
      // collection
      if (volumes == null) {
        return;
      }
      for (Volume volume : volumes) {
        String volumeName = volume.getName();
        if (VolumeNames.matches(volumeName, wsId)) {
          try {
            docker.removeVolume(volumeName);
          } catch (IOException e) {
            LOG.error(
                format(
                    "Error occurs on removing of volume '%s' of workspace '%s'. Error: %s",
                    volumeName, wsId, e.getLocalizedMessage()),
                e);
          }
        }
      }
    } catch (IOException e) {
      LOG.error(
          format(
              "Error occurs on removal of volumes of workspace '%s'. Error: %s",
              wsId, e.getLocalizedMessage()),
          e);
    }
  }

