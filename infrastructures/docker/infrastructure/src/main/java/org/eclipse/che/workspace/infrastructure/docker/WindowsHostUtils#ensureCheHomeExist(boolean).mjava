  /**
   * Creates Che home folder if not exist on Windows host. Che home folder is located in
   * System.getProperty("user.home") + {@link WindowsHostUtils#WINDOWS_CHE_HOME_PATH}
   *
   * @param allowFoldersCreation whether creation of needed directories is allowed
   * @return Path to Che home dir
   * @throws IOException if folders creation failed or needed folder is missing (depends on value of
   *     parameter of the method)
   */
  public static Path ensureCheHomeExist(boolean allowFoldersCreation) throws IOException {
    Path cheHome = Paths.get(System.getProperty("user.home") + WINDOWS_CHE_HOME_PATH);
    if (Files.notExists(cheHome)) {
      if (allowFoldersCreation) {
        Files.createDirectories(cheHome);
      } else {
        throw new IOException(
            String.format("Folder %s is missing and its creation is disallowed", cheHome));
      }
    }
    return cheHome;
  }

