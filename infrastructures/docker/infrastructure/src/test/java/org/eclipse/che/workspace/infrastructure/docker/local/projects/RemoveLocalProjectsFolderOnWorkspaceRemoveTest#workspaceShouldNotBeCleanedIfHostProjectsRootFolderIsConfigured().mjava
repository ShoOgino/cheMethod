  @Test
  public void workspaceShouldNotBeCleanedIfHostProjectsRootFolderIsConfigured() throws Exception {
    removeLocalProjectsFolderOnWorkspaceRemove =
        spy(
            new RemoveLocalProjectsFolderOnWorkspaceRemove(
                HOST_PROJECTS_FOLDER, projectsFolderPathProvider));

    when(projectsFolderPathProvider.getPath(anyString())).thenReturn(HOST_PROJECTS_FOLDER);
    when(removeLocalProjectsFolderOnWorkspaceRemove.getInstanceDataPath())
        .thenReturn(HOST_INSTANCE_DATA_FOLDER);

    removeLocalProjectsFolderOnWorkspaceRemove.onEvent(new WorkspaceRemovedEvent(workspace));

    verify(projectsFolderPathProvider).getPath(WORKSPACE_ID);
    verify(removeLocalProjectsFolderOnWorkspaceRemove, never())
        .deleteRecursiveAsync(anyString(), anyString());
  }

