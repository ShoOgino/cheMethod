  @Test(dataProvider = "urlRewritingTestProvider")
  public void shouldRewriteURL(
      RuntimeIdentity identity,
      String externalIP,
      String internalIp,
      String machineName,
      String serverName,
      String nioHost,
      String nioPort,
      String incomeURL,
      String expectedURL)
      throws Exception {
    SinglePortUrlRewriter rewriter =
        new SinglePortUrlRewriter(externalIP, 8080, internalIp, nioHost, nioPort);

    String rewrittenURL = rewriter.rewriteURL(identity, machineName, serverName, incomeURL);

    assertEquals(rewrittenURL, expectedURL);
  }

