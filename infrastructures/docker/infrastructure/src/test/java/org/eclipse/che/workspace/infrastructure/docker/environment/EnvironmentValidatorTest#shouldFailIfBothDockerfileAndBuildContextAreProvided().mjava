  @Test(
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp =
        "Machine '.*' in environment contains mutually exclusive dockerfile content and build context."
  )
  public void shouldFailIfBothDockerfileAndBuildContextAreProvided() throws Exception {
    // given
    when(container.getImage()).thenReturn(null);
    when(container.getBuild()).thenReturn(buildContext);
    when(buildContext.getContext()).thenReturn("some value");
    when(buildContext.getDockerfileContent()).thenReturn("FROM ubuntu");

    // when
    environmentValidator.validate(environment, dockerEnvironment);
  }

