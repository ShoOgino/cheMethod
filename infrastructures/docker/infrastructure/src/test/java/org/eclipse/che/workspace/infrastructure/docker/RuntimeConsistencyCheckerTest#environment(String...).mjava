  private static InternalEnvironment environment(String... names) {
    Map<String, InternalMachineConfig> configs = new HashMap<>();
    for (String name : names) {
      configs.put(name, mock(InternalMachineConfig.class));
    }

    InternalEnvironment environment = mock(InternalEnvironment.class);
    doReturn(configs).when(environment).getMachines();
    when(environment.toString()).thenReturn(Arrays.toString(names));
    return environment;
  }

