  @Test
  public void shouldNotAddNeitherExtConfVolumeNorEnvVarIfMachineDoesNotHaveServerButHasInstaller()
      throws Exception {
    // given
    dockerEnv = createDockerEnvironment(MACHINE_1_NAME, MACHINE_2_NAME, MACHINE_1_NAME);
    DockerEnvironment expectedDockerEnv = new DockerEnvironment(dockerEnv);
    InternalMachineConfig machine = dockerEnv.getMachines().get(MACHINE_1_NAME);
    when(machine.getServers())
        .thenReturn(singletonMap(Constants.SERVER_WS_AGENT_HTTP_REFERENCE, new ServerConfigImpl()));

    // when
    provisioner.provision(dockerEnv, RUNTIME_IDENTITY);

    // then
    assertEquals(dockerEnv, expectedDockerEnv);
  }

