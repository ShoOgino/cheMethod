  @Test(
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp = "Container '.*' has illegal dependency to itself"
  )
  public void shouldFailIfContainerHasDependencyToItself() throws Exception {
    // given
    when(container.getDependsOn()).thenReturn(singletonList(MACHINE_NAME));

    // when
    environmentValidator.validate(environment, dockerEnvironment);
  }

