  @Test(
      expectedExceptions = InternalInfrastructureException.class,
      expectedExceptionsMessageRegExp =
          "Error occurred on resolving path to files of workspace " + WORKSPACE_ID)
  public void shouldThrowExceptionWhenWsFolderPathProviderThrowsException() throws Exception {
    // given
    when(workspaceFolderPathProvider.getPath(anyString())).thenThrow(new IOException("test"));
    dockerEnvironment
        .getContainers()
        .get(MACHINE_1_NAME)
        .getVolumes()
        .add(volume(WORKSPACE_ID, "projects", PATH_IN_CONTAINER));

    // when
    provisioner.provision(dockerEnvironment, RUNTIME_IDENTITY);
  }

