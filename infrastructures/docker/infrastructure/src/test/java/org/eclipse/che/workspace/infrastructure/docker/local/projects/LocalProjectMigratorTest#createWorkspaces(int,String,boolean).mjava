  private List<WorkspaceImpl> createWorkspaces(
      int amount, String namePrefix, boolean oldProjectsLocation) throws IOException {
    List<WorkspaceImpl> result = new ArrayList<>();
    for (int i = 1; i <= amount; i++) {
      String workspaceName = "ws_name_" + namePrefix + i;
      String workspaceId = "ws_id_" + namePrefix + i;

      WorkspaceImpl workspace = mock(WorkspaceImpl.class);
      WorkspaceConfigImpl workspaceConfig = mock(WorkspaceConfigImpl.class);
      when(workspace.getId()).thenReturn(workspaceId);
      when(workspace.getConfig()).thenReturn(workspaceConfig);
      when(workspace.getConfig().getName()).thenReturn(workspaceName);

      result.add(workspace);

      String workspaceFolder = oldProjectsLocation ? workspaceName : workspaceId;
      Files.createDirectories(Paths.get(workspacesRoot).resolve(workspaceFolder));
      Files.createFile(Paths.get(workspacesRoot).resolve(workspaceFolder).resolve("pom.xml"));
    }

    return result;
  }

