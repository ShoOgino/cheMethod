  @Test
  public void shouldIgnoreNullResultsFromProviders() throws Exception {
    // given
    ToolingServersEnvVarsProvisioner provisioner =
        new ToolingServersEnvVarsProvisioner(ImmutableSet.of(provider1, provider2));
    Pair<String, String> envVar1 = Pair.of("env1", "value1");
    when(provider1.get(any(RuntimeIdentity.class))).thenReturn(envVar1);
    when(provider2.get(any(RuntimeIdentity.class))).thenReturn(null);
    DockerEnvironment expected =
        new DockerEnvironment()
            .setContainers(
                singletonMap(
                    CONTAINER_1_NAME,
                    new DockerContainerConfig().setEnvironment(singletonMap("env1", "value1"))));

    // when
    provisioner.provision(envConfig, dockerEnvironment, RUNTIME_IDENTITY);

    // then
    assertEquals(expected, dockerEnvironment);
  }

