  @Test
  public void shouldBeAbleToRemoveSeveralAbandonedNetworks() throws IOException {
    // given
    final Network abandonedNetwork2 = mock(Network.class);
    final String abandonedNetwork2Id = "network2";
    when(abandonedNetwork2.getId()).thenReturn(abandonedNetwork2Id);
    when(abandonedNetwork2.getName()).thenReturn("workspace0w5kg95j93kd9a1l_cjmd8rbnf9j9dnso");
    when(abandonedNetwork2.getContainers()).thenReturn(new HashMap<>());

    final Network userNetwork = mock(Network.class);
    final String userNetworkId = "network4";
    when(userNetwork.getId()).thenReturn(userNetworkId);
    when(userNetwork.getName()).thenReturn("userNetwork");
    when(userNetwork.getContainers()).thenReturn(new HashMap<>());

    usedNetworkContainers.put(containerId1, containerInNetwork1);

    networks.add(usedNetwork);
    networks.add(abandonedNetwork);
    networks.add(abandonedNetwork2);
    networks.add(userNetwork);

    // when
    cleaner.cleanNetworks();

    // then
    verify(dockerConnector, never()).removeNetwork(usedNetworkId);
    verify(dockerConnector, never()).removeNetwork(userNetworkId);
    verify(dockerConnector).removeNetwork(abandonedNetworkId);
    verify(dockerConnector).removeNetwork(abandonedNetworkId);
  }

