  @Test(
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp =
        "Environment contains machines that are missing in environment recipe: .*"
  )
  public void shouldFailIfMachineIsNotInContainersList() throws Exception {
    // given
    when(environment.getMachines()).thenReturn(singletonMap(MACHINE_NAME, machineConfig));
    when(dockerEnvironment.getContainers()).thenReturn(singletonMap("machine2", container));

    // when
    environmentValidator.validate(environment, dockerEnvironment);
  }

