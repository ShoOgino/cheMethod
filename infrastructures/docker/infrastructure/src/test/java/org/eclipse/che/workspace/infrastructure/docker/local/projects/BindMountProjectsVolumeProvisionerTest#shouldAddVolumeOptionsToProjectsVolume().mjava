  @Test
  public void shouldAddVolumeOptionsToProjectsVolume() throws Exception {
    // given
    String options = "rwZ";
    provisioner =
        new BindMountProjectsVolumeProvisioner(workspaceFolderPathProvider, pathEscaper, options);
    when(workspaceFolderPathProvider.getPath(anyString())).thenReturn(PATH_ON_HOST);
    dockerEnvironment
        .getContainers()
        .get(MACHINE_1_NAME)
        .getVolumes()
        .add(volume(WORKSPACE_ID, "projects", PATH_IN_CONTAINER));
    DockerEnvironment expectedDockerEnv = new DockerEnvironment(dockerEnvironment);
    List<String> expectedVolumes =
        expectedDockerEnv.getContainers().get(MACHINE_1_NAME).getVolumes();
    expectedVolumes.clear();
    expectedVolumes.add(PATH_ON_HOST + ":" + PATH_IN_CONTAINER + ":" + options);

    // when
    provisioner.provision(dockerEnvironment, RUNTIME_IDENTITY);

    // then
    assertEquals(dockerEnvironment, expectedDockerEnv);
  }

