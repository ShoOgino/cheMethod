  @Test
  public void shouldBeAbleToParseDockerfileEnvironment() throws Exception {
    // given
    DockerContainerConfig container =
        new DockerContainerConfig()
            .setBuild(new DockerBuildContext().setDockerfileContent(DEFAULT_DOCKERFILE));
    DockerEnvironment expected =
        new DockerEnvironment()
            .setContainers(newLinkedHashMap(singletonMap(DEFAULT_MACHINE_NAME, container)));
    expected.setMachines(singletonMap(DEFAULT_MACHINE_NAME, machineConfig));
    expected.setRecipe(recipe);
    expected.setType(DockerEnvironment.TYPE);

    // when
    DockerEnvironment actual = converter.convert(environment);

    // then
    assertEquals(actual, expected);
  }

