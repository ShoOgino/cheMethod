  @Test
  public void shouldKeepRemovingWhenOneRemovalFails() throws Exception {
    // given
    String volume1Name = VolumeNames.generate(WS_ID, "volume1");
    String volume2Name = VolumeNames.generate(WS_ID, "volume2");
    String volume3Name = VolumeNames.generate(WS_ID, "volume3");
    Volume volume1 = new Volume().withName(volume1Name);
    Volume volume2 = new Volume().withName(volume2Name);
    Volume volume3 = new Volume().withName(volume3Name);
    when(volumes.getVolumes()).thenReturn(asList(volume1, volume2, volume3));
    lenient().doThrow(new IOException("test exc")).when(docker).removeVolume(eq(volume2Name));

    // when
    remover.onEvent(event);

    // then
    InOrder inOrder = inOrder(docker);
    inOrder.verify(docker).removeVolume(eq(volume1Name));
    inOrder.verify(docker).removeVolume(eq(volume2Name));
    inOrder.verify(docker).removeVolume(eq(volume3Name));
  }

