    @Override
    public RuntimeContext prepare(RuntimeIdentity identity, Environment environment) throws ValidationException,
                                                                                            InfrastructureException {
        DockerEnvironment dockerEnvironment = dockerEnvironmentParser.parse(environment);
        dockerEnvironmentValidator.validate(environment, dockerEnvironment);
        // check that order can be resolved
        List<String> orderedServices = startStrategy.order(dockerEnvironment);

        infrastructureProvisioner.provision(environment, dockerEnvironment);

        environmentNormalizer.normalize(environment, dockerEnvironment, identity);

        // environment holder
        return new DockerRuntimeContext(dockerEnvironment,
                                        environment,
                                        identity,
                                        this,
                                        null,
                                        orderedServices,
                                        networkLifecycle,
                                        serviceStarter);
    }

