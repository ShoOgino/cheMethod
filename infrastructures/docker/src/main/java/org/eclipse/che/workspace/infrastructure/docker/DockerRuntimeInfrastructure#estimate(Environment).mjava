    @Override
    public Environment estimate(Environment environment) throws ValidationException,
                                                                InfrastructureException {
        DockerEnvironment dockerEnvironment = dockerEnvironmentParser.parse(environment);
        dockerEnvironmentValidator.validate(environment, dockerEnvironment);
        // check that order can be resolved
        startStrategy.order(dockerEnvironment);
        // TODO rething agent stuff
        for (MachineConfig machineConfig : environment.getMachines().values()) {
            try {
                agentSorter.sort(machineConfig.getAgents());
            } catch (AgentException e) {
                throw new ValidationException(e.getLocalizedMessage(), e);
            }
        }
        // TODO add an actual estimation of what is missing in the environment
        // memory
        // machines

        return environment;
    }

