  private DockerContainerConfig normalizeSource(
      DockerContainerConfig containerConfig, MachineSource machineSource) {
    DockerContainerConfig containerWithNormalizedSource =
        new DockerContainerConfig(containerConfig);
    if ("image".equals(machineSource.getType())) {
      containerWithNormalizedSource.setBuild(null);
      containerWithNormalizedSource.setImage(machineSource.getLocation());
    } else {
      // dockerfile
      containerWithNormalizedSource.setImage(null);
      if (machineSource.getContent() != null) {
        containerWithNormalizedSource.setBuild(
            new DockerBuildContext(null, null, machineSource.getContent(), null));
      } else {
        containerWithNormalizedSource.setBuild(
            new DockerBuildContext(machineSource.getLocation(), null, null, null));
      }
    }
    return containerWithNormalizedSource;
  }

