    public void normalize(Environment environment, DockerEnvironment dockerEnvironment, RuntimeIdentity identity)
            throws InfrastructureException {
        String networkId = NameGenerator.generate(identity.getWorkspaceId() + "_", 16);
        dockerEnvironment.setNetwork(networkId);

        Map<String, DockerService> services = dockerEnvironment.getServices();
        for (Map.Entry<String, DockerService> serviceEntry : services.entrySet()) {
            normalize(identity.getOwner(), identity.getWorkspaceId(), serviceEntry.getKey(), serviceEntry.getValue());
        }
        normalizeNames(dockerEnvironment);
    }

