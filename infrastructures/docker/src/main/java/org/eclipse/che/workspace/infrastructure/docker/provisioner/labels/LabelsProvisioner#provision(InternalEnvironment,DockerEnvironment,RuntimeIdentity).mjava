  @Override
  public void provision(
      InternalEnvironment envConfig, DockerEnvironment internalEnv, RuntimeIdentity identity)
      throws InfrastructureException {

    for (Map.Entry<String, InternalMachineConfig> entry : envConfig.getMachines().entrySet()) {
      String name = entry.getKey();
      DockerContainerConfig container = internalEnv.getContainers().get(name);
      container
          .getLabels()
          .putAll(
              Labels.newSerializer()
                  .machineName(name)
                  .runtimeId(identity)
                  .servers(entry.getValue().getServers())
                  .labels());
    }
  }

