  public void normalize(
      Environment environment, DockerEnvironment dockerEnvironment, RuntimeIdentity identity)
      throws InfrastructureException {
    String networkId = identity.getWorkspaceId() + "_" + identity.getEnvName();
    dockerEnvironment.setNetwork(networkId);

    Map<String, DockerContainerConfig> containers = dockerEnvironment.getContainers();
    for (Map.Entry<String, DockerContainerConfig> containerEntry : containers.entrySet()) {
      normalize(
          identity.getOwner(),
          identity.getWorkspaceId(),
          containerEntry.getKey(),
          containerEntry.getValue());
    }
    normalizeNames(dockerEnvironment);
  }

