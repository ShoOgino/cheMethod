    @Override
    protected InternalRuntime internalStart(Map<String, String> startOptions) throws ServerException {
        // https://github.com/eclipse/che/blob/master/wsmaster/che-core-api-workspace/src/main/java/org/eclipse/che/api/environment/server/CheEnvironmentEngine.java#L728
        // peek machine
        // start each machine
        // start agents in each machine
        // peek machine
        dockerNetworkLifecycle.createNetwork(dockerEnvironment.getNetwork());
        String machine = queuePeek();
        while (machine != null) {
            DockerService service = getService(machine);
            MachineRuntime machineRuntime = serviceStarter.startService(dockerEnvironment.getNetwork(),
                                                                        service,
                                                                        logger);
            startedHandler.started(machineRuntime, agents);
            machine = queuePeek();
        }

        return null;
    }

