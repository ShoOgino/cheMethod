  public void normalize(
      InternalEnvironment environment,
      DockerEnvironment dockerEnvironment,
      RuntimeIdentity identity)
      throws InfrastructureException {

    String networkId = identity.getWorkspaceId() + "_" + identity.getEnvName();
    dockerEnvironment.setNetwork(networkId);

    Map<String, DockerContainerConfig> containers = dockerEnvironment.getContainers();
    for (Map.Entry<String, DockerContainerConfig> containerEntry : containers.entrySet()) {
      DockerContainerConfig containerConfig = containerEntry.getValue();
      containerConfig.setContainerName(
          containerNameGenerator.generateContainerName(
              identity.getWorkspaceId(),
              containerConfig.getId(),
              identity.getOwner(),
              containerEntry.getKey()));
    }
    normalizeNames(dockerEnvironment);
  }

