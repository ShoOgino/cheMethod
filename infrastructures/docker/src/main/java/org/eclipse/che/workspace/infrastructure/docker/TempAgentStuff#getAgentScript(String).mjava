    public String getAgentScript(String agent) throws InfrastructureException {
        try {
            String agentScript = agentRegistry.getAgent(new AgentKeyImpl(agent)).getScript();
            if (runCommands.containsKey(agent)) {
                agentScript = agentScript + '\n' + runCommands.get(agent);
            }
            return agentScript;
        } catch (AgentException e) {
            throw new InfrastructureException(e.getLocalizedMessage(), e);
        }
    }

