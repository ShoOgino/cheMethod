    private void destroyRuntime(Map<String, String> stopOptions) throws InfrastructureException {
        Map<String, DockerMachine> machines = startSynchronizer.removeMachines();
        if (isSnapshotEnabled(stopOptions)) {
            // TODO send other runtime statuses? Which ones? STARTING, STOPPING, RUNNING, STOPPED?
            snapshotMachines(machines);
        }
        for (Map.Entry<String, DockerMachine> entry : machines.entrySet()) {
            destroyMachineQuietly(entry.getKey(), entry.getValue());
            eventService.publish(DtoFactory.newDto(MachineStatusEvent.class)
                                           .withEventType(MachineStatus.STOPPED)
                                           .withIdentity(DtoConverter.asDto(getContext().getIdentity()))
                                           .withMachineName(entry.getKey()));
            sendStoppedEvent(entry.getKey());
        }
        // TODO what happens when context throws exception here
        networks.destroyNetwork(getContext().getDockerEnvironment().getNetwork());
    }

