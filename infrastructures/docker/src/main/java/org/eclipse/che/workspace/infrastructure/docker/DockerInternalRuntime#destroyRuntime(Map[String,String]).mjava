    private void destroyRuntime(Map<String, String> stopOptions) throws InfrastructureException {
        if (stopOptions != null && "true".equals(stopOptions.get("create-snapshot"))) {
            snapshotMachines(startSynchronizer.removeMachines());
        } else {
            startSynchronizer.removeMachines()
                             .forEach(this::destroyMachineQuietly);
        }
        // TODO what happens when context throws exception here
        dockerNetworkLifecycle.destroyNetwork(dockerEnvironment.getNetwork());
    }

