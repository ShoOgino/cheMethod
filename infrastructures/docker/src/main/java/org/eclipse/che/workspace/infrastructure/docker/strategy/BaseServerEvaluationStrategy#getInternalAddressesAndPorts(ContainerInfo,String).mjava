    @Override
    protected Map<String, String> getInternalAddressesAndPorts(ContainerInfo containerInfo, String internalHost) {
        final String internalAddressContainer = containerInfo.getNetworkSettings().getIpAddress();

        final String internalAddress;

        if (localDockerMode) {
            internalAddress = !isNullOrEmpty(internalAddressContainer) ?
                internalAddressContainer :
                internalHost;
        } else {
            internalAddress =
                cheDockerIp != null ?
                cheDockerIp :
                internalHost;
        }

        boolean useExposedPorts = localDockerMode && internalAddress != internalHost;

        return getExposedPortsToAddressPorts(internalAddress, containerInfo.getNetworkSettings().getPorts(), useExposedPorts);
    }

