    /**
     * Applies docker specific properties to an environment of machines.
     *
     * @param envConfig
     *         environment config with the list of agents that should be injected into machine
     * @param dockerEnvironment
     *         affected environment of machines
     * @throws AgentException
     *         if any error occurs
     */
    public void apply(Environment envConfig,
                      DockerEnvironment dockerEnvironment) throws AgentException {
        for (Map.Entry<String, ? extends MachineConfig> machineEntry : envConfig.getMachines()
                                                                                .entrySet()) {
            String machineName = machineEntry.getKey();
            MachineConfig machineConf = machineEntry.getValue();
            DockerContainerConfig dockerService = dockerEnvironment.getServices().get(machineName);

            apply(machineConf, dockerService);
        }
    }

