    private void addSystemWideContainerSettings(String workspaceId,
                                                boolean isDev,
                                                DockerContainerConfig containerConfig) {
        List<String> portsToExpose;
        List<String> volumes;
        Map<String, String> env;
        if (isDev) {
            portsToExpose = devMachinePortsToExpose;
            volumes = devMachineSystemVolumes;
            env = new HashMap<>(devMachineEnvVariables);
            env.put(CHE_WORKSPACE_ID, workspaceId);
            env.put(USER_TOKEN, getUserToken(workspaceId));
        } else {
            portsToExpose = commonMachinePortsToExpose;
            env = commonMachineEnvVariables;
            volumes = commonMachineSystemVolumes;
        }
        // register workspace ID and Machine Name
        env.put(CHE_WORKSPACE_ID, workspaceId);
        // FIXME: spi
//        env.put(DockerInstanceRuntimeInfo.CHE_MACHINE_NAME, machineName);
//        env.put(DockerInstanceRuntimeInfo.CHE_IS_DEV_MACHINE, Boolean.toString(isDev));

        containerConfig.getExpose().addAll(portsToExpose);
        containerConfig.getEnvironment().putAll(env);
        containerConfig.getVolumes().addAll(volumes);
        containerConfig.getNetworks().addAll(additionalNetworks);
    }

