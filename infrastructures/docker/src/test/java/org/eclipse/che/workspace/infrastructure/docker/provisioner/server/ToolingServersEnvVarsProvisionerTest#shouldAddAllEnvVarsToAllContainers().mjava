    @Test
    public void shouldAddAllEnvVarsToAllContainers() throws Exception {
        // given
        ToolingServersEnvVarsProvisioner provisioner =
                new ToolingServersEnvVarsProvisioner(ImmutableSet.of(provider1, provider2));
        dockerEnvironment.getContainers().put(CONTAINER_2_NAME, new DockerContainerConfig());
        Pair<String, String> envVar1 = Pair.of("env1", "value1");
        Pair<String, String> envVar2 = Pair.of("env2", "value2");
        ImmutableMap<String, String> envVarsFromProviders = ImmutableMap.of(envVar1.first, envVar1.second,
                                                                            envVar2.first, envVar2.second);
        when(provider1.get(any(RuntimeIdentity.class))).thenReturn(envVar1);
        when(provider2.get(any(RuntimeIdentity.class))).thenReturn(envVar2);
        DockerEnvironment expected = new DockerEnvironment();
        expected.getContainers()
                .put(CONTAINER_1_NAME, new DockerContainerConfig().setEnvironment(envVarsFromProviders));
        expected.getContainers()
                .put(CONTAINER_2_NAME, new DockerContainerConfig().setEnvironment(envVarsFromProviders));

        // when
        provisioner.provision(envConfig, dockerEnvironment, RUNTIME_IDENTITY);

        // then
        assertEquals(expected, dockerEnvironment);
    }

