  @Test
  public void shouldAddExposedPorts() throws Exception {
    final ServerConfig serverConf1 = mock(ServerConfig.class);
    final ServerConfig serverConfig = mock(ServerConfig.class);
    when(serverConf1.getPort()).thenReturn("1111/udp");
    when(serverConfig.getPort()).thenReturn("2222/tcp");

    when(installer1.getServers()).thenAnswer(invocation -> singletonMap("a", serverConf1));
    when(installer2.getServers()).thenAnswer(invocation -> singletonMap("b", serverConfig));
    when(installer3.getServers()).thenReturn(emptyMap());
    DockerContainerConfig containerConf = new DockerContainerConfig();
    InternalMachineConfig machineConfig = mock(InternalMachineConfig.class);
    when(machineConfig.getInstallers()).thenReturn(asList(installer1, installer2, installer3));

    installerConfigApplier.apply(machineConfig, containerConf);

    List<String> exposedPorts = containerConf.getExpose();
    assertTrue(exposedPorts.contains("1111/udp"));
    assertTrue(exposedPorts.contains("2222/tcp"));
  }

