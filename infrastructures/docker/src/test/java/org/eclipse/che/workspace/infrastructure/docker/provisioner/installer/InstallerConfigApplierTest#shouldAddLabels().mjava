  @Test
  public void shouldAddLabels() throws Exception {
    final ServerConfig serverConf1 = mock(ServerConfig.class);
    when(serverConf1.getPort()).thenReturn("1111/udp");
    when(serverConf1.getProtocol()).thenReturn("http");
    when(serverConf1.getPath()).thenReturn("b");

    when(installer1.getServers()).thenAnswer(invocation -> singletonMap("a", serverConf1));
    DockerContainerConfig containerConf = new DockerContainerConfig();
    InternalMachineConfig machineConfig = mock(InternalMachineConfig.class);
    when(machineConfig.getInstallers()).thenReturn(singletonList(installer1));

    installerConfigApplier.apply(machineConfig, containerConf);

    Map<String, String> labels = containerConf.getLabels();
    assertEquals(labels.size(), 3);
    assertEquals(labels.get("org.eclipse.che.server.a.port"), "1111/udp");
    assertEquals(labels.get("org.eclipse.che.server.a.protocol"), "http");
    assertEquals(labels.get("org.eclipse.che.server.a.path"), "b");
  }

