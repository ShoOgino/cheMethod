    @Test(expectedExceptions = IllegalArgumentException.class,
          expectedExceptionsMessageRegExp = "OldMachine .* contains server conf with invalid port .*",
          dataProvider = "invalidPortProvider")
    public void shouldFailValidationIfServerConfPortIsInvalid(String invalidPort) throws Exception {
        OldMachineConfigDto config = createMachineConfig();
        config.getServers()
              .add(newDto(OldServerConfDto.class).withPort(invalidPort));


        environmentValidator.validateMachine(config);
    }

