  @Test
  public void shouldAddVolumeOptionsToProjectsVolume() throws Exception {
    // given
    String options = "rwZ";
    provisioner =
        new ProjectsVolumeProvisioner(
            workspaceFolderPathProvider, pathEscaper, PATH_IN_CONTAINER, options);
    when(workspaceFolderPathProvider.getPath(anyString())).thenReturn(PATH_ON_HOST);
    EnvironmentImpl expectedEnvironment = new EnvironmentImpl(environment);
    DockerEnvironment expectedDockerEnv = new DockerEnvironment(dockerEnvironment);
    expectedDockerEnv
        .getContainers()
        .get(MACHINE_1_NAME)
        .getVolumes()
        .add(PATH_ON_HOST + ":" + PATH_IN_CONTAINER + ":" + options);

    // when
    provisioner.provision(environment, dockerEnvironment, RUNTIME_IDENTITY);

    // then
    assertEquals(dockerEnvironment, expectedDockerEnv);
    assertEquals(environment, expectedEnvironment);
  }

