  @Test(
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp =
        "Value of attribute 'memoryLimitBytes' of machine '.*' in environment is illegal",
    dataProvider = "memoryAttributeValue"
  )
  public void shouldFailIfMemoryAttributeIsIllegal(String memoryAttributeValue) throws Exception {
    // given
    Map<String, String> attributes =
        ImmutableMap.of("testKey", "value", "memoryLimitBytes", memoryAttributeValue);
    when(machineConfig.getAttributes()).thenReturn(attributes);

    // when
    environmentValidator.validate(environment, dockerEnvironment);
  }

