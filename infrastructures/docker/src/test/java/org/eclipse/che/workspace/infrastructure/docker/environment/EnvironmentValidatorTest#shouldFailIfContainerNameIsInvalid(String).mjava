  @Test(
    dataProvider = "badMachineNameProvider",
    expectedExceptions = ValidationException.class,
    expectedExceptionsMessageRegExp = "Name of machine '.*' in environment is invalid"
  )
  public void shouldFailIfContainerNameIsInvalid(String name) throws Exception {
    // given
    when(dockerEnvironment.getContainers()).thenReturn(singletonMap(name, container));
    when(environment.getMachines()).thenReturn(singletonMap(name, machineConfig));

    // when
    environmentValidator.validate(environment, dockerEnvironment);
  }

