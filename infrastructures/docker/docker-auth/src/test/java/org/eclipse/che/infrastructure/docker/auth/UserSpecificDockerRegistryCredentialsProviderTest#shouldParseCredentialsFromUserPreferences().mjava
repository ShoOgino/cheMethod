  @Test
  public void shouldParseCredentialsFromUserPreferences() throws ServerException {
    String base64encodedCredentials =
        "eyJyZWdpc3RyeS5jb206NTAwMCI6eyJ1c2VybmFtZSI6ImxvZ2luIiwicGFzc3dvcmQiOiJwYXNzIn19";
    setCredentialsIntoPreferences(base64encodedCredentials);
    String registry = "registry.com:5000";
    AuthConfig authConfig =
        DtoFactory.newDto(AuthConfig.class).withUsername("login").withPassword("pass");

    AuthConfigs parsedAuthConfigs = dockerCredentials.getCredentials();

    AuthConfig parsedAuthConfig = parsedAuthConfigs.getConfigs().get(registry);

    assertNotNull(parsedAuthConfig);
    assertEquals(parsedAuthConfig.getUsername(), authConfig.getUsername());
    assertEquals(parsedAuthConfig.getPassword(), authConfig.getPassword());
  }

