    private void storeTestData() throws Exception {
        final UserImpl user = createUser("user123");
        final ProfileImpl profile = createProfile(user.getId());
        final Map<String, String> preferences = createPreferences();
        final SshPairImpl pair = createSshPair(user.getId(), "service", "name");
        final WorkspaceImpl workspace = createWorkspace("id", user.getAccount());
        final SnapshotImpl snapshot = createSnapshot("snapshot123", workspace.getId());
        final RecipeImpl recipe = createRecipe("recipe123");
        final StackImpl stack = createStack("stack123", "stack-name");

        factory.create(LocalUserDaoImpl.FILENAME).store(singletonMap(user.getId(), user));
        factory.create(LocalProfileDaoImpl.FILENAME).store(singletonMap(profile.getUserId(), profile));
        factory.create(LocalPreferenceDaoImpl.FILENAME).store(singletonMap(user.getId(), preferences));
        factory.create(LocalSshDaoImpl.FILENAME, singletonMap(SshPairImpl.class, new SshSerializer()))
               .store(singletonMap(pair.getOwner(), singletonList(pair)));
        factory.create(LocalWorkspaceDaoImpl.FILENAME, singletonMap(WorkspaceImpl.class, new WorkspaceSerializer()))
               .store(singletonMap(workspace.getId(), workspace));
        factory.create(LocalSnapshotDaoImpl.FILENAME).store(singletonMap(snapshot.getId(), snapshot));
        factory.create(LocalRecipeDaoImpl.FILENAME).store(singletonMap(recipe.getId(), recipe));
        factory.create(StackLocalStorage.STACK_STORAGE_FILE).store(singletonMap(stack.getId(), stack));
    }

