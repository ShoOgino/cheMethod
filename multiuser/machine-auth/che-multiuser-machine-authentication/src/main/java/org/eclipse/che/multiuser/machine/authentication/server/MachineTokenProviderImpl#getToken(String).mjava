  @Override
  public String getToken(String workspaceId) throws MachineTokenException {
    String currentUserId = EnvironmentContext.getCurrent().getSubject().getUserId();
    try {
      return tokenRegistry.getOrCreateToken(currentUserId, workspaceId);
    } catch (NotFoundException e) {
      throw new MachineTokenException(e.getMessage(), e);
    }
  }

