  @Test
  public void testTriesToLoadKeysOnGettingKeyPairAndNoCachedKeyPair() throws Exception {
    when(signatureKeyDao.getAll(anyInt(), anyLong()))
        .thenThrow(new ServerException("unexpected end of stack"));

    signatureKeyManager.getKeyPair();

    verify(signatureKeyDao).getAll(anyInt(), anyLong());
  }

