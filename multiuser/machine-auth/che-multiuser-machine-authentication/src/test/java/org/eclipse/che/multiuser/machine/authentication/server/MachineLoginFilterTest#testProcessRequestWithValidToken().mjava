  @Test
  public void testProcessRequestWithValidToken() throws Exception {
    machineLoginFilter.doFilter(getRequestMock(), responseMock, chainMock);

    verify(keyManagerMock).getKeyPair();
    verify(userManagerMock).getById(anyString());
    verifyZeroInteractions(responseMock);
  }

