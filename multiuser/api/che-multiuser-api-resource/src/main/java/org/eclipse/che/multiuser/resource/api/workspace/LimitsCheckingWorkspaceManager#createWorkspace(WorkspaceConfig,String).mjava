  @Override
  public WorkspaceImpl createWorkspace(WorkspaceConfig config, String namespace)
      throws ServerException, ConflictException, NotFoundException {
    checkMaxEnvironmentRam(config);
    String accountId = accountManager.getByName(namespace).getId();
    try (@SuppressWarnings("unused")
        Unlocker u = resourcesLocks.lock(accountId)) {
      checkWorkspaceResourceAvailability(accountId);

      return super.createWorkspace(config, namespace);
    }
  }

