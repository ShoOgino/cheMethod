  @Test
  public void
      shouldUseDefaultMachineRamWhenCalculatingRamOfEnvironmentWithMultipleMachinesIncludingMachineWithoutLimit()
          throws Exception {
    Map<String, CheServiceImpl> services = new HashMap<>();
    services.put("service1", new CheServiceImpl().withMemLimit(null));

    when(environmentParser.parse(anyObject()))
        .thenReturn(new CheServicesEnvironmentImpl().withServices(services));

    long ram = environmentRamCalculator.calculate(environment);

    assertEquals(ram, 2048L);
  }

