  @Test
  public void shouldCheckPermissionsOnGettingFactoryJson() throws Exception {
    final Response response =
        given()
            .auth()
            .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
            .when()
            .get(SECURE_PATH + "/factory/workspace/workspace123");

    assertEquals(response.getStatusCode(), 204);
    verify(service).getFactoryJson(eq("workspace123"), anyString());
    verify(subject).checkPermission(DOMAIN_ID, "workspace123", READ);
  }

