  @Test
  public void shouldReplacePermissionsOnStoringWhenItHasAlreadyExisted() throws Exception {
    StackPermissionsImpl oldPermissions = permissions[0];

    StackPermissionsImpl newPermissions =
        new StackPermissionsImpl(
            oldPermissions.getUserId(), oldPermissions.getInstanceId(), singletonList("read"));
    dao.store(newPermissions);

    final Permissions result = dao.get(oldPermissions.getUserId(), oldPermissions.getInstanceId());

    assertEquals(newPermissions, result);
  }

