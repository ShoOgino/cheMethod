  @Test
  public void shouldBeAbleToRetrieveNextPermissionPage() throws Exception {
    final String stackId = "stack123";

    final Page<AbstractPermissions> currentPage = mock(Page.class);
    when(currentPage.hasNextPage()).thenReturn(true);
    when(currentPage.getNextPageRef()).thenReturn(mock(Page.PageRef.class));

    final Page<AbstractPermissions> nextPage = mock(Page.class);
    when(permissionsManager.getByInstance(eq(DOMAIN_ID), eq(stackId), anyInt(), anyLong()))
        .thenReturn(nextPage);

    assertEquals(permissionsFilter.getNextPermissionsPage(stackId, currentPage), nextPage);
  }

