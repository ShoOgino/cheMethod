  @Test(expectedExceptions = ForbiddenException.class)
  public void throwsExceptionWhenChecksAdminPermissionsWithWrongDomainOnSetPermission()
      throws Exception {
    final Permissions permissions = new StackPermissionsImpl("*", "stack73", singletonList(SEARCH));
    when(subj.hasPermission(StackDomain.DOMAIN_ID, null, MANAGE_SYSTEM_ACTION)).thenReturn(false);

    stackSetPermChecker.check(permissions);

    verify(subj).hasPermission(any(), any(), MANAGE_SYSTEM_ACTION);
    verify(defaultChecker).check(permissions);
  }

