  @Test
  public void shouldFindStackByPublicAndDirectPermissions() throws Exception {
    manager.persist(
        new StackPermissionsImpl("*", stacks[0].getId(), Arrays.asList("read", "search")));
    manager.persist(
        new StackPermissionsImpl(
            users[0].getId(), stacks[0].getId(), Arrays.asList("read", "search")));

    List<StackImpl> results = dao.searchStacks(users[0].getId(), null, 0, 0);
    assertEquals(results.size(), 1);
    assertTrue(results.contains(stacks[0]));
  }

