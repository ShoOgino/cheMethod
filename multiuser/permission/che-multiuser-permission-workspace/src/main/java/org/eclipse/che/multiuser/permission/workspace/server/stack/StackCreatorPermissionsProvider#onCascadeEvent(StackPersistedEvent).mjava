  @Override
  public void onCascadeEvent(StackPersistedEvent event) throws Exception {
    final Subject subject = EnvironmentContext.getCurrent().getSubject();
    if (!subject.isAnonymous()) {
      permissionsManager.storePermission(
          new StackPermissionsImpl(
              subject.getUserId(), event.getStack().getId(), StackDomain.getActions()));
    }
  }

