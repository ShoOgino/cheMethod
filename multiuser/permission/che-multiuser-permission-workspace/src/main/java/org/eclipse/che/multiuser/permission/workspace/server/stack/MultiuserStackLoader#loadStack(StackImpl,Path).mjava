  protected void loadStack(StackImpl stack, Path imagePath) {
    setIconData(stack, imagePath);
    try {
      try {
        stackDao.update(stack);
      } catch (NotFoundException ignored) {
        stackDao.create(stack);
      }
      permissionsDao.store(
          new StackPermissionsImpl("*", stack.getId(), singletonList(StackDomain.SEARCH)));
    } catch (ServerException | ConflictException ex) {
      LOG.warn(format("Failed to load stack with id '%s' ", stack.getId()), ex.getMessage());
    }
  }

