  @Test
  public void shouldReplacePermissionsOnStoringWhenItHasAlreadyExisted() throws Exception {
    RecipePermissionsImpl oldPermissions = permissions[0];

    RecipePermissionsImpl newPermissions =
        new RecipePermissionsImpl(
            oldPermissions.getUserId(), oldPermissions.getInstanceId(), singletonList("read"));
    dao.store(newPermissions);

    final Permissions result = dao.get(oldPermissions.getUserId(), oldPermissions.getInstanceId());

    assertEquals(newPermissions, result);
  }

