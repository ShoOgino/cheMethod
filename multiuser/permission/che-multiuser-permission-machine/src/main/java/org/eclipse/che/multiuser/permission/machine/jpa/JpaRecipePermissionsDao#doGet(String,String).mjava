  @Transactional
  protected RecipePermissionsImpl doGet(String userId, String instanceId) {
    userId = wildcardToNull(userId);
    if (userId == null) {
      return managerProvider
          .get()
          .createNamedQuery("RecipePermissions.getByRecipeIdPublic", RecipePermissionsImpl.class)
          .setParameter("recipeId", instanceId)
          .getSingleResult();
    } else {
      return managerProvider
          .get()
          .createNamedQuery("RecipePermissions.getByUserAndRecipeId", RecipePermissionsImpl.class)
          .setParameter("recipeId", instanceId)
          .setParameter("userId", userId)
          .getSingleResult();
    }
  }

