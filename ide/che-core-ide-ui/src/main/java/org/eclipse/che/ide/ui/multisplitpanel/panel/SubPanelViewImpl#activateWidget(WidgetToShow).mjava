  @Override
  public void activateWidget(WidgetToShow widgetToActivate) {
    final Tab tab = widgets2Tabs.get(widgetToActivate);
    if (tab != null) {
      selectTab(tab);
    }

    IsWidget widget = widgetToActivate.getWidget();
    widgetsPanel.showWidget(widget.asWidget());
    if (widget instanceof Focusable) {
      ((Focusable) widget).setFocus(true);
    }

    // add 'active' attribute for active widget for testing purpose
    for (WidgetToShow widgetToShow : widgets2Tabs.keySet()) {
      widgetToShow.getWidget().asWidget().getElement().removeAttribute("active");
    }
    widget.asWidget().getElement().setAttribute("active", "");
  }

