  /**
   * Set leaf state for the specific node. To be able to change leaf state, node should implement
   * {@link MutableNode}.
   *
   * <p>Useful for dynamically changing node state, e.g. to show members on leaf node.
   *
   * @param node node to process
   * @param leaf true if node should become to be a leaf, otherwise false
   * @return true if node changed own state, otherwise false
   */
  public boolean setLeaf(Node node, boolean leaf) {
    checkNotNull(node, NULL_NODE_MSG);

    if (node instanceof MutableNode) {
      NodeDescriptor nodeDescriptor = getNodeDescriptor(node);
      if (nodeDescriptor != null) {
        nodeDescriptor.setLeaf(leaf);
        refresh(node);
        return true;
      }
    }

    return false;
  }

