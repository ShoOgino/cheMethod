  /**
   * Collect all children for specified list of nodes. Collected nodes may be filtered by visible
   * status.
   *
   * @param parent list of nodes, which children should be collected
   * @param onlyVisible true if only visible children should be collected, otherwise false
   * @return unmodifiable list of children
   */
  public List<Node> getAllChildNodes(List<Node> parent, boolean onlyVisible) {
    List<Node> list = new ArrayList<>();
    for (Node node : parent) {
      list.add(node);
      if (!onlyVisible || getNodeDescriptor(node).isExpanded()) {
        findChildren(node, list, onlyVisible);
      }
    }
    return unmodifiableList(list);
  }

