  /** Hides the {@link Window} popup. The popup will animate out of view. */
  public void hide() {
    if (blocked) {
      return;
    }

    if (!isShowing) {
      return;
    }

    isShowing = false;

    // Animate the popup out of existence.
    view.setShowing(false);

    // Remove the popup when the animation completes.
    new Timer() {
      @Override
      public void run() {
        if (blocked) {
          return;
        }

        // The popup may have been shown before this timer executes.
        if (!isShowing) {
          view.removeFromParent();
          Style style = view.contentContainer.getElement().getStyle();
          style.clearPosition();
          style.clearLeft();
          style.clearTop();
        }
      }
    }.schedule(view.getAnimationDuration());
  }

