  private void onRemove(StoreRemoveEvent se) {
    NodeDescriptor nodeDescriptor = getNodeDescriptor(se.getNode());
    if (nodeDescriptor != null) {
      if (view.getRootContainer(nodeDescriptor) != null) {
        nodeDescriptor.getRootContainer().removeFromParent();
      }
      unregister(se.getNode());

      for (Node child : se.getChildren()) {
        unregister(child);
      }

      Node parent = se.getParent();
      if (parent != null) {
        NodeDescriptor descriptor = getNodeDescriptor(parent);
        if (descriptor != null
            && descriptor.isExpanded()
            && nodeStorage.getChildCount(descriptor.getNode()) == 0) {
          if (fireCancellableEvent(new BeforeCollapseNodeEvent(parent))) {
            descriptor.setExpanded(false);
            view.onJointChange(descriptor, Joint.COLLAPSED);
            fireEvent(new CollapseNodeEvent(parent));
          }
        }
        moveFocus(nodeDescriptor.getRootContainer());
      }
    }

    if (getRootNodes().isEmpty()) {
      emptyStatus.paint();
    }
  }

