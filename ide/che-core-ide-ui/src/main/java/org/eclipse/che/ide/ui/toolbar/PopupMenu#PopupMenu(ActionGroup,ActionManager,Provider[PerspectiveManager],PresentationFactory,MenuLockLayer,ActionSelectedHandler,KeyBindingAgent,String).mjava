  /**
   * Creates new popup.
   *
   * @param actionGroup action group
   * @param actionManager action manager
   * @param managerProvider manager provider
   * @param presentationFactory presentation factory
   * @param lockLayer lock layer, uses as root for attaching this popup menu
   * @param actionSelectedHandler handler for action selected event
   * @param keyBindingAgent agent for key binding
   * @param itemIdPrefix id prefix of the item
   */
  public PopupMenu(
      ActionGroup actionGroup,
      ActionManager actionManager,
      Provider<PerspectiveManager> managerProvider,
      PresentationFactory presentationFactory,
      MenuLockLayer lockLayer,
      ActionSelectedHandler actionSelectedHandler,
      KeyBindingAgent keyBindingAgent,
      String itemIdPrefix) {
    this.actionManager = actionManager;
    this.managerProvider = managerProvider;

    initPopupMenu(
        actionGroup,
        presentationFactory,
        lockLayer,
        actionSelectedHandler,
        keyBindingAgent,
        itemIdPrefix);
    redraw();
  }

