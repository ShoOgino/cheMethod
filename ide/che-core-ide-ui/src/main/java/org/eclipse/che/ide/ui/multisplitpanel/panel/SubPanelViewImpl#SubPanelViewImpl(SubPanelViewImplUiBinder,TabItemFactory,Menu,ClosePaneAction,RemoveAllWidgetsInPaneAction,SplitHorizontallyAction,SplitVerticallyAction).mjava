    @Inject
    public SubPanelViewImpl(SubPanelViewImplUiBinder uiBinder,
                            TabItemFactory tabItemFactory,
                            Menu menu,
                            @Assisted ClosePaneAction closePaneAction,
                            @Assisted RemoveAllWidgetsInPaneAction removeAllWidgetsInPaneAction,
                            @Assisted SplitHorizontallyAction splitHorizontallyAction,
                            @Assisted SplitVerticallyAction splitVerticallyAction) {
        this.tabItemFactory = tabItemFactory;
        this.menu = menu;

        menu.addListItem(new MenuItemActionWidget(closePaneAction));
        menu.addListItem(new MenuItemActionWidget(removeAllWidgetsInPaneAction));
        menu.addListItem(new MenuItemActionWidget(splitHorizontallyAction));
        menu.addListItem(new MenuItemActionWidget(splitVerticallyAction));

        menu.setDelegate(this);

        tabs2Widgets = new HashMap<>();
        widgets2Tabs = new HashMap<>();
        widgets2ListItems = new HashMap<>();

        splitLayoutPanel = new SplitLayoutPanel(3);

        initWidget(uiBinder.createAndBindUi(this));

        tabsPanel.add(menu);

        widgetsPanel.addDomHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                delegate.onWidgetFocused(widgetsPanel.getVisibleWidget());
            }
        }, ClickEvent.getType());
    }

