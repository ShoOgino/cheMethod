    /**
     * Creates a toolbar part widget.
     *
     * @return widget
     */
    private Widget createToolbarPart(List<Utils.VisibleActionGroup> visibleActionGroupList) {
        FlowPanel toolbarPart = new FlowPanel();

        if (addSeparatorFirst) {
            final Widget firstDelimiter = createDelimiter();
            toolbarPart.add(firstDelimiter);
        }

        for (Utils.VisibleActionGroup visibleActionGroup : visibleActionGroupList) {
            List<Action> actions = visibleActionGroup.getActionList();
            if (actions == null || actions.size() == 0) {
                continue;
            }
            FlowPanel actionGroupPanel = new FlowPanel();
            actionGroupPanel.setStyleName(toolbarResources.toolbar().toolbarActionGroupPanel());
            toolbarPart.add(actionGroupPanel);
            for (Action action : actions) {
                if (action instanceof Separator) {
                    int actionIndex = actions.indexOf(action);
                    if (actionIndex > 0 && actionIndex < actions.size() - 1) {
                        final Widget delimiter = createDelimiter();
                        actionGroupPanel.add(delimiter);
                    }
                } else if (action instanceof CustomComponentAction) {
                    Presentation presentation = presentationFactory.getPresentation(action);
                    Widget customComponent = ((CustomComponentAction)action).createCustomComponent(presentation);
                    actionGroupPanel.add(customComponent);
                } else if (action instanceof ActionGroup && ((ActionGroup)action).isPopup()) {
                    ActionPopupButton button = new ActionPopupButton((ActionGroup)action,
                                                                     actionManager,
                                                                     keyBindingAgent,
                                                                     presentationFactory,
                                                                     managerProvider,
                                                                     toolbarResources);
                    actionGroupPanel.add(button);
                } else {
                    final ActionButton button = createToolbarButton(action);
                    actionGroupPanel.add(button);
                }
            }
        }
        return toolbarPart;
    }

