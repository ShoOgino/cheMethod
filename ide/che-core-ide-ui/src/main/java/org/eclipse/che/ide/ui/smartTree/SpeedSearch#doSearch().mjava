  private void doSearch() {
    if (Strings.isNullOrEmpty(searchRequest.toString())) {
      cancelSearch();
      return;
    }

    addSearchPopUpToTree();
    searchPopUp.setSearchRequest(searchRequest.toString());
    tree.getSelectionModel().deselectAll();

    Iterable<Node> filter = Iterables.filter(getVisibleNodes(), matchesToSearchRequest());

    boolean first = false;
    for (Node node : filter) {
      if (!first) {
        tree.scrollIntoView(node);
        first = true;
      }
      tree.getSelectionModel().select(node, true);
    }
  }

