    public void resend() {
        if (messages.isEmpty()) {
            return;
        }

        final List<WebSocketTransmission> backing = new ArrayList<>(messages);
        messages.clear();

        for (WebSocketTransmission message : backing) {
            if (connection.isOpen()) {
                connection.send(message);
            } else {
                messages.add(message);
            }
        }
    }

