  /**
   * Matches a browser-specific name against the user agent to obtain a version number.
   *
   * @param name The browser-specific name to use
   * @param userAgent The user agent string to check
   * @return A version number or -1 if unknown
   */
  private static int calculateVersion(String name, String userAgent) {
    int index = userAgent.toLowerCase().indexOf(name);
    if (index == -1) {
      return -1;
    }

    Box<Integer> output = Box.create();

    index += name.length() + 1;

    if ((index = consumeDigit(index, userAgent, output)) == -1) {
      return -1;
    }
    int major = output.boxed;

    index++;

    if ((index = consumeDigit(index, userAgent, output)) == -1) {
      return -1;
    }
    int minor = output.boxed;

    return major * 1000 + minor;

    //  TODO(user): Make this work after regex deps are fixed and don't break static rendering
    //
    //    RegExp pattern = RegExp.compile(regexp);
    //    MatchResult result = pattern.exec(userAgent.toLowerCase());
    //    if (result != null && result.getGroupCount() == 3) {
    //      int major = Integer.parseInt(result.getGroup(1));
    //      int minor = Integer.parseInt(result.getGroup(2));
    //      return major * 1000 + minor;
    //    }
    //    return -1;
  }

