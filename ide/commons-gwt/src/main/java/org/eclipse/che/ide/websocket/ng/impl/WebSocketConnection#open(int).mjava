    public void open(int delay) {
        if (url == null){
            Log.error(WebSocketConnection.class, "Cannot open connection because no URL is set");

            throw new IllegalStateException("No URL is set");
        }

        webSocket = webSocketCreator.create(url, delay);
        webSocket.open();

        Log.debug(getClass(), "Opening connection. Url: " + url);
    }

