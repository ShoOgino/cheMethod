  /**
   * Returns a new path which is the same as this path but with the file extension removed. If this
   * path does not have an extension, this path is returned.
   *
   * <p>The file extension portion is defined as the string following the last period (".")
   * character in the last segment. If there is no period in the last segment, the path has no file
   * extension portion. If the last segment ends in a period, the file extension portion is the
   * empty string.
   *
   * @return the new path
   * @see #addFileExtension(String)
   * @since 4.0.0-RC5
   */
  public Path removeFileExtension() {
    String extension = getFileExtension();
    if (extension == null || extension.equals("")) {
      return this;
    }
    String lastSegment = lastSegment();
    int index = lastSegment.lastIndexOf(extension) - 1;
    return removeLastSegments(1).append(lastSegment.substring(0, index));
  }

