  /**
   * Expands the current node. Must have children if you call this!
   *
   * @param css The {@link Tree.Css} instance that contains relevant selector names.
   * @param shouldAnimate whether to do the animation or not
   */
  final void openNode(
      NodeDataAdapter<D> dataAdapter,
      Tree.Css css,
      AnimationController opener,
      boolean shouldAnimate) {
    ensureChildrenContainer(dataAdapter, css);

    Element expandControl = getExpandControl();

    assert (hasChildrenContainer()
            && CssUtils.containsClassName(expandControl, css.expandControl()))
        : "Tried to open a node that didn't have an expand control";

    setOpen(css, true);

    Element childrenContainer = getChildrenContainer();
    if (shouldAnimate) {
      opener.show(childrenContainer);
    } else {
      opener.showWithoutAnimating(childrenContainer);
    }
  }

