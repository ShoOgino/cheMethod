  @Override
  public final <B> Promise<B> then(
      Function<V, B> onFulfilled, Function<PromiseError, B> onRejected) {
    if (onFulfilled != null) {
      return this.internalThen(onFulfilled, onRejected);
    } else {
      return this.catchError(onRejected);
    }
  }

