  /** {@inheritDoc} */
  @Override
  public void subscribe(String channel, MessageHandler handler) throws WebSocketException {
    checkWebSocketConnectionState();

    List<MessageHandler> subscribersSet = channelToSubscribersMap.get(channel);
    if (subscribersSet != null) {
      subscribersSet.add(handler);
      return;
    }
    subscribersSet = new ArrayList<>();
    subscribersSet.add(handler);
    channelToSubscribersMap.put(channel, subscribersSet);
    sendSubscribeMessage(channel);
  }

