        @Override
        double getTop(ClientRect elementRect, int offsetY) {
            Element gwt = Elements.getElementById(GWT_ROOT);
            ClientRect anchorRect =
                    RelativeClientRect.relativeToRect(gwt.getBoundingClientRect(), anchor.getBoundingClientRect());

            switch (getVerticalAlignment()) {
                case TOP:
                    return anchorRect.getTop() - elementRect.getHeight() - offsetY;
                case MIDDLE:
                    double anchory = anchorRect.getTop() + anchorRect.getHeight() / 2;
                    return anchory - elementRect.getHeight() / 2 - offsetY;
                case BOTTOM:
                    return anchorRect.getBottom() + offsetY;
                case TOP_TOP:
                    return anchorRect.getTop();
                default:
                    return 0;
            }
        }

