  @Override
  public final <B> Promise<B> then(final Thenable<B> thenable) {
    if (thenable instanceof JavaScriptObject) {
      return this.thenJs((JavaScriptObject) thenable);
    } else {
      return this.thenJava(thenable);
    }
  }

