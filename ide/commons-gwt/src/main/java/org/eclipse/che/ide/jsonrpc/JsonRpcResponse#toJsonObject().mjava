    public JsonObject toJsonObject() {
        JsonObject response = jsonFactory.createObject();
        response.put("jsonrpc", "2.0");

        if (id != null) {
            response.put("id", id);
        }

        if (hasResult()) {
            response.put("result", result.toJsonValue());
        } else if (hasError()) {
            response.put("error", error.toJsonObject());
        }

        return response;
    }

