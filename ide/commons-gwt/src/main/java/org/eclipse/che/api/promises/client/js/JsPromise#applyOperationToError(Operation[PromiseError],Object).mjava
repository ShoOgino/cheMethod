    private static void applyOperationToError(Operation<PromiseError> onRejected, Object reason) throws OperationException {
        final Throwable cause = getCause(reason);

        if (cause != null) {
            onRejected.apply(JsPromiseError.create(cause));
        } else {
            onRejected.apply(JsPromiseError.create(reason instanceof Throwable ? (Throwable)reason : null));
        }
    }

