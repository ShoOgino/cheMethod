  private String generateErrorMessage(Response response) {
    StringBuilder message = new StringBuilder();
    String protocol = Window.Location.getProtocol();
    String host = Window.Location.getHost();
    String url = this.request.getRequestBuilder().getUrl();

    // deletes query params
    url = url.substring(0, url.indexOf('?'));

    message
        .append(response.getStatusCode())
        .append(" ")
        .append(response.getStatusText())
        .append(" ")
        .append(protocol)
        .append("//")
        .append(host)
        .append(url);

    return message.toString();
  }

