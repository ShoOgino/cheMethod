  /**
   * Creates an instance of UserAgent.
   *
   * <p>NOTE(danilatos): This method is designed to be statically evaluable by the compiler, such
   * that the compiler can determine that only one subclass of UserAgent is ever used within a given
   * permutation. This is possible because GWT.isClient() is replaced with true by the compiler,
   * even though it is executed normally in unit tests. Testing the return value of GWT.create() is
   * not adequate because only boolean values can be statically evaluated by the compiler at this
   * time.
   *
   * @return an instance of UserAgent.
   */
  private static UserAgentStaticProperties createInstance() {
    if (GWT.isClient()) {
      return GWT.create(UserAgentStaticProperties.class);
    } else {
      return new FirefoxImpl();
    }
  }

