    private void handleEndFor(Element elem, String type) {

      // An element should only have 1 transition end handler at a time. We
      // remove in the handle callback, but we cannot depend on the handle
      // callback being correctly invoked. Over eager removal is OK.
      TransitionEndHandler oldListener = getOldListener(elem, type);
      if (oldListener != null) {
        elem.removeEventListener(type, oldListener, false);
        oldListener.maybeDispatchAnimationCallback(null);
      }
      elem.addEventListener(type, this, false);
      replaceOldListener(elem, type, this);
    }

