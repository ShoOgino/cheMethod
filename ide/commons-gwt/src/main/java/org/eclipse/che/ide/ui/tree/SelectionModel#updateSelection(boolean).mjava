    /**
     * Sets new tree state and updates the selection.
     *
     * @param active active or not
     */
    public void updateSelection(boolean active) {
        this.active = active;

        for (int i = 0, n = selectedNodes.size(); i < n; i++) {
            D nodeData = selectedNodes.get(i);
            TreeNodeElement<D> renderedNode = dataAdapter.getRenderedTreeNode(nodeData);
            if (renderedNode != null) {
                renderedNode.setSelected(true, active, css);
            }
        }
    }

