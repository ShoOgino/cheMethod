    /**
     * Terminate web socket connection and clean up resources
     *
     * @param endpointId
     *         high level identifier of a web socket connection, used by
     *         high level service (e.g. json rpc infrastructure)
     * @param terminateActions
     *         actions to be performed each time the connection is terminated
     */
    public void terminate(String endpointId, Set<Runnable> terminateActions) {
        Log.debug(getClass(), "Stopping");

        String url = urlResolver.removeMapping(endpointId);

        propertyManager.disableSustainer(url);

        actionManager.setOnCloseActions(url, terminateActions);

        connectionManager.closeConnection(url);
    }

