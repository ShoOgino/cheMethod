    @Override
    double getLeft(ClientRect elementRect, int offsetX) {
      // This rect is to only be used for width and height since the coordinates are relative to the
      // viewport and we are relative to an offsetParent.
      ClientRect anchorRect = anchor.getBoundingClientRect();

      ensureOffsetCalculated();
      switch (getHorizontalAlignment()) {
        case LEFT:
          if (getPosition() == Position.OVERLAP) {
            return anchorOffsetLeft + offsetX;
          } else {
            return anchorOffsetLeft - elementRect.getWidth() - offsetX;
          }
        case MIDDLE:
          double anchorx = anchorOffsetLeft + anchorRect.getWidth() / 2;
          return anchorx - elementRect.getWidth() / 2 - offsetX;
        case RIGHT:
          double anchorRight = anchorOffsetLeft + anchorRect.getWidth();
          if (getPosition() == Position.OVERLAP) {
            return anchorRight - elementRect.getWidth() - offsetX;
          } else {
            return anchorRight + offsetX;
          }
        default:
          return 0;
      }
    }

