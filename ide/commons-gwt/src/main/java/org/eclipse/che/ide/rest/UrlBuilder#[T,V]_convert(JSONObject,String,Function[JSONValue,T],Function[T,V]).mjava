  private <T, V> V convert(JSONObject o, String key, Function<JSONValue, T> f, Function<T, V> g) {
    if (!o.containsKey(key)) {
      return null;
    }
    JSONValue v = o.get(key);
    T value = f.apply(v);
    if (value == null) {
      return null;
    }
    return g.apply(value);
  }

