  private static int calculateVersion(String userAgent) {
    if (userAgent == null || userAgent.isEmpty()) {
      return -1;
    }

    //  TODO(user): Make this work after regex deps are fixed and don't break static rendering
    //
    //    String regexps[] = {"firefox.([0-9]+).([0-9]+)",
    //                        "webkit.([0-9]+).([0-9]+)",
    //                        "msie.([0-9]+).([0-9]+)",
    //                        "minefield.([0-9]+).([0-9]+)"};

    //  TODO(user): Don't use "firefox" and "minefield", check Gecko rv.
    String names[] = {"firefox", "webkit", "msie", "minefield"};

    for (String name : names) {
      int v = calculateVersion(name, userAgent);
      if (v >= 0) {
        return v;
      }
    }
    return -1;
  }

