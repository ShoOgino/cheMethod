  private void requireScripts(
      final RequirejsCallback callback,
      final RequirejsErrorHandler errorHandler,
      final RequirejsConfig config,
      final String[] requiredScripts,
      final String[] moduleKeys) {
    final JsArrayString jsReqScripts = (JsArrayString) JavaScriptObject.createArray();
    for (final String script : requiredScripts) {
      jsReqScripts.push(script);
    }

    Requirejs.config(config)
        .require(
            jsReqScripts,
            new RequirejsCallback() {

              @Override
              public void onReady(final JsArray<RequirejsModule> result) {
                for (int i = 0; i < Math.min(result.length(), moduleKeys.length); i++) {
                  String itemtoString = "null";
                  if (result.get(i) != null) {
                    itemtoString = result.get(i).toString();
                  }
                  if (itemtoString.length() > 30) {
                    itemtoString = itemtoString.substring(0, 27) + "...";
                  }
                  Log.debug(
                      RequireJsLoader.class,
                      "Add module reference - name=" + moduleKeys[i] + " object=" + itemtoString);
                  moduleHolder.setModule(moduleKeys[i], result.get(i));
                }
                callback.onReady(result);
              }
            },
            errorHandler);
  }

