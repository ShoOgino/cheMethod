    private <P, R> JSONObject dispatch(String endpointId, RequestHandler<P, R> handler, JSONObject params, Class<P> paramClass) {
        final P param = dtoFactory.createDtoFromJson(params.toString(), paramClass);
        final R result = handler.handleRequest(endpointId, param);

        final String resultString = dtoFactory.toJson(result);
        return JSONParser.parseStrict(resultString).isObject();
    }

