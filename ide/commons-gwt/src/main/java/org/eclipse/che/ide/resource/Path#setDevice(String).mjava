  /**
   * Returns a new path which is the same as this path but with the given device id. The device id
   * must end with a ":". A device independent path is obtained by passing <code>null</code>.
   *
   * <p>For example, "C:" and "Server/Volume:" are typical device ids.
   *
   * @param device the device id or <code>null</code>
   * @return a new path
   * @see #getDevice()
   * @since 4.0.0-RC5
   */
  public Path setDevice(String device) {
    if (device != null) {
      checkArgument(
          device.indexOf(Path.DEVICE_SEPARATOR) == (device.length() - 1),
          "Last character should be the device separator");
    }
    // return the receiver if the device is the same
    if (device == this.device || (device != null && device.equals(this.device))) return this;

    return new Path(device, segments, separators);
  }

