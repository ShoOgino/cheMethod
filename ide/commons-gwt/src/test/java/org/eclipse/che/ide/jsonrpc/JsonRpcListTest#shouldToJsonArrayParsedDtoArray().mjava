    @Test
    public void shouldToJsonArrayParsedDtoArray() throws Exception {
        Dto expected = mock(Dto.class);
        when(expected.toString()).thenReturn(DTO);
        when(expected.getParameter()).thenReturn("value");

        when(dtoFactory.createDtoFromJson(DTO, Dto.class)).thenReturn(expected);

        JsonValue parse = jsonFactory.parse(DTO);
        JsonArray array = jsonFactory.createArray();
        array.set(0, parse);
        String message = array.toJson();

        JsonRpcList jsonRpcList = new JsonRpcList(message, jsonFactory, dtoFactory);
        JsonArray actual = jsonRpcList.toJsonArray();

        assertTrue(array.jsEquals(actual));
    }

