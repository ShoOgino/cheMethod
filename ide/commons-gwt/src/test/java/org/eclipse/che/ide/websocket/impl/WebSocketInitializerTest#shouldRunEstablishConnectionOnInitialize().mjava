  @Test
  public void shouldRunEstablishConnectionOnInitialize() throws OperationException {
    initializer.initialize("id", "url");
    verify(promise).then(operation.capture());
    operation.getValue().apply("token");
    verify(connectionManager).establishConnection("url?token=token");
  }

