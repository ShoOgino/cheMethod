    private void onResourceCreated(ResourceDelta delta) {
        if ((delta.getFlags() & (MOVED_FROM | MOVED_TO)) == 0) {
            return;
        }

        final Resource resource = delta.getResource();
        final Path movedFrom = delta.getFromPath();

        //file moved directly
        if (document.getFile().getLocation().equals(movedFrom)) {
            deletedFilesController.add(movedFrom.toString());
            document.setFile((File)resource);
            input.setFile((File)resource);

            updateContent();
        } else if (movedFrom.isPrefixOf(document.getFile().getLocation())) { //directory where file moved
            final Path relPath = document.getFile().getLocation().removeFirstSegments(movedFrom.segmentCount());
            final Path newPath = delta.getToPath().append(relPath);

            appContext.getWorkspaceRoot().getFile(newPath).then(optional -> {
                if (optional.isPresent()) {
                    final Path location = document.getFile().getLocation();
                    deletedFilesController.add(location.toString());

                    File file = optional.get();
                    clientServerEventService.sendFileTrackingStartEvent(file.getLocation().toString())
                                            .then(aVoid -> {
                                                document.setFile(file);
                                                input.setFile(file);
                                                updateTabReference(file, location);
                                                updateContent();
                                            });
                }
            });
        }
    }

