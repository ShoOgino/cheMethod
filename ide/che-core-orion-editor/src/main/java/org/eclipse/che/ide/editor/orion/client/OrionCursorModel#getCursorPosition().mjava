  @Override
  public Position getCursorPosition() {
    TextPosition position = document.getCursorPosition();
    int offset = document.getIndexFromPosition(position);
    return new Position(offset);
  }

