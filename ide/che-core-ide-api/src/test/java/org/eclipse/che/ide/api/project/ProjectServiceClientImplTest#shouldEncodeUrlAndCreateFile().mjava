  @Test
  public void shouldEncodeUrlAndCreateFile() {
    client.createFile(resourcePath, TEXT);

    verify(requestFactory).createPostRequest(any(), any());
    verify(asyncRequest).data(TEXT);
    verify(loaderFactory).newLoader("Creating file...");
    verify(asyncRequest).loader(messageLoader);
    verify(asyncRequest).send(unmarshallableItemRef);
  }

