  @Test
  public void shouldCreateFewProjectByBatch() {
    List<NewProjectConfigDto> configs = Arrays.asList(prjConfig1, prjConfig2);

    client.createBatchProjects(configs);

    verify(requestFactory).createPostRequest(anyString(), prjsArgCaptor.capture());
    verify(asyncRequest).header(ACCEPT, MimeType.APPLICATION_JSON);
    verify(loaderFactory).newLoader("Creating the batch of projects...");
    verify(asyncRequest).loader(messageLoader);
    verify(asyncRequest).send(unmarshallablePrjsConf);
    verify(unmarshaller).newListUnmarshaller(ProjectConfigDto.class);

    assertEquals(2, prjsArgCaptor.getValue().size());
  }

