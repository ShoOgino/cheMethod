  @Test
  public void shouldEncodeUrlAndUpdateProject() {
    when(requestFactory.createRequest(
            any(RequestBuilder.Method.class), anyString(), any(ProjectConfig.class), anyBoolean()))
        .thenReturn(asyncRequest);
    when(prjConfig1.getPath()).thenReturn(TEXT);

    client.updateProject(prjConfig1);

    verify(requestFactory).createRequest(eq(PUT), anyString(), eq(prjConfig1), eq(false));
    verify(asyncRequest).header(CONTENT_TYPE, MimeType.APPLICATION_JSON);
    verify(asyncRequest).header(ACCEPT, MimeType.APPLICATION_JSON);
    verify(loaderFactory).newLoader("Updating project...");
    verify(asyncRequest).loader(messageLoader);
    verify(unmarshaller).newUnmarshaller(ProjectConfigDto.class);
    verify(asyncRequest).send(unmarshallablePrjConf);
  }

