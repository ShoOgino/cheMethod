    @Test
    public void testAddPage() throws Exception {
        wizard.addPage(page1);
        wizard.addPage(page2);
        wizard.addPage(page3);

        verify(page1).setUpdateDelegate(eq(updateDelegate));
        verify(page1).setContext(anyMapOf(String.class, String.class));
        verify(page1).init(eq(dataObject));

        verify(page2).setUpdateDelegate(eq(updateDelegate));
        verify(page2).setContext(anyMapOf(String.class, String.class));
        verify(page2).init(eq(dataObject));

        verify(page3).setUpdateDelegate(eq(updateDelegate));
        verify(page3).setContext(anyMapOf(String.class, String.class));
        verify(page3).init(eq(dataObject));

        assertEquals(page1, wizard.navigateToFirst());
        assertEquals(page2, wizard.navigateToNext());
        assertEquals(page3, wizard.navigateToNext());
        assertNull(wizard.navigateToNext());
    }

