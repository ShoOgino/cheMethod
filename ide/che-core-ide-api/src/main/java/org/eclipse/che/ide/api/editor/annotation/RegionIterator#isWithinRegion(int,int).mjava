  private boolean isWithinRegion(int start, int length) {
    if (canStartBefore && canEndAfter) {
      return region.overlapsWith(start, length);
    } else if (canStartBefore) {
      return region.includes(start + length - (length > 0 ? 1 : 0));
    } else if (canEndAfter) {
      return region.includes(start);
    } else {
      return region.includes(start) && region.includes(start + length - (length > 0 ? 1 : 0));
    }
  }

