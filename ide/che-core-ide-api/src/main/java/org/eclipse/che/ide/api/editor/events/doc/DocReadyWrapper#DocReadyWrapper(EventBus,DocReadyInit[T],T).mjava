  public DocReadyWrapper(
      final EventBus generalEventBus, @Nullable final DocReadyInit<T> init, final T wrapped) {
    this.docReadyInit = init;
    this.wrapped = wrapped;
    this.docReadyRegistration =
        generalEventBus.addHandler(
            DocumentReadyEvent.TYPE,
            new DocumentReadyHandler() {

              @Override
              public void onDocumentReady(final DocumentReadyEvent event) {
                if (event == null) {
                  return;
                }

                // stop listening DocReady events
                if (docReadyRegistration != null) {
                  docReadyRegistration.removeHandler();
                }
                documentHandle = event.getDocument().getDocumentHandle();

                final DocReadyInit<T> initializer = DocReadyWrapper.this.docReadyInit;
                if (initializer != null) {
                  initializer.initialize(documentHandle, DocReadyWrapper.this.wrapped);
                }
              }
            });
  }

