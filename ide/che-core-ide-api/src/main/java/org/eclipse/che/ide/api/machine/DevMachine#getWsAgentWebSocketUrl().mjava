    // FIXME: spi
    public String getWsAgentWebSocketUrl() {
        return getWsAgentBaseUrl().replaceFirst("http", "ws") + "/ws";
//        for (Link link : machineLinks) {
//            if (Constants.WSAGENT_WEBSOCKET_REFERENCE.equals(link.getRel())) {
//                return link.getHref();
//            }
//        }

        //should not be
//        final String message = "Reference " + Constants.WSAGENT_WEBSOCKET_REFERENCE + " not found in DevMachine description";
//        Log.error(getClass(), message);
//        throw new RuntimeException(message);
    }

