    private void internalInitialize() {

        String workspaceMasterUrl;
        UrlBuilder builder = new UrlBuilder(getWebsocketContext());

        if(builder.getProtocol() != null && !builder.getProtocol().isEmpty()) {
            workspaceMasterUrl = builder.getUrl() + "/" + appContext.getAppId();

        } else {
            String protocol = "https:".equals(getProtocol()) ? "wss://" : "ws://";
            String host = getHost();
            String context = getWebsocketContext() + "/";
            workspaceMasterUrl = protocol + host + context + appContext.getAppId();
        }

        initializer.initialize("ws-master", singletonMap("url", workspaceMasterUrl));
    }

