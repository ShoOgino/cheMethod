  @Override
  public Promise<List<Branch>> branchList(Path project, BranchListMode listMode) {
    String url =
        getWsAgentBaseUrl()
            + BRANCH
            + "?projectPath="
            + encodePath(project)
            + (listMode == null ? "" : "&listMode=" + listMode);
    return asyncRequestFactory
        .createGetRequest(url)
        .send(dtoUnmarshallerFactory.newListUnmarshaller(Branch.class));
  }

