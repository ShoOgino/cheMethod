    private List<TreeNode<?>> getChildNodesForItems(List<ItemReference> childItems) {
        List<TreeNode<?>> oldChildren = getChildren();
        List<TreeNode<?>> newChildren = new ArrayList<>();
        for (ItemReference item : childItems) {
            final AbstractTreeNode node = createChildNode(item);
            if (node != null) {
                if (oldChildren.contains(node)) {
                    final int i = oldChildren.indexOf(node);
                    newChildren.add(oldChildren.get(i));
                } else {
                    newChildren.add(node);
                }
            }
        }
        return newChildren;
    }

