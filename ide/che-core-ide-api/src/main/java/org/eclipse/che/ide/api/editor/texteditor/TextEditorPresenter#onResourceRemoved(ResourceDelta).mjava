    private void onResourceRemoved(ResourceDelta delta) {
        if ((delta.getFlags() & DERIVED) == 0) {
            return;
        }

        final Resource resource = delta.getResource();

        if (resource.isFile() && document.getFile().getLocation().equals(resource.getLocation())) {
            if (resourceChangeHandler != null) {
                resourceChangeHandler.removeHandler();
                resourceChangeHandler = null;
            }
            close(false);
        }
    }

