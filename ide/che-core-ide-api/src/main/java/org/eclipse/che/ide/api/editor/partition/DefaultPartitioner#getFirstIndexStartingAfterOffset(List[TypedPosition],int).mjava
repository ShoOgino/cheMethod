    /**
     * Returns the index of the first position which starts at or after the given offset.
     *
     * @param positions the positions in linear order
     * @param offset the offset
     * @return the index of the first position which starts after the offset
     */
    private static int getFirstIndexStartingAfterOffset(List<TypedPosition> positions, int offset) {
        int i = -1;
        int j = positions.size();
        while (j - i > 1) {
            final int k = (i + j) >> 1;
            final Position p = positions.get(k);
            if (p.getOffset() >= offset) {
                j = k;
            } else {
                i = k;
            }
        }
        return j;
    }

