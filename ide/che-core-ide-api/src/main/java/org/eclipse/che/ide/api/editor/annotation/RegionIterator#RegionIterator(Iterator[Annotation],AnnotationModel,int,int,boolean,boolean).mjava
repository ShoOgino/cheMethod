  /**
   * Iterator that returns all annotations from the parent iterator which have a position in the
   * given model inside the given region.
   *
   * @param parentIterator iterator containing all annotations
   * @param model the model to use to retrieve positions from for each annotation
   * @param offset start position of the region
   * @param length length of the region
   * @param canStartBefore include annotations starting before region
   * @param canEndAfter include annotations ending after region
   */
  public RegionIterator(
      Iterator<Annotation> parentIterator,
      AnnotationModel model,
      int offset,
      int length,
      boolean canStartBefore,
      boolean canEndAfter) {
    this.parentIterator = parentIterator;
    this.model = model;
    this.region = new Position(offset, length);
    this.canEndAfter = canEndAfter;
    this.canStartBefore = canStartBefore;
    next = findNext();
  }

