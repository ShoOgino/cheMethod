    private void setupFileContentUpdateHandler() {

        resourceChangeHandler =
                generalEventBus.addHandler(ResourceChangedEvent.getType(), new ResourceChangedEvent.ResourceChangedHandler() {
                    @Override
                    public void onResourceChanged(ResourceChangedEvent event) {
                        final ResourceDelta delta = event.getDelta();

                        switch (delta.getKind()) {
                            case ADDED:
                                onResourceCreated(delta);
                                break;
                            case REMOVED:
                                onResourceRemoved(delta);
                                break;
                            case UPDATED:
                                onResourceUpdated(delta);
                        }
                    }
                });

        this.generalEventBus.addHandler(FileContentUpdateEvent.TYPE, new FileContentUpdateHandler() {
            @Override
            public void onFileContentUpdate(final FileContentUpdateEvent event) {
                if (event.getFilePath() != null && Path.valueOf(event.getFilePath()).equals(document.getFile().getLocation())) {
                    updateContent();
                }
            }
        });
    }

