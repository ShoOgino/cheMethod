    private void removeFromPositionsList(List<TypedPosition> positions, TypedPosition position, boolean orderedByOffset) {
        final int size = positions.size();

        // Assume position is somewhere near it was before
        final int index =
                          computeIndexInPositionList(positions, orderedByOffset ? position.offset : position.offset + position.length
                                                                                                    - 1, orderedByOffset);
        if (index < size && positions.get(index) == position) {
            positions.remove(index);
            return;
        }

        int back = index - 1;
        int forth = index + 1;
        while (back >= 0 || forth < size) {
            if (back >= 0) {
                if (position == positions.get(back)) {
                    positions.remove(back);
                    return;
                }
                back--;
            }

            if (forth < size) {
                if (position == positions.get(forth)) {
                    positions.remove(forth);
                    return;
                }
                forth++;
            }
        }
    }

