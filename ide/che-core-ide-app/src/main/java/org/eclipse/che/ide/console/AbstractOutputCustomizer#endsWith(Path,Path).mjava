  /*
   * Checks if a path's last segments are equal to the provided relative path
   */
  protected boolean endsWith(Path path, Path relativePath) {
    checkNotNull(path);
    checkNotNull(relativePath);

    if (path.segmentCount() < relativePath.segmentCount()) return false;

    for (int i = relativePath.segmentCount() - 1, j = path.segmentCount() - 1; i >= 0; i--, j--) {
      if (!nullToEmpty(relativePath.segment(i)).equals(path.segment(j))) {
        return false;
      }
    }

    return true;
  }

