    protected Promise<Optional<File>> getFile(final Path absolutePath) {
        return findResource(absolutePath, false).then(new Function<Optional<Resource>, Optional<File>>() {
            @Override
            public Optional<File> apply(Optional<Resource> optional) throws FunctionException {
                if (optional.isPresent()) {
                    final Resource resource = optional.get();
                    checkState(resource.getResourceType() == FILE, "Not a file");

                    return of((File)resource);
                }

                return absent();
            }
        });
    }

