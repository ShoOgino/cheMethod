    @Override
    public void onResourceChanged(ResourceChangedEvent event) {
        final ResourceDelta delta = event.getDelta();

        if (delta.getKind() == ADDED) {
            if (!delta.getResource().isFile() || (delta.getFlags() & (MOVED_FROM | MOVED_TO)) == 0) {
                return;
            }

            final Resource resource = delta.getResource();
            final Path movedFrom = delta.getFromPath();

            if (file.getLocation().equals(movedFrom)) {
                file = (VirtualFile)resource;
                title.setText(file.getDisplayName());
            }
        } else if (delta.getKind() == UPDATED) {
            if (!delta.getResource().isFile()) {
                return;
            }

            final Resource resource = delta.getResource();

            if (file.getLocation().equals(resource.getLocation())) {
                file = (VirtualFile)resource;

                title.setText(file.getDisplayName());
            }
        }
    }

