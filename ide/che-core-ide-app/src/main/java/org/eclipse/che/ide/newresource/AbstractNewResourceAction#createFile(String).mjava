    final void createFile(String nameWithoutExtension) {
        final String name = getExtension().isEmpty() ? nameWithoutExtension : nameWithoutExtension + '.' + getExtension();

        Resource resource = appContext.getResource();

        if (!(resource instanceof Container)) {
            final Container parent = resource.getParent();

            checkState(parent != null, "Parent should be a container");

            resource = parent;
        }

        ((Container)resource).newFile(name, getDefaultContent()).then(new Operation<File>() {
            @Override
            public void apply(File newFile) throws OperationException {
                editorAgentProvider.get().openEditor(newFile);
                eventBus.fireEvent(new RevealResourceEvent(newFile));
            }
        }).catchError(new Operation<PromiseError>() {
            @Override
            public void apply(PromiseError error) throws OperationException {
                notificationManager.notify("Failed to create resource", error.getMessage(), FAIL, FLOAT_MODE);
            }
        });
    }

