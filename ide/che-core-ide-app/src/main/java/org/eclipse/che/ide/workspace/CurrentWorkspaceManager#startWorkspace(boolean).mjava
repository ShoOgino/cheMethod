  /** Start the current workspace with a default environment. */
  Promise<Void> startWorkspace(boolean restoreFromSnapshot) {
    WorkspaceImpl workspace = appContext.getWorkspace();
    String defEnvName = workspace.getConfig().getDefaultEnv();

    return workspaceServiceClient
        .startById(workspace.getId(), defEnvName, restoreFromSnapshot)
        .then(
            ws -> {
              ((AppContextImpl) appContext).setWorkspace(ws);
              eventBus.fireEvent(new WorkspaceStartingEvent());
            })
        .then((Function<WorkspaceImpl, Void>) arg -> null);
  }

