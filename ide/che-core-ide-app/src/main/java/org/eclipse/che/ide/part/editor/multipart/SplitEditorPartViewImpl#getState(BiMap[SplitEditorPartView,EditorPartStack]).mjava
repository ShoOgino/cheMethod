    @Override
    public EditorMultiPartStackState getState(BiMap<SplitEditorPartView, EditorPartStack> splitEditorParts) {
        if (splitLayoutPanel == null) {
            return new EditorMultiPartStackState(splitEditorParts.get(this));

        } else if(specimenView == null && replicaView != null){
            return replicaView.getState(splitEditorParts);
        } else if(replicaView == null && specimenView != null){
            return specimenView.getState(splitEditorParts);
        }
        if(specimenView != null){
            return new EditorMultiPartStackState(direction,
                                                 splitLayoutPanel.getWidgetSize(specimenView.asWidget()),
                                                 specimenView.getState(splitEditorParts),
                                                 replicaView.getState(splitEditorParts));
        }
        throw new IllegalStateException("Can't create state, specimenView and replicaView are both null.");
    }

