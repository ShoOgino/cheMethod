    /*
     * Selects and shows the specified line of text in editor
     */
    private void selectRange(EditorPartPresenter editor, int line) {
        if (editor instanceof TextEditor) {
            TextPosition startPosition = new TextPosition(line - 1, 0);
            int lineOffsetStart = ((TextEditor) editor).getDocument().getLineStart(line - 1);
            if (lineOffsetStart == -1) {
                lineOffsetStart = 0;
            }

            int lineOffsetEnd = ((TextEditor) editor).getDocument().getLineStart(line);
            if (lineOffsetEnd == -1) {
                lineOffsetEnd = 0;
            }
            while (((TextEditor) editor).getDocument().getLineAtOffset(lineOffsetEnd) > line - 1) {
                lineOffsetEnd--;
            }
            if (lineOffsetStart > lineOffsetEnd) {
                lineOffsetEnd = lineOffsetStart;
            }

            TextPosition endPosition = new TextPosition(line - 1, lineOffsetEnd - lineOffsetStart);

            ((TextEditor) editor).getDocument().setSelectedRange(new TextRange(startPosition, endPosition), true);
            ((TextEditor) editor).getDocument().setCursorPosition(startPosition);
        }
    }

