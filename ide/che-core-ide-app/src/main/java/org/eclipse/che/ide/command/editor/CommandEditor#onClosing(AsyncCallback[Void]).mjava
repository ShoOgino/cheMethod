    @Override
    public void onClosing(AsyncCallback<Void> callback) {
        if (!isDirty()) {
            callback.onSuccess(null);
        } else {
            dialogFactory.createChoiceDialog(
                    coreMessages.askWindowCloseTitle(),
                    coreMessages.messagesSaveChanges(getEditorInput().getName()),
                    coreMessages.yesButtonTitle(),
                    coreMessages.noButtonTitle(),
                    coreMessages.cancelButton(),
                    () -> doSave(new AsyncCallback<EditorInput>() {
                        @Override
                        public void onSuccess(EditorInput result) {
                            callback.onSuccess(null);
                        }

                        @Override
                        public void onFailure(Throwable caught) {
                            callback.onFailure(null);
                        }
                    }),
                    () -> callback.onSuccess(null),
                    () -> callback.onFailure(null)).show();
        }
    }

