  ExecuteCommandButton(
      CommandGoal goal,
      SafeHtml icon,
      ExecuteCommandButtonItemsProvider itemsProvider,
      ToolbarMessages messages,
      ActionManager actionManager,
      KeyBindingAgent keyBindingAgent,
      @Nullable CharCodeWithModifiers keyBinding) {
    super(icon, itemsProvider);

    this.goal = goal;
    this.messages = messages;
    this.keyBinding = keyBinding;

    if (keyBinding != null) {
      actionManager.registerAction(ACTION_PREFIX + goal.getId(), new ExecuteDefaultCommandAction());
      keyBindingAgent.getGlobal().addKey(keyBinding, ACTION_PREFIX + goal.getId());
    }
  }

