    @Inject
    public AppStateManager(Set<PersistenceComponent> persistenceComponents,
                           PreferencesManager preferencesManager,
                           DtoFactory dtoFactory,
                           ActionManager actionManager,
                           PresentationFactory presentationFactory,
                           Provider<PerspectiveManager> perspectiveManagerProvider) {
        this.persistenceComponents = persistenceComponents;
        this.preferencesManager = preferencesManager;
        this.dtoFactory = dtoFactory;
        this.actionManager = actionManager;
        this.presentationFactory = presentationFactory;
        this.perspectiveManagerProvider = perspectiveManagerProvider;

        readStateFromPreferences();
    }

