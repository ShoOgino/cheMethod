  private void expandActionGroup(
      List<Action> newVisibleActions, ActionManager actionManager, ActionGroup mainActionGroup) {
    final Action[] children = mainActionGroup.getChildren(null);
    for (final Action action : children) {
      final Presentation presentation = presentationFactory.getPresentation(action);
      final ActionEvent e = new ActionEvent(presentation, actionManager, perspectiveManager.get());
      action.update(e);
      if (presentation.isVisible()) { // add only visible items
        newVisibleActions.add(action);
      }
      if (action2barItem.containsKey(action)) {
        action2barItem.get(action).update();
      }
    }
  }

