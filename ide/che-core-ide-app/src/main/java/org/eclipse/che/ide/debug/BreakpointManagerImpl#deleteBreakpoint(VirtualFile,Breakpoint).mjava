  /** Deletes breakpoint. Removes breakpoint mark. */
  private void deleteBreakpoint(final VirtualFile activeFile, final Breakpoint breakpoint) {
    breakpointStorage.delete(breakpoint);

    BreakpointRenderer renderer = getBreakpointRendererForFile(activeFile.getLocation().toString());
    if (renderer != null) {
      renderer.removeBreakpointMark(breakpoint.getLocation().getLineNumber() - 1);
    }

    for (BreakpointManagerObserver observer : observers) {
      observer.onBreakpointDeleted(breakpoint);
    }

    Debugger debugger = debuggerManager.getActiveDebugger();
    if (debugger != null) {
      debugger.deleteBreakpoint(breakpoint);
    }
  }

