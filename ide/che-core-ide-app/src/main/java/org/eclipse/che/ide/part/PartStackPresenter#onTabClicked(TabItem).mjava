  /** {@inheritDoc} */
  @Override
  public void onTabClicked(@NotNull TabItem selectedTab) {
    // Change the state to COLLAPSED for the following restoring.
    if (state == State.MINIMIZED) {
      state = State.COLLAPSED;
    }

    // Restore COLLAPSED part stack.
    if (state == State.COLLAPSED) {
      activeTab = selectedTab;

      if (delegate != null) {
        delegate.onRestore(this);
      }

      activePart = parts.get(selectedTab);
      activePart.onOpen();
      selectActiveTab(activeTab);

      return;
    }

    // Minimize the part stack if user clicked on the active tab.
    if (selectedTab.equals(activeTab)) {
      if (state == State.NORMAL) {
        minimize();

        activeTab.unSelect();
        activeTab = null;
        activePart = null;
      }

      return;
    }

    // Change active tab.
    activeTab = selectedTab;
    activePart = parts.get(selectedTab);
    activePart.onOpen();
    selectActiveTab(activeTab);
  }

