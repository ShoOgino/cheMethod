    @Override
    protected void initializeEditor(EditorAgent.OpenEditorCallback callback) {
        commandRemovedHandlerRegistration = eventBus.addHandler(CommandRemovedEvent.getType(), this);

        final VirtualFile file = getEditorInput().getFile();

        if (file instanceof CommandFileNode) {
            // make a copy of the given command to avoid modifying of the provided command
            editedCommand = new CommandImpl(((CommandFileNode)file).getData());

            initializePages();

            pages.forEach(page -> view.addPage(page.getView(), page.getTitle()));

            callback.onEditorOpened(this);
        } else {
            callback.onInitializationFailed();
        }
    }

