    @Inject
    public EditorAgentImpl(EventBus eventBus,
                           FileTypeRegistry fileTypeRegistry,
                           PreferencesManager preferencesManager,
                           EditorRegistry editorRegistry,
                           WorkspaceAgent workspaceAgent,
                           CoreLocalizationConstant coreLocalizationConstant,
                           EditorMultiPartStackPresenter editorMultiPartStack,
                           Provider<EditorContentSynchronizer> editorContentSynchronizerProvider,
                           AppContext appContext,
                           PromiseProvider promiseProvider) {
        this.eventBus = eventBus;
        this.fileTypeRegistry = fileTypeRegistry;
        this.preferencesManager = preferencesManager;
        this.editorRegistry = editorRegistry;
        this.workspaceAgent = workspaceAgent;
        this.coreLocalizationConstant = coreLocalizationConstant;
        this.editorMultiPartStack = editorMultiPartStack;
        this.editorContentSynchronizerProvider = editorContentSynchronizerProvider;
        this.appContext = appContext;
        this.promiseProvider = promiseProvider;
        this.openedEditors = newArrayList();
        this.openedEditorsToProviders = new HashMap<>();

        eventBus.addHandler(ActivePartChangedEvent.TYPE, this);
        eventBus.addHandler(SelectionChangedEvent.TYPE, this);
        eventBus.addHandler(FileEvent.TYPE, this);
        eventBus.addHandler(WindowActionEvent.TYPE, this);
    }

