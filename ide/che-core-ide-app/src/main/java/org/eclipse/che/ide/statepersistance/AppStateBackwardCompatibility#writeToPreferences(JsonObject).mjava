  /**
   * Provide ability to write to preferences state for all workspaces. It's used to clean up user
   * preferences
   */
  private Promise<Void> writeToPreferences(JsonObject state) {
    preferencesManager.setValue(APP_STATE, state.toJson());
    return preferencesManager
        .flushPreferences()
        .catchError(
            error -> {
              LOG.error(
                  "Failed to store app's state to user's preferences: {}", error.getMessage());
            });
  }

