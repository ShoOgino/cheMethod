  private void processStatus(WorkspaceStatusEvent event) {
    workspaceServiceClient
        .getWorkspace(appContext.getWorkspaceId())
        .then(
            workspace -> {
              try {
                // Update workspace model in AppContext before firing an event.
                // Because AppContext always must return an actual workspace model.
                ((AppContextImpl) appContext).setWorkspace(workspace);

                if (event.getStatus() == STARTING) {
                  eventBus.fireEvent(new WorkspaceStartingEvent());
                } else if (event.getStatus() == RUNNING) {
                  eventBus.fireEvent(new WorkspaceRunningEvent());
                } else if (event.getStatus() == STOPPING) {
                  eventBus.fireEvent(new WorkspaceStoppingEvent());
                } else if (event.getStatus() == STOPPED) {
                  eventBus.fireEvent(
                      new WorkspaceStoppedEvent(
                          event.getError() != null, nullToEmpty(event.getError())));
                }
              } catch (Exception e) {
                Log.error(WorkspaceStatusEventHandler.class, "Error: " + e.getMessage(), e);
              }
            });
  }

