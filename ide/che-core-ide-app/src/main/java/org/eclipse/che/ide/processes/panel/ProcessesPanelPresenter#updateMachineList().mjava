  /** Updates list of the machines from application context. */
  public void updateMachineList() {
    if (appContext.getWorkspace() == null) {
      return;
    }

    List<MachineImpl> machines = getMachines();
    if (machines.isEmpty()) {
      return;
    }

    for (MachineImpl machine : machines) {
      if (machine.getServerByName(SERVER_WS_AGENT_HTTP_REFERENCE).isPresent()) {
        provideMachineNode(machine.getName(), true);
        machines.remove(machine);
        break;
      }
    }

    for (MachineImpl machine : machines) {
      provideMachineNode(machine.getName(), true);
    }

    ProcessTreeNode machineToSelect = machineNodes.entrySet().iterator().next().getValue();

    view.selectNode(machineToSelect);
    notifyTreeNodeSelected(machineToSelect);
  }

