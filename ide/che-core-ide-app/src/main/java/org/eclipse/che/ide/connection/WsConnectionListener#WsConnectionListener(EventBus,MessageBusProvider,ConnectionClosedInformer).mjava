    @Inject
    public WsConnectionListener(EventBus eventBus,
                                final MessageBusProvider messageBusProvider,
                                ConnectionClosedInformer connectionClosedInformer) {
        this.eventBus = eventBus;
        this.connectionClosedInformer = connectionClosedInformer;

        eventBus.addHandler(WorkspaceStartedEvent.TYPE, new WorkspaceStartedEvent.Handler() {
            @Override
            public void onWorkspaceStarted(WorkspaceStartedEvent workspace) {
                messageBus = messageBusProvider.getMessageBus();

                // TODO (spi ide): consider avoid using messageBusProvider since it will be deprecated
//                messageBus.addOnCloseHandler(WsConnectionListener.this);
            }
        });
    }

