    @Inject
    public PreviewsPresenter(PreviewsView view,
                             ExecAgentCommandManager execAgentClient,
                             CommandManager commandManager,
                             AppContext appContext,
                             EventBus eventBus,
                             Provider<MacroProcessor> macroProcessorProvider,
                             PromiseProvider promiseProvider,
                             ToolbarMessages messages) {
        this.view = view;
        this.execAgentClient = execAgentClient;
        this.commandManager = commandManager;
        this.appContext = appContext;
        this.macroProcessorProvider = macroProcessorProvider;
        this.promiseProvider = promiseProvider;
        this.messages = messages;

        view.setDelegate(this);

        eventBus.addHandler(WsAgentStateEvent.TYPE, new WsAgentStateHandler() {
            @Override
            public void onWsAgentStarted(WsAgentStateEvent event) {
                updateView();
            }

            @Override
            public void onWsAgentStopped(WsAgentStateEvent event) {
                view.removeAllURLs();
            }
        });

        eventBus.addHandler(ProcessStartedEvent.TYPE, event -> updateView());
        eventBus.addHandler(ProcessFinishedEvent.TYPE, event -> updateView());
    }

