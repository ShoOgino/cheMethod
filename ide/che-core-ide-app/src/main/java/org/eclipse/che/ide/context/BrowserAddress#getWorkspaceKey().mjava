  /** Returns workspace key from current address or empty string when it is undefined. */
  public String getWorkspaceKey() {
    String browserUrl = Window.Location.getPath();

    // TODO temporary to make it work with not "path obliged" URL
    String wsParam = Window.Location.getParameter("ws");
    if (wsParam != null) return wsParam;
    //

    String[] urlParts = browserUrl.split("/", NAMESPACE_START_SEGMENT + 1);
    if (urlParts.length < NAMESPACE_START_SEGMENT) {
      return "";
    } else {
      return SimpleHtmlSanitizer.sanitizeHtml(urlParts[NAMESPACE_START_SEGMENT]).asString();
    }
  }

