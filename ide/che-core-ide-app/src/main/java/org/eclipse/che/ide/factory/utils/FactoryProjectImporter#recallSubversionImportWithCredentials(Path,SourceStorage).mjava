  private Promise<Project> recallSubversionImportWithCredentials(
      final Path path, final SourceStorage sourceStorage) {
    return askCredentialsDialog
        .askCredentials()
        .thenPromise(
            new Function<Credentials, Promise<Project>>() {
              @Override
              public Promise<Project> apply(Credentials credentials) throws FunctionException {
                sourceStorage.getParameters().put("username", credentials.getUsername());
                sourceStorage.getParameters().put("password", credentials.getPassword());
                return doImport(path, sourceStorage);
              }
            })
        .catchError(
            error -> {
              callback.onFailure(error.getCause());
            });
  }

