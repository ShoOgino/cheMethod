  private void finalizeInit(
      VirtualFile file, EditorPartPresenter editor, EditorProvider editorProvider) {
    openedEditorsToProviders.put(editor, editorProvider.getId());

    editor.addCloseHandler(this);
    editor.addPropertyListener(
        (source, propId) -> {
          if (propId == EditorPartPresenter.PROP_INPUT) {
            if (editor instanceof HasReadOnlyProperty) {
              ((HasReadOnlyProperty) editor).setReadOnly(file.isReadOnly());
            }

            if (editor instanceof TextEditor) {
              editorContentSynchronizer.trackEditor(editor);
            }

            eventBus.fireEvent(FileEvent.createFileOpenedEvent(file));
          }
        });
  }

