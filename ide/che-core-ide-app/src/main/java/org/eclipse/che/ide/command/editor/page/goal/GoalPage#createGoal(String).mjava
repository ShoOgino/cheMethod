  /**
   * Asks user for the the new goal name nad creates it if another one with the same name doesn't
   * exist.
   */
  private void createGoal(String initialName) {
    final InputCallback inputCallback =
        value -> {
          final String newGoalName = value.trim();

          final Set<CommandGoal> allGoals = goalRegistry.getAllGoals();

          final Optional<CommandGoal> existingGoal =
              allGoals
                  .stream()
                  .filter(goal -> goal.getId().equalsIgnoreCase(newGoalName))
                  .findAny();

          if (existingGoal.isPresent()) {
            dialogFactory
                .createMessageDialog(
                    messages.pageGoalNewGoalTitle(),
                    messages.pageGoalNewGoalAlreadyExistsMessage(existingGoal.get().getId()),
                    () -> createGoal(newGoalName))
                .show();
          } else {
            setGoal(newGoalName);
          }
        };

    dialogFactory
        .createInputDialog(
            messages.pageGoalNewGoalTitle(),
            messages.pageGoalNewGoalLabel(),
            initialName,
            0,
            initialName.length(),
            messages.pageGoalNewGoalButtonCreate(),
            inputCallback,
            null)
        .show();
  }

