    private Promise<Optional<Resource>> findResourceForExternalOperation(final Path absolutePath, boolean quiet) {
        Promise<Void> derived = promises.resolve(null);

        for (int i = absolutePath.segmentCount() - 1; i > 0; i--) {
            final Path pathToCache = absolutePath.removeLastSegments(i);

            derived = derived.thenPromise(arg -> loadAndRegisterResources(pathToCache));
        }

        return derived.thenPromise(ignored -> findResource(absolutePath, quiet));
    }

