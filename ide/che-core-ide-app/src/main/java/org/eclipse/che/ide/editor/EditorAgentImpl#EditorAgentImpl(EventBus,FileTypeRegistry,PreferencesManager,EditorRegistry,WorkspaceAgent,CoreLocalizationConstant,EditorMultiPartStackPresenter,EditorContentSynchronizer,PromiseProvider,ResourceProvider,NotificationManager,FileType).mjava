  @Inject
  public EditorAgentImpl(
      EventBus eventBus,
      FileTypeRegistry fileTypeRegistry,
      PreferencesManager preferencesManager,
      EditorRegistry editorRegistry,
      WorkspaceAgent workspaceAgent,
      CoreLocalizationConstant coreLocalizationConstant,
      EditorMultiPartStackPresenter editorMultiPartStack,
      EditorContentSynchronizer editorContentSynchronizer,
      PromiseProvider promiseProvider,
      ResourceProvider resourceProvider,
      NotificationManager notificationManager,
      @Named("defaultFileType") FileType unknownFileType) {
    this.eventBus = eventBus;
    this.fileTypeRegistry = fileTypeRegistry;
    this.preferencesManager = preferencesManager;
    this.editorRegistry = editorRegistry;
    this.workspaceAgent = workspaceAgent;
    this.coreLocalizationConstant = coreLocalizationConstant;
    this.editorMultiPartStack = editorMultiPartStack;
    this.editorContentSynchronizer = editorContentSynchronizer;
    this.promiseProvider = promiseProvider;
    this.resourceProvider = resourceProvider;
    this.notificationManager = notificationManager;
    this.unknownFileType = unknownFileType;
    this.openedEditors = newArrayList();
    this.openingEditorsPathsToStacks = new HashMap<>();
    this.openedEditorsToProviders = new HashMap<>();

    eventBus.addHandler(ActivePartChangedEvent.TYPE, this);
    eventBus.addHandler(SelectionChangedEvent.TYPE, this);
    eventBus.addHandler(WorkspaceStoppedEvent.TYPE, this);
    eventBus.addHandler(WsAgentServerStoppedEvent.TYPE, this);
    eventBus.addHandler(WindowOpenedEvent.TYPE, this);
  }

