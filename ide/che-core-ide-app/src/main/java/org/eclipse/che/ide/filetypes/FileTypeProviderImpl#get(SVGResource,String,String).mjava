  public FileType get(
      @Nullable SVGResource image, @NotNull String extension, @Nullable String namePattern) {
    if (isNullOrEmpty(namePattern)) {
      return getByExtension(image, extension);
    }

    checkArgument(!isNullOrEmpty(extension), "Can not register File Type without extension");

    Optional<FileType> fileTypeOptional =
        fileTypeRegistry
            .getFileTypes()
            .stream()
            .filter(candidate -> extension.equals(candidate.getExtension()))
            .filter(candidate -> canBeMergedByNamePattern(namePattern, candidate))
            .findAny();

    FileType fileType =
        fileTypeOptional.orElseGet(() -> registerNewFileType(image, extension, null));

    fileType.addNamePattern(namePattern);

    return fileType;
  }

