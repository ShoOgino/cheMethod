    @Override
    public Promise<String> diff(DevMachine devMachine,
                                Path project,
                                List<String> files,
                                DiffRequest.DiffType type,
                                boolean noRenames,
                                int renameLimit,
                                String commitA,
                                boolean cached) {
        DiffRequest diffRequest = dtoFactory.createDto(DiffRequest.class)
                                            .withFileFilter(files)
                                            .withType(type)
                                            .withNoRenames(noRenames)
                                            .withCommitA(commitA)
                                            .withRenameLimit(renameLimit)
                                            .withCached(cached);

        String url = devMachine.getWsAgentBaseUrl() + DIFF + "?projectPath=" + project;
        return asyncRequestFactory.createPostRequest(url, diffRequest).loader(loader).send(new StringUnmarshaller());
    }

