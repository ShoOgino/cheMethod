  @Inject
  public ProjectTreeNotificationsSubscriber(
      EventBus eventBus,
      AppContext appContext,
      RequestTransmitter requestTransmitter,
      DtoFactory dtoFactory) {
    this.requestTransmitter = requestTransmitter;
    this.dtoFactory = dtoFactory;

    eventBus.addHandler(WsAgentServerRunningEvent.TYPE, event -> subscribe());

    // in case ws-agent is already running
    eventBus.addHandler(
        BasicIDEInitializedEvent.TYPE,
        event -> {
          if (appContext.getWorkspace().getStatus() == RUNNING) {
            subscribe();
          }
        });
  }

