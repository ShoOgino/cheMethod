    @Override
    public JsonObject getState() {
        JsonObject state = Json.createObject();

        EditorMultiPartStackState stacks = null;
        try {
            stacks = editorMultiPartStack.getState();
        } catch (IllegalStateException ignore) {
        }
        if (stacks != null) {
            state.put("FILES", storeEditors(stacks));
        }
        EditorPartPresenter activeEditor = getActiveEditor();
        if (activeEditor != null) {
            state.put("ACTIVE_EDITOR", activeEditor.getEditorInput().getFile().getLocation().toString());
        }
        return state;
    }

