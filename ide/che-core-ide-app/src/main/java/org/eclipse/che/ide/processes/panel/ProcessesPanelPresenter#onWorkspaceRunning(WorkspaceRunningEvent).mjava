  @Override
  public void onWorkspaceRunning(WorkspaceRunningEvent event) {
    List<MachineImpl> wsMachines = getMachines();
    if (wsMachines.isEmpty()) {
      return;
    }

    Optional<MachineImpl> wsAgentServerMachine = wsAgentServerUtil.getWsAgentServerMachine();

    ProcessTreeNode machineToSelect = null;
    if (wsAgentServerMachine.isPresent()) {
      MachineImpl machine = wsAgentServerMachine.get();
      machineToSelect = provideMachineNode(machine.getName(), true);
      wsMachines.remove(machine);
    }

    for (MachineImpl machine : wsMachines) {
      provideMachineNode(machine.getName(), true);
    }

    if (machineToSelect != null) {
      view.selectNode(machineToSelect);
      notifyTreeNodeSelected(machineToSelect);
    } else if (!machineNodes.isEmpty()) {
      machineToSelect = machineNodes.entrySet().iterator().next().getValue();
      view.selectNode(machineToSelect);
      notifyTreeNodeSelected(machineToSelect);
    }

    for (MachineImpl machine : machines.values()) {
      if (!wsMachines.contains(machine)) {
        provideMachineNode(machine.getName(), true);
      }
    }
  }

