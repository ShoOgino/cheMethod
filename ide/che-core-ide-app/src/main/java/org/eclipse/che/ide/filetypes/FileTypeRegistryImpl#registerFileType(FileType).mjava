  @Override
  public void registerFileType(FileType candidate) {
    if (candidate == null) {
      throw new IllegalArgumentException("Can not register Illegal File Type");
    }

    String extension = candidate.getExtension();
    FileType duplicate = getFileTypeByExtension(extension);
    if (duplicate != unknownFileType && duplicate != candidate) {
      throw new IllegalStateException(
          "File Type with extension " + extension + " is already registered");
    }

    fileTypes.add(candidate);
  }

