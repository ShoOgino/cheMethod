    public AbstractServerMacro(MacroRegistry macroRegistry,
                               EventBus eventBus,
                               AppContext appContext) {
        this.macroRegistry = macroRegistry;
        this.appContext = appContext;

        eventBus.addHandler(BasicIDEInitializedEvent.TYPE, e -> {
            if (appContext.getWorkspace().getStatus() == RUNNING) {
                registerMacros();
            }
        });

        eventBus.addHandler(WorkspaceRunningEvent.TYPE, e -> registerMacros());
        eventBus.addHandler(WorkspaceStoppedEvent.TYPE, e -> unregisterMacros());
    }

