  @Inject
  public ProcessesListViewImpl(
      CommandResources resources, EmptyListWidget emptyListWidget, ToolbarMessages messages) {
    this.emptyListWidget = emptyListWidget;
    this.messages = messages;

    listItems = new HashMap<>();
    renderers = new HashMap<>();

    final Label label = new Label("EXEC");
    label.addStyleName(resources.commandToolbarCss().processesListLabel());

    dropdownList = new DropdownList(emptyListWidget, true);
    dropdownList.setWidth("100%");
    dropdownList.ensureDebugId("dropdown-processes");
    dropdownList.setSelectionHandler(
        item -> {
          if (item instanceof CreateCommandItem) {
            delegate.onCreateCommand();
          } else {
            listItems
                .entrySet()
                .stream()
                .filter(entry -> item.equals(entry.getValue()))
                .forEach(entry -> delegate.onProcessChosen(entry.getKey()));
          }
        });

    rootPanel = new FlowPanel();
    rootPanel.add(label);
    rootPanel.add(dropdownList);

    createCommandItem = new CreateCommandItem();
    createCommandItemRenderer = new CreateCommandItemRenderer();
    checkCreateCommandItem();
  }

