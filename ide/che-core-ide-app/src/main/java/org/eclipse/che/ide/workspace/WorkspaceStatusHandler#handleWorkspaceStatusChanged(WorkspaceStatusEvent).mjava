    public void handleWorkspaceStatusChanged(@Nullable WorkspaceStatusEvent serverEvent) {
        workspaceServiceClient.getWorkspace(appContext.getWorkspaceId()).then(workspace -> {
            ((AppContextImpl)appContext).setWorkspace(workspace);

            // FIXME: spi
            // should be set on server `ws-agent` has been started
            ((AppContextImpl)appContext).setProjectsRoot(Path.valueOf("/projects"));

            if (workspace.getStatus() == RUNNING) {
                wsStatusNotification.setSuccess(STARTING_WORKSPACE_RUNTIME);
                wsAgentStateController.initialize(appContext.getDevMachine());
                wsAgentURLModifier.initialize(appContext.getDevMachine());

                eventBus.fireEvent(new WorkspaceStartedEvent(workspace));
            } else if (workspace.getStatus() == STARTING) {
                eventBus.fireEvent(new WorkspaceStartingEvent(workspace));
            } else if (workspace.getStatus() == STOPPED) {
                eventBus.fireEvent(new WorkspaceStoppedEvent(workspace));
            }

            if (serverEvent != null) {
                notify(serverEvent);
            }
        });
    }

