    @Inject
    public WsAgentStateControllerImpl(EventBus eventBus,
                                      MessageBusProvider messageBusProvider,
                                      AppContext appContext) {
        this.eventBus = eventBus;
        this.messageBusProvider = messageBusProvider;
        this.appContext = appContext;

        eventBus.addHandler(BasicIDEInitializedEvent.TYPE, e -> {
            if (RUNNING == appContext.getWorkspace().getStatus()) {
                establishConnection();
            }
        });

        eventBus.addHandler(WsAgentServerRunningEvent.TYPE, e -> establishConnection());
    }

