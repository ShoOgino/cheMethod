    public void setDevMachine(DevMachine devMachine) {
        checkState(devMachine != null);

        if (this.devMachine != null && this.devMachine.getId().equals(devMachine.getId())) {
            return;
        }

        browserQueryFieldRenderer.setProjectName("");

        if (projects != null) {
            for (Project project : projects) {
                eventBus.fireEvent(new ResourceChangedEvent(new ResourceDeltaImpl(project, REMOVED)));
            }
            projects = null;
        }

        this.devMachine = devMachine;

        resourceManager = resourceManagerFactory.newResourceManager(devMachine);
        resourceManager.getWorkspaceProjects().then(new Operation<Project[]>() {
            @Override
            public void apply(Project[] projects) throws OperationException {
                AppContextImpl.this.projects = projects;
                java.util.Arrays.sort(AppContextImpl.this.projects, ResourcePathComparator.getInstance());
                eventBus.fireEvent(new WorkspaceReadyEvent(projects));
            }
        });
    }

