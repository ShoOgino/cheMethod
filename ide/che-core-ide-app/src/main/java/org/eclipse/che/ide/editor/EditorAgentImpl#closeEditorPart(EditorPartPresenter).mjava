    protected void closeEditorPart(EditorPartPresenter editor) {
        if (editor == null) {
            return;
        }

        openedEditors.remove(editor);

        editor.close(false);

        if (activeEditor == null) {
            return;
        }

        final VirtualFile closedFile = editor.getEditorInput().getFile();
        final VirtualFile activeFile = activeEditor.getEditorInput().getFile();
        if (activeFile.equals(closedFile)) {
            activeEditor = null;
        }
    }

