  private void updatePositionAndSize() {
    // Update position
    setPopupPosition(
        (com.google.gwt.user.client.Window.getClientWidth() / 2) - (getOffsetWidth() / 2),
        (com.google.gwt.user.client.Window.getClientHeight() / 4) - (getOffsetHeight() / 2));

    // Exit if suggestions is not shown
    if (!suggestionsPanel.isVisible()) {
      return;
    }

    // Update popup width
    int width = suggestionsContainer.getElement().getFirstChildElement().getOffsetWidth();
    int newWidth = Window.getClientWidth() - getElement().getAbsoluteLeft() - 50;
    if (width < newWidth) {
      newWidth = width;
    }
    suggestionsPanel.getElement().getStyle().setWidth(newWidth, Style.Unit.PX);

    // Update popup height
    int height = suggestionsContainer.getElement().getFirstChildElement().getOffsetHeight();
    int newHeight = height > 300 ? 300 : height;
    int bottom = getElement().getAbsoluteTop() + getElement().getOffsetHeight();

    if (bottom + newHeight > Window.getClientHeight() - 10) {
      newHeight = Window.getClientHeight() - 10 - bottom;
    }

    if (newHeight < 50) {
      newHeight = 50;
    }

    suggestionsPanel.getElement().getStyle().setHeight(newHeight, Style.Unit.PX);
  }

