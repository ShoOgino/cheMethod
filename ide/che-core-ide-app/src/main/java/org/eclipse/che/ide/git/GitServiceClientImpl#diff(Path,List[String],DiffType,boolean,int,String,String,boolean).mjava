    private AsyncRequest diff(Path project,
                              List<String> fileFilter,
                              DiffType type,
                              boolean noRenames,
                              int renameLimit,
                              String commitA,
                              String commitB,
                              boolean cached) {
        StringBuilder params = new StringBuilder().append("?projectPath=").append(project.toString());
        if (fileFilter != null) {
            for (String file : fileFilter) {
                if (file.isEmpty()) {
                    continue;
                }
                params.append("&fileFilter=").append(file);
            }
        }
        if (type != null) {
            params.append("&diffType=").append(type);
        }
        params.append("&noRenames=").append(noRenames);
        params.append("&renameLimit=").append(renameLimit);
        params.append("&commitA=").append(commitA);
        if (commitB != null) {
            params.append("&commitB=").append(commitB);
        }
        params.append("&cached=").append(cached);

        String url = appContext.getDevMachine().getWsAgentBaseUrl() + DIFF + params;
        return asyncRequestFactory.createGetRequest(url).loader(loader);
    }

