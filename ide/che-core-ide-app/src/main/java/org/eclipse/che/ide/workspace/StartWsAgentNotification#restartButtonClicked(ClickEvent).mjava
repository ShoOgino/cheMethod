  @UiHandler("restartButton")
  void restartButtonClicked(ClickEvent e) {
    hide();

    restartingStateHolder.setRestartingState(true);

    currentWorkspaceManagerProvider.get().stopWorkspace();

    eventBus.addHandler(
        WorkspaceStoppedEvent.TYPE,
        ignore -> {
          if (restartingStateHolder.isRestarting()) {
            currentWorkspaceManagerProvider
                .get()
                .startWorkspace()
                .then(
                    ignoreAgain -> {
                      restartingStateHolder.setRestartingState(false);
                    });
          }
        });
  }

