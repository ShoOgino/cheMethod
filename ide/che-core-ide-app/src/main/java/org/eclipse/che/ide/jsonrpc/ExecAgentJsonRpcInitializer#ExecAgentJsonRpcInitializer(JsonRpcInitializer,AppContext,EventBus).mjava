    @Inject
    public ExecAgentJsonRpcInitializer(JsonRpcInitializer initializer, AppContext appContext, EventBus eventBus) {
        this.appContext = appContext;
        this.initializer = initializer;

        eventBus.addHandler(ExecAgentServerRunningEvent.TYPE, event -> initializeJsonRpcService(event.getMachineName()));
        eventBus.addHandler(ExecAgentServerStoppedEvent.TYPE, event -> initializer.terminate(event.getMachineName()));

        // in case workspace is already running
        eventBus.addHandler(BasicIDEInitializedEvent.TYPE, event -> {
            final WorkspaceImpl workspace = appContext.getWorkspace();

            if (workspace.getStatus() == RUNNING) {
                final RuntimeImpl runtime = workspace.getRuntime();

                if (runtime != null) {
                    runtime.getMachines()
                           .values()
                           .stream()
                           .map(MachineImpl::getName)
                           .forEach(this::initializeJsonRpcService);
                }
            }
        });
    }

