    @Inject
    public EditorAgentImpl(EventBus eventBus,
                           FileTypeRegistry fileTypeRegistry,
                           PreferencesManager preferencesManager,
                           EditorRegistry editorRegistry,
                           WorkspaceAgent workspaceAgent,
                           CoreLocalizationConstant coreLocalizationConstant,
                           EditorMultiPartStackPresenter editorMultiPartStack,
                           EditorContentSynchronizer editorContentSynchronizer,
                           PromiseProvider promiseProvider,
                           ResourceProvider resourceProvider) {
        this.eventBus = eventBus;
        this.fileTypeRegistry = fileTypeRegistry;
        this.preferencesManager = preferencesManager;
        this.editorRegistry = editorRegistry;
        this.workspaceAgent = workspaceAgent;
        this.coreLocalizationConstant = coreLocalizationConstant;
        this.editorMultiPartStack = editorMultiPartStack;
        this.editorContentSynchronizer = editorContentSynchronizer;
        this.promiseProvider = promiseProvider;
        this.resourceProvider = resourceProvider;
        this.openedEditors = newArrayList();
        this.openedEditorsToProviders = new HashMap<>();

        eventBus.addHandler(ActivePartChangedEvent.TYPE, this);
        eventBus.addHandler(SelectionChangedEvent.TYPE, this);
        eventBus.addHandler(WindowActionEvent.TYPE, this);
        eventBus.addHandler(WorkspaceStoppedEvent.TYPE, this);
    }

