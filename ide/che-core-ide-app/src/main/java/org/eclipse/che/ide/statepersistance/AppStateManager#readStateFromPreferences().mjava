  public void readStateFromPreferences() {
    final String json = preferencesManager.getValue(APP_STATE);
    if (json == null) {
      allWsState = jsonFactory.createObject();
    } else {
      try {
        allWsState = jsonFactory.parse(json);
      } catch (Exception e) {
        // create 'clear' state if any deserializing error occurred
        allWsState = jsonFactory.createObject();
      }
    }
  }

