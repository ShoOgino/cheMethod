  private void refreshMachineDownloadingProgress(Image machine) {
    long totalDownloaded = 0;
    long totalSize = 0;

    for (Chunk chunk : machine.chunks.values()) {
      totalSize += chunk.size;
      totalDownloaded += chunk.downloaded;
    }

    int percents =
        totalDownloaded == 0 || totalSize == 0 ? 0 : Math.round(totalDownloaded * 100 / totalSize);
    view.onPullingProgress(machine.getMachineName(), percents);
  }

