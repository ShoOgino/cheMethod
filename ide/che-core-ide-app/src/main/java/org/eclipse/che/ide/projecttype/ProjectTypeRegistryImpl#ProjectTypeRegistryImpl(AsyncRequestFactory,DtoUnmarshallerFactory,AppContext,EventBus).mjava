    @Inject
    public ProjectTypeRegistryImpl(AsyncRequestFactory asyncRequestFactory,
                                   DtoUnmarshallerFactory dtoUnmarshallerFactory,
                                   AppContext appContext,
                                   EventBus eventBus) {
        this.asyncRequestFactory = asyncRequestFactory;
        this.dtoUnmarshallerFactory = dtoUnmarshallerFactory;
        this.appContext = appContext;
        this.eventBus = eventBus;

        projectTypes = new HashMap<>();

        eventBus.addHandler(BasicIDEInitializedEvent.TYPE, e -> {
            if (RUNNING == appContext.getWorkspace().getStatus()) {
                registerProjectTypes();
            }
        });

        eventBus.addHandler(WsAgentServerRunningEvent.TYPE, e -> registerProjectTypes());
        eventBus.addHandler(WsAgentServerStoppedEvent.TYPE, e -> projectTypes.clear());
    }

