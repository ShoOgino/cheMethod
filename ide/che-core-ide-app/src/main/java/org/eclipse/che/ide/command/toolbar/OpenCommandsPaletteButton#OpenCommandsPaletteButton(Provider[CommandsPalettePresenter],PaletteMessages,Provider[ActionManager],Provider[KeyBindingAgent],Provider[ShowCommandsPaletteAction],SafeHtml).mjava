    @Inject
    OpenCommandsPaletteButton(Provider<CommandsPalettePresenter> commandsPalettePresenterProvider,
                              PaletteMessages messages,
                              Provider<ActionManager> actionManagerProvider,
                              Provider<KeyBindingAgent> keyBindingAgentProvider,
                              Provider<ShowCommandsPaletteAction> showCommandsPaletteActionProvider,
                              @Assisted SafeHtml content) {
        super(content, new ItemsProvider() {
            @Override
            public Optional<MenuItem> getDefaultItem() {
                return Optional.empty();
            }

            @Override
            public List<MenuItem> getItems() {
                return emptyList();
            }

            @Override
            public boolean isGroup(MenuItem item) {
                return false;
            }

            @Override
            public Pair<List<MenuItem>, String> getChildren(MenuItem parent) {
                return null;
            }

            @Override
            public void setDataChangedHandler(DataChangedHandler handler) {
            }
        });

        this.actionManagerProvider = actionManagerProvider;
        this.keyBindingAgentProvider = keyBindingAgentProvider;

        addClickHandler(event -> commandsPalettePresenterProvider.get().showDialog());

        // We need to get action's shortcut but action may not be registered yet.
        // So postpone tooltip creation and wait 1 sec. while action will be registered.
        new Timer() {
            @Override
            public void run() {
                final DivElement divElement = Elements.createDivElement();
                divElement.setInnerText(messages.actionShowPaletteTitle());
                divElement.appendChild(getHotKey(showCommandsPaletteActionProvider.get()));

                Tooltip.create((Element)OpenCommandsPaletteButton.this.getElement(), BOTTOM, MIDDLE, divElement);
            }
        }.schedule(1000);

        ensureDebugId("button-open_command_palette");
    }

