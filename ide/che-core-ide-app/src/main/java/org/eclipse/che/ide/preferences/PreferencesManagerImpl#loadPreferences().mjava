    /** {@inheritDoc} */
    @Override
    public Promise<Map<String, String>> loadPreferences() {
        return preferencesService.getPreferences().then(new Function<Map<String, String>, Map<String, String>>() {
            @Override
            public Map<String, String> apply(Map<String, String> preferences) throws FunctionException {
                persistedPreferences = preferences;
                return preferences;
            }
        });
    }

