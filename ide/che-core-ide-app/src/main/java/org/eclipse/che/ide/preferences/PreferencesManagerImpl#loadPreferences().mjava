  @Override
  public Promise<Map<String, String>> loadPreferences() {
    return getPreferences()
        .then(
            (Function<Map<String, String>, Map<String, String>>)
                preferences -> {
                  persistedPreferences.clear();
                  persistedPreferences.putAll(preferences);
                  return preferences;
                });
  }

