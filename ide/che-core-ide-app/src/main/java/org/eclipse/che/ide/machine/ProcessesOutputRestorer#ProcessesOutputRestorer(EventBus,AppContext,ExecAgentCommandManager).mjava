  @Inject
  public ProcessesOutputRestorer(
      EventBus eventBus, AppContext appContext, ExecAgentCommandManager execAgentCommandManager) {
    this.eventBus = eventBus;
    this.execAgentCommandManager = execAgentCommandManager;

    eventBus.addHandler(
        ExecAgentServerRunningEvent.TYPE, event -> restoreLogs(event.getMachineName()));

    // in case workspace is already running
    eventBus.addHandler(
        BasicIDEInitializedEvent.TYPE,
        event -> {
          final WorkspaceImpl workspace = appContext.getWorkspace();

          if (workspace.getStatus() == RUNNING) {
            final RuntimeImpl runtime = workspace.getRuntime();

            if (runtime != null) {
              runtime.getMachines().values().forEach(m -> restoreLogs(m.getName()));
            }
          }
        });
  }

