    private void processStatus(ServerStatusEvent event) {
        workspaceServiceClient.getWorkspace(appContext.getWorkspaceId()).then(workspace -> {
            // Update workspace model in AppContext before firing an event.
            // Because AppContext always must return an actual workspace model.
            ((AppContextImpl)appContext).setWorkspace(workspace);

            if (event.getStatus() == RUNNING) {
                eventBus.fireEvent(new ServerRunningEvent(event.getServerName(), event.getMachineName()));

                if (WSAGENT_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new WsAgentServerRunningEvent(event.getMachineName()));

                    // fire deprecated WsAgentStateEvent for backward compatibility with IDE 5.x
                    eventBus.fireEvent(createWsAgentStartedEvent());
                } else if (TERMINAL_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new TerminalAgentServerRunningEvent(event.getMachineName()));
                } else if (EXEC_AGENT_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new ExecAgentServerRunningEvent(event.getMachineName()));
                }
            } else if (event.getStatus() == STOPPED) {
                eventBus.fireEvent(new ServerStoppedEvent(event.getServerName(), event.getMachineName()));

                if (WSAGENT_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new WsAgentServerStoppedEvent(event.getMachineName()));

                    // fire deprecated WsAgentStateEvent for backward compatibility with IDE 5.x
                    eventBus.fireEvent(createWsAgentStoppedEvent());
                } else if (TERMINAL_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new TerminalAgentServerStoppedEvent(event.getMachineName()));
                } else if (EXEC_AGENT_REFERENCE.equals(event.getServerName())) {
                    eventBus.fireEvent(new ExecAgentServerStoppedEvent(event.getMachineName()));
                }
            }
        });
    }

