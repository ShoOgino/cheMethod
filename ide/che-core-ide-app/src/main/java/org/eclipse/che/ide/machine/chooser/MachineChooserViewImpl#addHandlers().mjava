  private void addHandlers() {
    addCloseHandler(
        event -> {
          if (event.isAutoClosed()) {
            delegate.onCanceled();
          }
        });

    machinesList.addDoubleClickHandler(
        event -> {
          final String selectedMachineId = machinesList.getSelectedValue();

          if (selectedMachineId != null) {
            final MachineImpl selectedMachine = machinesById.get(selectedMachineId);

            if (selectedMachine != null) {
              delegate.onMachineSelected(selectedMachine);
            }
          }
        });

    machinesList.addKeyPressHandler(
        event -> {
          final int keyCode = event.getNativeEvent().getKeyCode();

          if (KeyCodes.KEY_ENTER == keyCode || KeyCodes.KEY_MAC_ENTER == keyCode) {
            final String selectedMachineId = machinesList.getSelectedValue();

            if (selectedMachineId != null) {
              final MachineImpl selectedMachine = machinesById.get(selectedMachineId);

              if (selectedMachine != null) {
                delegate.onMachineSelected(selectedMachine);
              }
            }
          }
        });

    machinesList.addKeyDownHandler(
        event -> {
          if (KeyCodes.KEY_ESCAPE == event.getNativeKeyCode()) {
            hide(true);
          }
        });
  }

