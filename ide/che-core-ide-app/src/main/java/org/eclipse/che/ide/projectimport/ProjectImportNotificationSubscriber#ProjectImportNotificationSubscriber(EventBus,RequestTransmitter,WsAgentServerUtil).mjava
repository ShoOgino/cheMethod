  @Inject
  public ProjectImportNotificationSubscriber(
      EventBus eventBus, RequestTransmitter transmitter, WsAgentServerUtil wsAgentServerUtil) {
    this.transmitter = transmitter;

    eventBus.addHandler(WsAgentServerRunningEvent.TYPE, event -> subscribe());
    eventBus.addHandler(WsAgentServerStoppedEvent.TYPE, event -> unsubscribe());

    eventBus.addHandler(
        BasicIDEInitializedEvent.TYPE,
        event ->
            wsAgentServerUtil
                .getWsAgentHttpServer()
                .ifPresent(
                    server -> {
                      if (server.getStatus() == RUNNING) {
                        subscribe();
                      }
                    }));
  }

