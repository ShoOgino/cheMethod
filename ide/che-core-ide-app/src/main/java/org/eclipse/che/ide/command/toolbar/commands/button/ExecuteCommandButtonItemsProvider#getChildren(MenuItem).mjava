  @Override
  public Pair<List<MenuItem>, String> getChildren(MenuItem parent) {
    List<MenuItem> items = new ArrayList<>();

    if (parent instanceof CommandItem) {
      final WorkspaceImpl workspace = appContext.getWorkspace();
      final RuntimeImpl runtime = workspace.getRuntime();

      if (runtime != null) {
        final CommandImpl command = ((CommandItem) parent).getCommand();
        final Map<String, ? extends MachineImpl> machines = runtime.getMachines();

        items.addAll(
            machines
                .values()
                .stream()
                .map(machine -> menuItemsFactory.newMachineItem(command, machine))
                .collect(toList()));
      }
    }

    return Pair.of(items, null);
  }

