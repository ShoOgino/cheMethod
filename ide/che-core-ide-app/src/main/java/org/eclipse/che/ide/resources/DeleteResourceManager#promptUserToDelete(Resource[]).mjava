  private Promise<Void> promptUserToDelete(final Resource[] resources) {
    return createFromAsyncRequest(
        new RequestCall<Void>() {
          @Override
          public void makeCall(AsyncCallback<Void> callback) {
            String warningMessage = generateWarningMessage(resources);

            boolean anyDirectories = false;

            String directoryName = null;
            for (Resource resource : resources) {
              if (resource instanceof Folder) {
                anyDirectories = true;
                directoryName = resource.getName();
                break;
              }
            }

            if (anyDirectories) {
              warningMessage +=
                  resources.length == 1
                      ? localization.deleteAllFilesAndSubdirectories(directoryName)
                      : localization.deleteFilesAndSubdirectoriesInTheSelectedDirectory();
            }

            dialogFactory
                .createConfirmDialog(
                    localization.deleteDialogTitle(),
                    warningMessage,
                    onConfirm(resources, callback),
                    onCancel(callback))
                .show();
          }
        });
  }

