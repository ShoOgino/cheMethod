  private void initialize() {
    WorkspaceImpl workspace = appContext.getWorkspace();
    String url = workspace.getLinks().get(LINK_REL_ENVIRONMENT_STATUS_CHANNEL);

    if (workspace.getStatus() == STOPPED || url == null) {
      return;
    }

    String separator = url.contains("?") ? "&" : "?";
    Optional<String> appWebSocketId = appContext.getApplicationWebsocketId();
    String queryParams = appWebSocketId.map(id -> separator + "clientId=" + id).orElse("");
    String wsMasterEndpointURL = url + queryParams;

    Map<String, String> initProperties = singletonMap("url", wsMasterEndpointURL);

    Set<Runnable> initActions = new HashSet<>();
    initActions.add(this::subscribeToEvents);

    if (!appWebSocketId.isPresent()) {
      initActions.add(this::processWsId);
    }

    initializer.initialize(WS_MASTER_JSON_RPC_ENDPOINT_ID, initProperties, initActions);
  }

