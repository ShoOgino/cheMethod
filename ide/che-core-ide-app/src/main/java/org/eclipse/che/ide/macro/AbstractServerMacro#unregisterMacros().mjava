    /**
     * Unregister macro providers which the implementation returns.
     *
     * @see AbstractServerMacro#getMacros(MachineImpl)
     * @since 4.7.0
     */
    private void unregisterMacros() {
        final WorkspaceImpl workspace = appContext.getWorkspace();
        final Optional<MachineImpl> devMachine = workspace.getDevMachine();

        if (!devMachine.isPresent()) {
            return;
        }

        for (Macro provider : getMacros(devMachine.get())) {
            macroRegistry.unregister(provider);
        }
    }

