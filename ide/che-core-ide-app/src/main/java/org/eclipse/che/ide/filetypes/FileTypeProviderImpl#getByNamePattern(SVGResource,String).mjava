  public Set<FileType> getByNamePattern(@Nullable SVGResource image, @NotNull String namePattern) {
    checkArgument(!isNullOrEmpty(namePattern), "Can not register File Type without name pattern");

    Set<FileType> result =
        fileTypeRegistry
            .getFileTypes()
            .stream()
            .filter(candidate -> canBeMergedByNamePattern(namePattern, candidate))
            .peek(candidate -> candidate.addNamePattern(namePattern))
            .collect(toSet());

    if (result.isEmpty()) {
      result.add(registerNewFileType(image, null, namePattern));
    }

    return result;
  }

