  private void initEditor(
      final VirtualFile file,
      final OpenEditorCallback openEditorCallback,
      FileType fileType,
      final EditorPartPresenter editor,
      final Constraints constraints,
      EditorProvider editorProvider) {
    OpenEditorCallback initializeCallback =
        new OpenEditorCallbackImpl() {
          @Override
          public void onEditorOpened(EditorPartPresenter editor) {
            workspaceAgent.openPart(editor, EDITING, constraints);
            workspaceAgent.setActivePart(editor);

            openEditorCallback.onEditorOpened(editor);
          }

          @Override
          public void onInitializationFailed() {
            openEditorCallback.onInitializationFailed();
          }
        };

    editor.init(new EditorInputImpl(fileType, file), initializeCallback);
    finalizeInit(file, editor, editorProvider);
  }

