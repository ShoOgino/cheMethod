    private void initEditor(final VirtualFile file, final OpenEditorCallback callback, FileType fileType,
                            final EditorPartPresenter editor, final Constraints constraints, EditorProvider editorProvider) {
        editor.init(new EditorInputImpl(fileType, file), callback);
        editor.addCloseHandler(this);

        workspaceAgent.openPart(editor, EDITING, constraints);
        finalizeInit(file, callback, editor, editorProvider).then(arg -> {
            workspaceAgent.setActivePart(editor);
        });
    }

