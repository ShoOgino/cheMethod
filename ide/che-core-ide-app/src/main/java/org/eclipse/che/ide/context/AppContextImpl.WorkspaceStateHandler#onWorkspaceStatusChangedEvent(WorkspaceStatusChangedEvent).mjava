    @Override
    public void onWorkspaceStatusChangedEvent(WorkspaceStatusChangedEvent event) {
      WorkspaceStatus workspaceStatus = event.getWorkspaceStatusEvent().getStatus();
      if (STOPPING == workspaceStatus) {
        Workspace workspace = getWorkspace();
        if (workspace != null) {
          persistWorkspaceStatePromise =
              appStateManager.get().persistWorkspaceState(workspace.getId());
        }
      }
    }

