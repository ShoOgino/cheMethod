    @Override
    public void onWorkspaceStatusChangedEvent(WorkspaceStatusChangedEvent event) {
      WorkspaceStatus workspaceStatus = event.getWorkspaceStatusEvent().getStatus();
      if (STOPPING == workspaceStatus) {
        persistWorkspaceStatePromise =
            appStateManager.get().persistWorkspaceState(getWorkspaceId());
      }
    }

