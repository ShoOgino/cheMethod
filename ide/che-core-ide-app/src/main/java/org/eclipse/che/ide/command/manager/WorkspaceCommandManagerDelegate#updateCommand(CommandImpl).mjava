    /**
     * Updates the command with the specified {@code name} by replacing it with the given {@code command}.
     * <p><b>Note</b> that name of the updated command may differ from the name provided by the given {@code command}
     * in order to prevent name duplication.
     */
    Promise<CommandImpl> updateCommand(final CommandImpl command) {
        final CommandDto commandDto = dtoFactory.createDto(CommandDto.class)
                                                .withName(command.getName())
                                                .withCommandLine(command.getCommandLine())
                                                .withType(command.getType())
                                                .withAttributes(command.getAttributes());

        return workspaceServiceClient.updateCommand(appContext.getWorkspaceId(), command.getName(), commandDto)
                                     .then((Function<WorkspaceDto, CommandImpl>)workspace -> {
                                         // update workspace model returned by AppContext because
                                         // AppContext always must return an actual workspace model
                                         ((AppContextImpl)appContext).setWorkspace(workspace);
                                         return command;
                                     });
    }

