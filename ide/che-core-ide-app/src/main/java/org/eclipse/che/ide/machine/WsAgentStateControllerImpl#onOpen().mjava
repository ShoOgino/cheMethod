    @Override
    public void onOpen() {
        //need to make sure ready state equals 1 (OPEN) in same situations after opening it still equals 0 (CONNECTING)
        new Timer() {
            @Override
            public void run() {
                if (messageBus.getReadyState().equals(OPEN)) {
                    cancel();

                    for (AsyncCallback<MessageBus> callback : messageBusCallbacks) {
                        callback.onSuccess(messageBus);
                    }

                    messageBusCallbacks.clear();
                }
            }
        }.scheduleRepeating(300);
    }

