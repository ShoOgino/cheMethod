  @Inject
  public ProjectImportNotificationSubscriber(
      EventBus eventBus, AppContext appContext, RequestTransmitter transmitter) {
    this.transmitter = transmitter;

    eventBus.addHandler(WsAgentServerRunningEvent.TYPE, event -> subscribe());
    eventBus.addHandler(WsAgentServerStoppedEvent.TYPE, event -> unsubscribe());

    eventBus.addHandler(
        BasicIDEInitializedEvent.TYPE,
        event ->
            appContext
                .getWorkspace()
                .getDevMachine()
                .flatMap(machine -> machine.getServerByName(SERVER_WS_AGENT_HTTP_REFERENCE))
                .map(ServerImpl::getStatus)
                .filter(RUNNING::equals)
                .ifPresent(it -> subscribe()));
  }

