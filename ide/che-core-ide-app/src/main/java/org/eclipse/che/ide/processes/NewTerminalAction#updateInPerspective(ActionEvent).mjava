    @Override
    public void updateInPerspective(ActionEvent event) {
        if (selectedNode == null) {
            event.getPresentation().setEnabledAndVisible(false);
            return;
        }

        event.getPresentation().setVisible(true);

        ProcessTreeNode node = selectedNode;

        if (ProcessTreeNode.ProcessNodeType.TERMINAL_NODE == node.getType() ||
                ProcessTreeNode.ProcessNodeType.COMMAND_NODE == node.getType()) {
            node = node.getParent();
        }

        if (ProcessTreeNode.ProcessNodeType.MACHINE_NODE == node.getType()) {
            event.getPresentation().setEnabled(node.hasTerminalAgent());
            return;
        }

        event.getPresentation().setEnabled(false);
    }

