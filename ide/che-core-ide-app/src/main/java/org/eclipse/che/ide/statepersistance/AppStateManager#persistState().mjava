  /** Collects current IDE state {@link #collectAppStateData()} and saves on server side. */
  public Promise<Void> persistState() {
    JsonObject newAppState = collectAppStateData();
    if (appState == null || !appState.toJson().equals(newAppState.toJson())) {
      appState = newAppState;
      return appStateService.saveState(newAppState.toJson());
    } else {
      return promises.resolve(null);
    }
  }

