  private void updateContent(VirtualFile virtualFile, boolean externalOperation) {
    final DocumentHandle documentHandle = getDocumentHandleFor(groupLeaderEditor);
    if (documentHandle == null) {
      return;
    }

    documentStorage.getDocument(
        virtualFile,
        new DocumentStorage.DocumentCallback() {

          @Override
          public void onDocumentReceived(String newContent) {
            Document document = documentHandle.getDocument();

            String oldContent = document.getContents();
            if (Objects.equals(newContent, oldContent)) {
              return;
            }

            TextPosition cursorPosition = document.getCursorPosition();
            replaceContent(document, newContent, oldContent, cursorPosition);

            if (externalOperation) {
              notificationManager.notify(
                  "External operation",
                  "File '" + virtualFile.getName() + "' is updated",
                  SUCCESS,
                  NOT_EMERGE_MODE);
            }
          }

          @Override
          public void onDocumentLoadFailure(final Throwable caught) {
            notificationManager.notify(
                "",
                "Can not to update content for the file " + virtualFile.getDisplayName(),
                FAIL,
                EMERGE_MODE);
          }
        });
  }

