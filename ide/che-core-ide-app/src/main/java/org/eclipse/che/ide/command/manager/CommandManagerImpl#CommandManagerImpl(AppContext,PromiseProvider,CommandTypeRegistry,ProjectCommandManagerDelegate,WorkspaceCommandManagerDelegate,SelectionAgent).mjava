    @Inject
    public CommandManagerImpl(AppContext appContext,
                              PromiseProvider promiseProvider,
                              CommandTypeRegistry commandTypeRegistry,
                              ProjectCommandManagerDelegate projectCommandManagerDelegate,
                              WorkspaceCommandManagerDelegate workspaceCommandManagerDelegate,
                              SelectionAgent selectionAgent) {
        this.appContext = appContext;
        this.promiseProvider = promiseProvider;
        this.commandTypeRegistry = commandTypeRegistry;
        this.projectCommandManager = projectCommandManagerDelegate;
        this.workspaceCommandManager = workspaceCommandManagerDelegate;
        this.selectionAgent = selectionAgent;

        commands = new HashMap<>();
        commandLoadedListeners = new HashSet<>();
        commandChangedListeners = new HashSet<>();
    }

