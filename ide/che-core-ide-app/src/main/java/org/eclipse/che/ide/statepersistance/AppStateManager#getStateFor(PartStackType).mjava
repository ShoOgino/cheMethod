  /**
   * Gets cached state for given {@code partStackType}. Use {@link #readState()} first to get not
   * cached state
   */
  @Nullable
  public JsonObject getStateFor(PartStackType partStackType) {
    JsonObject workspaceState = appState.getObject(WORKSPACE);
    if (workspaceState == null || !workspaceState.hasKey(PERSPECTIVES)) {
      return null;
    }

    String perspectiveId = perspectiveManagerProvider.get().getPerspectiveId();
    JsonObject perspectives = workspaceState.getObject(PERSPECTIVES);
    if (!perspectives.hasKey(perspectiveId)) {
      return null;
    }

    JsonObject projectPerspective = perspectives.getObject(perspectiveId);
    if (!projectPerspective.hasKey(PART_STACKS)) {
      return null;
    }

    JsonObject partStacks = projectPerspective.getObject(PART_STACKS);
    if (!partStacks.hasKey(partStackType.name())) {
      return null;
    }

    return partStacks.getObject(partStackType.name());
  }

