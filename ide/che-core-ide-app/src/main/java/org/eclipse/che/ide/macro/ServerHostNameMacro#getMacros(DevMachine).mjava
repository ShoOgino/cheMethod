  /** {@inheritDoc} */
  @Override
  public Set<Macro> getMacros(DevMachine devMachine) {
    final Set<Macro> macros = Sets.newHashSet();

    for (Map.Entry<String, ? extends Server> entry :
        devMachine.getDescriptor().getRuntime().getServers().entrySet()) {

      if (Strings.isNullOrEmpty(entry.getValue().getRef())) {
        continue;
      }

      Macro macro =
          new BaseMacro(
              KEY.replace("%", entry.getKey()),
              entry.getValue().getRef(),
              "Returns hostname of a server registered by name");

      macros.add(macro);

      // register port without "/tcp" suffix
      if (entry.getKey().endsWith("/tcp")) {
        final String port = entry.getKey().substring(0, entry.getKey().length() - 4);

        Macro shortMacro =
            new BaseMacro(
                KEY.replace("%", port),
                entry.getValue().getRef(),
                "Returns hostname of a server registered by name");

        macros.add(shortMacro);
      }
    }

    return macros;
  }

