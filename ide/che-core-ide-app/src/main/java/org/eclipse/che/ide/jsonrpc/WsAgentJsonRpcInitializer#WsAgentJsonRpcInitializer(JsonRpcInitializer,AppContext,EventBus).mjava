    @Inject
    public WsAgentJsonRpcInitializer(JsonRpcInitializer initializer, AppContext appContext, EventBus eventBus) {
        this.appContext = appContext;
        this.initializer = initializer;

        eventBus.addHandler(WsAgentServerRunningEvent.TYPE, event -> initializeJsonRpcService());
        eventBus.addHandler(WsAgentServerStoppedEvent.TYPE, event -> initializer.terminate(WORKSPACE_AGENT_ENDPOINT_ID));

        // in case ws-agent is already running
        eventBus.addHandler(BasicIDEInitializedEvent.TYPE, event -> {
            if (appContext.getWorkspace().getStatus() == RUNNING) {
                initializeJsonRpcService();
            }
        });
    }

