  private List<MachineEntity> getMachines(Workspace workspace) {
    WorkspaceRuntime workspaceRuntime = workspace.getRuntime();
    if (workspaceRuntime == null) {
      return emptyList();
    }

    List<? extends Machine> runtimeMachines = workspaceRuntime.getMachines();
    List<MachineEntity> machines = new ArrayList<>(runtimeMachines.size());
    for (Machine machine : runtimeMachines) {
      if (machine instanceof MachineDto) {
        MachineEntity machineEntity = new MachineEntityImpl(machine);
        machines.add(machineEntity);
      }
    }
    return machines;
  }

