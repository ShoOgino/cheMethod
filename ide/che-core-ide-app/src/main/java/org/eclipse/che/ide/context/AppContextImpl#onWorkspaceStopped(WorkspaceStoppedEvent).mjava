    @Override
    public void onWorkspaceStopped(WorkspaceStoppedEvent event) {
        appStateManager.get().persistWorkspaceState(getWorkspaceId()).then(new Operation<Void>() {
            @Override
            public void apply(Void arg) throws OperationException {
                browserQueryFieldRenderer.setProjectName("");
                for (Project project : projects) {
                    eventBus.fireEvent(new ResourceChangedEvent(new ResourceDeltaImpl(project, REMOVED)));
                }

                projects = null;
                resourceManager = null;
            }
        });

        devMachine = null;
    }

