  private List<Promise<Void>> restore(
      JsonObject files,
      EditorPartStack editorPartStack,
      Map<EditorPartPresenter, EditorPartStack> activeEditors) {

    if (files.hasKey("FILES")) {
      // plain
      JsonArray filesArray = files.getArray("FILES");
      List<Promise<Void>> promises = new ArrayList<>();
      for (int i = 0; i < filesArray.length(); i++) {
        JsonObject file = filesArray.getObject(i);
        Promise<Void> openFile = openFile(file, editorPartStack, activeEditors);
        promises.add(openFile);
      }
      return promises;
    } else {
      // split
      return restoreSplit(files, editorPartStack, activeEditors);
    }
  }

