  private SpanElement createTerminalElement(ProcessTreeNode node) {
    SpanElement root = Elements.createSpanElement();
    ensureDebugId(root, "terminal-root-element");

    root.appendChild(createCloseElement(node));

    SVGResource icon = node.getTitleIcon();
    if (icon != null) {
      SpanElement iconElement = Elements.createSpanElement(resources.getCss().processIcon());
      ensureDebugId(iconElement, "terminal-icon-element");

      root.appendChild(iconElement);

      DivElement divElement = Elements.createDivElement(resources.getCss().processIconPanel());
      iconElement.appendChild(divElement);

      divElement.appendChild((Node) new SVGImage(icon).getElement());
    }

    Element nameElement = Elements.createSpanElement();
    nameElement.setTextContent(node.getName());
    ensureDebugId(nameElement, "terminal-name-element");

    Tooltip.create(nameElement, BOTTOM, MIDDLE, node.getName());
    root.appendChild(nameElement);

    Element spanElement = Elements.createSpanElement();
    spanElement.setInnerHTML("&nbsp;");
    root.appendChild(spanElement);

    return root;
  }

