    private void calculatePosition(PopupMenu popupMenu, int x, int y) {
        int windowHeight = Window.getClientHeight();
        int popupHeight = popupMenu.getOffsetHeight();

        boolean isMenuWithinWindow = popupHeight + y < windowHeight;

        popupMenu.getElement().getStyle().setTop(isMenuWithinWindow ? y : y - popupHeight, PX);
        popupMenu.getElement().getStyle().setLeft(x, PX);
    }

