    @Test
    public void onWorkspaceStoppedTest() throws Exception {
        when(workspaceStatusEvent.getEventType()).thenReturn(STOPPED);

        workspaceEventsNotifier.trackWorkspaceEvents(workspace, callback);
        workspaceEventsNotifier.workspaceStatusSubscriptionHandler.onMessageReceived(workspaceStatusEvent);

        verify(messageBus, times(4)).unsubscribe(anyString(), (MessageHandler)anyObject());
        verify(notificationManager).notify(anyString(), eq(StatusNotification.Status.SUCCESS), eq(FLOAT_MODE));
        verify(eventBus).fireEvent(Matchers.<WorkspaceStoppedEvent>anyObject());
    }

