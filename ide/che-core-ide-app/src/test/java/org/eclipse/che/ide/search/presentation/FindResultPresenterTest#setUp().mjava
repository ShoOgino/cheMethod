  @Before
  public void setUp() throws Exception {
    for (int i = 0; i < SEARCH_RESULT_ITEMS; i++) {
      items.add(searchItemReference);
    }

    when(projectServiceClient.search(queryExpression)).thenReturn(searchResultPromise);
    when(searchResultPromise.then(Matchers.<Operation<SearchResult>>any()))
        .thenReturn(searchResultPromise);
    when(result.getItemReferences()).thenReturn(items);
  }

