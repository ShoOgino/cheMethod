    @Before
    public void setUp() {
        DevMachine devMachine = mock(DevMachine.class);
        when(devMachine.getId()).thenReturn("id");
        when(appContext.getDevMachine()).thenReturn(devMachine);
        when(appContext.getWorkspaceRoot()).thenReturn(container);
        when(container.getFile(any(Path.class))).thenReturn(optFilePromise);
        when(messageBusProvider.getMachineMessageBus()).thenReturn(messageBus);

        presenter = new NavigateToFilePresenter(view,
                                                eventBus,
                                                dtoUnmarshallerFactory,
                                                messageBusProvider,
                                                appContext);

        presenter.onWsAgentStarted(wsAgentStateEvent);
    }

