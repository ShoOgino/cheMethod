  private void callSearchRecipesApplyMethod(List<RecipeDescriptor> recipes) throws Exception {
    List<String> tags = Collections.singletonList("test1 test2");

    when(view.getTags()).thenReturn(tags);
    when(recipeServiceClient.searchRecipes(
            ArgumentMatchers.<List<String>>anyObject(), anyString(), anyInt(), anyInt()))
        .thenReturn(recipesPromise);

    presenter.onTagsChanged(popupCallBack);

    verify(view).getTags();
    verify(recipeServiceClient).searchRecipes(tags, RECIPE_TYPE, SKIP_COUNT, MAX_COUNT);
    verify(recipesPromise).then(recipeOperation.capture());

    recipeOperation.getValue().apply(recipes);
  }

