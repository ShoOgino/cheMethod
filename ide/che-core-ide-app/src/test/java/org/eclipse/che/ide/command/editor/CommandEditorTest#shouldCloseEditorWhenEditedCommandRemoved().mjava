    @Test
    public void shouldCloseEditorWhenEditedCommandRemoved() throws Exception {
        CommandImpl removedCommand = mock(CommandImpl.class);
        when(removedCommand.getName()).thenReturn(EDITED_COMMAND_NAME);
        CommandRemovedEvent event = mock(CommandRemovedEvent.class);
        when(event.getCommand()).thenReturn(removedCommand);

        editor.onCommandRemoved(event);

        verify(editorAgent).closeEditor(editor);
        verify(handlerRegistration).removeHandler();
    }

