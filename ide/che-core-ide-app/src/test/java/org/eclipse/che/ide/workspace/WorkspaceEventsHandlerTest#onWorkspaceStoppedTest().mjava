    @Test
    public void onWorkspaceStoppedTest() throws Exception {
        when(workspaceStatusEvent.getEventType()).thenReturn(STOPPED);

        workspaceEventsHandler.trackWorkspaceEvents(workspace, callback);
        workspaceEventsHandler.workspaceStatusSubscriptionHandler.onMessageReceived(workspaceStatusEvent);

        verify(eventBus, times(2)).fireEvent(Matchers.<WorkspaceStoppedEvent>anyObject());
        verify(eventBus, times(2)).fireEvent(Matchers.<WsAgentStateEvent> anyObject());
    }

