  /*
   * Tests that a line can be processed only by expected customizer and not by the
   * other ones
   */
  private void testCustomizerValidity(
      Class expectedCustomizerClass, OutputCustomizer[] allCustomizers, String text) {
    Assert.assertTrue(
        "Expected customizer of type ["
            + expectedCustomizerClass
            + "] cannot customize line ["
            + text
            + "]",
        Stream.of(allCustomizers)
            .filter(child -> child.getClass().equals(expectedCustomizerClass))
            .allMatch(expected -> expected.canCustomize(text)));

    Assert.assertTrue(
        "Unexpected customizer of type ["
            + expectedCustomizerClass
            + "] can customize line ["
            + text
            + "]",
        Stream.of(allCustomizers)
            .filter(child -> !child.getClass().equals(expectedCustomizerClass))
            .noneMatch(expected -> expected.canCustomize(text)));
  }

