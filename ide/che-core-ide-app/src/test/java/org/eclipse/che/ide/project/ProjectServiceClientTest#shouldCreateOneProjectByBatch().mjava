  @Test
  public void shouldCreateOneProjectByBatch() {
    List<NewProjectConfigDto> configs = singletonList(prjConfig1);

    client.createBatchProjects(configs);

    verify(requestFactory).createPostRequest(anyString(), prjsArgCaptor.capture());
    verify(asyncRequest).header(ACCEPT, MimeType.APPLICATION_JSON);
    verify(loaderFactory).newLoader("Creating project...");
    verify(asyncRequest).loader(messageLoader);
    verify(asyncRequest).send(unmarshallablePrjsConf);
    verify(unmarshaller).newListUnmarshaller(ProjectConfigDto.class);

    assertEquals(1, prjsArgCaptor.getValue().size());
  }

