  /** Event should be fired, when active part changed */
  @Test
  public void shouldFireEventWhenPartChanged() {
    when(part.getSelection()).thenReturn(selection);
    SelectionChangedHandler handler = mock(SelectionChangedHandler.class);
    eventBus.addHandler(SelectionChangedEvent.TYPE, handler);

    // fire event, for agent to get information about active part
    eventBus.fireEvent(new ActivePartChangedEvent(part));

    verify(handler).onSelectionChanged((SelectionChangedEvent) any());
  }

