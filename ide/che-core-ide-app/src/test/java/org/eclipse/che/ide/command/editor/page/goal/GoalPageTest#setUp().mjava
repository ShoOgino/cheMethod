    @Before
    public void setUp() throws Exception {
        CommandGoal goal = mock(CommandGoal.class);
        when(goal.getId()).thenReturn(COMMAND_GOAL_ID);
        when(goalRegistry.getGoalForId(anyString())).thenReturn(goal);

        when(editedCommand.getApplicableContext()).thenReturn(editedCommandApplicableContext);
        when(editedCommand.getGoal()).thenReturn(COMMAND_GOAL_ID);

        page.setDirtyStateListener(dirtyStateListener);
        page.edit(editedCommand);
    }

