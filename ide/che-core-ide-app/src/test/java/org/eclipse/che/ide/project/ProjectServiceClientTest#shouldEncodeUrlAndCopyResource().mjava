  @Test
  public void shouldEncodeUrlAndCopyResource() {
    CopyOptions copyOptions = mock(CopyOptions.class);
    when(dtoFactory.createDto(CopyOptions.class)).thenReturn(copyOptions);

    client.copy(resourcePath, targetPath, TEXT, true);

    verify(dtoFactory).createDto(CopyOptions.class);
    verify(copyOptions).setName(any());
    verify(copyOptions).setOverWrite(true);

    verify(requestFactory).createPostRequest(any(), eq(copyOptions));
    verify(loaderFactory).newLoader("Copying...");
    verify(asyncRequest).loader(messageLoader);
    verify(asyncRequest).send();
  }

