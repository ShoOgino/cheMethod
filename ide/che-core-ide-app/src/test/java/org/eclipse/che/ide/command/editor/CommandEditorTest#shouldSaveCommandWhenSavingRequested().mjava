  @Test
  public void shouldSaveCommandWhenSavingRequested() throws Exception {
    when(commandManager.updateCommand(anyString(), eq(editor.editedCommand)))
        .thenReturn(commandPromise);
    when(commandPromise.then(any(Operation.class))).thenReturn(commandPromise);

    editor.onCommandSave();

    verify(commandManager).updateCommand(anyString(), eq(editor.editedCommand));
  }

