    @Test
    public void testShouldUnSubscribeFromDisplayingNotificationIfExceptionOccurred() throws Exception {

        //given
        final StatusNotification statusNotification = mock(StatusNotification.class);
        when(notificationManager.notify(anyString(), any(Status.class), any(DisplayMode.class))).thenReturn(statusNotification);

        //when
        notifier.subscribe("project");
        notifier.onFailure("message");

        //then
        verify(subscriber).unSubscribeForImportOutputEvents();
        verify(statusNotification).setStatus(eq(FAIL));
        verify(statusNotification).setContent(eq("message"));

    }

