  @Test
  public void actionShouldBeDisabledIfSomeRenameValidatorForbidsRenameOperation() throws Exception {
    renamingSupport.add(renamingSupportValidator);
    when(renamingSupportValidator.isRenameAllowed((Resource) anyObject())).thenReturn(false);

    action =
        new RenameItemAction(
            resources,
            localization,
            renamingSupport,
            editorAgent,
            notificationManager,
            dialogFactory,
            appContext,
            workspaceAgent);
    action.updateInPerspective(event);

    verify(presentation).setVisible(true);
    verify(presentation).setEnabled(false);
  }

