  @Test
  public void searchWholeWordSelect() throws Exception {
    when(view.getPathToSearch()).thenReturn("/search");
    when(view.isWholeWordsOnly()).thenReturn(true);
    when(appContext.getWorkspaceRoot()).thenReturn(workspaceRoot);
    when(workspaceRoot.getContainer(nullable(Path.class))).thenReturn(optionalContainerPromise);
    when(searchContainer.search(nullable(QueryExpression.class))).thenReturn(searchResultPromise);
    when(searchContainer.createSearchQueryExpression(
            nullable(String.class), nullable(String.class)))
        .thenReturn(queryExpression);

    final String search = NameGenerator.generate("test", 10);
    fullTextSearchPresenter.search(search);

    verify(optionalContainerPromise).then(optionalContainerCaptor.capture());
    optionalContainerCaptor.getValue().apply(Optional.of(searchContainer));

    verify(searchResultPromise).then(searchResultCaptor.capture());
    searchResultCaptor.getValue().apply(searchResult);

    verify(searchContainer).search(queryExpression);
    verify(view).isWholeWordsOnly();
    verify(view, never()).showErrorMessage(anyString());
    verify(view).close();
    verify(findResultPresenter).handleResponse(eq(searchResult), eq(queryExpression), eq(search));
  }

