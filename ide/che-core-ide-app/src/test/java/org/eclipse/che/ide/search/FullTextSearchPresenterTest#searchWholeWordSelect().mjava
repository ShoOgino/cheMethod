  @Test
  public void searchWholeWordSelect() throws Exception {
    when(view.getPathToSearch()).thenReturn("/search");
    when(view.isWholeWordsOnly()).thenReturn(true);
    when(appContext.getWorkspaceRoot()).thenReturn(workspaceRoot);
    when(workspaceRoot.getContainer(any(Path.class))).thenReturn(optionalContainerPromise);
    when(searchContainer.search(anyString(), anyString())).thenReturn(searchResultPromise);

    final String search = NameGenerator.generate("test", 10);
    fullTextSearchPresenter.search(search);

    verify(optionalContainerPromise).then(optionalContainerCaptor.capture());
    optionalContainerCaptor.getValue().apply(Optional.of(searchContainer));

    verify(searchResultPromise).then(searchResultCaptor.capture());
    searchResultCaptor.getValue().apply(Collections.emptyList());

    verify(searchContainer).search(anyString(), eq(search));
    verify(view).isWholeWordsOnly();
    verify(view, never()).showErrorMessage(anyString());
    verify(view).close();
    verify(findResultPresenter).handleResponse(eq(Collections.emptyList()), eq(search));
  }

