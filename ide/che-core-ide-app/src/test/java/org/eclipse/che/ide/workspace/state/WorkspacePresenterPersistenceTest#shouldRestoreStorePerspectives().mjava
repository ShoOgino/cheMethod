    @Test
    public void shouldRestoreStorePerspectives() throws Exception {
        JsonObject state = Json.createObject();
        state.put("currentPerspectiveId", "perspective2");
        JsonObject perspectives = Json.createObject();
        state.put("perspectives", perspectives);
        JsonObject perspective1State = Json.createObject();
        perspectives.put("perspective1", perspective1State);

        when(promiseProvider.all2(any(ArrayOf.class))).thenReturn(mock(Promise.class));

        presenter.loadState(state);

        verify(perspective1).loadState(perspective1State);
    }

