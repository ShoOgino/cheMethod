  /**
   * Tests customizable and non-customizable lines
   *
   * @param expectedCustomizerClass
   * @param line
   * @param expectedCustomization
   * @throws Exception
   */
  protected void testStackTraceLine(
      Class expectedCustomizerClass, String line, String expectedCustomization) throws Exception {
    boolean shouldBeCustomizable = expectedCustomizerClass != null;
    Assert.assertEquals(
        "Line ["
            + line
            + "] is "
            + (shouldBeCustomizable ? "" : "not ")
            + "customizable while it should"
            + (shouldBeCustomizable ? "n\'t " : " ")
            + "be: ",
        Boolean.valueOf(shouldBeCustomizable),
        Boolean.valueOf(outputCustomizer.canCustomize(line)));
    if (shouldBeCustomizable) {
      testCustomizerValidity(expectedCustomizerClass, customizers, line);
      Assert.assertEquals(
          "Wrong customization result:", expectedCustomization, outputCustomizer.customize(line));
    }
  }

