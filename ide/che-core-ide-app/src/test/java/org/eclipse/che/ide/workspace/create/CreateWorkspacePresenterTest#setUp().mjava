  @Before
  public void setUp() {
    machineConfigDto = mock(MachineConfigDto.class, new SelfReturningAnswer());
    workspaceConfigDto = mock(WorkspaceConfigDto.class, new SelfReturningAnswer());
    when(usersWorkspaceDto.getConfig()).thenReturn(workspaceConfigDto);

    when(dtoFactory.createDto(EnvironmentDto.class)).thenReturn(environmentDto);
    when(dtoFactory.createDto(WorkspaceConfigDto.class)).thenReturn(workspaceConfigDto);

    environmentDto = mock(EnvironmentDto.class, new SelfReturningAnswer());
    when(dtoFactory.createDto(EnvironmentDto.class)).thenReturn(environmentDto);
    environmentRecipeDto = mock(EnvironmentRecipeDto.class, new SelfReturningAnswer());
    when(dtoFactory.createDto(EnvironmentRecipeDto.class)).thenReturn(environmentRecipeDto);
    extendedMachineDto = mock(ExtendedMachineDto.class, new SelfReturningAnswer());
    when(dtoFactory.createDto(ExtendedMachineDto.class)).thenReturn(extendedMachineDto);

    when(wsComponentProvider.get()).thenReturn(workspaceComponent);

    when(recipeServiceClient.getAllRecipes()).thenReturn(recipesPromise);
    when(view.getWorkspaceName()).thenReturn("test");
    when(view.getRecipeUrl()).thenReturn("recipe");
  }

