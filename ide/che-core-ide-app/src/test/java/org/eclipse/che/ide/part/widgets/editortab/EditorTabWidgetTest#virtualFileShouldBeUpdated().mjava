    @Test
    public void virtualFileShouldBeUpdated() throws Exception {
        EditorInput editorInput = mock(EditorInput.class);
        FileType fileType = mock(FileType.class);
        VirtualFile newFile = mock(VirtualFile.class);

        when(editorPartPresenter.getEditorInput()).thenReturn(editorInput);
        when(fileTypeRegistry.getFileTypeByFile(newFile)).thenReturn(fileType);
        when(fileType.getImage()).thenReturn(icon);
        when(editorInput.getFile()).thenReturn(newFile);

        assertNotEquals(tab.getFile(), newFile);

        tab.update(editorPartPresenter);

        assertEquals(tab.getFile(), newFile);
    }

