    @Test
    public void shouldDuplicateCommand() throws Exception {
        CommandImpl command = mock(CommandImpl.class);
        when(commandManager.createCommand(any(CommandImpl.class))).thenReturn(commandPromise);
        when(commandPromise.then(any(Operation.class))).thenReturn(commandPromise);

        presenter.onCommandDuplicate(command);

        verify(commandManager).createCommand(command);
    }

