    @Test
    public void shouldUpdateContentAtAddingEditorWhenGroupHasUnsavedData() {
        editorGroupSynchronization.addEditor(openedEditor1);
        reset(documentEventBus);
        when(((TextEditor)openedEditor1).getDocument()).thenReturn(document);
        when(((EditorWithAutoSave)openedEditor1).isAutoSaveEnabled()).thenReturn(false);

        editorGroupSynchronization.addEditor(activeEditor);
        editorGroupSynchronization.onActiveEditorChanged(activeEditor);

        verify((EditorWithAutoSave)openedEditor1).isAutoSaveEnabled();
        verify(document, times(2)).getContents();
        verify(document).replace(anyInt(), anyInt(), anyString());
        verify(documentEventBus).addHandler(Matchers.<DocumentChangeEvent.Type>anyObject(), eq(editorGroupSynchronization));
    }

