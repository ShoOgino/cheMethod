  @Test
  public void shouldUpdateContentAtAddingEditorWhenGroupHasUnsavedData() {
    editorGroupSynchronization.addEditor(openedEditor1);
    reset(documentEventBus);
    when(((EditorWithAutoSave) openedEditor1).isAutoSaveEnabled()).thenReturn(false);

    editorGroupSynchronization.addEditor(activeEditor);
    editorGroupSynchronization.onActiveEditorChanged(activeEditor);

    verify((EditorWithAutoSave) openedEditor1).isAutoSaveEnabled();
    verify(document, times(2)).getContents();
    verify(document).replace(anyInt(), anyInt(), anyString());
    verify(documentEventBus)
        .addHandler(
            org.mockito.ArgumentMatchers.<DocumentChangedEvent.Type>anyObject(),
            eq(editorGroupSynchronization));
  }

