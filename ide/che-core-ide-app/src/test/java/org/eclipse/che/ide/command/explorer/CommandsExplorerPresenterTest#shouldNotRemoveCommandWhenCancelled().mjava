  @Test
  public void shouldNotRemoveCommandWhenCancelled() throws Exception {
    ConfirmDialog confirmDialog = mock(ConfirmDialog.class);
    when(dialogFactory.createConfirmDialog(
            nullable(String.class),
            nullable(String.class),
            nullable(ConfirmCallback.class),
            nullable(CancelCallback.class)))
        .thenReturn(confirmDialog);
    CommandImpl command = mock(CommandImpl.class);

    presenter.onCommandRemove(command);

    verify(dialogFactory)
        .createConfirmDialog(
            nullable(String.class),
            nullable(String.class),
            nullable(ConfirmCallback.class),
            isNull());
    verify(confirmDialog).show();
    verify(commandManager, never()).removeCommand(anyString());
  }

