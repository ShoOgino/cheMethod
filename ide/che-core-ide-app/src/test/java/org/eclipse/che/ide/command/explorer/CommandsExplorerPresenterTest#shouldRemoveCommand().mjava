    @Test
    public void shouldRemoveCommand() throws Exception {
        // given
        ConfirmDialog confirmDialog = mock(ConfirmDialog.class);
        when(dialogFactory.createConfirmDialog(anyString(),
                                               anyString(),
                                               any(ConfirmCallback.class),
                                               any(CancelCallback.class))).thenReturn(confirmDialog);
        ArgumentCaptor<ConfirmCallback> confirmCallbackCaptor = ArgumentCaptor.forClass(ConfirmCallback.class);

        CommandImpl command = mock(CommandImpl.class);
        String cmdName = "build";
        when(command.getName()).thenReturn(cmdName);
        when(commandManager.removeCommand(anyString())).thenReturn(voidPromise);

        // when
        presenter.onCommandRemove(command);

        // then
        verify(dialogFactory).createConfirmDialog(anyString(), anyString(), confirmCallbackCaptor.capture(), isNull(CancelCallback.class));
        confirmCallbackCaptor.getValue().accepted();
        verify(confirmDialog).show();
        verify(commandManager).removeCommand(cmdName);
    }

