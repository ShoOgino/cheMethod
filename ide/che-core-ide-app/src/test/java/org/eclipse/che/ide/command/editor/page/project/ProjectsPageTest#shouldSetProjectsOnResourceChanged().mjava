  @Test
  public void shouldSetProjectsOnResourceChanged() throws Exception {
    setUpApplicableProjectToContext();

    ResourceDelta resourceDelta = mock(ResourceDelta.class);
    Resource resource = mock(Resource.class);
    when(resourceDelta.getResource()).thenReturn(resource);
    when(resource.isProject()).thenReturn(true);

    page.onResourceChanged(new ResourceChangedEvent(resourceDelta));

    verifySettingProjects();
  }

