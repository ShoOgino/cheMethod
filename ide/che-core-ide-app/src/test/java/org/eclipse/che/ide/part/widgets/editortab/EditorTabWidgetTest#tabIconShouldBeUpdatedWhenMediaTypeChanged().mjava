    @Test
    public void tabIconShouldBeUpdatedWhenMediaTypeChanged() {
        EditorInput editorInput = mock(EditorInput.class);
        FileType fileType = mock(FileType.class);

        when(editorPartPresenter.getEditorInput()).thenReturn(editorInput);
        when(fileTypeRegistry.getFileTypeByFile(file)).thenReturn(fileType);
        when(fileType.getImage()).thenReturn(icon);
        when(editorInput.getFile()).thenReturn(file);

        tab.update(editorPartPresenter);

        verify(editorPartPresenter, times(2)).getEditorInput();
        verify(fileTypeRegistry).getFileTypeByFile(file);
        verify(tab.iconPanel).setWidget(Matchers.<SVGImage>anyObject());
    }

