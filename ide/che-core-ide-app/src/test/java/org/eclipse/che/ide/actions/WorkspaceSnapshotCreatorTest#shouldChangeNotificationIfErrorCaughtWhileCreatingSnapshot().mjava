    @Test
    public void shouldChangeNotificationIfErrorCaughtWhileCreatingSnapshot() throws OperationException {
        when(workspaceService.createSnapshot(anyString())).thenReturn(createSnapshotPromise);
        snapshotCreator.createSnapshot("workspace123");

        verify(createSnapshotPromise).catchError(errorCaptor.capture());
        errorCaptor.getValue().apply(promiseError);

        verify(notification).setTitle(promiseError.getMessage());
        verify(notification).setStatus(StatusNotification.Status.FAIL);
    }

