    @Test
    public void onEnterClickedWhenAcceptButtonInFocus() throws Exception {
        when(view.getSearchText()).thenReturn(SEARCHED_TEXT);
        when(view.isAcceptButtonInFocus()).thenReturn(true);

        when(view.getPathToSearch()).thenReturn("/search");
        when(appContext.getWorkspaceRoot()).thenReturn(workspaceRoot);
        when(workspaceRoot.getContainer(any(Path.class))).thenReturn(optionalContainerPromise);
        when(searchContainer.search(anyString(), anyString())).thenReturn(searchResultPromise);
        List<SearchResult> result = Collections.emptyList();

        fullTextSearchPresenter.onEnterClicked();

        verify(optionalContainerPromise).then(optionalContainerCaptor.capture());
        optionalContainerCaptor.getValue().apply(Optional.of(searchContainer));

        verify(searchResultPromise).then(searchResultCaptor.capture());
        searchResultCaptor.getValue().apply(result);

        verify(view, never()).showErrorMessage(anyString());
        verify(view).close();
        verify(findResultPresenter).handleResponse(eq(result), eq(SEARCHED_TEXT));
    }

