  @Before
  public void setUp() {
    ServerDto server = mock(ServerDto.class);
    when(server.getUrl()).thenReturn("http://preview.com");

    Map<String, ServerDto> servers = new HashMap<>();
    servers.put(SERVER_PORT + "/tcp", server);

    MachineRuntimeInfoDto machineRuntimeInfo = mock(MachineRuntimeInfoDto.class);
    when(machineRuntimeInfo.getServers()).thenReturn(servers);

    DevMachine devMachine = mock(DevMachine.class);
    when(devMachine.getDisplayName()).thenReturn(MACHINE_NAME);
    when(devMachine.getRuntime()).thenReturn(machineRuntimeInfo);

    when(appContext.getDevMachine()).thenReturn(devMachine);

    previewUrl = new PreviewUrl(PREVIEW_URL, appContext);
  }

