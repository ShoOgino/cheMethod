    private void stackShouldBeCreated() throws ConflictException, ServerException {
        final Response response = given().auth()
                                         .basic(ADMIN_USER_NAME, ADMIN_USER_PASSWORD)
                                         .contentType(APPLICATION_JSON)
                                         .body(stackDto)
                                         .when()
                                         .post(SECURE_PATH + "/stack");

        assertEquals(response.getStatusCode(), 201);

        verify(stackDao).create(any(StackImpl.class));

        final StackDto stackDtoDescriptor = unwrapDto(response, StackDto.class);

        assertEquals(stackDtoDescriptor.getName(), stackDto.getName());
        assertEquals(stackDtoDescriptor.getCreator(), USER_ID);
        assertEquals(stackDtoDescriptor.getDescription(), stackDto.getDescription());
        assertEquals(stackDtoDescriptor.getTags(), stackDto.getTags());

        assertEquals(stackDtoDescriptor.getComponents(), stackDto.getComponents());

        assertEquals(stackDtoDescriptor.getSource(), stackDto.getSource());

        assertEquals(stackDtoDescriptor.getScope(), stackDto.getScope());

        assertEquals(stackDtoDescriptor.getLinks().size(), 2);
        assertEquals(stackDtoDescriptor.getLinks().get(0).getRel(), LINK_REL_REMOVE_STACK);
        assertEquals(stackDtoDescriptor.getLinks().get(1).getRel(), LINK_REL_GET_STACK_BY_ID);
    }

