    @Test
    public void shouldNotBeAbleToGetMarkdownSnippetForFactory2WithoutColor() throws Exception {
        // given
        Factory factory = prepareFactoryWithGivenStorage("git", "http://github.com/codenvy/platform-api.git")
                .withId(CORRECT_FACTORY_ID)
                .withButton(dto.createDto(Button.class)
                               .withType(Button.ButtonType.nologo)
                               .withAttributes(dto.createDto(ButtonAttributes.class)
                                                  .withColor(null)));

        when(factoryStore.getFactory(CORRECT_FACTORY_ID)).thenReturn(factory);
        // when, then
        Response response = given().expect()
                                   .statusCode(400)
                                   .when()
                                   .get(SERVICE_PATH + "/" + CORRECT_FACTORY_ID + "/snippet?type=markdown");

        assertEquals(dto.createDtoFromJson(response.getBody().asInputStream(), ServiceError.class).getMessage(),
                     "Unable to generate markdown snippet with nologo button and empty color");
    }

