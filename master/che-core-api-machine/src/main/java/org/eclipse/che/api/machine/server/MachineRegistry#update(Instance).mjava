    /**
     * Replace not running machine with instance of running machine
     *
     * @param instance
     *         running machine
     * @throws NotFoundException
     *         if not running machine is not found
     * @throws MachineException
     *         if any other error occurs
     */
    public synchronized void update(Instance instance) throws NotFoundException, MachineException {
        if (!instances.containsKey(instance.getId()) && !machines.containsKey(instance.getId())) {
            throw new NotFoundException("Machine " + instance.getId() + " not found");
        } else {
            instances.put(instance.getId(), instance);
            machines.remove(instance.getId());
        }
    }

