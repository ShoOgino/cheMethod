    @Test
    public void shouldBeAbleToProxyWithDifferentContext() throws Exception {
        final String path = "/api/ext/service/" + WORKSPACE_ID + "/java/codeassistant/index";

        final String defaultContextPath = contextHandler.getContextPath();
        try {
            contextHandler.setContextPath("/api/ext/service/" + WORKSPACE_ID + "/java/");

            MockHttpServletRequest mockRequest =
                    new MockHttpServletRequest(PROXY_ENDPOINT + path,
                                               new ByteArrayInputStream(new byte[0]),
                                               0,
                                               "GET",
                                               defaultHeaders);

            MockHttpServletResponse mockResponse = new MockHttpServletResponse();

            proxyServlet.service(mockRequest, mockResponse);

            assertEquals(mockResponse.getStatus(), 200);
            assertEquals(extensionApiRequest.uri, path);
        } finally {
            contextHandler.setContextPath(defaultContextPath);
        }
    }

